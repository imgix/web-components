/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function t(t,n,i,e){for(var r,s=arguments.length,o=s<3?n:null===e?e=Object.getOwnPropertyDescriptor(n,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(n,i,o):r(n,i))||o);return s>3&&o&&Object.defineProperty(n,i,o),o
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}const n=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,i=Symbol(),e=new Map;class r{constructor(t,n){if(this._$cssResult$=!0,n!==i)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){let t=e.get(this.cssText);return n&&void 0===t&&(e.set(this.cssText,t=new CSSStyleSheet),t.replaceSync(this.cssText)),t}toString(){return this.cssText}}const s=n?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let n="";for(const i of t.cssRules)n+=i.cssText;return(t=>new r("string"==typeof t?t:t+"",i))(n)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var o;const a=window.trustedTypes,u=a?a.emptyScript:"",h=window.reactiveElementPolyfillSupport,c={toAttribute(t,n){switch(n){case Boolean:t=t?u:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,n){let i=t;switch(n){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},f=(t,n)=>n!==t&&(n==n||t==t),l={attribute:!0,type:String,converter:c,reflect:!1,hasChanged:f};class v extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(t){var n;null!==(n=this.l)&&void 0!==n||(this.l=[]),this.l.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((n,i)=>{const e=this._$Eh(i,n);void 0!==e&&(this._$Eu.set(e,i),t.push(e))})),t}static createProperty(t,n=l){if(n.state&&(n.attribute=!1),this.finalize(),this.elementProperties.set(t,n),!n.noAccessor&&!this.prototype.hasOwnProperty(t)){const i="symbol"==typeof t?Symbol():"__"+t,e=this.getPropertyDescriptor(t,i,n);void 0!==e&&Object.defineProperty(this.prototype,t,e)}}static getPropertyDescriptor(t,n,i){return{get(){return this[n]},set(e){const r=this[t];this[n]=e,this.requestUpdate(t,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||l}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const t=this.properties,n=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const i of n)this.createProperty(i,t[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const n=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const t of i)n.unshift(s(t))}else void 0!==t&&n.push(s(t));return n}static _$Eh(t,n){const i=n.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}o(){var t;this._$Ep=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(t=this.constructor.l)||void 0===t||t.forEach((t=>t(this)))}addController(t){var n,i;(null!==(n=this._$Eg)&&void 0!==n?n:this._$Eg=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(i=t.hostConnected)||void 0===i||i.call(t))}removeController(t){var n;null===(n=this._$Eg)||void 0===n||n.splice(this._$Eg.indexOf(t)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach(((t,n)=>{this.hasOwnProperty(n)&&(this._$Et.set(n,this[n]),delete this[n])}))}createRenderRoot(){var t;const i=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return((t,i)=>{n?t.adoptedStyleSheets=i.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):i.forEach((n=>{const i=document.createElement("style"),e=window.litNonce;void 0!==e&&i.setAttribute("nonce",e),i.textContent=n.cssText,t.appendChild(i)}))})(i,this.constructor.elementStyles),i}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var n;return null===(n=t.hostConnected)||void 0===n?void 0:n.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var n;return null===(n=t.hostDisconnected)||void 0===n?void 0:n.call(t)}))}attributeChangedCallback(t,n,i){this._$AK(t,i)}_$ES(t,n,i=l){var e,r;const s=this.constructor._$Eh(t,i);if(void 0!==s&&!0===i.reflect){const o=(null!==(r=null===(e=i.converter)||void 0===e?void 0:e.toAttribute)&&void 0!==r?r:c.toAttribute)(n,i.type);this._$Ei=t,null==o?this.removeAttribute(s):this.setAttribute(s,o),this._$Ei=null}}_$AK(t,n){var i,e,r;const s=this.constructor,o=s._$Eu.get(t);if(void 0!==o&&this._$Ei!==o){const t=s.getPropertyOptions(o),a=t.converter,u=null!==(r=null!==(e=null===(i=a)||void 0===i?void 0:i.fromAttribute)&&void 0!==e?e:"function"==typeof a?a:null)&&void 0!==r?r:c.fromAttribute;this._$Ei=o,this[o]=u(n,t.type),this._$Ei=null}}requestUpdate(t,n,i){let e=!0;void 0!==t&&(((i=i||this.constructor.getPropertyOptions(t)).hasChanged||f)(this[t],n)?(this._$AL.has(t)||this._$AL.set(t,n),!0===i.reflect&&this._$Ei!==t&&(void 0===this._$E_&&(this._$E_=new Map),this._$E_.set(t,i))):e=!1),!this.isUpdatePending&&e&&(this._$Ep=this._$EC())}async _$EC(){this.isUpdatePending=!0;try{await this._$Ep}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach(((t,n)=>this[n]=t)),this._$Et=void 0);let n=!1;const i=this._$AL;try{n=this.shouldUpdate(i),n?(this.willUpdate(i),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var n;return null===(n=t.hostUpdate)||void 0===n?void 0:n.call(t)})),this.update(i)):this._$EU()}catch(t){throw n=!1,this._$EU(),t}n&&this._$AE(i)}willUpdate(t){}_$AE(t){var n;null===(n=this._$Eg)||void 0===n||n.forEach((t=>{var n;return null===(n=t.hostUpdated)||void 0===n?void 0:n.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(t){return!0}update(t){void 0!==this._$E_&&(this._$E_.forEach(((t,n)=>this._$ES(n,this[n],t))),this._$E_=void 0),this._$EU()}updated(t){}firstUpdated(t){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var d;v.finalized=!0,v.elementProperties=new Map,v.elementStyles=[],v.shadowRootOptions={mode:"open"},null==h||h({ReactiveElement:v}),(null!==(o=globalThis.reactiveElementVersions)&&void 0!==o?o:globalThis.reactiveElementVersions=[]).push("1.2.2");const p=globalThis.trustedTypes,m=p?p.createPolicy("lit-html",{createHTML:t=>t}):void 0,g=`lit$${(Math.random()+"").slice(9)}$`,b="?"+g,y=`<${b}>`,j=document,w=(t="")=>j.createComment(t),T=t=>null===t||"object"!=typeof t&&"function"!=typeof t,A=Array.isArray,k=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,x=/-->/g,S=/>/g,E=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,I=/'/g,O=/"/g,D=/^(?:script|style|textarea|title)$/i,N=(t=>(n,...i)=>({_$litType$:t,strings:n,values:i}))(1),M=Symbol.for("lit-noChange"),C=Symbol.for("lit-nothing"),R=new WeakMap,U=j.createTreeWalker(j,129,null,!1),P=(t,n)=>{const i=t.length-1,e=[];let r,s=2===n?"<svg>":"",o=k;for(let n=0;n<i;n++){const i=t[n];let a,u,h=-1,c=0;for(;c<i.length&&(o.lastIndex=c,u=o.exec(i),null!==u);)c=o.lastIndex,o===k?"!--"===u[1]?o=x:void 0!==u[1]?o=S:void 0!==u[2]?(D.test(u[2])&&(r=RegExp("</"+u[2],"g")),o=E):void 0!==u[3]&&(o=E):o===E?">"===u[0]?(o=null!=r?r:k,h=-1):void 0===u[1]?h=-2:(h=o.lastIndex-u[2].length,a=u[1],o=void 0===u[3]?E:'"'===u[3]?O:I):o===O||o===I?o=E:o===x||o===S?o=k:(o=E,r=void 0);const f=o===E&&t[n+1].startsWith("/>")?" ":"";s+=o===k?i+y:h>=0?(e.push(a),i.slice(0,h)+"$lit$"+i.slice(h)+g+f):i+g+(-2===h?(e.push(void 0),n):f)}const a=s+(t[i]||"<?>")+(2===n?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==m?m.createHTML(a):a,e]};class L{constructor({strings:t,_$litType$:n},i){let e;this.parts=[];let r=0,s=0;const o=t.length-1,a=this.parts,[u,h]=P(t,n);if(this.el=L.createElement(u,i),U.currentNode=this.el.content,2===n){const t=this.el.content,n=t.firstChild;n.remove(),t.append(...n.childNodes)}for(;null!==(e=U.nextNode())&&a.length<o;){if(1===e.nodeType){if(e.hasAttributes()){const t=[];for(const n of e.getAttributeNames())if(n.endsWith("$lit$")||n.startsWith(g)){const i=h[s++];if(t.push(n),void 0!==i){const t=e.getAttribute(i.toLowerCase()+"$lit$").split(g),n=/([.?@])?(.*)/.exec(i);a.push({type:1,index:r,name:n[2],strings:t,ctor:"."===n[1]?V:"?"===n[1]?X:"@"===n[1]?q:z})}else a.push({type:6,index:r})}for(const n of t)e.removeAttribute(n)}if(D.test(e.tagName)){const t=e.textContent.split(g),n=t.length-1;if(n>0){e.textContent=p?p.emptyScript:"";for(let i=0;i<n;i++)e.append(t[i],w()),U.nextNode(),a.push({type:2,index:++r});e.append(t[n],w())}}}else if(8===e.nodeType)if(e.data===b)a.push({type:2,index:r});else{let t=-1;for(;-1!==(t=e.data.indexOf(g,t+1));)a.push({type:7,index:r}),t+=g.length-1}r++}}static createElement(t,n){const i=j.createElement("template");return i.innerHTML=t,i}}function B(t,n,i=t,e){var r,s,o,a;if(n===M)return n;let u=void 0!==e?null===(r=i._$Cl)||void 0===r?void 0:r[e]:i._$Cu;const h=T(n)?void 0:n._$litDirective$;return(null==u?void 0:u.constructor)!==h&&(null===(s=null==u?void 0:u._$AO)||void 0===s||s.call(u,!1),void 0===h?u=void 0:(u=new h(t),u._$AT(t,i,e)),void 0!==e?(null!==(o=(a=i)._$Cl)&&void 0!==o?o:a._$Cl=[])[e]=u:i._$Cu=u),void 0!==u&&(n=B(t,u._$AS(t,n.values),u,e)),n}class F{constructor(t,n){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var n;const{el:{content:i},parts:e}=this._$AD,r=(null!==(n=null==t?void 0:t.creationScope)&&void 0!==n?n:j).importNode(i,!0);U.currentNode=r;let s=U.nextNode(),o=0,a=0,u=e[0];for(;void 0!==u;){if(o===u.index){let n;2===u.type?n=new _(s,s.nextSibling,this,t):1===u.type?n=new u.ctor(s,u.name,u.strings,this,t):6===u.type&&(n=new G(s,this,t)),this.v.push(n),u=e[++a]}o!==(null==u?void 0:u.index)&&(s=U.nextNode(),o++)}return r}m(t){let n=0;for(const i of this.v)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,n),n+=i.strings.length-2):i._$AI(t[n])),n++}}class _{constructor(t,n,i,e){var r;this.type=2,this._$AH=C,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=i,this.options=e,this._$Cg=null===(r=null==e?void 0:e.isConnected)||void 0===r||r}get _$AU(){var t,n;return null!==(n=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==n?n:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const n=this._$AM;return void 0!==n&&11===t.nodeType&&(t=n.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,n=this){t=B(this,t,n),T(t)?t===C||null==t||""===t?(this._$AH!==C&&this._$AR(),this._$AH=C):t!==this._$AH&&t!==M&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.S(t):(t=>{var n;return A(t)||"function"==typeof(null===(n=t)||void 0===n?void 0:n[Symbol.iterator])})(t)?this.A(t):this.$(t)}M(t,n=this._$AB){return this._$AA.parentNode.insertBefore(t,n)}S(t){this._$AH!==t&&(this._$AR(),this._$AH=this.M(t))}$(t){this._$AH!==C&&T(this._$AH)?this._$AA.nextSibling.data=t:this.S(j.createTextNode(t)),this._$AH=t}T(t){var n;const{values:i,_$litType$:e}=t,r="number"==typeof e?this._$AC(t):(void 0===e.el&&(e.el=L.createElement(e.h,this.options)),e);if((null===(n=this._$AH)||void 0===n?void 0:n._$AD)===r)this._$AH.m(i);else{const t=new F(r,this),n=t.p(this.options);t.m(i),this.S(n),this._$AH=t}}_$AC(t){let n=R.get(t.strings);return void 0===n&&R.set(t.strings,n=new L(t)),n}A(t){A(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let i,e=0;for(const r of t)e===n.length?n.push(i=new _(this.M(w()),this.M(w()),this,this.options)):i=n[e],i._$AI(r),e++;e<n.length&&(this._$AR(i&&i._$AB.nextSibling,e),n.length=e)}_$AR(t=this._$AA.nextSibling,n){var i;for(null===(i=this._$AP)||void 0===i||i.call(this,!1,!0,n);t&&t!==this._$AB;){const n=t.nextSibling;t.remove(),t=n}}setConnected(t){var n;void 0===this._$AM&&(this._$Cg=t,null===(n=this._$AP)||void 0===n||n.call(this,t))}}class z{constructor(t,n,i,e,r){this.type=1,this._$AH=C,this._$AN=void 0,this.element=t,this.name=n,this._$AM=e,this.options=r,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=C}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,n=this,i,e){const r=this.strings;let s=!1;if(void 0===r)t=B(this,t,n,0),s=!T(t)||t!==this._$AH&&t!==M,s&&(this._$AH=t);else{const e=t;let o,a;for(t=r[0],o=0;o<r.length-1;o++)a=B(this,e[i+o],n,o),a===M&&(a=this._$AH[o]),s||(s=!T(a)||a!==this._$AH[o]),a===C?t=C:t!==C&&(t+=(null!=a?a:"")+r[o+1]),this._$AH[o]=a}s&&!e&&this.k(t)}k(t){t===C?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class V extends z{constructor(){super(...arguments),this.type=3}k(t){this.element[this.name]=t===C?void 0:t}}const H=p?p.emptyScript:"";class X extends z{constructor(){super(...arguments),this.type=4}k(t){t&&t!==C?this.element.setAttribute(this.name,H):this.element.removeAttribute(this.name)}}class q extends z{constructor(t,n,i,e,r){super(t,n,i,e,r),this.type=5}_$AI(t,n=this){var i;if((t=null!==(i=B(this,t,n,0))&&void 0!==i?i:C)===M)return;const e=this._$AH,r=t===C&&e!==C||t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive,s=t!==C&&(e===C||r);r&&this.element.removeEventListener(this.name,this,e),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var n,i;"function"==typeof this._$AH?this._$AH.call(null!==(i=null===(n=this.options)||void 0===n?void 0:n.host)&&void 0!==i?i:this.element,t):this._$AH.handleEvent(t)}}class G{constructor(t,n,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=n,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){B(this,t)}}const W=window.litHtmlPolyfillSupport;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var Y,J;null==W||W(L,_),(null!==(d=globalThis.litHtmlVersions)&&void 0!==d?d:globalThis.litHtmlVersions=[]).push("2.1.3");class Q extends v{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var t,n;const i=super.createRenderRoot();return null!==(t=(n=this.renderOptions).renderBefore)&&void 0!==t||(n.renderBefore=i.firstChild),i}update(t){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Dt=((t,n,i)=>{var e,r;const s=null!==(e=null==i?void 0:i.renderBefore)&&void 0!==e?e:n;let o=s._$litPart$;if(void 0===o){const t=null!==(r=null==i?void 0:i.renderBefore)&&void 0!==r?r:null;s._$litPart$=o=new _(n.insertBefore(w(),t),t,void 0,null!=i?i:{})}return o._$AI(t),o})(n,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!1)}render(){return M}}Q.finalized=!0,Q._$litElement$=!0,null===(Y=globalThis.litElementHydrateSupport)||void 0===Y||Y.call(globalThis,{LitElement:Q});const $=globalThis.litElementPolyfillSupport;null==$||$({LitElement:Q}),(null!==(J=globalThis.litElementVersions)&&void 0!==J?J:globalThis.litElementVersions=[]).push("3.1.2");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const K=(t,n)=>"method"===n.kind&&n.descriptor&&!("value"in n.descriptor)?{...n,finisher(i){i.createProperty(n.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:n.key,initializer(){"function"==typeof n.initializer&&(this[n.key]=n.initializer.call(this))},finisher(i){i.createProperty(n.key,t)}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Z(t){return(n,i)=>void 0!==i?((t,n,i)=>{n.constructor.createProperty(i,t)})(t,n,i):K(t,n)
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}var tt;null===(tt=window.HTMLSlotElement)||void 0===tt||tt.prototype.assignedElements;
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const nt=1,it=2,et=t=>(...n)=>({_$litDirective$:t,values:n});
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class rt{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,n,i){this._$Ct=t,this._$AM=n,this._$Ci=i}_$AS(t,n){return this.update(t,n)}update(t,n){return this.render(...n)}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const st=(t,n)=>{var i,e;const r=t._$AN;if(void 0===r)return!1;for(const t of r)null===(e=(i=t)._$AO)||void 0===e||e.call(i,n,!1),st(t,n);return!0},ot=t=>{let n,i;do{if(void 0===(n=t._$AM))break;i=n._$AN,i.delete(t),t=n}while(0===(null==i?void 0:i.size))},at=t=>{for(let n;n=t._$AM;t=n){let i=n._$AN;if(void 0===i)n._$AN=i=new Set;else if(i.has(t))break;i.add(t),ct(n)}};function ut(t){void 0!==this._$AN?(ot(this),this._$AM=t,at(this)):this._$AM=t}function ht(t,n=!1,i=0){const e=this._$AH,r=this._$AN;if(void 0!==r&&0!==r.size)if(n)if(Array.isArray(e))for(let t=i;t<e.length;t++)st(e[t],!1),ot(e[t]);else null!=e&&(st(e,!1),ot(e));else st(this,t)}const ct=t=>{var n,i,e,r;t.type==it&&(null!==(n=(e=t)._$AP)&&void 0!==n||(e._$AP=ht),null!==(i=(r=t)._$AQ)&&void 0!==i||(r._$AQ=ut))};class ft extends rt{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,n,i){super._$AT(t,n,i),at(this),this.isConnected=t._$AU}_$AO(t,n=!0){var i,e;t!==this.isConnected&&(this.isConnected=t,t?null===(i=this.reconnected)||void 0===i||i.call(this):null===(e=this.disconnected)||void 0===e||e.call(this)),n&&(st(this,t),ot(this))}setValue(t){if((t=>void 0===t.strings)(this._$Ct))this._$Ct._$AI(t,this);else{const n=[...this._$Ct._$AH];n[this._$Ci]=t,this._$Ct._$AI(n,this,0)}}disconnected(){}reconnected(){}}
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class lt{}const vt=new WeakMap,dt=et(class extends ft{render(t){return C}update(t,[n]){var i;const e=n!==this.U;return e&&void 0!==this.U&&this.ot(void 0),(e||this.rt!==this.lt)&&(this.U=n,this.ht=null===(i=t.options)||void 0===i?void 0:i.host,this.ot(this.lt=t.element)),C}ot(t){"function"==typeof this.U?(void 0!==vt.get(this.U)&&this.U.call(this.ht,void 0),vt.set(this.U,t),void 0!==t&&this.U.call(this.ht,t)):this.U.value=t}get rt(){var t;return"function"==typeof this.U?vt.get(this.U):null===(t=this.U)||void 0===t?void 0:t.value}disconnected(){this.rt===this.lt&&this.ot(void 0)}reconnected(){this.ot(this.lt)}}),pt=et(class extends rt{constructor(t){var n;if(super(t),t.type!==nt||"style"!==t.name||(null===(n=t.strings)||void 0===n?void 0:n.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((n,i)=>{const e=t[i];return null==e?n:n+`${i=i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${e};`}),"")}update(t,[n]){const{style:i}=t.element;if(void 0===this.ct){this.ct=new Set;for(const t in n)this.ct.add(t);return this.render(n)}this.ct.forEach((t=>{null==n[t]&&(this.ct.delete(t),t.includes("-")?i.removeProperty(t):i[t]="")}));for(const t in n){const e=n[t];null!=e&&(this.ct.add(t),t.includes("-")?i.setProperty(t,e):i[t]=e)}return M}});
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var mt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function gt(t){return t&&t.g&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bt="undefined"!=typeof window?window:void 0!==mt?mt:"undefined"!=typeof self?self:{},yt=Array.prototype.slice,jt=function(t,n){"length"in t||(t=[t]);t=yt.call(t);for(;t.length;){var i=t.shift(),e=n(i);if(e)return e;i.childNodes&&i.childNodes.length&&(t=yt.call(i.childNodes).concat(t))}};var wt=Tt;function Tt(t,n){if(!(this instanceof Tt))return new Tt(t,n);this.data=t,this.nodeValue=t,this.length=t.length,this.ownerDocument=n||null}Tt.prototype.nodeType=8,Tt.prototype.nodeName="#comment",Tt.prototype.toString=function(){return"[object Comment]"};var At=kt;function kt(t,n){if(!(this instanceof kt))return new kt(t);this.data=t||"",this.length=this.data.length,this.ownerDocument=n||null}kt.prototype.type="DOMTextNode",kt.prototype.nodeType=3,kt.prototype.nodeName="#text",kt.prototype.toString=function(){return this.data},kt.prototype.replaceData=function(t,n,i){var e=this.data,r=e.substring(0,t),s=e.substring(t+n,e.length);this.data=r+i+s,this.length=this.data.length};var xt=function(t){var n=this,i=t.type;t.target||(t.target=n);n.listeners||(n.listeners={});var e=n.listeners[i];if(e)return e.forEach((function(i){t.currentTarget=n,"function"==typeof i?i(t):i.handleEvent(t)}));n.parentNode&&n.parentNode.dispatchEvent(t)};var St=function(t,n){var i=this;i.listeners||(i.listeners={});i.listeners[t]||(i.listeners[t]=[]);-1===i.listeners[t].indexOf(n)&&i.listeners[t].push(n)};var Et=function(t,n){var i=this;if(!i.listeners)return;if(!i.listeners[t])return;var e=i.listeners[t],r=e.indexOf(n);-1!==r&&e.splice(r,1)};var It=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function Ot(t){switch(t.nodeType){case 3:return Mt(t.data);case 8:return"\x3c!--"+t.data+"--\x3e";default:return function(t){var n=[],i=t.tagName;"http://www.w3.org/1999/xhtml"===t.namespaceURI&&(i=i.toLowerCase());n.push("<"+i+function(t){var n=[];for(var i in t)Dt(t,i)&&n.push({name:i,value:t[i]});for(var e in t._attributes)for(var r in t._attributes[e]){var s=t._attributes[e][r],o=(s.prefix?s.prefix+":":"")+r;n.push({name:o,value:s.value})}t.className&&n.push({name:"class",value:t.className});return n.length?Nt(n):""}(t)+function(t){var n=t.dataset,i=[];for(var e in n)i.push({name:"data-"+e,value:n[e]});return i.length?Nt(i):""}(t)),It.indexOf(i)>-1?n.push(" />"):(n.push(">"),t.childNodes.length?n.push.apply(n,t.childNodes.map(Ot)):t.textContent||t.innerText?n.push(Mt(t.textContent||t.innerText)):t.innerHTML&&n.push(t.innerHTML),n.push("</"+i+">"));return n.join("")}(t)}}function Dt(t,n){var i=typeof t[n];return"style"===n&&Object.keys(t.style).length>0||t.hasOwnProperty(n)&&("string"===i||"boolean"===i||"number"===i)&&"nodeName"!==n&&"className"!==n&&"tagName"!==n&&"textContent"!==n&&"innerText"!==n&&"namespaceURI"!==n&&"innerHTML"!==n}function Nt(t){var n=[];return t.forEach((function(t){var i=t.name,e=t.value;"style"===i&&(e=function(t){if("string"==typeof t)return t;var n="";return Object.keys(t).forEach((function(i){var e=t[i];i=i.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()})),n+=i+":"+e+";"})),n}(e)),n.push(i+'="'+(Mt(e).replace(/"/g,"&quot;")+'"'))})),n.length?" "+n.join(" "):""}function Mt(t){var n="";return"string"==typeof t?n=t:t&&(n=t.toString()),n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Ct=jt,Rt=xt,Ut=St,Pt=Et,Lt=Ot,Bt="http://www.w3.org/1999/xhtml",Ft=_t;function _t(t,n,i){if(!(this instanceof _t))return new _t(t);var e=void 0===i?Bt:i||null;this.tagName=e===Bt?String(t).toUpperCase():t,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=n||null,this.namespaceURI=e,this._attributes={},"INPUT"===this.tagName&&(this.type="text")}_t.prototype.type="DOMElement",_t.prototype.nodeType=1,_t.prototype.appendChild=function(t){return t.parentNode&&t.parentNode.removeChild(t),this.childNodes.push(t),t.parentNode=this,t},_t.prototype.replaceChild=function(t,n){t.parentNode&&t.parentNode.removeChild(t);var i=this.childNodes.indexOf(n);return n.parentNode=null,this.childNodes[i]=t,t.parentNode=this,n},_t.prototype.removeChild=function(t){var n=this.childNodes.indexOf(t);return this.childNodes.splice(n,1),t.parentNode=null,t},_t.prototype.insertBefore=function(t,n){t.parentNode&&t.parentNode.removeChild(t);var i=null==n?-1:this.childNodes.indexOf(n);return i>-1?this.childNodes.splice(i,0,t):this.childNodes.push(t),t.parentNode=this,t},_t.prototype.setAttributeNS=function(t,n,i){var e=null,r=n,s=n.indexOf(":");(s>-1&&(e=n.substr(0,s),r=n.substr(s+1)),"INPUT"===this.tagName&&"type"===n)?this.type=i:(this._attributes[t]||(this._attributes[t]={}))[r]={value:i,prefix:e}},_t.prototype.getAttributeNS=function(t,n){var i=this._attributes[t],e=i&&i[n]&&i[n].value;return"INPUT"===this.tagName&&"type"===n?this.type:"string"!=typeof e?null:e},_t.prototype.removeAttributeNS=function(t,n){var i=this._attributes[t];i&&delete i[n]},_t.prototype.hasAttributeNS=function(t,n){var i=this._attributes[t];return!!i&&n in i},_t.prototype.setAttribute=function(t,n){return this.setAttributeNS(null,t,n)},_t.prototype.getAttribute=function(t){return this.getAttributeNS(null,t)},_t.prototype.removeAttribute=function(t){return this.removeAttributeNS(null,t)},_t.prototype.hasAttribute=function(t){return this.hasAttributeNS(null,t)},_t.prototype.removeEventListener=Pt,_t.prototype.addEventListener=Ut,_t.prototype.dispatchEvent=Rt,_t.prototype.focus=function(){},_t.prototype.toString=function(){return Lt(this)},_t.prototype.getElementsByClassName=function(t){var n=t.split(" "),i=[];return Ct(this,(function(t){if(1===t.nodeType){var e=(t.className||"").split(" ");n.every((function(t){return-1!==e.indexOf(t)}))&&i.push(t)}})),i},_t.prototype.getElementsByTagName=function(t){t=t.toLowerCase();var n=[];return Ct(this.childNodes,(function(i){1!==i.nodeType||"*"!==t&&i.tagName.toLowerCase()!==t||n.push(i)})),n},_t.prototype.contains=function(t){return Ct(this,(function(n){return t===n}))||!1};var zt=Ft,Vt=Ht;function Ht(t){if(!(this instanceof Ht))return new Ht;this.childNodes=[],this.parentNode=null,this.ownerDocument=t||null}Ht.prototype.type="DocumentFragment",Ht.prototype.nodeType=11,Ht.prototype.nodeName="#document-fragment",Ht.prototype.appendChild=zt.prototype.appendChild,Ht.prototype.replaceChild=zt.prototype.replaceChild,Ht.prototype.removeChild=zt.prototype.removeChild,Ht.prototype.toString=function(){return this.childNodes.map((function(t){return String(t)})).join("")};var Xt=qt;function qt(t){}qt.prototype.initEvent=function(t,n,i){this.type=t,this.bubbles=n,this.cancelable=i},qt.prototype.preventDefault=function(){};var Gt=jt,Wt=wt,Yt=At,Jt=Ft,Qt=Vt,$t=Xt,Kt=xt,Zt=St,tn=Et,nn=en;function en(){if(!(this instanceof en))return new en;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}var rn=en.prototype;rn.createTextNode=function(t){return new Yt(t,this)},rn.createElementNS=function(t,n){var i=null===t?null:String(t);return new Jt(n,this,i)},rn.createElement=function(t){return new Jt(t,this)},rn.createDocumentFragment=function(){return new Qt(this)},rn.createEvent=function(t){return new $t(t)},rn.createComment=function(t){return new Wt(t,this)},rn.getElementById=function(t){return t=String(t),Gt(this.childNodes,(function(n){if(String(n.id)===t)return n}))||null},rn.getElementsByClassName=Jt.prototype.getElementsByClassName,rn.getElementsByTagName=Jt.prototype.getElementsByTagName,rn.contains=Jt.prototype.contains,rn.removeEventListener=tn,rn.addEventListener=Zt,rn.dispatchEvent=Kt;var sn,on=new nn,an=void 0!==mt?mt:"undefined"!=typeof window?window:{},un=on;"undefined"!=typeof document?sn=document:(sn=an["j"])||(sn=an["j"]=un);var hn=sn,cn={exports:{}};!function(t){function n(){return t.exports=n=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])}return t},t.exports.default=t.exports,t.exports.g=!0,n.apply(this,arguments)}t.exports=n,t.exports.default=t.exports,t.exports.g=!0}(cn);var fn=gt(cn.exports),ln={exports:{}};!function(t,n){function i(t){if(t&&"object"==typeof t){var n=t.which||t.keyCode||t.charCode;n&&(t=n)}if("number"==typeof t)return o[t];var i,s=String(t);return(i=e[s.toLowerCase()])?i:(i=r[s.toLowerCase()])||(1===s.length?s.charCodeAt(0):void 0)}i.isEventKey=function(t,n){if(t&&"object"==typeof t){var i=t.which||t.keyCode||t.charCode;if(null==i)return!1;if("string"==typeof n){var s;if(s=e[n.toLowerCase()])return s===i;if(s=r[n.toLowerCase()])return s===i}else if("number"==typeof n)return n===i;return!1}};var e=(n=t.exports=i).code=n.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=n.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};
/*!
 * Programatically add the following
 */
for(s=97;s<123;s++)e[String.fromCharCode(s)]=s-32;for(var s=48;s<58;s++)e[s-48]=s;for(s=1;s<13;s++)e["f"+s]=s+111;for(s=0;s<10;s++)e["numpad "+s]=s+96;var o=n.names=n.title={};for(s in e)o[e[s]]=s;for(var a in r)e[a]=r[a]}(ln,ln.exports);var vn,dn=ln.exports,pn={exports:{}};(vn=pn).exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},vn.exports.default=vn.exports,vn.exports.g=!0;var mn=gt(pn.exports),gn={exports:{}},bn={exports:{}};!function(t){function n(i,e){return t.exports=n=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},t.exports.default=t.exports,t.exports.g=!0,n(i,e)}t.exports=n,t.exports.default=t.exports,t.exports.g=!0}(bn),function(t){var n=bn.exports;t.exports=function(t,i){t.prototype=Object.create(i.prototype),t.prototype.constructor=t,n(t,i)},t.exports.default=t.exports,t.exports.g=!0}(gn);var yn=gt(gn.exports),jn=function(t,n){var i,e=null;try{i=JSON.parse(t,n)}catch(t){e=t}return[e,i]};var wn={exports:{}},Tn=function(t){if(!t)return!1;var n=An.call(t);return"[object Function]"===n||"function"==typeof t&&"[object RegExp]"!==n||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)},An=Object.prototype.toString;var kn=bt;var xn=function(t,n){return void 0===n&&(n=!1),function(i,e,r){if(i)t(i);else if(e.statusCode>=400&&e.statusCode<=599){var s=r;if(n)if(kn.TextDecoder){var o=function(t){void 0===t&&(t="");return t.toLowerCase().split(";").reduce((function(t,n){var i=n.split("="),e=i[0],r=i[1];return"charset"===e.trim()?r.trim():t}),"utf-8")}(e.headers&&e.headers["content-type"]);try{s=new TextDecoder(o).decode(r)}catch(t){}}else s=String.fromCharCode.apply(null,new Uint8Array(r));t({cause:s})}else t(null,r)}},Sn=bt,En=cn.exports,In=Tn;Dn.httpHandler=xn;function On(t,n,i){var e=t;return In(n)?(i=n,"string"==typeof t&&(e={uri:t})):e=En({},n,{uri:t}),e.callback=i,e}function Dn(t,n,i){return Nn(n=On(t,n,i))}function Nn(t){if(void 0===t.callback)throw new Error("callback argument missing");var n=!1,i=function(i,e,r){n||(n=!0,t.callback(i,e,r))};function e(){var t=void 0;if(t=u.response?u.response:u.responseText||function(t){try{if("document"===t.responseType)return t.responseXML;var n=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;if(""===t.responseType&&!n)return t.responseXML}catch(t){}return null}(u),p)try{t=JSON.parse(t)}catch(t){}return t}function r(t){return clearTimeout(h),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,i(t,m)}function s(){if(!a){var n;clearTimeout(h),n=t.useXDR&&void 0===u.status?200:1223===u.status?204:u.status;var r=m,s=null;return 0!==n?(r={body:e(),statusCode:n,method:f,headers:{},url:c,rawRequest:u},u.getAllResponseHeaders&&(r.headers=function(t){var n={};return t?(t.trim().split("\n").forEach((function(t){var i=t.indexOf(":"),e=t.slice(0,i).trim().toLowerCase(),r=t.slice(i+1).trim();void 0===n[e]?n[e]=r:Array.isArray(n[e])?n[e].push(r):n[e]=[n[e],r]})),n):n}(u.getAllResponseHeaders()))):s=new Error("Internal XMLHttpRequest Error"),i(s,r,r.body)}}var o,a,u=t.xhr||null;u||(u=t.cors||t.useXDR?new Dn.XDomainRequest:new Dn.XMLHttpRequest);var h,c=u.url=t.uri||t.url,f=u.method=t.method||"GET",l=t.body||t.data,v=u.headers=t.headers||{},d=!!t.sync,p=!1,m={body:void 0,headers:{},statusCode:0,method:f,url:c,rawRequest:u};if("json"in t&&!1!==t.json&&(p=!0,v.accept||v.Accept||(v.Accept="application/json"),"GET"!==f&&"HEAD"!==f&&(v["content-type"]||v["Content-Type"]||(v["Content-Type"]="application/json"),l=JSON.stringify(!0===t.json?l:t.json))),u.onreadystatechange=function(){4===u.readyState&&setTimeout(s,0)},u.onload=s,u.onerror=r,u.onprogress=function(){},u.onabort=function(){a=!0},u.ontimeout=r,u.open(f,c,!d,t.username,t.password),d||(u.withCredentials=!!t.withCredentials),!d&&t.timeout>0&&(h=setTimeout((function(){if(!a){a=!0,u.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",r(t)}}),t.timeout)),u.setRequestHeader)for(o in v)v.hasOwnProperty(o)&&u.setRequestHeader(o,v[o]);else if(t.headers&&!function(t){for(var n in t)if(t.hasOwnProperty(n))return!1;return!0}(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(u.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(u),u.send(l||null),u}wn.exports=Dn,wn.exports.default=Dn,Dn.XMLHttpRequest=Sn.XMLHttpRequest||function(){},Dn.XDomainRequest="withCredentials"in new Dn.XMLHttpRequest?Dn.XMLHttpRequest:Sn.XDomainRequest,function(t,n){for(var i=0;i<t.length;i++)n(t[i])}(["get","put","post","patch","head","delete"],(function(t){Dn["delete"===t?"del":t]=function(n,i,e){return(i=On(n,i,e)).method=t.toUpperCase(),Nn(i)}}));var Mn=wn.exports,Cn={exports:{}},Rn=hn,Un=Object.create||function(){function t(){}return function(n){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=n,new t}}();function Pn(t,n){this.name="ParsingError",this.code=t.code,this.message=n||t.message}function Ln(t){function n(t,n,i,e){return 3600*(0|t)+60*(0|n)+(0|i)+(0|e)/1e3}var i=t.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return i?i[3]?n(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?n(i[1],i[2],0,i[4]):n(0,i[1],i[2],i[4]):null}function Bn(){this.values=Un(null)}function Fn(t,n,i,e){var r=e?t.split(e):[t];for(var s in r)if("string"==typeof r[s]){var o=r[s].split(i);if(2===o.length)n(o[0],o[1])}}function _n(t,n,i){var e=t;function r(){var n=Ln(t);if(null===n)throw new Pn(Pn.Errors.BadTimeStamp,"Malformed timestamp: "+e);return t=t.replace(/^[^\sa-zA-Z-]+/,""),n}function s(){t=t.replace(/^\s+/,"")}if(s(),n.startTime=r(),s(),"--\x3e"!==t.substr(0,3))throw new Pn(Pn.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+e);t=t.substr(3),s(),n.endTime=r(),s(),function(t,n){var e=new Bn;Fn(t,(function(t,n){switch(t){case"region":for(var r=i.length-1;r>=0;r--)if(i[r].id===n){e.set(t,i[r].region);break}break;case"vertical":e.alt(t,n,["rl","lr"]);break;case"line":var s=n.split(","),o=s[0];e.integer(t,o),e.percent(t,o)&&e.set("snapToLines",!1),e.alt(t,o,["auto"]),2===s.length&&e.alt("lineAlign",s[1],["start","center","end"]);break;case"position":s=n.split(","),e.percent(t,s[0]),2===s.length&&e.alt("positionAlign",s[1],["start","center","end"]);break;case"size":e.percent(t,n);break;case"align":e.alt(t,n,["start","center","end","left","right"])}}),/:/,/\s/),n.region=e.get("region",null),n.vertical=e.get("vertical","");try{n.line=e.get("line","auto")}catch(t){}n.lineAlign=e.get("lineAlign","start"),n.snapToLines=e.get("snapToLines",!0),n.size=e.get("size",100);try{n.align=e.get("align","center")}catch(t){n.align=e.get("align","middle")}try{n.position=e.get("position","auto")}catch(t){n.position=e.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},n.align)}n.positionAlign=e.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},n.align)}(t,n)}Pn.prototype=Un(Error.prototype),Pn.prototype.constructor=Pn,Pn.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Bn.prototype={set:function(t,n){this.get(t)||""===n||(this.values[t]=n)},get:function(t,n,i){return i?this.has(t)?this.values[t]:n[i]:this.has(t)?this.values[t]:n},has:function(t){return t in this.values},alt:function(t,n,i){for(var e=0;e<i.length;++e)if(n===i[e]){this.set(t,n);break}},integer:function(t,n){/^-?\d+$/.test(n)&&this.set(t,parseInt(n,10))},percent:function(t,n){return!!(n.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(n=parseFloat(n))>=0&&n<=100)&&(this.set(t,n),!0)}};var zn=Rn.createElement&&Rn.createElement("textarea"),Vn={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Hn={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Xn={v:"title",lang:"lang"},qn={rt:"ruby"};function Gn(t,n){function i(){if(!n)return null;var t,i=n.match(/^([^<]*)(<[^>]*>?)?/);return t=i[1]?i[1]:i[2],n=n.substr(t.length),t}function e(t){return zn.innerHTML=t,t=zn.textContent,zn.textContent="",t}function r(t,n){return!qn[n.localName]||qn[n.localName]===t.localName}function s(n,i){var e=Vn[n];if(!e)return null;var r=t.document.createElement(e),s=Xn[n];return s&&i&&(r[s]=i.trim()),r}for(var o,a=t.document.createElement("div"),u=a,h=[];null!==(o=i());)if("<"!==o[0])u.appendChild(t.document.createTextNode(e(o)));else{if("/"===o[1]){h.length&&h[h.length-1]===o.substr(2).replace(">","")&&(h.pop(),u=u.parentNode);continue}var c,f=Ln(o.substr(1,o.length-2));if(f){c=t.document.createProcessingInstruction("timestamp",f),u.appendChild(c);continue}var l=o.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!l)continue;if(!(c=s(l[1],l[3])))continue;if(!r(u,c))continue;if(l[2]){var v=l[2].split(".");v.forEach((function(t){var n=/^bg_/.test(t),i=n?t.slice(3):t;if(Hn.hasOwnProperty(i)){var e=n?"background-color":"color",r=Hn[i];c.style[e]=r}})),c.className=v.join(" ")}h.push(l[1]),u.appendChild(c),u=c}return a}var Wn=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Yn(t){for(var n=0;n<Wn.length;n++){var i=Wn[n];if(t>=i[0]&&t<=i[1])return!0}return!1}function Jn(t){var n=[],i="";if(!t||!t.childNodes)return"ltr";function e(t,n){for(var i=n.childNodes.length-1;i>=0;i--)t.push(n.childNodes[i])}function r(t){if(!t||!t.length)return null;var n=t.pop(),i=n.textContent||n.innerText;if(i){var s=i.match(/^.*(\n|\r)/);return s?(t.length=0,s[0]):i}return"ruby"===n.tagName?r(t):n.childNodes?(e(t,n),r(t)):void 0}for(e(n,t);i=r(n);)for(var s=0;s<i.length;s++)if(Yn(i.charCodeAt(s)))return"rtl";return"ltr"}function Qn(){}function $n(t,n,i){Qn.call(this),this.cue=n,this.cueDiv=Gn(t,n.text);var e={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===n.vertical?"horizontal-tb":"lr"===n.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(e,this.cueDiv),this.div=t.document.createElement("div"),e={direction:Jn(this.cueDiv),writingMode:""===n.vertical?"horizontal-tb":"lr"===n.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===n.align?"center":n.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(e),this.div.appendChild(this.cueDiv);var r=0;switch(n.positionAlign){case"start":r=n.position;break;case"center":r=n.position-n.size/2;break;case"end":r=n.position-n.size}""===n.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(n.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(n.size,"%")}),this.move=function(t){this.applyStyles({top:this.formatStyle(t.top,"px"),bottom:this.formatStyle(t.bottom,"px"),left:this.formatStyle(t.left,"px"),right:this.formatStyle(t.right,"px"),height:this.formatStyle(t.height,"px"),width:this.formatStyle(t.width,"px")})}}function Kn(t){var n,i,e,r;if(t.div){i=t.div.offsetHeight,e=t.div.offsetWidth,r=t.div.offsetTop;var s=(s=t.div.childNodes)&&(s=s[0])&&s.getClientRects&&s.getClientRects();t=t.div.getBoundingClientRect(),n=s?Math.max(s[0]&&s[0].height||0,t.height/s.length):0}this.left=t.left,this.right=t.right,this.top=t.top||r,this.height=t.height||i,this.bottom=t.bottom||r+(t.height||i),this.width=t.width||e,this.lineHeight=void 0!==n?n:t.lineHeight}function Zn(t,n,i,e){var r=new Kn(n),s=n.cue,o=function(t){if("number"==typeof t.line&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var n=t.track,i=n.textTrackList,e=0,r=0;r<i.length&&i[r]!==n;r++)"showing"===i[r].mode&&e++;return-1*++e}(s),a=[];if(s.snapToLines){var u;switch(s.vertical){case"":a=["+y","-y"],u="height";break;case"rl":a=["+x","-x"],u="width";break;case"lr":a=["-x","+x"],u="width"}var h=r.lineHeight,c=h*Math.round(o),f=i[u]+h,l=a[0];Math.abs(c)>f&&(c=c<0?-1:1,c*=Math.ceil(f/h)*h),o<0&&(c+=""===s.vertical?i.height:i.width,a=a.reverse()),r.move(l,c)}else{var v=r.lineHeight/i.height*100;switch(s.lineAlign){case"center":o-=v/2;break;case"end":o-=v}switch(s.vertical){case"":n.applyStyles({top:n.formatStyle(o,"%")});break;case"rl":n.applyStyles({left:n.formatStyle(o,"%")});break;case"lr":n.applyStyles({right:n.formatStyle(o,"%")})}a=["+y","-x","+x","-y"],r=new Kn(n)}var d=function(t,n){for(var r,s=new Kn(t),o=1,a=0;a<n.length;a++){for(;t.overlapsOppositeAxis(i,n[a])||t.within(i)&&t.overlapsAny(e);)t.move(n[a]);if(t.within(i))return t;var u=t.intersectPercentage(i);o>u&&(r=new Kn(t),o=u),t=new Kn(s)}return r||s}(r,a);n.move(d.toCSSCompatValues(i))}function ti(){}Qn.prototype.applyStyles=function(t,n){for(var i in n=n||this.div,t)t.hasOwnProperty(i)&&(n.style[i]=t[i])},Qn.prototype.formatStyle=function(t,n){return 0===t?0:t+n},$n.prototype=Un(Qn.prototype),$n.prototype.constructor=$n,Kn.prototype.move=function(t,n){switch(n=void 0!==n?n:this.lineHeight,t){case"+x":this.left+=n,this.right+=n;break;case"-x":this.left-=n,this.right-=n;break;case"+y":this.top+=n,this.bottom+=n;break;case"-y":this.top-=n,this.bottom-=n}},Kn.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top},Kn.prototype.overlapsAny=function(t){for(var n=0;n<t.length;n++)if(this.overlaps(t[n]))return!0;return!1},Kn.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right},Kn.prototype.overlapsOppositeAxis=function(t,n){switch(n){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}},Kn.prototype.intersectPercentage=function(t){return Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left))*Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top))/(this.height*this.width)},Kn.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}},Kn.getSimpleBoxPosition=function(t){var n=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,i=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,e=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;return{left:(t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t).left,right:t.right,top:t.top||e,height:t.height||n,bottom:t.bottom||e+(t.height||n),width:t.width||i}},ti.StringDecoder=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}},ti.convertCueToDOMTree=function(t,n){return t&&n?Gn(t,n):null};ti.processCues=function(t,n,i){if(!t||!n||!i)return null;for(;i.firstChild;)i.removeChild(i.firstChild);var e=t.document.createElement("div");if(e.style.position="absolute",e.style.left="0",e.style.right="0",e.style.top="0",e.style.bottom="0",e.style.margin="1.5%",i.appendChild(e),function(t){for(var n=0;n<t.length;n++)if(t[n].hasBeenReset||!t[n].displayState)return!0;return!1}(n)){var r=[],s=Kn.getSimpleBoxPosition(e),o={font:Math.round(.05*s.height*100)/100+"px sans-serif"};!function(){for(var i,a,u=0;u<n.length;u++)a=n[u],i=new $n(t,a,o),e.appendChild(i.div),Zn(0,i,s,r),a.displayState=i.div,r.push(Kn.getSimpleBoxPosition(i))}()}else for(var a=0;a<n.length;a++)e.appendChild(n[a].displayState)},ti.Parser=function(t,n,i){i||(i=n,n={}),n||(n={}),this.window=t,this.vttjs=n,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]},ti.Parser.prototype={reportOrThrowError:function(t){if(!(t instanceof Pn))throw t;this.onparsingerror&&this.onparsingerror(t)},parse:function(t){var n=this;function i(){for(var t=n.buffer,i=0;i<t.length&&"\r"!==t[i]&&"\n"!==t[i];)++i;var e=t.substr(0,i);return"\r"===t[i]&&++i,"\n"===t[i]&&++i,n.buffer=t.substr(i),e}function e(t){t.match(/X-TIMESTAMP-MAP/)?Fn(t,(function(t,i){switch(t){case"X-TIMESTAMP-MAP":!function(t){var i=new Bn;Fn(t,(function(t,n){switch(t){case"MPEGT":i.integer(t+"S",n);break;case"LOCA":i.set(t+"L",Ln(n))}}),/[^\d]:/,/,/),n.ontimestampmap&&n.ontimestampmap({MPEGTS:i.get("MPEGTS"),LOCAL:i.get("LOCAL")})}(i)}}),/=/):Fn(t,(function(t,i){switch(t){case"Region":!function(t){var i=new Bn;if(Fn(t,(function(t,n){switch(t){case"id":i.set(t,n);break;case"width":i.percent(t,n);break;case"lines":i.integer(t,n);break;case"regionanchor":case"viewportanchor":var e=n.split(",");if(2!==e.length)break;var r=new Bn;if(r.percent("x",e[0]),r.percent("y",e[1]),!r.has("x")||!r.has("y"))break;i.set(t+"X",r.get("x")),i.set(t+"Y",r.get("y"));break;case"scroll":i.alt(t,n,["up"])}}),/=/,/\s/),i.has("id")){var e=new(n.vttjs.VTTRegion||n.window.VTTRegion);e.width=i.get("width",100),e.lines=i.get("lines",3),e.regionAnchorX=i.get("regionanchorX",0),e.regionAnchorY=i.get("regionanchorY",100),e.viewportAnchorX=i.get("viewportanchorX",0),e.viewportAnchorY=i.get("viewportanchorY",100),e.scroll=i.get("scroll",""),n.onregion&&n.onregion(e),n.regionList.push({id:i.get("id"),region:e})}}(i)}}),/:/)}t&&(n.buffer+=n.decoder.decode(t,{stream:!0}));try{var r;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var s=(r=i()).match(/^WEBVTT([ \t].*)?$/);if(!s||!s[0])throw new Pn(Pn.Errors.BadSignature);n.state="HEADER"}for(var o=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(o?o=!1:r=i(),n.state){case"HEADER":/:/.test(r)?e(r):r||(n.state="ID");continue;case"NOTE":r||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){n.state="NOTE";break}if(!r)continue;n.cue=new(n.vttjs.VTTCue||n.window.VTTCue)(0,0,"");try{n.cue.align="center"}catch(t){n.cue.align="middle"}if(n.state="CUE",-1===r.indexOf("--\x3e")){n.cue.id=r;continue}case"CUE":try{_n(r,n.cue,n.regionList)}catch(t){n.reportOrThrowError(t),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var a=-1!==r.indexOf("--\x3e");if(!r||a&&(o=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(n.state="ID");continue}}}catch(t){n.reportOrThrowError(t),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Pn(Pn.Errors.BadSignature)}catch(n){t.reportOrThrowError(n)}return t.onflush&&t.onflush(),this}};var ni=ti,ii={"":1,lr:1,rl:1},ei={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function ri(t){return"string"==typeof t&&(!!ei[t.toLowerCase()]&&t.toLowerCase())}function si(t,n,i){this.hasBeenReset=!1;var e="",r=!1,s=t,o=n,a=i,u=null,h="",c=!0,f="auto",l="start",v="auto",d="auto",p=100,m="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return e},set:function(t){e=""+t}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(t){r=!!t}},startTime:{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");s=t,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");o=t,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return a},set:function(t){a=""+t,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return u},set:function(t){u=t,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return h},set:function(t){var n=function(t){return"string"==typeof t&&!!ii[t.toLowerCase()]&&t.toLowerCase()}(t);if(!1===n)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");h=n,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(t){c=!!t,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return f},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("Line: an invalid number or illegal string was specified.");f=t,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return l},set:function(t){var n=ri(t);n?(l=n,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return v},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");v=t,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return d},set:function(t){var n=ri(t);n?(d=n,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return p},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");p=t,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return m},set:function(t){var n=ri(t);if(!n)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");m=n,this.hasBeenReset=!0}}}),this.displayState=void 0}si.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var oi=si,ai={"":!0,up:!0};function ui(t){return"number"==typeof t&&t>=0&&t<=100}var hi=function(){var t=100,n=3,i=0,e=100,r=0,s=100,o="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(n){if(!ui(n))throw new Error("Width must be between 0 and 100.");t=n}},lines:{enumerable:!0,get:function(){return n},set:function(t){if("number"!=typeof t)throw new TypeError("Lines must be set to a number.");n=t}},regionAnchorY:{enumerable:!0,get:function(){return e},set:function(t){if(!ui(t))throw new Error("RegionAnchorX must be between 0 and 100.");e=t}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(t){if(!ui(t))throw new Error("RegionAnchorY must be between 0 and 100.");i=t}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(t){if(!ui(t))throw new Error("ViewportAnchorY must be between 0 and 100.");s=t}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(t){if(!ui(t))throw new Error("ViewportAnchorX must be between 0 and 100.");r=t}},scroll:{enumerable:!0,get:function(){return o},set:function(t){var n=function(t){return"string"==typeof t&&!!ai[t.toLowerCase()]&&t.toLowerCase()}(t);!1===n?console.warn("Scroll: an invalid or illegal string was specified."):o=n}}})},ci=bt,fi=Cn.exports={WebVTT:ni,VTTCue:oi,VTTRegion:hi};ci.vttjs=fi,ci.WebVTT=fi.WebVTT;var li=fi.VTTCue,vi=fi.VTTRegion,di=ci.VTTCue,pi=ci.VTTRegion;fi.shim=function(){ci.VTTCue=li,ci.VTTRegion=vi},fi.restore=function(){ci.VTTCue=di,ci.VTTRegion=pi},ci.VTTCue||fi.shim();var mi=Cn.exports,gi={exports:{}},bi={exports:{}};!function(t){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.default=t.exports,t.exports.g=!0}(bi),function(t){var n=bn.exports,i=bi.exports;function e(r,s,o){return i()?(t.exports=e=Reflect.construct,t.exports.default=t.exports,t.exports.g=!0):(t.exports=e=function(t,i,e){var r=[null];r.push.apply(r,i);var s=new(Function.bind.apply(t,r));return e&&n(s,e.prototype),s},t.exports.default=t.exports,t.exports.g=!0),e.apply(null,arguments)}t.exports=e,t.exports.default=t.exports,t.exports.g=!0}(gi);var yi=gt(gi.exports),ji={exports:{}};!function(t){var n=bn.exports;t.exports=function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&n(t,i)},t.exports.default=t.exports,t.exports.g=!0}(ji);var wi=gt(ji.exports),Ti={exports:{}};!function(t,n){!function(n){var i=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,e=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(t,n,i){if(i=i||{},t=t.trim(),!(n=n.trim())){if(!i.alwaysNormalize)return t;var r=o.parseURL(t);if(!r)throw new Error("Error trying to parse base URL.");return r.path=o.normalizePath(r.path),o.buildURLFromParts(r)}var s=o.parseURL(n);if(!s)throw new Error("Error trying to parse relative URL.");if(s.scheme)return i.alwaysNormalize?(s.path=o.normalizePath(s.path),o.buildURLFromParts(s)):n;var a=o.parseURL(t);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var u=e.exec(a.path);a.netLoc=u[1],a.path=u[2]}a.netLoc&&!a.path&&(a.path="/");var h={scheme:a.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};if(!s.netLoc&&(h.netLoc=a.netLoc,"/"!==s.path[0]))if(s.path){var c=a.path,f=c.substring(0,c.lastIndexOf("/")+1)+s.path;h.path=o.normalizePath(f)}else h.path=a.path,s.params||(h.params=a.params,s.query||(h.query=a.query));return null===h.path&&(h.path=i.alwaysNormalize?o.normalizePath(s.path):s.path),o.buildURLFromParts(h)},parseURL:function(t){var n=i.exec(t);return n?{scheme:n[1]||"",netLoc:n[2]||"",path:n[3]||"",params:n[4]||"",query:n[5]||"",fragment:n[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(r,"");t.length!==(t=t.replace(s,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};t.exports=o}()}(Ti);var Ai=Ti.exports,ki={},xi={exports:{}};!function(t,n){Object.defineProperty(n,"g",{value:!0}),n.default=void 0;var i=function(){function t(){this.listeners={}}var n=t.prototype;return n.on=function(t,n){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(n)},n.off=function(t,n){if(!this.listeners[t])return!1;var i=this.listeners[t].indexOf(n);return this.listeners[t]=this.listeners[t].slice(0),this.listeners[t].splice(i,1),i>-1},n.trigger=function(t){var n=this.listeners[t];if(n)if(2===arguments.length)for(var i=n.length,e=0;e<i;++e)n[e].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),s=n.length,o=0;o<s;++o)n[o].apply(this,r)},n.dispose=function(){this.listeners={}},n.pipe=function(t){this.on("data",(function(n){t.push(n)}))},t}();n.default=i,t.exports=n.default}(xi,xi.exports);var Si={exports:{}},Ei={exports:{}};!function(t){t.exports=function(t){return t&&t.g?t:{default:t}},t.exports.default=t.exports,t.exports.g=!0}(Ei),function(t,n){var i=Ei.exports;Object.defineProperty(n,"g",{value:!0}),n.default=function(t){for(var n=function(t){return e.default.atob?e.default.atob(t):Buffer.from(t,"base64").toString("binary")}(t),i=new Uint8Array(n.length),r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i};var e=i(bt);t.exports=n.default}(Si,Si.exports),
/*! @name m3u8-parser @version 4.7.0 @license Apache-2.0 */
Object.defineProperty(ki,"g",{value:!0});var Ii=xi.exports,Oi=cn.exports,Di=pn.exports,Ni=Si.exports;function Mi(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var Ci=Mi(gn.exports),Ri=Mi(Ii),Ui=Mi(Oi),Pi=Mi(Di),Li=Mi(Ni),Bi=function(t){function n(){var n;return(n=t.call(this)||this).buffer="",n}return Ci.default(n,t),n.prototype.push=function(t){var n;for(this.buffer+=t,n=this.buffer.indexOf("\n");n>-1;n=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,n)),this.buffer=this.buffer.substring(n+1)},n}(Ri.default),Fi=String.fromCharCode(9),_i=function(t){var n=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),i={};return n[1]&&(i.length=parseInt(n[1],10)),n[2]&&(i.offset=parseInt(n[2],10)),i},zi=function(t){for(var n,i=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),e={},r=i.length;r--;)""!==i[r]&&((n=/([^=]*)=(.*)/.exec(i[r]).slice(1))[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),e[n[0]]=n[1]);return e},Vi=function(t){function n(){var n;return(n=t.call(this)||this).customParsers=[],n.tagMappers=[],n}Ci.default(n,t);var i=n.prototype;return i.push=function(t){var n,i,e=this;0!==(t=t.trim()).length&&("#"===t[0]?this.tagMappers.reduce((function(n,i){var e=i(t);return e===t?n:n.concat([e])}),[t]).forEach((function(t){for(var r=0;r<e.customParsers.length;r++)if(e.customParsers[r].call(e,t))return;if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),n=/^#EXTM3U/.exec(t))e.trigger("data",{type:"tag",tagType:"m3u"});else{if(n=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return i={type:"tag",tagType:"inf"},n[1]&&(i.duration=parseFloat(n[1])),n[2]&&(i.title=n[2]),void e.trigger("data",i);if(n=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"targetduration"},n[1]&&(i.duration=parseInt(n[1],10)),void e.trigger("data",i);if(n=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"version"},n[1]&&(i.version=parseInt(n[1],10)),void e.trigger("data",i);if(n=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",tagType:"media-sequence"},n[1]&&(i.number=parseInt(n[1],10)),void e.trigger("data",i);if(n=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",tagType:"discontinuity-sequence"},n[1]&&(i.number=parseInt(n[1],10)),void e.trigger("data",i);if(n=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return i={type:"tag",tagType:"playlist-type"},n[1]&&(i.playlistType=n[1]),void e.trigger("data",i);if(n=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(t))return i=Ui.default(_i(n[1]),{type:"tag",tagType:"byterange"}),void e.trigger("data",i);if(n=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return i={type:"tag",tagType:"allow-cache"},n[1]&&(i.allowed=!/NO/.test(n[1])),void e.trigger("data",i);if(n=/^#EXT-X-MAP:?(.*)$/.exec(t)){if(i={type:"tag",tagType:"map"},n[1]){var s=zi(n[1]);s.URI&&(i.uri=s.URI),s.BYTERANGE&&(i.byterange=_i(s.BYTERANGE))}e.trigger("data",i)}else if(n=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t)){if(i={type:"tag",tagType:"stream-inf"},n[1]){if(i.attributes=zi(n[1]),i.attributes.RESOLUTION){var o=i.attributes.RESOLUTION.split("x"),a={};o[0]&&(a.width=parseInt(o[0],10)),o[1]&&(a.height=parseInt(o[1],10)),i.attributes.RESOLUTION=a}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}e.trigger("data",i)}else{if(n=/^#EXT-X-MEDIA:?(.*)$/.exec(t))return i={type:"tag",tagType:"media"},n[1]&&(i.attributes=zi(n[1])),void e.trigger("data",i);if(n=/^#EXT-X-ENDLIST/.exec(t))e.trigger("data",{type:"tag",tagType:"endlist"});else if(n=/^#EXT-X-DISCONTINUITY/.exec(t))e.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(n=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))return i={type:"tag",tagType:"program-date-time"},n[1]&&(i.dateTimeString=n[1],i.dateTimeObject=new Date(n[1])),void e.trigger("data",i);if(n=/^#EXT-X-KEY:?(.*)$/.exec(t))return i={type:"tag",tagType:"key"},n[1]&&(i.attributes=zi(n[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2).toLowerCase()&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void e.trigger("data",i);if(n=/^#EXT-X-START:?(.*)$/.exec(t))return i={type:"tag",tagType:"start"},n[1]&&(i.attributes=zi(n[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void e.trigger("data",i);if(n=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-out-cont"},n[1]?i.data=n[1]:i.data="",void e.trigger("data",i);if(n=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-out"},n[1]?i.data=n[1]:i.data="",void e.trigger("data",i);if(n=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-in"},n[1]?i.data=n[1]:i.data="",void e.trigger("data",i);if((n=/^#EXT-X-SKIP:(.*)$/.exec(t))&&n[1])return(i={type:"tag",tagType:"skip"}).attributes=zi(n[1]),i.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(i.attributes["SKIPPED-SEGMENTS"]=parseInt(i.attributes["SKIPPED-SEGMENTS"],10)),i.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(i.attributes["RECENTLY-REMOVED-DATERANGES"]=i.attributes["RECENTLY-REMOVED-DATERANGES"].split(Fi)),void e.trigger("data",i);if((n=/^#EXT-X-PART:(.*)$/.exec(t))&&n[1])return(i={type:"tag",tagType:"part"}).attributes=zi(n[1]),["DURATION"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseFloat(i.attributes[t]))})),["INDEPENDENT","GAP"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=/YES/.test(i.attributes[t]))})),i.attributes.hasOwnProperty("BYTERANGE")&&(i.attributes.byterange=_i(i.attributes.BYTERANGE)),void e.trigger("data",i);if((n=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(t))&&n[1])return(i={type:"tag",tagType:"server-control"}).attributes=zi(n[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseFloat(i.attributes[t]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=/YES/.test(i.attributes[t]))})),void e.trigger("data",i);if((n=/^#EXT-X-PART-INF:(.*)$/.exec(t))&&n[1])return(i={type:"tag",tagType:"part-inf"}).attributes=zi(n[1]),["PART-TARGET"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseFloat(i.attributes[t]))})),void e.trigger("data",i);if((n=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(t))&&n[1])return(i={type:"tag",tagType:"preload-hint"}).attributes=zi(n[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(t){if(i.attributes.hasOwnProperty(t)){i.attributes[t]=parseInt(i.attributes[t],10);var n="BYTERANGE-LENGTH"===t?"length":"offset";i.attributes.byterange=i.attributes.byterange||{},i.attributes.byterange[n]=i.attributes[t],delete i.attributes[t]}})),void e.trigger("data",i);if((n=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(t))&&n[1])return(i={type:"tag",tagType:"rendition-report"}).attributes=zi(n[1]),["LAST-MSN","LAST-PART"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseInt(i.attributes[t],10))})),void e.trigger("data",i);e.trigger("data",{type:"tag",data:t.slice(4)})}}}else e.trigger("data",{type:"comment",text:t.slice(1)})})):this.trigger("data",{type:"uri",uri:t}))},i.addParser=function(t){var n=this,i=t.expression,e=t.customType,r=t.dataParser,s=t.segment;"function"!=typeof r&&(r=function(t){return t}),this.customParsers.push((function(t){if(i.exec(t))return n.trigger("data",{type:"custom",data:r(t),customType:e,segment:s}),!0}))},i.addTagMapper=function(t){var n=t.expression,i=t.map;this.tagMappers.push((function(t){return n.test(t)?i(t):t}))},n}(Ri.default),Hi=function(t){var n={};return Object.keys(t).forEach((function(i){var e;n[(e=i,e.toLowerCase().replace(/-(\w)/g,(function(t){return t[1].toUpperCase()})))]=t[i]})),n},Xi=function(t){var n=t.serverControl,i=t.targetDuration,e=t.partTargetDuration;if(n){var r="#EXT-X-SERVER-CONTROL",s="holdBack",o="partHoldBack",a=i&&3*i,u=e&&2*e;i&&!n.hasOwnProperty(s)&&(n[s]=a,this.trigger("info",{message:r+" defaulting HOLD-BACK to targetDuration * 3 ("+a+")."})),a&&n[s]<a&&(this.trigger("warn",{message:r+" clamping HOLD-BACK ("+n[s]+") to targetDuration * 3 ("+a+")"}),n[s]=a),e&&!n.hasOwnProperty(o)&&(n[o]=3*e,this.trigger("info",{message:r+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+n[o]+")."})),e&&n[o]<u&&(this.trigger("warn",{message:r+" clamping PART-HOLD-BACK ("+n[o]+") to partTargetDuration * 2 ("+u+")."}),n[o]=u)}},qi=function(t){function n(){var n;(n=t.call(this)||this).lineStream=new Bi,n.parseStream=new Vi,n.lineStream.pipe(n.parseStream);var i,e,r=Pi.default(n),s=[],o={},a=!1,u=function(){},h={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c=0;n.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var f=0,l=0;return n.on("end",(function(){o.uri||!o.parts&&!o.preloadHints||(!o.map&&i&&(o.map=i),!o.key&&e&&(o.key=e),o.timeline||"number"!=typeof c||(o.timeline=c),n.manifest.preloadSegment=o)})),n.parseStream.on("data",(function(t){var n,v;({tag:function(){({version:function(){t.version&&(this.manifest.version=t.version)},"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var n={};"length"in t&&(o.byterange=n,n.length=t.length,"offset"in t||(t.offset=f)),"offset"in t&&(o.byterange=n,n.offset=t.offset),f=n.offset+n.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),t.duration>0&&(o.duration=t.duration),0===t.duration&&(o.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key:function(){if(t.attributes)if("NONE"!==t.attributes.METHOD)if(t.attributes.URI){if("com.apple.streamingkeydelivery"===t.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:t.attributes});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===t.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(t.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===t.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==t.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):t.attributes.KEYID&&"0x"===t.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:t.attributes.KEYFORMAT,keyId:t.attributes.KEYID.substring(2)},pssh:Li.default(t.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),e={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(e.iv=t.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else e=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,c=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){i={},t.uri&&(i.uri=t.uri),t.byterange&&(i.byterange=t.byterange),e&&(i.key=e)},"stream-inf":function(){this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||h,t.attributes?(o.attributes||(o.attributes={}),Ui.default(o.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||h,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var i=this.manifest.mediaGroups[t.attributes.TYPE];i[t.attributes["GROUP-ID"]]=i[t.attributes["GROUP-ID"]]||{},n=i[t.attributes["GROUP-ID"]],(v={default:/yes/i.test(t.attributes.DEFAULT)}).default?v.autoselect=!0:v.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(v.language=t.attributes.LANGUAGE),t.attributes.URI&&(v.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(v.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(v.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(v.forced=/yes/i.test(t.attributes.FORCED)),n[t.attributes.NAME]=v}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){c+=1,o.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),o.dateTimeString=t.dateTimeString,o.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):(this.manifest.targetDuration=t.duration,Xi.call(this,this.manifest))},start:function(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){o.cueOut=t.data},"cue-out-cont":function(){o.cueOutCont=t.data},"cue-in":function(){o.cueIn=t.data},skip:function(){this.manifest.skip=Hi(t.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",t.attributes,["SKIPPED-SEGMENTS"])},part:function(){var n=this;a=!0;var i=this.manifest.segments.length,e=Hi(t.attributes);o.parts=o.parts||[],o.parts.push(e),e.byterange&&(e.byterange.hasOwnProperty("offset")||(e.byterange.offset=l),l=e.byterange.offset+e.byterange.length);var r=o.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+r+" for segment #"+i,t.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((function(t,i){t.hasOwnProperty("lastPart")||n.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+i+" lacks required attribute(s): LAST-PART"})}))},"server-control":function(){var n=this.manifest.serverControl=Hi(t.attributes);n.hasOwnProperty("canBlockReload")||(n.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Xi.call(this,this.manifest),n.canSkipDateranges&&!n.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var n=this.manifest.segments.length,i=Hi(t.attributes),e=i.type&&"PART"===i.type;o.preloadHints=o.preloadHints||[],o.preloadHints.push(i),i.byterange&&(i.byterange.hasOwnProperty("offset")||(i.byterange.offset=e?l:0,e&&(l=i.byterange.offset+i.byterange.length)));var r=o.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+r+" for segment #"+n,t.attributes,["TYPE","URI"]),i.type)for(var s=0;s<o.preloadHints.length-1;s++){var a=o.preloadHints[s];a.type&&(a.type===i.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+r+" for segment #"+n+" has the same TYPE "+i.type+" as preload hint #"+s}))}},"rendition-report":function(){var n=Hi(t.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(n);var i=this.manifest.renditionReports.length-1,e=["LAST-MSN","URI"];a&&e.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+i,t.attributes,e)},"part-inf":function(){this.manifest.partInf=Hi(t.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",t.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Xi.call(this,this.manifest)}}[t.tagType]||u).call(r)},uri:function(){o.uri=t.uri,s.push(o),this.manifest.targetDuration&&!("duration"in o)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),o.duration=this.manifest.targetDuration),e&&(o.key=e),o.timeline=c,i&&(o.map=i),l=0,o={}},comment:function(){},custom:function(){t.segment?(o.custom=o.custom||{},o.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(r)})),n}Ci.default(n,t);var i=n.prototype;return i.warnOnMissingAttributes_=function(t,n,i){var e=[];i.forEach((function(t){n.hasOwnProperty(t)||e.push(t)})),e.length&&this.trigger("warn",{message:t+" lacks required attribute(s): "+e.join(", ")})},i.push=function(t){this.lineStream.push(t)},i.end=function(){this.lineStream.push("\n"),this.trigger("end")},i.addParser=function(t){this.parseStream.addParser(t)},i.addTagMapper=function(t){this.parseStream.addTagMapper(t)},n}(Ri.default);ki.LineStream=Bi,ki.ParseStream=Vi;var Gi=ki.Parser=qi,Wi={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},Yi=["video","audio","text"],Ji=["Video","Audio","Text"],Qi=function(t){return t?t.replace(/avc1\.(\d+)\.(\d+)/i,(function(t,n,i){return"avc1."+("00"+Number(n).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)})):t},$i=function(t){void 0===t&&(t="");var n=t.split(","),i=[];return n.forEach((function(t){var n;t=t.trim(),Yi.forEach((function(e){var r=Wi[e].exec(t.toLowerCase());if(r&&!(r.length<=1)){n=e;var s=t.substring(0,r[1].length),o=t.replace(s,"");i.push({type:s,details:o,mediaType:e})}})),n||i.push({type:t,details:"",mediaType:"unknown"})})),i},Ki=function(t){return void 0===t&&(t=""),Wi.audio.test(t.trim().toLowerCase())},Zi=function(t){if(t&&"string"==typeof t){var n,i=t.toLowerCase().split(",").map((function(t){return Qi(t.trim())})),e="video";1===i.length&&Ki(i[0])?e="audio":1===i.length&&(void 0===(n=i[0])&&(n=""),Wi.text.test(n.trim().toLowerCase()))&&(e="application");var r="mp4";return i.every((function(t){return Wi.mp4.test(t)}))?r="mp4":i.every((function(t){return Wi.webm.test(t)}))?r="webm":i.every((function(t){return Wi.ogg.test(t)}))&&(r="ogg"),e+"/"+r+';codecs="'+t+'"'}},te=function(t){return void 0===t&&(t=""),bt.MediaSource&&bt.MediaSource.isTypeSupported&&bt.MediaSource.isTypeSupported(Zi(t))||!1},ne=function(t){return void 0===t&&(t=""),t.toLowerCase().split(",").every((function(t){t=t.trim();for(var n=0;n<Ji.length;n++){if(Wi["muxer"+Ji[n]].test(t))return!0}return!1}))},ie=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,ee=/^application\/dash\+xml/i,re=function(t){return ie.test(t)?"hls":ee.test(t)?"dash":"application/vnd.videojs.vhs+json"===t?"vhs-json":null},se={},oe={exports:{}};!function(t,n){var i=Ei.exports;Object.defineProperty(n,"g",{value:!0}),n.default=void 0;var e=i(Ti.exports),r=i(bt),s="http://example.com",o=function(t,n){if(/^[a-z]+:/i.test(n))return n;/^data:/.test(t)&&(t=r.default.location&&r.default.location.href||"");var i="function"==typeof r.default.URL,o=/^\/\//.test(t),a=!r.default.location&&!/\/\//i.test(t);if(i?t=new r.default.URL(t,r.default.location||s):/\/\//i.test(t)||(t=e.default.buildAbsoluteURL(r.default.location&&r.default.location.href||"",t)),i){var u=new URL(n,t);return a?u.href.slice(s.length):o?u.href.slice(u.protocol.length):u.href}return e.default.buildAbsoluteURL(t,n)};n.default=o,t.exports=n.default}(oe,oe.exports);var ae={};Object.defineProperty(ae,"g",{value:!0}),ae.forEachMediaGroup=void 0;ae.forEachMediaGroup=function(t,n,i){n.forEach((function(n){for(var e in t.mediaGroups[n])for(var r in t.mediaGroups[n][e]){var s=t.mediaGroups[n][e][r];i(s,n,e,r)}}))};var ue={},he={},ce={};function fe(t,n){return void 0===n&&(n=Object),n&&"function"==typeof n.freeze?n.freeze(t):t}var le=fe({HTML:"text/html",isHTML:function(t){return t===le.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),ve=fe({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(t){return t===ve.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});ce.freeze=fe,ce.MIME_TYPE=le,ce.NAMESPACE=ve;var de=ce.NAMESPACE;function pe(t){return""!==t}function me(t,n){return t.hasOwnProperty(n)||(t[n]=!0),t}function ge(t){if(!t)return[];var n=function(t){return t?t.split(/[\t\n\f\r ]+/).filter(pe):[]}(t);return Object.keys(n.reduce(me,{}))}function be(t,n){for(var i in t)n[i]=t[i]}function ye(t,n){var i=t.prototype;if(!(i instanceof n)){function e(){}e.prototype=n.prototype,be(i,e=new e),t.prototype=i=e}i.constructor!=t&&("function"!=typeof t&&console.error("unknown Class:"+t),i.constructor=t)}var je={},we=je.ELEMENT_NODE=1,Te=je.ATTRIBUTE_NODE=2,Ae=je.TEXT_NODE=3,ke=je.CDATA_SECTION_NODE=4,xe=je.ENTITY_REFERENCE_NODE=5,Se=je.ENTITY_NODE=6,Ee=je.PROCESSING_INSTRUCTION_NODE=7,Ie=je.COMMENT_NODE=8,Oe=je.DOCUMENT_NODE=9,De=je.DOCUMENT_TYPE_NODE=10,Ne=je.DOCUMENT_FRAGMENT_NODE=11,Me=je.NOTATION_NODE=12,Ce={},Re={};Ce.INDEX_SIZE_ERR=(Re[1]="Index size error",1),Ce.DOMSTRING_SIZE_ERR=(Re[2]="DOMString size error",2);var Ue=Ce.HIERARCHY_REQUEST_ERR=(Re[3]="Hierarchy request error",3);Ce.WRONG_DOCUMENT_ERR=(Re[4]="Wrong document",4),Ce.INVALID_CHARACTER_ERR=(Re[5]="Invalid character",5),Ce.NO_DATA_ALLOWED_ERR=(Re[6]="No data allowed",6),Ce.NO_MODIFICATION_ALLOWED_ERR=(Re[7]="No modification allowed",7);var Pe=Ce.NOT_FOUND_ERR=(Re[8]="Not found",8);Ce.NOT_SUPPORTED_ERR=(Re[9]="Not supported",9);var Le=Ce.INUSE_ATTRIBUTE_ERR=(Re[10]="Attribute in use",10);function Be(t,n){if(n instanceof Error)var i=n;else i=this,Error.call(this,Re[t]),this.message=Re[t],Error.captureStackTrace&&Error.captureStackTrace(this,Be);return i.code=t,n&&(this.message=this.message+": "+n),i}function Fe(){}function _e(t,n){this._node=t,this._refresh=n,ze(this)}function ze(t){var n=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=n){var i=t._refresh(t._node);jr(t,"length",i.length),be(i,t),t._inc=n}}function Ve(){}function He(t,n){for(var i=t.length;i--;)if(t[i]===n)return i}function Xe(t,n,i,e){if(e?n[He(n,e)]=i:n[n.length++]=i,t){i.ownerElement=t;var r=t.ownerDocument;r&&(e&&$e(r,t,e),function(t,n,i){t&&t._inc++,i.namespaceURI===de.XMLNS&&(n._nsMap[i.prefix?i.localName:""]=i.value)}(r,t,i))}}function qe(t,n,i){var e=He(n,i);if(!(e>=0))throw Be(Pe,new Error(t.tagName+"@"+i));for(var r=n.length-1;e<r;)n[e]=n[++e];if(n.length=r,t){var s=t.ownerDocument;s&&($e(s,t,i),i.ownerElement=null)}}function Ge(){}function We(){}function Ye(t){return("<"==t?"&lt;":">"==t&&"&gt;")||"&"==t&&"&amp;"||'"'==t&&"&quot;"||"&#"+t.charCodeAt()+";"}function Je(t,n){if(n(t))return!0;if(t=t.firstChild)do{if(Je(t,n))return!0}while(t=t.nextSibling)}function Qe(){}function $e(t,n,i,e){t&&t._inc++,i.namespaceURI===de.XMLNS&&delete n._nsMap[i.prefix?i.localName:""]}function Ke(t,n,i){if(t&&t._inc){t._inc++;var e=n.childNodes;if(i)e[e.length++]=i;else{for(var r=n.firstChild,s=0;r;)e[s++]=r,r=r.nextSibling;e.length=s}}}function Ze(t,n){var i=n.previousSibling,e=n.nextSibling;return i?i.nextSibling=e:t.firstChild=e,e?e.previousSibling=i:t.lastChild=i,Ke(t.ownerDocument,t),n}function tr(t,n,i){var e=n.parentNode;if(e&&e.removeChild(n),n.nodeType===Ne){var r=n.firstChild;if(null==r)return n;var s=n.lastChild}else r=s=n;var o=i?i.previousSibling:t.lastChild;r.previousSibling=o,s.nextSibling=i,o?o.nextSibling=r:t.firstChild=r,null==i?t.lastChild=s:i.previousSibling=s;do{r.parentNode=t}while(r!==s&&(r=r.nextSibling));return Ke(t.ownerDocument||t,t),n.nodeType==Ne&&(n.firstChild=n.lastChild=null),n}function nr(){this._nsMap={}}function ir(){}function er(){}function rr(){}function sr(){}function or(){}function ar(){}function ur(){}function hr(){}function cr(){}function fr(){}function lr(){}function vr(){}function dr(t,n){var i=[],e=9==this.nodeType&&this.documentElement||this,r=e.prefix,s=e.namespaceURI;if(s&&null==r&&null==(r=e.lookupPrefix(s)))var o=[{namespace:s,prefix:null}];return gr(this,i,t,n,o),i.join("")}function pr(t,n,i){var e=t.prefix||"",r=t.namespaceURI;if(!r)return!1;if("xml"===e&&r===de.XML||r===de.XMLNS)return!1;for(var s=i.length;s--;){var o=i[s];if(o.prefix===e)return o.namespace!==r}return!0}function mr(t,n,i){t.push(" ",n,'="',i.replace(/[<&"]/g,Ye),'"')}function gr(t,n,i,e,r){if(r||(r=[]),e){if(!(t=e(t)))return;if("string"==typeof t)return void n.push(t)}switch(t.nodeType){case we:var s=t.attributes,o=s.length,a=t.firstChild,u=t.tagName,h=u;if(!(i=de.isHTML(t.namespaceURI)||i)&&!t.prefix&&t.namespaceURI){for(var c,f=0;f<s.length;f++)if("xmlns"===s.item(f).name){c=s.item(f).value;break}if(!c)for(var l=r.length-1;l>=0;l--){if(""===(v=r[l]).prefix&&v.namespace===t.namespaceURI){c=v.namespace;break}}if(c!==t.namespaceURI)for(l=r.length-1;l>=0;l--){var v;if((v=r[l]).namespace===t.namespaceURI){v.prefix&&(h=v.prefix+":"+u);break}}}n.push("<",h);for(var d=0;d<o;d++){"xmlns"==(p=s.item(d)).prefix?r.push({prefix:p.localName,namespace:p.value}):"xmlns"==p.nodeName&&r.push({prefix:"",namespace:p.value})}for(d=0;d<o;d++){var p,m,g;if(pr(p=s.item(d),0,r))mr(n,(m=p.prefix||"")?"xmlns:"+m:"xmlns",g=p.namespaceURI),r.push({prefix:m,namespace:g});gr(p,n,i,e,r)}if(u===h&&pr(t,0,r))mr(n,(m=t.prefix||"")?"xmlns:"+m:"xmlns",g=t.namespaceURI),r.push({prefix:m,namespace:g});if(a||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(u)){if(n.push(">"),i&&/^script$/i.test(u))for(;a;)a.data?n.push(a.data):gr(a,n,i,e,r.slice()),a=a.nextSibling;else for(;a;)gr(a,n,i,e,r.slice()),a=a.nextSibling;n.push("</",h,">")}else n.push("/>");return;case Oe:case Ne:for(a=t.firstChild;a;)gr(a,n,i,e,r.slice()),a=a.nextSibling;return;case Te:return mr(n,t.name,t.value);case Ae:return n.push(t.data.replace(/[<&]/g,Ye).replace(/]]>/g,"]]&gt;"));case ke:return n.push("<![CDATA[",t.data,"]]>");case Ie:return n.push("\x3c!--",t.data,"--\x3e");case De:var b=t.publicId,y=t.systemId;if(n.push("<!DOCTYPE ",t.name),b)n.push(" PUBLIC ",b),y&&"."!=y&&n.push(" ",y),n.push(">");else if(y&&"."!=y)n.push(" SYSTEM ",y,">");else{var j=t.internalSubset;j&&n.push(" [",j,"]"),n.push(">")}return;case Ee:return n.push("<?",t.target," ",t.data,"?>");case xe:return n.push("&",t.nodeName,";");default:n.push("??",t.nodeName)}}function br(t,n,i){var e;switch(n.nodeType){case we:(e=n.cloneNode(!1)).ownerDocument=t;case Ne:break;case Te:i=!0}if(e||(e=n.cloneNode(!1)),e.ownerDocument=t,e.parentNode=null,i)for(var r=n.firstChild;r;)e.appendChild(br(t,r,i)),r=r.nextSibling;return e}function yr(t,n,i){var e=new n.constructor;for(var r in n){var s=n[r];"object"!=typeof s&&s!=e[r]&&(e[r]=s)}switch(n.childNodes&&(e.childNodes=new Fe),e.ownerDocument=t,e.nodeType){case we:var o=n.attributes,a=e.attributes=new Ve,u=o.length;a._ownerElement=e;for(var h=0;h<u;h++)e.setAttributeNode(yr(t,o.item(h),!0));break;case Te:i=!0}if(i)for(var c=n.firstChild;c;)e.appendChild(yr(t,c,i)),c=c.nextSibling;return e}function jr(t,n,i){t[n]=i}Ce.INVALID_STATE_ERR=(Re[11]="Invalid state",11),Ce.SYNTAX_ERR=(Re[12]="Syntax error",12),Ce.INVALID_MODIFICATION_ERR=(Re[13]="Invalid modification",13),Ce.NAMESPACE_ERR=(Re[14]="Invalid namespace",14),Ce.INVALID_ACCESS_ERR=(Re[15]="Invalid access",15),Be.prototype=Error.prototype,be(Ce,Be),Fe.prototype={length:0,item:function(t){return this[t]||null},toString:function(t,n){for(var i=[],e=0;e<this.length;e++)gr(this[e],i,t,n);return i.join("")}},_e.prototype.item=function(t){return ze(this),this[t]},ye(_e,Fe),Ve.prototype={length:0,item:Fe.prototype.item,getNamedItem:function(t){for(var n=this.length;n--;){var i=this[n];if(i.nodeName==t)return i}},setNamedItem:function(t){var n=t.ownerElement;if(n&&n!=this._ownerElement)throw new Be(Le);var i=this.getNamedItem(t.nodeName);return Xe(this._ownerElement,this,t,i),i},setNamedItemNS:function(t){var n,i=t.ownerElement;if(i&&i!=this._ownerElement)throw new Be(Le);return n=this.getNamedItemNS(t.namespaceURI,t.localName),Xe(this._ownerElement,this,t,n),n},removeNamedItem:function(t){var n=this.getNamedItem(t);return qe(this._ownerElement,this,n),n},removeNamedItemNS:function(t,n){var i=this.getNamedItemNS(t,n);return qe(this._ownerElement,this,i),i},getNamedItemNS:function(t,n){for(var i=this.length;i--;){var e=this[i];if(e.localName==n&&e.namespaceURI==t)return e}return null}},Ge.prototype={hasFeature:function(t,n){return!0},createDocument:function(t,n,i){var e=new Qe;if(e.implementation=this,e.childNodes=new Fe,e.doctype=i||null,i&&e.appendChild(i),n){var r=e.createElementNS(t,n);e.appendChild(r)}return e},createDocumentType:function(t,n,i){var e=new ar;return e.name=t,e.nodeName=t,e.publicId=n||"",e.systemId=i||"",e}},We.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,n){return tr(this,t,n)},replaceChild:function(t,n){this.insertBefore(t,n),n&&this.removeChild(n)},removeChild:function(t){return Ze(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(t){return yr(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var n=t.nextSibling;n&&n.nodeType==Ae&&t.nodeType==Ae?(this.removeChild(n),t.appendData(n.data)):(t.normalize(),t=n)}},isSupported:function(t,n){return this.ownerDocument.implementation.hasFeature(t,n)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var n=this;n;){var i=n._nsMap;if(i)for(var e in i)if(i[e]==t)return e;n=n.nodeType==Te?n.ownerDocument:n.parentNode}return null},lookupNamespaceURI:function(t){for(var n=this;n;){var i=n._nsMap;if(i&&t in i)return i[t];n=n.nodeType==Te?n.ownerDocument:n.parentNode}return null},isDefaultNamespace:function(t){return null==this.lookupPrefix(t)}},be(je,We),be(je,We.prototype),Qe.prototype={nodeName:"#document",nodeType:Oe,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,n){if(t.nodeType==Ne){for(var i=t.firstChild;i;){var e=i.nextSibling;this.insertBefore(i,n),i=e}return t}return null==this.documentElement&&t.nodeType==we&&(this.documentElement=t),tr(this,t,n),t.ownerDocument=this,t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),Ze(this,t)},importNode:function(t,n){return br(this,t,n)},getElementById:function(t){var n=null;return Je(this.documentElement,(function(i){if(i.nodeType==we&&i.getAttribute("id")==t)return n=i,!0})),n},getElementsByClassName:function(t){var n=ge(t);return new _e(this,(function(i){var e=[];return n.length>0&&Je(i.documentElement,(function(r){if(r!==i&&r.nodeType===we){var s=r.getAttribute("class");if(s){var o=t===s;if(!o){var a=ge(s);o=n.every((u=a,function(t){return u&&-1!==u.indexOf(t)}))}o&&e.push(r)}}var u})),e}))},createElement:function(t){var n=new nr;return n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.localName=t,n.childNodes=new Fe,(n.attributes=new Ve)._ownerElement=n,n},createDocumentFragment:function(){var t=new fr;return t.ownerDocument=this,t.childNodes=new Fe,t},createTextNode:function(t){var n=new rr;return n.ownerDocument=this,n.appendData(t),n},createComment:function(t){var n=new sr;return n.ownerDocument=this,n.appendData(t),n},createCDATASection:function(t){var n=new or;return n.ownerDocument=this,n.appendData(t),n},createProcessingInstruction:function(t,n){var i=new lr;return i.ownerDocument=this,i.tagName=i.target=t,i.nodeValue=i.data=n,i},createAttribute:function(t){var n=new ir;return n.ownerDocument=this,n.name=t,n.nodeName=t,n.localName=t,n.specified=!0,n},createEntityReference:function(t){var n=new cr;return n.ownerDocument=this,n.nodeName=t,n},createElementNS:function(t,n){var i=new nr,e=n.split(":"),r=i.attributes=new Ve;return i.childNodes=new Fe,i.ownerDocument=this,i.nodeName=n,i.tagName=n,i.namespaceURI=t,2==e.length?(i.prefix=e[0],i.localName=e[1]):i.localName=n,r._ownerElement=i,i},createAttributeNS:function(t,n){var i=new ir,e=n.split(":");return i.ownerDocument=this,i.nodeName=n,i.name=n,i.namespaceURI=t,i.specified=!0,2==e.length?(i.prefix=e[0],i.localName=e[1]):i.localName=n,i}},ye(Qe,We),nr.prototype={nodeType:we,hasAttribute:function(t){return null!=this.getAttributeNode(t)},getAttribute:function(t){var n=this.getAttributeNode(t);return n&&n.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,n){var i=this.ownerDocument.createAttribute(t);i.value=i.nodeValue=""+n,this.setAttributeNode(i)},removeAttribute:function(t){var n=this.getAttributeNode(t);n&&this.removeAttributeNode(n)},appendChild:function(t){return t.nodeType===Ne?this.insertBefore(t,null):function(t,n){var i=n.parentNode;if(i){var e=t.lastChild;i.removeChild(n),e=t.lastChild}return e=t.lastChild,n.parentNode=t,n.previousSibling=e,n.nextSibling=null,e?e.nextSibling=n:t.firstChild=n,t.lastChild=n,Ke(t.ownerDocument,t,n),n}(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,n){var i=this.getAttributeNodeNS(t,n);i&&this.removeAttributeNode(i)},hasAttributeNS:function(t,n){return null!=this.getAttributeNodeNS(t,n)},getAttributeNS:function(t,n){var i=this.getAttributeNodeNS(t,n);return i&&i.value||""},setAttributeNS:function(t,n,i){var e=this.ownerDocument.createAttributeNS(t,n);e.value=e.nodeValue=""+i,this.setAttributeNode(e)},getAttributeNodeNS:function(t,n){return this.attributes.getNamedItemNS(t,n)},getElementsByTagName:function(t){return new _e(this,(function(n){var i=[];return Je(n,(function(e){e===n||e.nodeType!=we||"*"!==t&&e.tagName!=t||i.push(e)})),i}))},getElementsByTagNameNS:function(t,n){return new _e(this,(function(i){var e=[];return Je(i,(function(r){r===i||r.nodeType!==we||"*"!==t&&r.namespaceURI!==t||"*"!==n&&r.localName!=n||e.push(r)})),e}))}},Qe.prototype.getElementsByTagName=nr.prototype.getElementsByTagName,Qe.prototype.getElementsByTagNameNS=nr.prototype.getElementsByTagNameNS,ye(nr,We),ir.prototype.nodeType=Te,ye(ir,We),er.prototype={data:"",substringData:function(t,n){return this.data.substring(t,t+n)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,n){this.replaceData(t,0,n)},appendChild:function(t){throw new Error(Re[Ue])},deleteData:function(t,n){this.replaceData(t,n,"")},replaceData:function(t,n,i){i=this.data.substring(0,t)+i+this.data.substring(t+n),this.nodeValue=this.data=i,this.length=i.length}},ye(er,We),rr.prototype={nodeName:"#text",nodeType:Ae,splitText:function(t){var n=this.data,i=n.substring(t);n=n.substring(0,t),this.data=this.nodeValue=n,this.length=n.length;var e=this.ownerDocument.createTextNode(i);return this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling),e}},ye(rr,er),sr.prototype={nodeName:"#comment",nodeType:Ie},ye(sr,er),or.prototype={nodeName:"#cdata-section",nodeType:ke},ye(or,er),ar.prototype.nodeType=De,ye(ar,We),ur.prototype.nodeType=Me,ye(ur,We),hr.prototype.nodeType=Se,ye(hr,We),cr.prototype.nodeType=xe,ye(cr,We),fr.prototype.nodeName="#document-fragment",fr.prototype.nodeType=Ne,ye(fr,We),lr.prototype.nodeType=Ee,ye(lr,We),vr.prototype.serializeToString=function(t,n,i){return dr.call(t,n,i)},We.prototype.toString=dr;try{if(Object.defineProperty){function wr(t){switch(t.nodeType){case we:case Ne:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(wr(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}}Object.defineProperty(_e.prototype,"length",{get:function(){return ze(this),this.$$length}}),Object.defineProperty(We.prototype,"textContent",{get:function(){return wr(this)},set:function(t){switch(this.nodeType){case we:case Ne:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),jr=function(t,n,i){t["$$"+n]=i}}}catch(t){}he.DocumentType=ar,he.DOMException=Be,he.DOMImplementation=Ge,he.Element=nr,he.Node=We,he.NodeList=Fe,he.XMLSerializer=vr;var Tr={},Ar={};!function(t){var n=ce.freeze;t.XML_ENTITIES=n({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=n({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",times:"×",divide:"÷",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",euro:"€",trade:"™",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"}),t.entityMap=t.HTML_ENTITIES}(Ar);var kr={},xr=ce.NAMESPACE,Sr=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Er=new RegExp("[\\-\\.0-9"+Sr.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Ir=new RegExp("^"+Sr.source+Er.source+"*(?::"+Sr.source+Er.source+"*)?$");function Or(t,n){this.message=t,this.locator=n,Error.captureStackTrace&&Error.captureStackTrace(this,Or)}function Dr(){}function Nr(t,n){return n.lineNumber=t.lineNumber,n.columnNumber=t.columnNumber,n}function Mr(t,n,i,e,r,s){function o(t,n,e){i.attributeNames.hasOwnProperty(t)&&s.fatalError("Attribute "+t+" redefined"),i.addValue(t,n,e)}for(var a,u=++n,h=0;;){var c=t.charAt(u);switch(c){case"=":if(1===h)a=t.slice(n,u),h=3;else{if(2!==h)throw new Error("attribute equal must after attrName");h=3}break;case"'":case'"':if(3===h||1===h){if(1===h&&(s.warning('attribute value must after "="'),a=t.slice(n,u)),n=u+1,!((u=t.indexOf(c,n))>0))throw new Error("attribute value no end '"+c+"' match");o(a,f=t.slice(n,u).replace(/&#?\w+;/g,r),n-1),h=5}else{if(4!=h)throw new Error('attribute value must after "="');o(a,f=t.slice(n,u).replace(/&#?\w+;/g,r),n),s.warning('attribute "'+a+'" missed start quot('+c+")!!"),n=u+1,h=5}break;case"/":switch(h){case 0:i.setTagName(t.slice(n,u));case 5:case 6:case 7:h=7,i.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),0==h&&i.setTagName(t.slice(n,u)),u;case">":switch(h){case 0:i.setTagName(t.slice(n,u));case 5:case 6:case 7:break;case 4:case 1:"/"===(f=t.slice(n,u)).slice(-1)&&(i.closed=!0,f=f.slice(0,-1));case 2:2===h&&(f=a),4==h?(s.warning('attribute "'+f+'" missed quot(")!'),o(a,f.replace(/&#?\w+;/g,r),n)):(xr.isHTML(e[""])&&f.match(/^(?:disabled|checked|selected)$/i)||s.warning('attribute "'+f+'" missed value!! "'+f+'" instead!!'),o(f,f,n));break;case 3:throw new Error("attribute value missed!!")}return u;case"":c=" ";default:if(c<=" ")switch(h){case 0:i.setTagName(t.slice(n,u)),h=6;break;case 1:a=t.slice(n,u),h=2;break;case 4:var f=t.slice(n,u).replace(/&#?\w+;/g,r);s.warning('attribute "'+f+'" missed quot(")!!'),o(a,f,n);case 5:h=6}else switch(h){case 2:i.tagName,xr.isHTML(e[""])&&a.match(/^(?:disabled|checked|selected)$/i)||s.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),o(a,a,n),n=u,h=1;break;case 5:s.warning('attribute space is required"'+a+'"!!');case 6:h=1,n=u;break;case 3:h=4,n=u;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function Cr(t,n,i){for(var e=t.tagName,r=null,s=t.length;s--;){var o=t[s],a=o.qName,u=o.value;if((l=a.indexOf(":"))>0)var h=o.prefix=a.slice(0,l),c=a.slice(l+1),f="xmlns"===h&&c;else c=a,h=null,f="xmlns"===a&&"";o.localName=c,!1!==f&&(null==r&&(r={},Pr(i,i={})),i[f]=r[f]=u,o.uri=xr.XMLNS,n.startPrefixMapping(f,u))}for(s=t.length;s--;){(h=(o=t[s]).prefix)&&("xml"===h&&(o.uri=xr.XML),"xmlns"!==h&&(o.uri=i[h||""]))}var l;(l=e.indexOf(":"))>0?(h=t.prefix=e.slice(0,l),c=t.localName=e.slice(l+1)):(h=null,c=t.localName=e);var v=t.uri=i[h||""];if(n.startElement(v,c,e,t),!t.closed)return t.currentNSMap=i,t.localNSMap=r,!0;if(n.endElement(v,c,e),r)for(h in r)n.endPrefixMapping(h)}function Rr(t,n,i,e,r){if(/^(?:script|textarea)$/i.test(i)){var s=t.indexOf("</"+i+">",n),o=t.substring(n+1,s);if(/[&<]/.test(o))return/^script$/i.test(i)?(r.characters(o,0,o.length),s):(o=o.replace(/&#?\w+;/g,e),r.characters(o,0,o.length),s)}return n+1}function Ur(t,n,i,e){var r=e[i];return null==r&&((r=t.lastIndexOf("</"+i+">"))<n&&(r=t.lastIndexOf("</"+i)),e[i]=r),r<n}function Pr(t,n){for(var i in t)n[i]=t[i]}function Lr(t,n,i,e){switch(t.charAt(n+2)){case"-":return"-"===t.charAt(n+3)?(r=t.indexOf("--\x3e",n+4))>n?(i.comment(t,n+4,r-n-4),r+3):(e.error("Unclosed comment"),-1):-1;default:if("CDATA["==t.substr(n+3,6)){var r=t.indexOf("]]>",n+9);return i.startCDATA(),i.characters(t,n+9,r-n-9),i.endCDATA(),r+3}var s=function(t,n){var i,e=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;r.lastIndex=n,r.exec(t);for(;i=r.exec(t);)if(e.push(i),i[1])return e}(t,n),o=s.length;if(o>1&&/!doctype/i.test(s[0][0])){var a=s[1][0],u=!1,h=!1;o>3&&(/^public$/i.test(s[2][0])?(u=s[3][0],h=o>4&&s[4][0]):/^system$/i.test(s[2][0])&&(h=s[3][0]));var c=s[o-1];return i.startDTD(a,u,h),i.endDTD(),c.index+c[0].length}}return-1}function Br(t,n,i){var e=t.indexOf("?>",n);if(e){var r=t.substring(n,e).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return r?(r[0].length,i.processingInstruction(r[1],r[2]),e+2):-1}return-1}function Fr(){this.attributeNames={}}Or.prototype=new Error,Or.prototype.name=Or.name,Dr.prototype={parse:function(t,n,i){var e=this.domBuilder;e.startDocument(),Pr(n,n={}),function(t,n,i,e,r){function s(t){if(t>65535){var n=55296+((t-=65536)>>10),i=56320+(1023&t);return String.fromCharCode(n,i)}return String.fromCharCode(t)}function o(t){var n=t.slice(1,-1);return n in i?i[n]:"#"===n.charAt(0)?s(parseInt(n.substr(1).replace("x","0x"))):(r.error("entity not found:"+t),t)}function a(n){if(n>p){var i=t.substring(p,n).replace(/&#?\w+;/g,o);l&&u(p),e.characters(i,0,n-p),p=n}}function u(n,i){for(;n>=c&&(i=f.exec(t));)h=i.index,c=h+i[0].length,l.lineNumber++;l.columnNumber=n-h+1}var h=0,c=0,f=/.*(?:\r\n?|\n)|.*$/g,l=e.locator,v=[{currentNSMap:n}],d={},p=0;for(;;){try{var m=t.indexOf("<",p);if(m<0){if(!t.substr(p).match(/^\s*$/)){var g=e.doc,b=g.createTextNode(t.substr(p));g.appendChild(b),e.currentElement=b}return}switch(m>p&&a(m),t.charAt(m+1)){case"/":var y=t.indexOf(">",m+3),j=t.substring(m+2,y).replace(/[ \t\n\r]+$/g,""),w=v.pop();y<0?(j=t.substring(m+2).replace(/[\s<].*/,""),r.error("end tag name: "+j+" is not complete:"+w.tagName),y=m+1+j.length):j.match(/\s</)&&(j=j.replace(/[\s<].*/,""),r.error("end tag name: "+j+" maybe not complete"),y=m+1+j.length);var T=w.localNSMap,A=w.tagName==j;if(A||w.tagName&&w.tagName.toLowerCase()==j.toLowerCase()){if(e.endElement(w.uri,w.localName,j),T)for(var k in T)e.endPrefixMapping(k);A||r.fatalError("end tag name: "+j+" is not match the current start tagName:"+w.tagName)}else v.push(w);y++;break;case"?":l&&u(m),y=Br(t,m,e);break;case"!":l&&u(m),y=Lr(t,m,e,r);break;default:l&&u(m);var x=new Fr,S=v[v.length-1].currentNSMap,E=(y=Mr(t,m,x,S,o,r),x.length);if(!x.closed&&Ur(t,y,x.tagName,d)&&(x.closed=!0,i.nbsp||r.warning("unclosed xml attribute")),l&&E){for(var I=Nr(l,{}),O=0;O<E;O++){var D=x[O];u(D.offset),D.locator=Nr(l,{})}e.locator=I,Cr(x,e,S)&&v.push(x),e.locator=l}else Cr(x,e,S)&&v.push(x);xr.isHTML(x.uri)&&!x.closed?y=Rr(t,y,x.tagName,o,e):y++}}catch(t){if(t instanceof Or)throw t;r.error("element parse error: "+t),y=-1}y>p?p=y:a(Math.max(m,p)+1)}}(t,n,i,e,this.errorHandler),e.endDocument()}},Fr.prototype={setTagName:function(t){if(!Ir.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,n,i){if(!Ir.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:n,offset:i}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}},kr.XMLReader=Dr,kr.ParseError=Or;var _r=ce,zr=he,Vr=Ar,Hr=kr,Xr=zr.DOMImplementation,qr=_r.NAMESPACE,Gr=Hr.ParseError,Wr=Hr.XMLReader;function Yr(t){this.options=t||{locator:{}}}function Jr(){this.cdata=!1}function Qr(t,n){n.lineNumber=t.lineNumber,n.columnNumber=t.columnNumber}function $r(t){if(t)return"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function Kr(t,n,i){return"string"==typeof t?t.substr(n,i):t.length>=n+i||n?new java.lang.String(t,n,i)+"":t}function Zr(t,n){t.currentElement?t.currentElement.appendChild(n):t.doc.appendChild(n)}Yr.prototype.parseFromString=function(t,n){var i=this.options,e=new Wr,r=i.domBuilder||new Jr,s=i.errorHandler,o=i.locator,a=i.xmlns||{},u=/\/x?html?$/.test(n),h=u?Vr.HTML_ENTITIES:Vr.XML_ENTITIES;return o&&r.setDocumentLocator(o),e.errorHandler=function(t,n,i){if(!t){if(n instanceof Jr)return n;t=n}var e={},r=t instanceof Function;function s(n){var s=t[n];!s&&r&&(s=2==t.length?function(i){t(n,i)}:t),e[n]=s&&function(t){s("[xmldom "+n+"]\t"+t+$r(i))}||function(){}}return i=i||{},s("warning"),s("error"),s("fatalError"),e}(s,r,o),e.domBuilder=i.domBuilder||r,u&&(a[""]=qr.HTML),a.xml=a.xml||qr.XML,t&&"string"==typeof t?e.parse(t,a,h):e.errorHandler.error("invalid doc source"),r.doc},Jr.prototype={startDocument:function(){this.doc=(new Xr).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,n,i,e){var r=this.doc,s=r.createElementNS(t,i||n),o=e.length;Zr(this,s),this.currentElement=s,this.locator&&Qr(this.locator,s);for(var a=0;a<o;a++){t=e.getURI(a);var u=e.getValue(a),h=(i=e.getQName(a),r.createAttributeNS(t,i));this.locator&&Qr(e.getLocator(a),h),h.value=h.nodeValue=u,s.setAttributeNode(h)}},endElement:function(t,n,i){var e=this.currentElement;e.tagName,this.currentElement=e.parentNode},startPrefixMapping:function(t,n){},endPrefixMapping:function(t){},processingInstruction:function(t,n){var i=this.doc.createProcessingInstruction(t,n);this.locator&&Qr(this.locator,i),Zr(this,i)},ignorableWhitespace:function(t,n,i){},characters:function(t,n,i){if(t=Kr.apply(this,arguments)){if(this.cdata)var e=this.doc.createCDATASection(t);else e=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(e):/^\s*$/.test(t)&&this.doc.appendChild(e),this.locator&&Qr(this.locator,e)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,n,i){t=Kr.apply(this,arguments);var e=this.doc.createComment(t);this.locator&&Qr(this.locator,e),Zr(this,e)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,n,i){var e=this.doc.implementation;if(e&&e.createDocumentType){var r=e.createDocumentType(t,n,i);this.locator&&Qr(this.locator,r),Zr(this,r),this.doc.doctype=r}},warning:function(t){console.warn("[xmldom warning]\t"+t,$r(this.locator))},error:function(t){console.error("[xmldom error]\t"+t,$r(this.locator))},fatalError:function(t){throw new Gr(t,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(t){Jr.prototype[t]=function(){return null}})),Tr.I=Jr,Tr.DOMParser=Yr,Tr.DOMImplementation=zr.DOMImplementation,Tr.XMLSerializer=zr.XMLSerializer;var ts=he;ue.DOMImplementation=ts.DOMImplementation,ue.XMLSerializer=ts.XMLSerializer,ue.DOMParser=Tr.DOMParser,
/*! @name mpd-parser @version 0.21.0 @license Apache-2.0 */
Object.defineProperty(se,"g",{value:!0});var ns=bt,is=ae,es=Si.exports,rs=ue;function ss(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var os=ss(oe.exports),as=ss(ns),us=ss(es),hs=function(t){return!!t&&"object"==typeof t},cs=function t(){for(var n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];return i.reduce((function(n,i){return"object"!=typeof i||Object.keys(i).forEach((function(e){Array.isArray(n[e])&&Array.isArray(i[e])?n[e]=n[e].concat(i[e]):hs(n[e])&&hs(i[e])?n[e]=t(n[e],i[e]):n[e]=i[e]})),n}),{})},fs=function(t){return Object.keys(t).map((function(n){return t[n]}))},ls=function(t){return t.reduce((function(t,n){return t.concat(n)}),[])},vs=function(t){if(!t.length)return[];for(var n=[],i=0;i<t.length;i++)n.push(t[i]);return n},ds=function(t,n){for(var i=0;i<t.length;i++)if(n(t[i]))return i;return-1},ps="INVALID_NUMBER_OF_PERIOD",ms="DASH_EMPTY_MANIFEST",gs="DASH_INVALID_XML",bs="NO_BASE_URL",ys="SEGMENT_TIME_UNSPECIFIED",js="UNSUPPORTED_UTC_TIMING_SCHEME",ws=function(t){var n=t.baseUrl,i=void 0===n?"":n,e=t.source,r=void 0===e?"":e,s=t.range,o=void 0===s?"":s,a=t.indexRange,u=void 0===a?"":a,h={uri:r,resolvedUri:os.default(i||"",r)};if(o||u){var c,f=(o||u).split("-"),l=as.default.BigInt?as.default.BigInt(f[0]):parseInt(f[0],10),v=as.default.BigInt?as.default.BigInt(f[1]):parseInt(f[1],10);l<Number.MAX_SAFE_INTEGER&&"bigint"==typeof l&&(l=Number(l)),v<Number.MAX_SAFE_INTEGER&&"bigint"==typeof v&&(v=Number(v)),"bigint"==typeof(c="bigint"==typeof v||"bigint"==typeof l?as.default.BigInt(v)-as.default.BigInt(l)+as.default.BigInt(1):v-l+1)&&c<Number.MAX_SAFE_INTEGER&&(c=Number(c)),h.byterange={length:c,offset:l}}return h},Ts=function(t){return t&&"number"!=typeof t&&(t=parseInt(t,10)),isNaN(t)?null:t},As={static:function(t){var n=t.duration,i=t.timescale,e=void 0===i?1:i,r=t.sourceDuration,s=t.periodDuration,o=Ts(t.endNumber),a=n/e;return"number"==typeof o?{start:0,end:o}:"number"==typeof s?{start:0,end:s/a}:{start:0,end:r/a}},dynamic:function(t){var n=t.NOW,i=t.clientOffset,e=t.availabilityStartTime,r=t.timescale,s=void 0===r?1:r,o=t.duration,a=t.periodStart,u=void 0===a?0:a,h=t.minimumUpdatePeriod,c=void 0===h?0:h,f=t.timeShiftBufferDepth,l=void 0===f?1/0:f,v=Ts(t.endNumber),d=(n+i)/1e3,p=e+u,m=d+c-p,g=Math.ceil(m*s/o),b=Math.floor((d-p-l)*s/o),y=Math.floor((d-p)*s/o);return{start:Math.max(0,b),end:"number"==typeof v?v:Math.min(g,y)}}},ks=function(t){var n=t.type,i=t.duration,e=t.timescale,r=void 0===e?1:e,s=t.periodDuration,o=t.sourceDuration,a=As[n](t),u=function(t,n){for(var i=[],e=t;e<n;e++)i.push(e);return i}(a.start,a.end).map(function(t){return function(n){var i=t.duration,e=t.timescale,r=void 0===e?1:e,s=t.periodStart,o=t.startNumber;return{number:(void 0===o?1:o)+n,duration:i/r,timeline:s,time:n*i}}}(t));if("static"===n){var h=u.length-1,c="number"==typeof s?s:o;u[h].duration=c-i/r*h}return u},xs=function(t){var n=t.baseUrl,i=t.initialization,e=void 0===i?{}:i,r=t.sourceDuration,s=t.indexRange,o=void 0===s?"":s,a=t.periodStart,u=t.presentationTime,h=t.number,c=void 0===h?0:h,f=t.duration;if(!n)throw new Error(bs);var l=ws({baseUrl:n,source:e.sourceURL,range:e.range}),v=ws({baseUrl:n,source:n,indexRange:o});if(v.map=l,f){var d=ks(t);d.length&&(v.duration=d[0].duration,v.timeline=d[0].timeline)}else r&&(v.duration=r,v.timeline=a);return v.presentationTime=u||a,v.number=c,[v]},Ss=function(t,n,i){var e,r=t.sidx.map?t.sidx.map:null,s=t.sidx.duration,o=t.timeline||0,a=t.sidx.byterange,u=a.offset+a.length,h=n.timescale,c=n.references.filter((function(t){return 1!==t.referenceType})),f=[],l=t.endList?"static":"dynamic",v=t.sidx.timeline,d=v,p=t.mediaSequence||0;e="bigint"==typeof n.firstOffset?as.default.BigInt(u)+n.firstOffset:u+n.firstOffset;for(var m=0;m<c.length;m++){var g=n.references[m],b=g.referencedSize,y=g.subsegmentDuration,j=void 0;j="bigint"==typeof e?e+as.default.BigInt(b)-as.default.BigInt(1):e+b-1;var w=xs({baseUrl:i,timescale:h,timeline:o,periodStart:v,presentationTime:d,number:p,duration:y,sourceDuration:s,indexRange:e+"-"+j,type:l})[0];r&&(w.map=r),f.push(w),e+="bigint"==typeof e?as.default.BigInt(b):b,d+=y/h,p++}return t.segments=f,t},Es=["AUDIO","SUBTITLES"],Is=function(t){return(n=t,i=function(t){return t.timeline},fs(n.reduce((function(t,n){return n.forEach((function(n){t[i(n)]=n})),t}),{}))).sort((function(t,n){return t.timeline>n.timeline?1:-1}));var n,i},Os=function(t){var n=[];return is.forEachMediaGroup(t,Es,(function(t,i,e,r){n=n.concat(t.playlists||[])})),n},Ds=function(t){var n=t.playlist,i=t.mediaSequence;n.mediaSequence=i,n.segments.forEach((function(t,i){t.number=n.mediaSequence+i}))},Ns=function(t){var n=t.oldManifest,i=t.newManifest,e=n.playlists.concat(Os(n)),r=i.playlists.concat(Os(i));return i.timelineStarts=Is([n.timelineStarts,i.timelineStarts]),function(t){var n=t.oldPlaylists,i=t.newPlaylists,e=t.timelineStarts;i.forEach((function(t){t.discontinuitySequence=ds(e,(function(n){return n.timeline===t.timeline}));var i=function(t,n){for(var i=0;i<t.length;i++)if(t[i].attributes.NAME===n)return t[i];return null}(n,t.attributes.NAME);if(i&&!t.sidx){var r=t.segments[0],s=ds(i.segments,(function(t){return Math.abs(t.presentationTime-r.presentationTime)<.016666666666666666}));if(-1===s)return Ds({playlist:t,mediaSequence:i.mediaSequence+i.segments.length}),t.segments[0].discontinuity=!0,t.discontinuityStarts.unshift(0),void((!i.segments.length&&t.timeline>i.timeline||i.segments.length&&t.timeline>i.segments[i.segments.length-1].timeline)&&t.discontinuitySequence--);i.segments[s].discontinuity&&!r.discontinuity&&(r.discontinuity=!0,t.discontinuityStarts.unshift(0),t.discontinuitySequence--),Ds({playlist:t,mediaSequence:i.segments[s].number})}}))}({oldPlaylists:e,newPlaylists:r,timelineStarts:i.timelineStarts}),i},Ms=function(t){return t&&t.uri+"-"+(n=t.byterange,i="bigint"==typeof n.offset||"bigint"==typeof n.length?as.default.BigInt(n.offset)+as.default.BigInt(n.length)-as.default.BigInt(1):n.offset+n.length-1,n.offset+"-"+i);var n,i},Cs=function(t){return fs(t.reduce((function(t,n){var i=n.attributes.id+(n.attributes.lang||"");if(t[i]){var e;if(n.segments)n.segments[0]&&(n.segments[0].discontinuity=!0),(e=t[i].segments).push.apply(e,n.segments);n.attributes.contentProtection&&(t[i].attributes.contentProtection=n.attributes.contentProtection)}else t[i]=n,t[i].attributes.timelineStarts=[];return t[i].attributes.timelineStarts.push({start:n.attributes.periodStart,timeline:n.attributes.periodStart}),t}),{})).map((function(t){return t.discontinuityStarts=function(t,n){return t.reduce((function(t,i,e){return i[n]&&t.push(e),t}),[])}(t.segments||[],"discontinuity"),t}))},Rs=function(t,n){var i=Ms(t.sidx),e=i&&n[i]&&n[i].sidx;return e&&Ss(t,e,t.sidx.resolvedUri),t},Us=function(t,n){if(void 0===n&&(n={}),!Object.keys(n).length)return t;for(var i in t)t[i]=Rs(t[i],n);return t},Ps=function(t){var n,i=t.attributes,e=t.segments,r=t.sidx,s=t.discontinuityStarts,o={attributes:(n={NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth},n["PROGRAM-ID"]=1,n),uri:"",endList:"static"===i.type,timeline:i.periodStart,resolvedUri:"",targetDuration:i.duration,discontinuityStarts:s,timelineStarts:i.timelineStarts,segments:e};return i.contentProtection&&(o.contentProtection=i.contentProtection),r&&(o.sidx=r),o},Ls=function(t){var n=t.attributes;return"video/mp4"===n.mimeType||"video/webm"===n.mimeType||"video"===n.contentType},Bs=function(t){var n=t.attributes;return"audio/mp4"===n.mimeType||"audio/webm"===n.mimeType||"audio"===n.contentType},Fs=function(t){var n=t.attributes;return"text/vtt"===n.mimeType||"text"===n.contentType},_s=function(t){return t?Object.keys(t).reduce((function(n,i){var e=t[i];return n.concat(e.playlists)}),[]):[]},zs=function(t){var n,i=t.dashPlaylists,e=t.locations,r=t.sidxMapping,s=void 0===r?{}:r,o=t.previousManifest;if(!i.length)return{};var a=i[0].attributes,u=a.sourceDuration,h=a.type,c=a.suggestedPresentationDelay,f=a.minimumUpdatePeriod,l=Cs(i.filter(Ls)).map(Ps),v=Cs(i.filter(Bs)),d=Cs(i.filter(Fs)),p=i.map((function(t){return t.attributes.captionServices})).filter(Boolean),m={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(n={AUDIO:{},VIDEO:{}},n["CLOSED-CAPTIONS"]={},n.SUBTITLES={},n),uri:"",duration:u,playlists:Us(l,s)};f>=0&&(m.minimumUpdatePeriod=1e3*f),e&&(m.locations=e),"dynamic"===h&&(m.suggestedPresentationDelay=c);var g,b,y=0===m.playlists.length,j=v.length?function(t,n,i){var e;void 0===n&&(n={}),void 0===i&&(i=!1);var r=t.reduce((function(t,r){var s=r.attributes.role&&r.attributes.role.value||"",o=r.attributes.lang||"",a=r.attributes.label||"main";if(o&&!r.attributes.label){var u=s?" ("+s+")":"";a=""+r.attributes.lang+u}t[a]||(t[a]={language:o,autoselect:!0,default:"main"===s,playlists:[],uri:""});var h=Rs(function(t,n){var i,e=t.attributes,r=t.segments,s=t.sidx,o=t.mediaSequence,a=t.discontinuitySequence,u=t.discontinuityStarts,h={attributes:(i={NAME:e.id,BANDWIDTH:e.bandwidth,CODECS:e.codecs},i["PROGRAM-ID"]=1,i),uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:"",targetDuration:e.duration,discontinuitySequence:a,discontinuityStarts:u,timelineStarts:e.timelineStarts,mediaSequence:o,segments:r};return e.contentProtection&&(h.contentProtection=e.contentProtection),s&&(h.sidx=s),n&&(h.attributes.AUDIO="audio",h.attributes.SUBTITLES="subs"),h}(r,i),n);return t[a].playlists.push(h),void 0===e&&"main"===s&&((e=r).default=!0),t}),{});return e||(r[Object.keys(r)[0]].default=!0),r}(v,s,y):null,w=d.length?function(t,n){return void 0===n&&(n={}),t.reduce((function(t,i){var e=i.attributes.lang||"text";return t[e]||(t[e]={language:e,default:!1,autoselect:!1,playlists:[],uri:""}),t[e].playlists.push(Rs(function(t){var n,i=t.attributes,e=t.segments,r=t.mediaSequence,s=t.discontinuityStarts,o=t.discontinuitySequence;void 0===e&&(e=[{uri:i.baseUrl,timeline:i.periodStart,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration);var a=((n={NAME:i.id,BANDWIDTH:i.bandwidth})["PROGRAM-ID"]=1,n);return i.codecs&&(a.CODECS=i.codecs),{attributes:a,uri:"",endList:"static"===i.type,timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,timelineStarts:i.timelineStarts,discontinuityStarts:s,discontinuitySequence:o,mediaSequence:r,segments:e}}(i),n)),t}),{})}(d,s):null,T=l.concat(_s(j),_s(w)),A=T.map((function(t){return t.timelineStarts}));return m.timelineStarts=Is(A),g=T,b=m.timelineStarts,g.forEach((function(t){t.mediaSequence=0,t.discontinuitySequence=ds(b,(function(n){return n.timeline===t.timeline})),t.segments&&t.segments.forEach((function(t,n){t.number=n}))})),j&&(m.mediaGroups.AUDIO.audio=j),w&&(m.mediaGroups.SUBTITLES.subs=w),p.length&&(m.mediaGroups["CLOSED-CAPTIONS"].cc=p.reduce((function(t,n){return n?(n.forEach((function(n){var i=n.channel,e=n.language;t[e]={autoselect:!1,default:!1,instreamId:i,language:e},n.hasOwnProperty("aspectRatio")&&(t[e].aspectRatio=n.aspectRatio),n.hasOwnProperty("easyReader")&&(t[e].easyReader=n.easyReader),n.hasOwnProperty("3D")&&(t[e]["3D"]=n["3D"])})),t):t}),{})),o?Ns({oldManifest:o,newManifest:m}):m},Vs=function(t,n,i){var e=t.NOW,r=t.clientOffset,s=t.availabilityStartTime,o=t.timescale,a=void 0===o?1:o,u=t.periodStart,h=void 0===u?0:u,c=t.minimumUpdatePeriod,f=(e+r)/1e3+(void 0===c?0:c)-(s+h);return Math.ceil((f*a-n)/i)},Hs=function(t,n){for(var i=t.type,e=t.minimumUpdatePeriod,r=void 0===e?0:e,s=t.media,o=void 0===s?"":s,a=t.sourceDuration,u=t.timescale,h=void 0===u?1:u,c=t.startNumber,f=void 0===c?1:c,l=t.periodStart,v=[],d=-1,p=0;p<n.length;p++){var m=n[p],g=m.d,b=m.r||0,y=m.t||0;d<0&&(d=y),y&&y>d&&(d=y);var j=void 0;if(b<0){var w=p+1;j=w===n.length?"dynamic"===i&&r>0&&o.indexOf("$Number$")>0?Vs(t,d,g):(a*h-d)/g:(n[w].t-d)/g}else j=b+1;for(var T=f+v.length+j,A=f+v.length;A<T;)v.push({number:A,duration:g/h,time:d,timeline:l}),d+=g,A++}return v},Xs=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,qs=function(t,n){return t.replace(Xs,function(t){return function(n,i,e,r){if("$$"===n)return"$";if(void 0===t[i])return n;var s=""+t[i];return"RepresentationID"===i?s:(r=e?parseInt(r,10):1,s.length>=r?s:""+new Array(r-s.length+1).join("0")+s)}}(n))},Gs=function(t,n){var i={RepresentationID:t.id,Bandwidth:t.bandwidth||0},e=t.initialization,r=void 0===e?{sourceURL:"",range:""}:e,s=ws({baseUrl:t.baseUrl,source:qs(r.sourceURL,i),range:r.range});return function(t,n){return t.duration||n?t.duration?ks(t):Hs(t,n):[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodStart}]}(t,n).map((function(n){i.Number=n.number,i.Time=n.time;var e=qs(t.media||"",i),r=t.timescale||1,o=t.presentationTimeOffset||0,a=t.periodStart+(n.time-o)/r;return{uri:e,timeline:n.timeline,duration:n.duration,resolvedUri:os.default(t.baseUrl||"",e),map:s,number:n.number,presentationTime:a}}))},Ws=function(t,n){var i=t.duration,e=t.segmentUrls,r=void 0===e?[]:e,s=t.periodStart;if(!i&&!n||i&&n)throw new Error(ys);var o,a=r.map((function(n){return function(t,n){var i=t.baseUrl,e=t.initialization,r=void 0===e?{}:e,s=ws({baseUrl:i,source:r.sourceURL,range:r.range}),o=ws({baseUrl:i,source:n.media,range:n.mediaRange});return o.map=s,o}(t,n)}));return i&&(o=ks(t)),n&&(o=Hs(t,n)),o.map((function(n,i){if(a[i]){var e=a[i],r=t.timescale||1,o=t.presentationTimeOffset||0;return e.timeline=n.timeline,e.duration=n.duration,e.number=n.number,e.presentationTime=s+(n.time-o)/r,e}})).filter((function(t){return t}))},Ys=function(t){var n,i,e=t.attributes,r=t.segmentInfo;r.template?(i=Gs,n=cs(e,r.template)):r.base?(i=xs,n=cs(e,r.base)):r.list&&(i=Ws,n=cs(e,r.list));var s={attributes:e};if(!i)return s;var o=i(n,r.segmentTimeline);if(n.duration){var a=n,u=a.duration,h=a.timescale,c=void 0===h?1:h;n.duration=u/c}else o.length?n.duration=o.reduce((function(t,n){return Math.max(t,Math.ceil(n.duration))}),0):n.duration=0;return s.attributes=n,s.segments=o,r.base&&n.indexRange&&(s.sidx=o[0],s.segments=[]),s},Js=function(t){return t.map(Ys)},Qs=function(t,n){return vs(t.childNodes).filter((function(t){return t.tagName===n}))},$s=function(t){return t.textContent.trim()},Ks=function(t){var n=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!n)return 0;var i=n.slice(1),e=i[0],r=i[1],s=i[2],o=i[3],a=i[4],u=i[5];return 31536e3*parseFloat(e||0)+2592e3*parseFloat(r||0)+86400*parseFloat(s||0)+3600*parseFloat(o||0)+60*parseFloat(a||0)+parseFloat(u||0)},Zs={mediaPresentationDuration:function(t){return Ks(t)},availabilityStartTime:function(t){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(n=t)&&(n+="Z"),Date.parse(n)/1e3;var n},minimumUpdatePeriod:function(t){return Ks(t)},suggestedPresentationDelay:function(t){return Ks(t)},type:function(t){return t},timeShiftBufferDepth:function(t){return Ks(t)},start:function(t){return Ks(t)},width:function(t){return parseInt(t,10)},height:function(t){return parseInt(t,10)},bandwidth:function(t){return parseInt(t,10)},startNumber:function(t){return parseInt(t,10)},timescale:function(t){return parseInt(t,10)},presentationTimeOffset:function(t){return parseInt(t,10)},duration:function(t){var n=parseInt(t,10);return isNaN(n)?Ks(t):n},d:function(t){return parseInt(t,10)},t:function(t){return parseInt(t,10)},r:function(t){return parseInt(t,10)},DEFAULT:function(t){return t}},to=function(t){return t&&t.attributes?vs(t.attributes).reduce((function(t,n){var i=Zs[n.name]||Zs.DEFAULT;return t[n.name]=i(n.value),t}),{}):{}},no={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},io=function(t,n){return n.length?ls(t.map((function(t){return n.map((function(n){return os.default(t,$s(n))}))}))):t},eo=function(t){var n=Qs(t,"SegmentTemplate")[0],i=Qs(t,"SegmentList")[0],e=i&&Qs(i,"SegmentURL").map((function(t){return cs({tag:"SegmentURL"},to(t))})),r=Qs(t,"SegmentBase")[0],s=i||n,o=s&&Qs(s,"SegmentTimeline")[0],a=i||r||n,u=a&&Qs(a,"Initialization")[0],h=n&&to(n);h&&u?h.initialization=u&&to(u):h&&h.initialization&&(h.initialization={sourceURL:h.initialization});var c={template:h,segmentTimeline:o&&Qs(o,"S").map((function(t){return to(t)})),list:i&&cs(to(i),{segmentUrls:e,initialization:to(u)}),base:r&&cs(to(r),{initialization:to(u)})};return Object.keys(c).forEach((function(t){c[t]||delete c[t]})),c},ro=function(t,n,i){return function(e){var r,s=to(e),o=io(n,Qs(e,"BaseURL")),a=Qs(e,"Role")[0],u={role:to(a)},h=cs(t,s,u),c=Qs(e,"Accessibility")[0],f="urn:scte:dash:cc:cea-608:2015"===(r=to(c)).schemeIdUri?("string"!=typeof r.value?[]:r.value.split(";")).map((function(t){var n,i;if(i=t,/^CC\d=/.test(t)){var e=t.split("=");n=e[0],i=e[1]}else/^CC\d$/.test(t)&&(n=t);return{channel:n,language:i}})):"urn:scte:dash:cc:cea-708:2015"===r.schemeIdUri?("string"!=typeof r.value?[]:r.value.split(";")).map((function(t){var n={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){var i=t.split("="),e=i[0],r=i[1],s=void 0===r?"":r;n.channel=e,n.language=t,s.split(",").forEach((function(t){var i=t.split(":"),e=i[0],r=i[1];"lang"===e?n.language=r:"er"===e?n.easyReader=Number(r):"war"===e?n.aspectRatio=Number(r):"3D"===e&&(n["3D"]=Number(r))}))}else n.language=t;return n.channel&&(n.channel="SERVICE"+n.channel),n})):void 0;f&&(h=cs(h,{captionServices:f}));var l=Qs(e,"Label")[0];if(l&&l.childNodes.length){var v=l.childNodes[0].nodeValue.trim();h=cs(h,{label:v})}var d=Qs(e,"ContentProtection").reduce((function(t,n){var i=to(n),e=no[i.schemeIdUri];if(e){t[e]={attributes:i};var r=Qs(n,"cenc:pssh")[0];if(r){var s=$s(r),o=s&&us.default(s);t[e].pssh=o}}return t}),{});Object.keys(d).length&&(h=cs(h,{contentProtection:d}));var p=eo(e),m=Qs(e,"Representation"),g=cs(i,p);return ls(m.map(function(t,n,i){return function(e){var r=Qs(e,"BaseURL"),s=io(n,r),o=cs(t,to(e)),a=eo(e);return s.map((function(t){return{segmentInfo:cs(i,a),attributes:cs(o,{baseUrl:t})}}))}}(h,o,g)))}},so=function(t,n){return function(i,e){var r=io(n,Qs(i.node,"BaseURL")),s=cs(t,{periodStart:i.attributes.start});"number"==typeof i.attributes.duration&&(s.periodDuration=i.attributes.duration);var o=Qs(i.node,"AdaptationSet"),a=eo(i.node);return ls(o.map(ro(s,r,a)))}},oo=function(t,n){void 0===n&&(n={});var i=n,e=i.manifestUri,r=void 0===e?"":e,s=i.NOW,o=void 0===s?Date.now():s,a=i.clientOffset,u=void 0===a?0:a,h=Qs(t,"Period");if(!h.length)throw new Error(ps);var c=Qs(t,"Location"),f=to(t),l=io([r],Qs(t,"BaseURL"));f.type=f.type||"static",f.sourceDuration=f.mediaPresentationDuration||0,f.NOW=o,f.clientOffset=u,c.length&&(f.locations=c.map($s));var v=[];return h.forEach((function(t,n){var i=to(t),e=v[n-1];i.start=function(t){var n=t.attributes,i=t.priorPeriodAttributes,e=t.mpdType;return"number"==typeof n.start?n.start:i&&"number"==typeof i.start&&"number"==typeof i.duration?i.start+i.duration:i||"static"!==e?null:0}({attributes:i,priorPeriodAttributes:e?e.attributes:null,mpdType:f.type}),v.push({node:t,attributes:i})})),{locations:f.locations,representationInfo:ls(v.map(so(f,l)))}},ao=function(t){if(""===t)throw new Error(ms);var n,i,e=new rs.DOMParser;try{i=(n=e.parseFromString(t,"application/xml"))&&"MPD"===n.documentElement.tagName?n.documentElement:null}catch(t){}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(gs);return i};se.VERSION="0.21.0";var uo=se.addSidxSegmentsToPlaylist=Ss,ho=se.generateSidxKey=Ms;se.inheritAttributes=oo;var co=se.parse=function(t,n){void 0===n&&(n={});var i=oo(ao(t),n),e=Js(i.representationInfo);return zs({dashPlaylists:e,locations:i.locations,sidxMapping:n.sidxMapping,previousManifest:n.previousManifest})},fo=se.parseUTCTiming=function(t){return function(t){var n=Qs(t,"UTCTiming")[0];if(!n)return null;var i=to(n);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(js)}return i}(ao(t))};se.stringToMpdXml=ao,se.toM3u8=zs,se.toPlaylists=Js;var lo=Math.pow(2,32),vo=function(t){var n,i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.getBigUint64?(n=i.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(n):n:i.getUint32(0)*lo+i.getUint32(4)},po=function(t){var n=new DataView(t.buffer,t.byteOffset,t.byteLength),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8)},e=12;0===i.version?(i.earliestPresentationTime=n.getUint32(e),i.firstOffset=n.getUint32(e+4),e+=8):(i.earliestPresentationTime=vo(t.subarray(e)),i.firstOffset=vo(t.subarray(e+8)),e+=16),e+=2;var r=n.getUint16(e);for(e+=2;r>0;e+=12,r--)i.references.push({referenceType:(128&t[e])>>>7,referencedSize:2147483647&n.getUint32(e),subsegmentDuration:n.getUint32(e+4),startsWithSap:!!(128&t[e+8]),sapType:(112&t[e+8])>>>4,sapDeltaTime:268435455&n.getUint32(e+8)});return i},mo=function(t){return function(t){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer}(t)},go=function(t){return t instanceof Uint8Array?t:(Array.isArray(t)||mo(t)||t instanceof ArrayBuffer||(t="number"!=typeof t||"number"==typeof t&&t!=t?0:[t]),new Uint8Array(t&&t.buffer||t,t&&t.byteOffset||0,t&&t.byteLength||0))},bo=bt.BigInt||Number,yo=[bo("0x1"),bo("0x100"),bo("0x10000"),bo("0x1000000"),bo("0x100000000"),bo("0x10000000000"),bo("0x1000000000000"),bo("0x100000000000000"),bo("0x10000000000000000")];!function(){var t=new Uint16Array([65484]),n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);255===n[0]||n[0]}();var jo=function(t,n){var i=void 0===n?{}:n,e=i.signed,r=void 0!==e&&e,s=i.le,o=void 0!==s&&s;t=go(t);var a=o?"reduce":"reduceRight",u=(t[a]?t[a]:Array.prototype[a]).call(t,(function(n,i,e){var r=o?e:Math.abs(e+1-t.length);return n+bo(i)*yo[r]}),bo(0));if(r){var h=yo[t.length]/bo(2)-bo(1);(u=bo(u))>h&&(u-=h,u-=h,u-=bo(2))}return Number(u)},wo=function(t,n){var i=(void 0===n?{}:n).le,e=void 0!==i&&i;("bigint"!=typeof t&&"number"!=typeof t||"number"==typeof t&&t!=t)&&(t=0);for(var r=function(t){return Math.ceil(function(t){return t.toString(2).length}(t)/8)}(t=bo(t)),s=new Uint8Array(new ArrayBuffer(r)),o=0;o<r;o++){var a=e?o:Math.abs(o+1-s.length);s[a]=Number(t/yo[o]&bo(255)),t<0&&(s[a]=Math.abs(~s[a]),s[a]-=0===o?1:2)}return s},To=function(t,n){if("string"!=typeof t&&t&&"function"==typeof t.toString&&(t=t.toString()),"string"!=typeof t)return new Uint8Array;n||(t=unescape(encodeURIComponent(t)));for(var i=new Uint8Array(t.length),e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i},Ao=function(t,n,i){var e=void 0===i?{}:i,r=e.offset,s=void 0===r?0:r,o=e.mask,a=void 0===o?[]:o;t=go(t);var u=(n=go(n)).every?n.every:Array.prototype.every;return n.length&&t.length-s>=n.length&&u.call(n,(function(n,i){return n===(a[i]?a[i]&t[s+i]:t[s+i])}))},ko=go([73,68,51]),xo=function t(n,i){return void 0===i&&(i=0),(n=go(n)).length-i<10||!Ao(n,ko,{offset:i})?i:(i+=function(t,n){void 0===n&&(n=0);var i=(t=go(t))[n+5],e=t[n+6]<<21|t[n+7]<<14|t[n+8]<<7|t[n+9];return(16&i)>>4?e+20:e+10}(n,i),t(n,i))},So=function(t){return"string"==typeof t?To(t):t},Eo=function t(n,i,e){void 0===e&&(e=!1),i=function(t){return Array.isArray(t)?t.map((function(t){return So(t)})):[So(t)]}(i),n=go(n);var r=[];if(!i.length)return r;for(var s=0;s<n.length;){var o=(n[s]<<24|n[s+1]<<16|n[s+2]<<8|n[s+3])>>>0,a=n.subarray(s+4,s+8);if(0===o)break;var u=s+o;if(u>n.length){if(e)break;u=n.length}var h=n.subarray(s+8,u);Ao(a,i[0])&&(1===i.length?r.push(h):r.push.apply(r,t(h,i.slice(1),e))),s=u}return r},Io={EBML:go([26,69,223,163]),DocType:go([66,130]),Segment:go([24,83,128,103]),SegmentInfo:go([21,73,169,102]),Tracks:go([22,84,174,107]),Track:go([174]),TrackNumber:go([215]),DefaultDuration:go([35,227,131]),TrackEntry:go([174]),TrackType:go([131]),FlagDefault:go([136]),CodecID:go([134]),CodecPrivate:go([99,162]),VideoTrack:go([224]),AudioTrack:go([225]),Cluster:go([31,67,182,117]),Timestamp:go([231]),TimestampScale:go([42,215,177]),BlockGroup:go([160]),BlockDuration:go([155]),Block:go([161]),SimpleBlock:go([163])},Oo=[128,64,32,16,8,4,2,1],Do=function(t,n,i,e){void 0===i&&(i=!0),void 0===e&&(e=!1);var r=function(t){for(var n=1,i=0;i<Oo.length&&!(t&Oo[i]);i++)n++;return n}(t[n]),s=t.subarray(n,n+r);return i&&((s=Array.prototype.slice.call(t,n,n+r))[0]^=Oo[r-1]),{length:r,value:jo(s,{signed:e}),bytes:s}},No=function t(n){return"string"==typeof n?n.match(/.{1,2}/g).map((function(n){return t(n)})):"number"==typeof n?wo(n):n},Mo=function t(n,i,e){if(e>=i.length)return i.length;var r=Do(i,e,!1);if(Ao(n.bytes,r.bytes))return e;var s=Do(i,e+r.length);return t(n,i,e+s.length+s.value+r.length)},Co=function t(n,i){i=function(t){return Array.isArray(t)?t.map((function(t){return No(t)})):[No(t)]}(i),n=go(n);var e=[];if(!i.length)return e;for(var r=0;r<n.length;){var s=Do(n,r,!1),o=Do(n,r+s.length),a=r+s.length+o.length;127===o.value&&(o.value=Mo(s,n,a),o.value!==n.length&&(o.value-=a));var u=a+o.value>n.length?n.length:a+o.value,h=n.subarray(a,u);Ao(i[0],s.bytes)&&(1===i.length?e.push(h):e=e.concat(t(h,i.slice(1)))),r+=s.length+o.length+h.length}return e},Ro=go([0,0,0,1]),Uo=go([0,0,1]),Po=go([0,0,3]),Lo=function(t){for(var n=[],i=1;i<t.length-2;)Ao(t.subarray(i,i+3),Po)&&(n.push(i+2),i++),i++;if(0===n.length)return t;var e=t.length-n.length,r=new Uint8Array(e),s=0;for(i=0;i<e;s++,i++)s===n[0]&&(s++,n.shift()),r[i]=t[s];return r},Bo=function(t,n,i,e){void 0===e&&(e=1/0),t=go(t),i=[].concat(i);for(var r,s=0,o=0;s<t.length&&(o<e||r);){var a=void 0;if(Ao(t.subarray(s),Ro)?a=4:Ao(t.subarray(s),Uo)&&(a=3),a){if(o++,r)return Lo(t.subarray(r,s));var u=void 0;"h264"===n?u=31&t[s+a]:"h265"===n&&(u=t[s+a]>>1&63),-1!==i.indexOf(u)&&(r=s+a),s+=a+("h264"===n?1:2)}else s++}return t.subarray(0,0)},Fo={webm:go([119,101,98,109]),matroska:go([109,97,116,114,111,115,107,97]),flac:go([102,76,97,67]),ogg:go([79,103,103,83]),ac3:go([11,119]),riff:go([82,73,70,70]),avi:go([65,86,73]),wav:go([87,65,86,69]),"3gp":go([102,116,121,112,51,103]),mp4:go([102,116,121,112]),fmp4:go([115,116,121,112]),mov:go([102,116,121,112,113,116]),moov:go([109,111,111,118]),moof:go([109,111,111,102])},_o={aac:function(t){var n=xo(t);return Ao(t,[255,16],{offset:n,mask:[255,22]})},mp3:function(t){var n=xo(t);return Ao(t,[255,2],{offset:n,mask:[255,6]})},webm:function(t){var n=Co(t,[Io.EBML,Io.DocType])[0];return Ao(n,Fo.webm)},mkv:function(t){var n=Co(t,[Io.EBML,Io.DocType])[0];return Ao(n,Fo.matroska)},mp4:function(t){return!_o["3gp"](t)&&!_o.mov(t)&&(!(!Ao(t,Fo.mp4,{offset:4})&&!Ao(t,Fo.fmp4,{offset:4}))||(!(!Ao(t,Fo.moof,{offset:4})&&!Ao(t,Fo.moov,{offset:4}))||void 0))},mov:function(t){return Ao(t,Fo.mov,{offset:4})},"3gp":function(t){return Ao(t,Fo["3gp"],{offset:4})},ac3:function(t){var n=xo(t);return Ao(t,Fo.ac3,{offset:n})},ts:function(t){if(t.length<189&&t.length>=1)return 71===t[0];for(var n=0;n+188<t.length&&n<188;){if(71===t[n]&&71===t[n+188])return!0;n+=1}return!1},flac:function(t){var n=xo(t);return Ao(t,Fo.flac,{offset:n})},ogg:function(t){return Ao(t,Fo.ogg)},avi:function(t){return Ao(t,Fo.riff)&&Ao(t,Fo.avi,{offset:8})},wav:function(t){return Ao(t,Fo.riff)&&Ao(t,Fo.wav,{offset:8})},h264:function(t){return function(t,n,i){return Bo(t,"h264",n,i)}(t,7,3).length},h265:function(t){return function(t,n,i){return Bo(t,"h265",n,i)}(t,[32,33],3).length}},zo=Object.keys(_o).filter((function(t){return"ts"!==t&&"h264"!==t&&"h265"!==t})).concat(["ts","h264","h265"]);zo.forEach((function(t){var n=_o[t];_o[t]=function(t){return n(go(t))}}));var Vo,Ho,Xo,qo,Go=_o,Wo=function(t){t=go(t);for(var n=0;n<zo.length;n++){var i=zo[n];if(Go[i](t))return i}return""};for(var Yo,Jo=9e4,Qo=(Vo=function(t){return 9e4*t},Ho=function(t,n){return t*n},Xo=function(t){return t/9e4},qo=function(t,n){return t/n},{}),$o=function(t,n){return Qo[t]=Qo[t]||[],n&&(Qo[t]=Qo[t].concat(n)),Qo[t]},Ko=function(t,n){var i=$o(t).indexOf(n);return!(i<=-1)&&(Qo[t]=Qo[t].slice(),Qo[t].splice(i,1),!0)},Zo={prefixed:!0},ta=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],na=ta[0],ia=0
/**
 * @license
 * Video.js 7.18.1 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */;ia<ta.length;ia++)if(ta[ia][1]in hn){Yo=ta[ia];break}if(Yo){for(var ea=0;ea<Yo.length;ea++)Zo[na[ea]]=Yo[ea];Zo.prefixed=Yo[0]!==na[0]}var ra=[];var sa=function t(n){var i,e="info",r=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];i("log",e,n)};return i=function(t,n){return function(i,e,r){var s=n.levels[e],o=new RegExp("^("+s+")$");if("log"!==i&&r.unshift(i.toUpperCase()+":"),r.unshift(t+":"),ra){ra.push([].concat(r));var a=ra.length-1e3;ra.splice(0,a>0?a:0)}if(bt.console){var u=bt.console[i];u||"debug"!==i||(u=bt.console.info||bt.console.log),u&&s&&o.test(i)&&u[Array.isArray(r)?"apply":"call"](bt.console,r)}}}(n,r),r.createLogger=function(i){return t(n+": "+i)},r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e},r.level=function(t){if("string"==typeof t){if(!r.levels.hasOwnProperty(t))throw new Error('"'+t+'" in not a valid log level');e=t}return e},(r.history=function(){return ra?[].concat(ra):[]}).filter=function(t){return(ra||[]).filter((function(n){return new RegExp(".*"+t+".*").test(n[0])}))},r.history.clear=function(){ra&&(ra.length=0)},r.history.disable=function(){null!==ra&&(ra.length=0,ra=null)},r.history.enable=function(){null===ra&&(ra=[])},r.error=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i("error",e,n)},r.warn=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i("warn",e,n)},r.debug=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i("debug",e,n)},r}("VIDEOJS"),oa=sa.createLogger,aa=Object.prototype.toString,ua=function(t){return fa(t)?Object.keys(t):[]};function ha(t,n){ua(t).forEach((function(i){return n(t[i],i)}))}function ca(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),e=1;e<n;e++)i[e-1]=arguments[e];return Object.assign?fn.apply(void 0,[t].concat(i)):(i.forEach((function(n){n&&ha(n,(function(n,i){t[i]=n}))})),t)}function fa(t){return!!t&&"object"==typeof t}function la(t){return fa(t)&&"[object Object]"===aa.call(t)&&t.constructor===Object}function va(t,n){if(!t||!n)return"";if("function"==typeof bt.getComputedStyle){var i;try{i=bt.getComputedStyle(t)}catch(t){return""}return i?i.getPropertyValue(n)||i[n]:""}return""}var da,pa=bt.navigator&&bt.navigator.userAgent||"",ma=/AppleWebKit\/([\d.]+)/i.exec(pa),ga=ma?parseFloat(ma.pop()):null,ba=/iPod/i.test(pa),ya=(da=pa.match(/OS (\d+)_/i))&&da[1]?da[1]:null,ja=/Android/i.test(pa),wa=function(){var t=pa.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;var n=t[1]&&parseFloat(t[1]),i=t[2]&&parseFloat(t[2]);return n&&i?parseFloat(t[1]+"."+t[2]):n||null}(),Ta=ja&&wa<5&&ga<537,Aa=/Firefox/i.test(pa),ka=/Edg/i.test(pa),xa=!ka&&(/Chrome/i.test(pa)||/CriOS/i.test(pa)),Sa=function(){var t=pa.match(/(Chrome|CriOS)\/(\d+)/);return t&&t[2]?parseFloat(t[2]):null}(),Ea=function(){var t=/MSIE\s(\d+)\.\d/.exec(pa),n=t&&parseFloat(t[1]);return!n&&/Trident\/7.0/i.test(pa)&&/rv:11.0/.test(pa)&&(n=11),n}(),Ia=/Safari/i.test(pa)&&!xa&&!ja&&!ka,Oa=/Windows/i.test(pa),Da=Boolean(Ba()&&("ontouchstart"in bt||bt.navigator.maxTouchPoints||bt.DocumentTouch&&bt.document instanceof bt.DocumentTouch)),Na=/iPad/i.test(pa)||Ia&&Da&&!/iPhone/i.test(pa),Ma=/iPhone/i.test(pa)&&!Na,Ca=Ma||Na||ba,Ra=(Ia||Ca)&&!xa,Ua=Object.freeze({__proto__:null,IS_IPOD:ba,IOS_VERSION:ya,IS_ANDROID:ja,ANDROID_VERSION:wa,IS_NATIVE_ANDROID:Ta,IS_FIREFOX:Aa,IS_EDGE:ka,IS_CHROME:xa,CHROME_VERSION:Sa,IE_VERSION:Ea,IS_SAFARI:Ia,IS_WINDOWS:Oa,TOUCH_ENABLED:Da,IS_IPAD:Na,IS_IPHONE:Ma,IS_IOS:Ca,IS_ANY_SAFARI:Ra});function Pa(t){return"string"==typeof t&&Boolean(t.trim())}function La(t){if(t.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function Ba(){return hn===bt.document}function Fa(t){return fa(t)&&1===t.nodeType}function _a(){try{return bt.parent!==bt.self}catch(t){return!0}}function za(t){return function(n,i){if(!Pa(n))return hn[t](null);Pa(i)&&(i=hn.querySelector(i));var e=Fa(i)?i:hn;return e[t]&&e[t](n)}}function Va(t,n,i,e){void 0===t&&(t="div"),void 0===n&&(n={}),void 0===i&&(i={});var r=hn.createElement(t);return Object.getOwnPropertyNames(n).forEach((function(t){var i=n[t];-1!==t.indexOf("aria-")||"role"===t||"type"===t?(sa.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+t+" to "+i+"."),r.setAttribute(t,i)):"textContent"===t?Ha(r,i):r[t]===i&&"tabIndex"!==t||(r[t]=i)})),Object.getOwnPropertyNames(i).forEach((function(t){r.setAttribute(t,i[t])})),e&&uu(r,e),r}function Ha(t,n){return void 0===t.textContent?t.innerText=n:t.textContent=n,t}function Xa(t,n){n.firstChild?n.insertBefore(t,n.firstChild):n.appendChild(t)}function qa(t,n){return La(n),t.classList?t.classList.contains(n):(i=n,new RegExp("(^|\\s)"+i+"($|\\s)")).test(t.className);var i}function Ga(t,n){return t.classList?t.classList.add(n):qa(t,n)||(t.className=(t.className+" "+n).trim()),t}function Wa(t,n){return t?(t.classList?t.classList.remove(n):(La(n),t.className=t.className.split(/\s+/).filter((function(t){return t!==n})).join(" ")),t):(sa.warn("removeClass was called with an element that doesn't exist"),null)}function Ya(t,n,i){var e=qa(t,n);if("function"==typeof i&&(i=i(t,n)),"boolean"!=typeof i&&(i=!e),i!==e)return i?Ga(t,n):Wa(t,n),t}function Ja(t,n){Object.getOwnPropertyNames(n).forEach((function(i){var e=n[i];null==e||!1===e?t.removeAttribute(i):t.setAttribute(i,!0===e?"":e)}))}function Qa(t){var n={},i=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(t&&t.attributes&&t.attributes.length>0)for(var e=t.attributes,r=e.length-1;r>=0;r--){var s=e[r].name,o=e[r].value;"boolean"!=typeof t[s]&&-1===i.indexOf(","+s+",")||(o=null!==o),n[s]=o}return n}function $a(t,n){return t.getAttribute(n)}function Ka(t,n,i){t.setAttribute(n,i)}function Za(t,n){t.removeAttribute(n)}function tu(){hn.body.focus(),hn.onselectstart=function(){return!1}}function nu(){hn.onselectstart=function(){return!0}}function iu(t){if(t&&t.getBoundingClientRect&&t.parentNode){var n=t.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach((function(t){void 0!==n[t]&&(i[t]=n[t])})),i.height||(i.height=parseFloat(va(t,"height"))),i.width||(i.width=parseFloat(va(t,"width"))),i}}function eu(t){if(!t||t&&!t.offsetParent)return{left:0,top:0,width:0,height:0};for(var n=t.offsetWidth,i=t.offsetHeight,e=0,r=0;t.offsetParent&&t!==hn[Zo.fullscreenElement];)e+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent;return{left:e,top:r,width:n,height:i}}function ru(t,n){var i={x:0,y:0};if(Ca)for(var e=t;e&&"html"!==e.nodeName.toLowerCase();){var r=va(e,"transform");if(/^matrix/.test(r)){var s=r.slice(7,-1).split(/,\s/).map(Number);i.x+=s[4],i.y+=s[5]}else if(/^matrix3d/.test(r)){var o=r.slice(9,-1).split(/,\s/).map(Number);i.x+=o[12],i.y+=o[13]}e=e.parentNode}var a={},u=eu(n.target),h=eu(t),c=h.width,f=h.height,l=n.offsetY-(h.top-u.top),v=n.offsetX-(h.left-u.left);return n.changedTouches&&(v=n.changedTouches[0].pageX-h.left,l=n.changedTouches[0].pageY+h.top,Ca&&(v-=i.x,l-=i.y)),a.y=1-Math.max(0,Math.min(1,l/f)),a.x=Math.max(0,Math.min(1,v/c)),a}function su(t){return fa(t)&&3===t.nodeType}function ou(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function au(t){return"function"==typeof t&&(t=t()),(Array.isArray(t)?t:[t]).map((function(t){return"function"==typeof t&&(t=t()),Fa(t)||su(t)?t:"string"==typeof t&&/\S/.test(t)?hn.createTextNode(t):void 0})).filter((function(t){return t}))}function uu(t,n){return au(n).forEach((function(n){return t.appendChild(n)})),t}function hu(t,n){return uu(ou(t),n)}function cu(t){return void 0===t.button&&void 0===t.buttons||(0===t.button&&void 0===t.buttons||("mouseup"===t.type&&0===t.button&&0===t.buttons||0===t.button&&1===t.buttons))}var fu,lu=za("querySelector"),vu=za("querySelectorAll"),du=Object.freeze({__proto__:null,isReal:Ba,isEl:Fa,isInFrame:_a,createEl:Va,textContent:Ha,prependTo:Xa,hasClass:qa,addClass:Ga,removeClass:Wa,toggleClass:Ya,setAttributes:Ja,getAttributes:Qa,getAttribute:$a,setAttribute:Ka,removeAttribute:Za,blockTextSelection:tu,unblockTextSelection:nu,getBoundingClientRect:iu,findPosition:eu,getPointerPosition:ru,isTextNode:su,emptyEl:ou,normalizeContent:au,appendContent:uu,insertContent:hu,isSingleLeftClick:cu,$:lu,$$:vu}),pu=!1,mu=function(){if(!1!==fu.options.autoSetup){var t=Array.prototype.slice.call(hn.getElementsByTagName("video")),n=Array.prototype.slice.call(hn.getElementsByTagName("audio")),i=Array.prototype.slice.call(hn.getElementsByTagName("video-js")),e=t.concat(n,i);if(e&&e.length>0)for(var r=0,s=e.length;r<s;r++){var o=e[r];if(!o||!o.getAttribute){gu(1);break}void 0===o.player&&null!==o.getAttribute("data-setup")&&fu(o)}else pu||gu(1)}};function gu(t,n){Ba()&&(n&&(fu=n),bt.setTimeout(mu,t))}function bu(){pu=!0,bt.removeEventListener("load",bu)}Ba()&&("complete"===hn.readyState?bu():bt.addEventListener("load",bu));var yu,ju=function(t){var n=hn.createElement("style");return n.className=t,n},wu=function(t,n){t.styleSheet?t.styleSheet.cssText=n:t.textContent=n},Tu=3;function Au(){return Tu++}bt.WeakMap||(yu=function(){function t(){this.vdata="vdata"+Math.floor(bt.performance&&bt.performance.now()||Date.now()),this.data={}}var n=t.prototype;return n.set=function(t,n){var i=t[this.vdata]||Au();return t[this.vdata]||(t[this.vdata]=i),this.data[i]=n,this},n.get=function(t){var n=t[this.vdata];if(n)return this.data[n];sa("We have no data for this element",t)},n.has=function(t){return t[this.vdata]in this.data},n.delete=function(t){var n=t[this.vdata];n&&(delete this.data[n],delete t[this.vdata])},t}());var ku,xu=bt.WeakMap?new WeakMap:new yu;function Su(t,n){if(xu.has(t)){var i=xu.get(t);0===i.handlers[n].length&&(delete i.handlers[n],t.removeEventListener?t.removeEventListener(n,i.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+n,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),0===Object.getOwnPropertyNames(i).length&&xu.delete(t)}}function Eu(t,n,i,e){i.forEach((function(i){t(n,i,e)}))}function Iu(t){if(t.fixed_)return t;function n(){return!0}function i(){return!1}if(!t||!t.isPropagationStopped||!t.isImmediatePropagationStopped){var e=t||bt.event;for(var r in t={},e)"layerX"!==r&&"layerY"!==r&&"keyLocation"!==r&&"webkitMovementX"!==r&&"webkitMovementY"!==r&&("returnValue"===r&&e.preventDefault||(t[r]=e[r]));if(t.target||(t.target=t.srcElement||hn),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){e.preventDefault&&e.preventDefault(),t.returnValue=!1,e.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){e.stopPropagation&&e.stopPropagation(),t.cancelBubble=!0,e.cancelBubble=!0,t.isPropagationStopped=n},t.isPropagationStopped=i,t.stopImmediatePropagation=function(){e.stopImmediatePropagation&&e.stopImmediatePropagation(),t.isImmediatePropagationStopped=n,t.stopPropagation()},t.isImmediatePropagationStopped=i,null!==t.clientX&&void 0!==t.clientX){var s=hn.documentElement,o=hn.body;t.pageX=t.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),t.pageY=t.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)}t.which=t.charCode||t.keyCode,null!==t.button&&void 0!==t.button&&(t.button=1&t.button?0:4&t.button?1:2&t.button?2:0)}return t.fixed_=!0,t}var Ou=["touchstart","touchmove"];function Du(t,n,i){if(Array.isArray(n))return Eu(Du,t,n,i);xu.has(t)||xu.set(t,{});var e=xu.get(t);if(e.handlers||(e.handlers={}),e.handlers[n]||(e.handlers[n]=[]),i.guid||(i.guid=Au()),e.handlers[n].push(i),e.dispatcher||(e.disabled=!1,e.dispatcher=function(n,i){if(!e.disabled){n=Iu(n);var r=e.handlers[n.type];if(r)for(var s=r.slice(0),o=0,a=s.length;o<a&&!n.isImmediatePropagationStopped();o++)try{s[o].call(t,n,i)}catch(t){sa.error(t)}}}),1===e.handlers[n].length)if(t.addEventListener){var r=!1;(function(){if("boolean"!=typeof ku){ku=!1;try{var t=Object.defineProperty({},"passive",{get:function(){ku=!0}});bt.addEventListener("test",null,t),bt.removeEventListener("test",null,t)}catch(t){}}return ku})()&&Ou.indexOf(n)>-1&&(r={passive:!0}),t.addEventListener(n,e.dispatcher,r)}else t.attachEvent&&t.attachEvent("on"+n,e.dispatcher)}function Nu(t,n,i){if(xu.has(t)){var e=xu.get(t);if(e.handlers){if(Array.isArray(n))return Eu(Nu,t,n,i);var r=function(t,n){e.handlers[n]=[],Su(t,n)};if(void 0!==n){var s=e.handlers[n];if(s)if(i){if(i.guid)for(var o=0;o<s.length;o++)s[o].guid===i.guid&&s.splice(o--,1);Su(t,n)}else r(t,n)}else for(var a in e.handlers)Object.prototype.hasOwnProperty.call(e.handlers||{},a)&&r(t,a)}}}function Mu(t,n,i){var e=xu.has(t)?xu.get(t):{},r=t.parentNode||t.ownerDocument;if("string"==typeof n?n={type:n,target:t}:n.target||(n.target=t),n=Iu(n),e.dispatcher&&e.dispatcher.call(t,n,i),r&&!n.isPropagationStopped()&&!0===n.bubbles)Mu.call(null,r,n,i);else if(!r&&!n.defaultPrevented&&n.target&&n.target[n.type]){xu.has(n.target)||xu.set(n.target,{});var s=xu.get(n.target);n.target[n.type]&&(s.disabled=!0,"function"==typeof n.target[n.type]&&n.target[n.type](),s.disabled=!1)}return!n.defaultPrevented}function Cu(t,n,i){if(Array.isArray(n))return Eu(Cu,t,n,i);var e=function e(){Nu(t,n,e),i.apply(this,arguments)};e.guid=i.guid=i.guid||Au(),Du(t,n,e)}function Ru(t,n,i){var e=function e(){Nu(t,n,e),i.apply(this,arguments)};e.guid=i.guid=i.guid||Au(),Du(t,n,e)}var Uu,Pu=Object.freeze({__proto__:null,fixEvent:Iu,on:Du,off:Nu,trigger:Mu,one:Cu,any:Ru}),Lu=function(t,n,i){n.guid||(n.guid=Au());var e=n.bind(t);return e.guid=i?i+"_"+n.guid:n.guid,e},Bu=function(t,n){var i=bt.performance.now();return function(){var e=bt.performance.now();e-i>=n&&(t.apply(void 0,arguments),i=e)}},Fu=function(){};Fu.prototype.allowedEvents_={},Fu.prototype.on=function(t,n){var i=this.addEventListener;this.addEventListener=function(){},Du(this,t,n),this.addEventListener=i},Fu.prototype.addEventListener=Fu.prototype.on,Fu.prototype.off=function(t,n){Nu(this,t,n)},Fu.prototype.removeEventListener=Fu.prototype.off,Fu.prototype.one=function(t,n){var i=this.addEventListener;this.addEventListener=function(){},Cu(this,t,n),this.addEventListener=i},Fu.prototype.any=function(t,n){var i=this.addEventListener;this.addEventListener=function(){},Ru(this,t,n),this.addEventListener=i},Fu.prototype.trigger=function(t){var n=t.type||t;"string"==typeof t&&(t={type:n}),t=Iu(t),this.allowedEvents_[n]&&this["on"+n]&&this["on"+n](t),Mu(this,t)},Fu.prototype.dispatchEvent=Fu.prototype.trigger,Fu.prototype.queueTrigger=function(t){var n=this;Uu||(Uu=new Map);var i=t.type||t,e=Uu.get(this);e||(e=new Map,Uu.set(this,e));var r=e.get(i);e.delete(i),bt.clearTimeout(r);var s=bt.setTimeout((function(){0===e.size&&(e=null,Uu.delete(n)),n.trigger(t)}),0);e.set(i,s)};var _u=function(t){return"function"==typeof t.name?t.name():"string"==typeof t.name?t.name:t.name_?t.name_:t.constructor&&t.constructor.name?t.constructor.name:typeof t},zu=function(t){return t instanceof Fu||!!t.eventBusEl_&&["on","one","off","trigger"].every((function(n){return"function"==typeof t[n]}))},Vu=function(t){return"string"==typeof t&&/\S/.test(t)||Array.isArray(t)&&!!t.length},Hu=function(t,n,i){if(!t||!t.nodeName&&!zu(t))throw new Error("Invalid target for "+_u(n)+"#"+i+"; must be a DOM node or evented object.")},Xu=function(t,n,i){if(!Vu(t))throw new Error("Invalid event type for "+_u(n)+"#"+i+"; must be a non-empty string or array.")},qu=function(t,n,i){if("function"!=typeof t)throw new Error("Invalid listener for "+_u(n)+"#"+i+"; must be a function.")},Gu=function(t,n,i){var e,r,s,o=n.length<3||n[0]===t||n[0]===t.eventBusEl_;return o?(e=t.eventBusEl_,n.length>=3&&n.shift(),r=n[0],s=n[1]):(e=n[0],r=n[1],s=n[2]),Hu(e,t,i),Xu(r,t,i),qu(s,t,i),{isTargetingSelf:o,target:e,type:r,listener:s=Lu(t,s)}},Wu=function(t,n,i,e){Hu(t,t,n),t.nodeName?Pu[n](t,i,e):t[n](i,e)},Yu={on:function(){for(var t=this,n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];var r=Gu(this,i,"on"),s=r.isTargetingSelf,o=r.target,a=r.type,u=r.listener;if(Wu(o,"on",a,u),!s){var h=function(){return t.off(o,a,u)};h.guid=u.guid;var c=function(){return t.off("dispose",h)};c.guid=u.guid,Wu(this,"on","dispose",h),Wu(o,"on","dispose",c)}},one:function(){for(var t=this,n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];var r=Gu(this,i,"one"),s=r.isTargetingSelf,o=r.target,a=r.type,u=r.listener;if(s)Wu(o,"one",a,u);else{var h=function n(){t.off(o,a,n);for(var i=arguments.length,e=new Array(i),r=0;r<i;r++)e[r]=arguments[r];u.apply(null,e)};h.guid=u.guid,Wu(o,"one",a,h)}},any:function(){for(var t=this,n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];var r=Gu(this,i,"any"),s=r.isTargetingSelf,o=r.target,a=r.type,u=r.listener;if(s)Wu(o,"any",a,u);else{var h=function n(){t.off(o,a,n);for(var i=arguments.length,e=new Array(i),r=0;r<i;r++)e[r]=arguments[r];u.apply(null,e)};h.guid=u.guid,Wu(o,"any",a,h)}},off:function(t,n,i){if(!t||Vu(t))Nu(this.eventBusEl_,t,n);else{var e=t,r=n;Hu(e,this,"off"),Xu(r,this,"off"),qu(i,this,"off"),i=Lu(this,i),this.off("dispose",i),e.nodeName?(Nu(e,r,i),Nu(e,"dispose",i)):zu(e)&&(e.off(r,i),e.off("dispose",i))}},trigger:function(t,n){Hu(this.eventBusEl_,this,"trigger");var i=t&&"string"!=typeof t?t.type:t;if(!Vu(i)){var e="Invalid event type for "+_u(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!t)throw new Error(e);(this.log||sa).error(e)}return Mu(this.eventBusEl_,t,n)}};function Ju(t,n){void 0===n&&(n={});var i=n.eventBusKey;if(i){if(!t[i].nodeName)throw new Error('The eventBusKey "'+i+'" does not refer to an element.');t.eventBusEl_=t[i]}else t.eventBusEl_=Va("span",{className:"vjs-event-bus"});return ca(t,Yu),t.eventedCallbacks&&t.eventedCallbacks.forEach((function(t){t()})),t.on("dispose",(function(){t.off(),[t,t.el_,t.eventBusEl_].forEach((function(t){t&&xu.has(t)&&xu.delete(t)})),bt.setTimeout((function(){t.eventBusEl_=null}),0)})),t}var Qu={state:{},setState:function(t){var n,i=this;return"function"==typeof t&&(t=t()),ha(t,(function(t,e){i.state[e]!==t&&((n=n||{})[e]={from:i.state[e],to:t}),i.state[e]=t})),n&&zu(this)&&this.trigger({changes:n,type:"statechanged"}),n}};function $u(t,n){return ca(t,Qu),t.state=ca({},t.state,n),"function"==typeof t.handleStateChanged&&zu(t)&&t.on("statechanged",t.handleStateChanged),t}var Ku=function(t){return"string"!=typeof t?t:t.replace(/./,(function(t){return t.toLowerCase()}))},Zu=function(t){return"string"!=typeof t?t:t.replace(/./,(function(t){return t.toUpperCase()}))};function th(){for(var t={},n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];return i.forEach((function(n){n&&ha(n,(function(n,i){la(n)?(la(t[i])||(t[i]={}),t[i]=th(t[i],n)):t[i]=n}))})),t}var nh=function(){function t(){this.map_={}}var n=t.prototype;return n.has=function(t){return t in this.map_},n.delete=function(t){var n=this.has(t);return delete this.map_[t],n},n.set=function(t,n){return this.map_[t]=n,this},n.forEach=function(t,n){for(var i in this.map_)t.call(n,this.map_[i],i,this)},t}(),ih=bt.Map?bt.Map:nh,eh=function(){function t(){this.set_={}}var n=t.prototype;return n.has=function(t){return t in this.set_},n.delete=function(t){var n=this.has(t);return delete this.set_[t],n},n.add=function(t){return this.set_[t]=1,this},n.forEach=function(t,n){for(var i in this.set_)t.call(n,i,i,this)},t}(),rh=bt.Set?bt.Set:eh,sh=function(){function t(t,n,i){if(!t&&this.play?this.player_=t=this:this.player_=t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=th({},this.options_),n=this.options_=th(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){var e=t&&t.id&&t.id()||"no_player";this.id_=e+"_component_"+Au()}this.name_=n.name||null,n.el?this.el_=n.el:!1!==n.createEl&&(this.el_=this.createEl()),!1!==n.evented&&(Ju(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),$u(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new rh,this.setIntervalIds_=new rh,this.rafIds_=new rh,this.namedRafs_=new ih,this.clearingTimersOnDispose_=!1,!1!==n.initChildren&&this.initChildren(),this.ready(i),!1!==n.reportTouchActivity&&this.enableTouchActivity()}var n=t.prototype;return n.dispose=function(){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),this.el_=null),this.player_=null}},n.isDisposed=function(){return Boolean(this.isDisposed_)},n.player=function(){return this.player_},n.options=function(t){return t?(this.options_=th(this.options_,t),this.options_):this.options_},n.el=function(){return this.el_},n.createEl=function(t,n,i){return Va(t,n,i)},n.localize=function(t,n,i){void 0===i&&(i=t);var e=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),s=r&&r[e],o=e&&e.split("-")[0],a=r&&r[o],u=i;return s&&s[t]?u=s[t]:a&&a[t]&&(u=a[t]),n&&(u=u.replace(/\{(\d+)\}/g,(function(t,i){var e=n[i-1],r=e;return void 0===e&&(r=t),r}))),u},n.handleLanguagechange=function(){},n.contentEl=function(){return this.contentEl_||this.el_},n.id=function(){return this.id_},n.name=function(){return this.name_},n.children=function(){return this.children_},n.getChildById=function(t){return this.childIndex_[t]},n.getChild=function(t){if(t)return this.childNameIndex_[t]},n.getDescendant=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];n=n.reduce((function(t,n){return t.concat(n)}),[]);for(var e=this,r=0;r<n.length;r++)if(!(e=e.getChild(n[r]))||!e.getChild)return;return e},n.addChild=function(n,i,e){var r,s;if(void 0===i&&(i={}),void 0===e&&(e=this.children_.length),"string"==typeof n){s=Zu(n);var o=i.componentClass||s;i.name=s;var a=t.getComponent(o);if(!a)throw new Error("Component "+o+" does not exist");if("function"!=typeof a)return null;r=new a(this.player_||this,i)}else r=n;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(e,0,r),r.parentComponent_=this,"function"==typeof r.id&&(this.childIndex_[r.id()]=r),(s=s||r.name&&Zu(r.name()))&&(this.childNameIndex_[s]=r,this.childNameIndex_[Ku(s)]=r),"function"==typeof r.el&&r.el()){var u=null;this.children_[e+1]&&(this.children_[e+1].el_?u=this.children_[e+1].el_:Fa(this.children_[e+1])&&(u=this.children_[e+1])),this.contentEl().insertBefore(r.el(),u)}return r},n.removeChild=function(t){if("string"==typeof t&&(t=this.getChild(t)),t&&this.children_){for(var n=!1,i=this.children_.length-1;i>=0;i--)if(this.children_[i]===t){n=!0,this.children_.splice(i,1);break}if(n){t.parentComponent_=null,this.childIndex_[t.id()]=null,this.childNameIndex_[Zu(t.name())]=null,this.childNameIndex_[Ku(t.name())]=null;var e=t.el();e&&e.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}}},n.initChildren=function(){var n=this,i=this.options_.children;if(i){var e,r=this.options_,s=t.getComponent("Tech");(e=Array.isArray(i)?i:Object.keys(i)).concat(Object.keys(this.options_).filter((function(t){return!e.some((function(n){return"string"==typeof n?t===n:t===n.name}))}))).map((function(t){var e,r;return"string"==typeof t?r=i[e=t]||n.options_[e]||{}:(e=t.name,r=t),{name:e,opts:r}})).filter((function(n){var i=t.getComponent(n.opts.componentClass||Zu(n.name));return i&&!s.isTech(i)})).forEach((function(t){var i=t.name,e=t.opts;if(void 0!==r[i]&&(e=r[i]),!1!==e){!0===e&&(e={}),e.playerOptions=n.options_.playerOptions;var s=n.addChild(i,e);s&&(n[i]=s)}}))}},n.buildCSSClass=function(){return""},n.ready=function(t,n){if(void 0===n&&(n=!1),t)return this.isReady_?void(n?t.call(this):this.setTimeout(t,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(t))},n.triggerReady=function(){this.isReady_=!0,this.setTimeout((function(){var t=this.readyQueue_;this.readyQueue_=[],t&&t.length>0&&t.forEach((function(t){t.call(this)}),this),this.trigger("ready")}),1)},n.$=function(t,n){return lu(t,n||this.contentEl())},n.$$=function(t,n){return vu(t,n||this.contentEl())},n.hasClass=function(t){return qa(this.el_,t)},n.addClass=function(t){Ga(this.el_,t)},n.removeClass=function(t){Wa(this.el_,t)},n.toggleClass=function(t,n){Ya(this.el_,t,n)},n.show=function(){this.removeClass("vjs-hidden")},n.hide=function(){this.addClass("vjs-hidden")},n.lockShowing=function(){this.addClass("vjs-lock-showing")},n.unlockShowing=function(){this.removeClass("vjs-lock-showing")},n.getAttribute=function(t){return $a(this.el_,t)},n.setAttribute=function(t,n){Ka(this.el_,t,n)},n.removeAttribute=function(t){Za(this.el_,t)},n.width=function(t,n){return this.dimension("width",t,n)},n.height=function(t,n){return this.dimension("height",t,n)},n.dimensions=function(t,n){this.width(t,!0),this.height(n)},n.dimension=function(t,n,i){if(void 0!==n)return null!==n&&n==n||(n=0),-1!==(""+n).indexOf("%")||-1!==(""+n).indexOf("px")?this.el_.style[t]=n:this.el_.style[t]="auto"===n?"":n+"px",void(i||this.trigger("componentresize"));if(!this.el_)return 0;var e=this.el_.style[t],r=e.indexOf("px");return-1!==r?parseInt(e.slice(0,r),10):parseInt(this.el_["offset"+Zu(t)],10)},n.currentDimension=function(t){var n=0;if("width"!==t&&"height"!==t)throw new Error("currentDimension only accepts width or height value");if(n=va(this.el_,t),0===(n=parseFloat(n))||isNaN(n)){var i="offset"+Zu(t);n=this.el_[i]}return n},n.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},n.currentWidth=function(){return this.currentDimension("width")},n.currentHeight=function(){return this.currentDimension("height")},n.focus=function(){this.el_.focus()},n.blur=function(){this.el_.blur()},n.handleKeyDown=function(t){this.player_&&(dn.isEventKey(t,"Tab")||t.stopPropagation(),this.player_.handleKeyDown(t))},n.handleKeyPress=function(t){this.handleKeyDown(t)},n.emitTapEvents=function(){var t,n=0,i=null;this.on("touchstart",(function(e){1===e.touches.length&&(i={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},n=bt.performance.now(),t=!0)})),this.on("touchmove",(function(n){if(n.touches.length>1)t=!1;else if(i){var e=n.touches[0].pageX-i.pageX,r=n.touches[0].pageY-i.pageY;Math.sqrt(e*e+r*r)>10&&(t=!1)}}));var e=function(){t=!1};this.on("touchleave",e),this.on("touchcancel",e),this.on("touchend",(function(e){(i=null,!0===t)&&(bt.performance.now()-n<200&&(e.preventDefault(),this.trigger("tap")))}))},n.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var t,n=Lu(this.player(),this.player().reportUserActivity);this.on("touchstart",(function(){n(),this.clearInterval(t),t=this.setInterval(n,250)}));var i=function(i){n(),this.clearInterval(t)};this.on("touchmove",n),this.on("touchend",i),this.on("touchcancel",i)}},n.setTimeout=function(t,n){var i,e=this;return t=Lu(this,t),this.clearTimersOnDispose_(),i=bt.setTimeout((function(){e.setTimeoutIds_.has(i)&&e.setTimeoutIds_.delete(i),t()}),n),this.setTimeoutIds_.add(i),i},n.clearTimeout=function(t){return this.setTimeoutIds_.has(t)&&(this.setTimeoutIds_.delete(t),bt.clearTimeout(t)),t},n.setInterval=function(t,n){t=Lu(this,t),this.clearTimersOnDispose_();var i=bt.setInterval(t,n);return this.setIntervalIds_.add(i),i},n.clearInterval=function(t){return this.setIntervalIds_.has(t)&&(this.setIntervalIds_.delete(t),bt.clearInterval(t)),t},n.requestAnimationFrame=function(t){var n,i=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),t=Lu(this,t),n=bt.requestAnimationFrame((function(){i.rafIds_.has(n)&&i.rafIds_.delete(n),t()})),this.rafIds_.add(n),n):this.setTimeout(t,1e3/60)},n.requestNamedAnimationFrame=function(t,n){var i=this;if(!this.namedRafs_.has(t)){this.clearTimersOnDispose_(),n=Lu(this,n);var e=this.requestAnimationFrame((function(){n(),i.namedRafs_.has(t)&&i.namedRafs_.delete(t)}));return this.namedRafs_.set(t,e),t}},n.cancelNamedAnimationFrame=function(t){this.namedRafs_.has(t)&&(this.cancelAnimationFrame(this.namedRafs_.get(t)),this.namedRafs_.delete(t))},n.cancelAnimationFrame=function(t){return this.supportsRaf_?(this.rafIds_.has(t)&&(this.rafIds_.delete(t),bt.cancelAnimationFrame(t)),t):this.clearTimeout(t)},n.clearTimersOnDispose_=function(){var t=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((function(n){var i=n[0],e=n[1];t[i].forEach((function(n,i){return t[e](i)}))})),t.clearingTimersOnDispose_=!1})))},t.registerComponent=function(n,i){if("string"!=typeof n||!n)throw new Error('Illegal component name, "'+n+'"; must be a non-empty string.');var e,r=t.getComponent("Tech"),s=r&&r.isTech(i),o=t===i||t.prototype.isPrototypeOf(i.prototype);if(s||!o)throw e=s?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+n+'"; '+e+".");n=Zu(n),t.components_||(t.components_={});var a=t.getComponent("Player");if("Player"===n&&a&&a.players){var u=a.players,h=Object.keys(u);if(u&&h.length>0&&h.map((function(t){return u[t]})).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return t.components_[n]=i,t.components_[Ku(n)]=i,i},t.getComponent=function(n){if(n&&t.components_)return t.components_[n]},t}();function oh(t,n,i,e){return function(t,n,i){if("number"!=typeof n||n<0||n>i)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+n+") is non-numeric or out of bounds (0-"+i+").")}(t,e,i.length-1),i[e][n]}function ah(t){var n;return n=void 0===t||0===t.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:t.length,start:oh.bind(null,"start",0,t),end:oh.bind(null,"end",1,t)},bt.Symbol&&bt.Symbol.iterator&&(n[bt.Symbol.iterator]=function(){return(t||[]).values()}),n}function uh(t,n){return Array.isArray(t)?ah(t):void 0===t||void 0===n?ah():ah([[t,n]])}function hh(t,n){var i,e,r=0;if(!n)return 0;t&&t.length||(t=uh(0,0));for(var s=0;s<t.length;s++)i=t.start(s),(e=t.end(s))>n&&(e=n),r+=e-i;return r/n}function ch(t){if(t instanceof ch)return t;"number"==typeof t?this.code=t:"string"==typeof t?this.message=t:fa(t)&&("number"==typeof t.code&&(this.code=t.code),ca(this,t)),this.message||(this.message=ch.defaultMessages[this.code]||"")}sh.prototype.supportsRaf_="function"==typeof bt.requestAnimationFrame&&"function"==typeof bt.cancelAnimationFrame,sh.registerComponent("Component",sh),ch.prototype.code=0,ch.prototype.message="",ch.prototype.status=null,ch.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],ch.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var fh=0;fh<ch.errorTypes.length;fh++)ch[ch.errorTypes[fh]]=fh,ch.prototype[ch.errorTypes[fh]]=fh;function lh(t){return null!=t&&"function"==typeof t.then}function vh(t){lh(t)&&t.then(null,(function(t){}))}var dh=function(t){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((function(n,i,e){return t[i]&&(n[i]=t[i]),n}),{cues:t.cues&&Array.prototype.map.call(t.cues,(function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}}))})},ph=function(t){var n=t.$$("track"),i=Array.prototype.map.call(n,(function(t){return t.track}));return Array.prototype.map.call(n,(function(t){var n=dh(t.track);return t.src&&(n.src=t.src),n})).concat(Array.prototype.filter.call(t.textTracks(),(function(t){return-1===i.indexOf(t)})).map(dh))},mh=function(t,n){return t.forEach((function(t){var i=n.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach((function(t){return i.addCue(t)}))})),n.textTracks()},gh=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).handleKeyDown_=function(t){return e.handleKeyDown(t)},e.close_=function(t){return e.close(t)},e.opened_=e.hasBeenOpened_=e.hasBeenFilled_=!1,e.closeable(!e.options_.uncloseable),e.content(e.options_.content),e.contentEl_=Va("div",{className:"vjs-modal-dialog-content"},{role:"document"}),e.descEl_=Va("p",{className:"vjs-modal-dialog-description vjs-control-text",id:e.el().getAttribute("aria-describedby")}),Ha(e.descEl_,e.description()),e.el_.appendChild(e.descEl_),e.el_.appendChild(e.contentEl_),e}yn(n,t);var i=n.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},i.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,t.prototype.dispose.call(this)},i.buildCSSClass=function(){return"vjs-modal-dialog vjs-hidden "+t.prototype.buildCSSClass.call(this)},i.label=function(){return this.localize(this.options_.label||"Modal Window")},i.description=function(){var t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t},i.open=function(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},i.opened=function(t){return"boolean"==typeof t&&this[t?"open":"close"](),this.opened_},i.close=function(){if(this.opened_){var t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},i.closeable=function(t){if("boolean"==typeof t){var n=this.closeable_=!!t,i=this.getChild("closeButton");if(n&&!i){var e=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=e,this.on(i,"close",this.close_)}!n&&i&&(this.off(i,"close",this.close_),this.removeChild(i),i.dispose())}return this.closeable_},i.fill=function(){this.fillWith(this.content())},i.fillWith=function(t){var n=this.contentEl(),i=n.parentNode,e=n.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(n),this.empty(),hu(n,t),this.trigger("modalfill"),e?i.insertBefore(n,e):i.appendChild(n);var r=this.getChild("closeButton");r&&i.appendChild(r.el_)},i.empty=function(){this.trigger("beforemodalempty"),ou(this.contentEl()),this.trigger("modalempty")},i.content=function(t){return void 0!==t&&(this.content_=t),this.content_},i.conditionalFocus_=function(){var t=hn.activeElement,n=this.player_.el_;this.previouslyActiveEl_=null,(n.contains(t)||n===t)&&(this.previouslyActiveEl_=t,this.focus())},i.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},i.handleKeyDown=function(t){if(t.stopPropagation(),dn.isEventKey(t,"Escape")&&this.closeable())return t.preventDefault(),void this.close();if(dn.isEventKey(t,"Tab")){for(var n,i=this.focusableEls_(),e=this.el_.querySelector(":focus"),r=0;r<i.length;r++)if(e===i[r]){n=r;break}hn.activeElement===this.el_&&(n=0),t.shiftKey&&0===n?(i[i.length-1].focus(),t.preventDefault()):t.shiftKey||n!==i.length-1||(i[0].focus(),t.preventDefault())}},i.focusableEls_=function(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,(function(t){return(t instanceof bt.HTMLAnchorElement||t instanceof bt.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof bt.HTMLInputElement||t instanceof bt.HTMLSelectElement||t instanceof bt.HTMLTextAreaElement||t instanceof bt.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof bt.HTMLIFrameElement||t instanceof bt.HTMLObjectElement||t instanceof bt.HTMLEmbedElement||t.hasAttribute("tabindex")&&-1!==t.getAttribute("tabindex")||t.hasAttribute("contenteditable")}))},n}(sh);gh.prototype.options_={pauseOnOpen:!0,temporary:!0},sh.registerComponent("ModalDialog",gh);var bh=function(t){function n(n){var i;void 0===n&&(n=[]),(i=t.call(this)||this).tracks_=[],Object.defineProperty(mn(i),"length",{get:function(){return this.tracks_.length}});for(var e=0;e<n.length;e++)i.addTrack(n[e]);return i}yn(n,t);var i=n.prototype;return i.addTrack=function(t){var n=this,i=this.tracks_.length;""+i in this||Object.defineProperty(this,i,{get:function(){return this.tracks_[i]}}),-1===this.tracks_.indexOf(t)&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack",target:this})),t.labelchange_=function(){n.trigger({track:t,type:"labelchange",target:n})},zu(t)&&t.addEventListener("labelchange",t.labelchange_)},i.removeTrack=function(t){for(var n,i=0,e=this.length;i<e;i++)if(this[i]===t){(n=this[i]).off&&n.off(),this.tracks_.splice(i,1);break}n&&this.trigger({track:n,type:"removetrack",target:this})},i.getTrackById=function(t){for(var n=null,i=0,e=this.length;i<e;i++){var r=this[i];if(r.id===t){n=r;break}}return n},n}(Fu);for(var yh in bh.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},bh.prototype.allowedEvents_)bh.prototype["on"+yh]=null;var jh=function(t,n){for(var i=0;i<t.length;i++)Object.keys(t[i]).length&&n.id!==t[i].id&&(t[i].enabled=!1)},wh=function(t){function n(n){var i;void 0===n&&(n=[]);for(var e=n.length-1;e>=0;e--)if(n[e].enabled){jh(n,n[e]);break}return(i=t.call(this,n)||this).changing_=!1,i}yn(n,t);var i=n.prototype;return i.addTrack=function(n){var i=this;n.enabled&&jh(this,n),t.prototype.addTrack.call(this,n),n.addEventListener&&(n.enabledChange_=function(){i.changing_||(i.changing_=!0,jh(i,n),i.changing_=!1,i.trigger("change"))},n.addEventListener("enabledchange",n.enabledChange_))},i.removeTrack=function(n){t.prototype.removeTrack.call(this,n),n.removeEventListener&&n.enabledChange_&&(n.removeEventListener("enabledchange",n.enabledChange_),n.enabledChange_=null)},n}(bh),Th=function(t,n){for(var i=0;i<t.length;i++)Object.keys(t[i]).length&&n.id!==t[i].id&&(t[i].selected=!1)},Ah=function(t){function n(n){var i;void 0===n&&(n=[]);for(var e=n.length-1;e>=0;e--)if(n[e].selected){Th(n,n[e]);break}return(i=t.call(this,n)||this).changing_=!1,Object.defineProperty(mn(i),"selectedIndex",{get:function(){for(var t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set:function(){}}),i}yn(n,t);var i=n.prototype;return i.addTrack=function(n){var i=this;n.selected&&Th(this,n),t.prototype.addTrack.call(this,n),n.addEventListener&&(n.selectedChange_=function(){i.changing_||(i.changing_=!0,Th(i,n),i.changing_=!1,i.trigger("change"))},n.addEventListener("selectedchange",n.selectedChange_))},i.removeTrack=function(n){t.prototype.removeTrack.call(this,n),n.removeEventListener&&n.selectedChange_&&(n.removeEventListener("selectedchange",n.selectedChange_),n.selectedChange_=null)},n}(bh),kh=function(t){function n(){return t.apply(this,arguments)||this}yn(n,t);var i=n.prototype;return i.addTrack=function(n){var i=this;t.prototype.addTrack.call(this,n),this.queueChange_||(this.queueChange_=function(){return i.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return i.trigger("selectedlanguagechange")}),n.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(n.kind)&&n.addEventListener("modechange",this.triggerSelectedlanguagechange_)},i.removeTrack=function(n){t.prototype.removeTrack.call(this,n),n.removeEventListener&&(this.queueChange_&&n.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&n.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},n}(bh),xh=function(){function t(t){void 0===t&&(t=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var n=0,i=t.length;n<i;n++)this.addTrackElement_(t[n])}var n=t.prototype;return n.addTrackElement_=function(t){var n=this.trackElements_.length;""+n in this||Object.defineProperty(this,n,{get:function(){return this.trackElements_[n]}}),-1===this.trackElements_.indexOf(t)&&this.trackElements_.push(t)},n.getTrackElementByTrack_=function(t){for(var n,i=0,e=this.trackElements_.length;i<e;i++)if(t===this.trackElements_[i].track){n=this.trackElements_[i];break}return n},n.removeTrackElement_=function(t){for(var n=0,i=this.trackElements_.length;n<i;n++)if(t===this.trackElements_[n]){this.trackElements_[n].track&&"function"==typeof this.trackElements_[n].track.off&&this.trackElements_[n].track.off(),"function"==typeof this.trackElements_[n].off&&this.trackElements_[n].off(),this.trackElements_.splice(n,1);break}},t}(),Sh=function(){function t(n){t.prototype.setCues_.call(this,n),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var n=t.prototype;return n.setCues_=function(t){var n=this.length||0,i=0,e=t.length;this.cues_=t,this.length_=t.length;var r=function(t){""+t in this||Object.defineProperty(this,""+t,{get:function(){return this.cues_[t]}})};if(n<e)for(i=n;i<e;i++)r.call(this,i)},n.getCueById=function(t){for(var n=null,i=0,e=this.length;i<e;i++){var r=this[i];if(r.id===t){n=r;break}}return n},t}(),Eh={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Ih={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Oh={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Dh={disabled:"disabled",hidden:"hidden",showing:"showing"},Nh=function(t){function n(n){var i;void 0===n&&(n={}),i=t.call(this)||this;var e={id:n.id||"vjs_track_"+Au(),kind:n.kind||"",language:n.language||""},r=n.label||"",s=function(t){Object.defineProperty(mn(i),t,{get:function(){return e[t]},set:function(){}})};for(var o in e)s(o);return Object.defineProperty(mn(i),"label",{get:function(){return r},set:function(t){t!==r&&(r=t,this.trigger("labelchange"))}}),i}return yn(n,t),n}(Fu),Mh=function(t){var n=["protocol","hostname","port","pathname","search","hash","host"],i=hn.createElement("a");i.href=t;for(var e={},r=0;r<n.length;r++)e[n[r]]=i[n[r]];return"http:"===e.protocol&&(e.host=e.host.replace(/:80$/,"")),"https:"===e.protocol&&(e.host=e.host.replace(/:443$/,"")),e.protocol||(e.protocol=bt.location.protocol),e.host||(e.host=bt.location.host),e},Ch=function(t){if(!t.match(/^https?:\/\//)){var n=hn.createElement("a");n.href=t,t=n.href}return t},Rh=function(t){if("string"==typeof t){var n=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(t);if(n)return n.pop().toLowerCase()}return""},Uh=function(t,n){void 0===n&&(n=bt.location);var i=Mh(t);return(":"===i.protocol?n.protocol:i.protocol)+i.host!==n.protocol+n.host},Ph=Object.freeze({__proto__:null,parseUrl:Mh,getAbsoluteURL:Ch,getFileExtension:Rh,isCrossOrigin:Uh}),Lh=function(t,n){var i=new bt.WebVTT.Parser(bt,bt.vttjs,bt.WebVTT.StringDecoder()),e=[];i.oncue=function(t){n.addCue(t)},i.onparsingerror=function(t){e.push(t)},i.onflush=function(){n.trigger({type:"loadeddata",target:n})},i.parse(t),e.length>0&&(bt.console&&bt.console.groupCollapsed&&bt.console.groupCollapsed("Text Track parsing errors for "+n.src),e.forEach((function(t){return sa.error(t)})),bt.console&&bt.console.groupEnd&&bt.console.groupEnd()),i.flush()},Bh=function(t,n){var i={uri:t},e=Uh(t);e&&(i.cors=e);var r="use-credentials"===n.tech_.crossOrigin();r&&(i.withCredentials=r),Mn(i,Lu(this,(function(t,i,e){if(t)return sa.error(t,i);n.loaded_=!0,"function"!=typeof bt.WebVTT?n.tech_&&n.tech_.any(["vttjsloaded","vttjserror"],(function(t){if("vttjserror"!==t.type)return Lh(e,n);sa.error("vttjs failed to load, stopping trying to process "+n.src)})):Lh(e,n)})))},Fh=function(t){function n(n){var i;if(void 0===n&&(n={}),!n.tech)throw new Error("A tech was not provided.");var e=th(n,{kind:Oh[n.kind]||"subtitles",language:n.language||n.srclang||""}),r=Dh[e.mode]||"disabled",s=e.default;"metadata"!==e.kind&&"chapters"!==e.kind||(r="hidden"),(i=t.call(this,e)||this).tech_=e.tech,i.cues_=[],i.activeCues_=[],i.preload_=!1!==i.tech_.preloadTextTracks;var o=new Sh(i.cues_),a=new Sh(i.activeCues_),u=!1,h=Lu(mn(i),(function(){this.tech_.isReady_&&!this.tech_.isDisposed()&&(this.activeCues=this.activeCues,u&&(this.trigger("cuechange"),u=!1))}));return i.tech_.one("dispose",(function(){i.tech_.off("timeupdate",h)})),"disabled"!==r&&i.tech_.on("timeupdate",h),Object.defineProperties(mn(i),{default:{get:function(){return s},set:function(){}},mode:{get:function(){return r},set:function(t){Dh[t]&&r!==t&&(r=t,this.preload_||"disabled"===r||0!==this.cues.length||Bh(this.src,this),this.tech_.off("timeupdate",h),"disabled"!==r&&this.tech_.on("timeupdate",h),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?o:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return a;for(var t=this.tech_.currentTime(),n=[],i=0,e=this.cues.length;i<e;i++){var r=this.cues[i];(r.startTime<=t&&r.endTime>=t||r.startTime===r.endTime&&r.startTime<=t&&r.startTime+.5>=t)&&n.push(r)}if(u=!1,n.length!==this.activeCues_.length)u=!0;else for(var s=0;s<n.length;s++)-1===this.activeCues_.indexOf(n[s])&&(u=!0);return this.activeCues_=n,a.setCues_(this.activeCues_),a},set:function(){}}}),e.src?(i.src=e.src,i.preload_||(i.loaded_=!0),(i.preload_||"subtitles"!==e.kind&&"captions"!==e.kind)&&Bh(i.src,mn(i))):i.loaded_=!0,i}yn(n,t);var i=n.prototype;return i.addCue=function(t){var n=t;if(bt.vttjs&&!(t instanceof bt.vttjs.VTTCue)){for(var i in n=new bt.vttjs.VTTCue(t.startTime,t.endTime,t.text),t)i in n||(n[i]=t[i]);n.id=t.id,n.originalCue_=t}for(var e=this.tech_.textTracks(),r=0;r<e.length;r++)e[r]!==this&&e[r].removeCue(n);this.cues_.push(n),this.cues.setCues_(this.cues_)},i.removeCue=function(t){for(var n=this.cues_.length;n--;){var i=this.cues_[n];if(i===t||i.originalCue_&&i.originalCue_===t){this.cues_.splice(n,1),this.cues.setCues_(this.cues_);break}}},n}(Nh);Fh.prototype.allowedEvents_={cuechange:"cuechange"};var _h=function(t){function n(n){var i;void 0===n&&(n={});var e=th(n,{kind:Ih[n.kind]||""});i=t.call(this,e)||this;var r=!1;return Object.defineProperty(mn(i),"enabled",{get:function(){return r},set:function(t){"boolean"==typeof t&&t!==r&&(r=t,this.trigger("enabledchange"))}}),e.enabled&&(i.enabled=e.enabled),i.loaded_=!0,i}return yn(n,t),n}(Nh),zh=function(t){function n(n){var i;void 0===n&&(n={});var e=th(n,{kind:Eh[n.kind]||""});i=t.call(this,e)||this;var r=!1;return Object.defineProperty(mn(i),"selected",{get:function(){return r},set:function(t){"boolean"==typeof t&&t!==r&&(r=t,this.trigger("selectedchange"))}}),e.selected&&(i.selected=e.selected),i}return yn(n,t),n}(Nh),Vh=function(t){function n(n){var i,e;void 0===n&&(n={}),i=t.call(this)||this;var r=new Fh(n);return i.kind=r.kind,i.src=r.src,i.srclang=r.language,i.label=r.label,i.default=r.default,Object.defineProperties(mn(i),{readyState:{get:function(){return e}},track:{get:function(){return r}}}),e=0,r.addEventListener("loadeddata",(function(){e=2,i.trigger({type:"load",target:mn(i)})})),i}return yn(n,t),n}(Fu);Vh.prototype.allowedEvents_={load:"load"},Vh.NONE=0,Vh.LOADING=1,Vh.LOADED=2,Vh.ERROR=3;var Hh={audio:{ListClass:wh,TrackClass:_h,capitalName:"Audio"},video:{ListClass:Ah,TrackClass:zh,capitalName:"Video"},text:{ListClass:kh,TrackClass:Fh,capitalName:"Text"}};Object.keys(Hh).forEach((function(t){Hh[t].getterName=t+"Tracks",Hh[t].privateName=t+"Tracks_"}));var Xh={remoteText:{ListClass:kh,TrackClass:Fh,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:xh,TrackClass:Vh,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},qh=fn({},Hh,Xh);Xh.names=Object.keys(Xh),Hh.names=Object.keys(Hh),qh.names=[].concat(Xh.names).concat(Hh.names);var Gh=function(t){function n(n,i){var e;return void 0===n&&(n={}),void 0===i&&(i=function(){}),n.reportTouchActivity=!1,(e=t.call(this,null,n,i)||this).onDurationChange_=function(t){return e.onDurationChange(t)},e.trackProgress_=function(t){return e.trackProgress(t)},e.trackCurrentTime_=function(t){return e.trackCurrentTime(t)},e.stopTrackingCurrentTime_=function(t){return e.stopTrackingCurrentTime(t)},e.disposeSourceHandler_=function(t){return e.disposeSourceHandler(t)},e.hasStarted_=!1,e.on("playing",(function(){this.hasStarted_=!0})),e.on("loadstart",(function(){this.hasStarted_=!1})),qh.names.forEach((function(t){var i=qh[t];n&&n[i.getterName]&&(e[i.privateName]=n[i.getterName])})),e.featuresProgressEvents||e.manualProgressOn(),e.featuresTimeupdateEvents||e.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((function(t){!1===n["native"+t+"Tracks"]&&(e["featuresNative"+t+"Tracks"]=!1)})),!1===n.nativeCaptions||!1===n.nativeTextTracks?e.featuresNativeTextTracks=!1:!0!==n.nativeCaptions&&!0!==n.nativeTextTracks||(e.featuresNativeTextTracks=!0),e.featuresNativeTextTracks||e.emulateTextTracks(),e.preloadTextTracks=!1!==n.preloadTextTracks,e.autoRemoteTextTracks_=new qh.text.ListClass,e.initTrackListeners(),n.nativeControlsForTouch||e.emitTapEvents(),e.constructor&&(e.name_=e.constructor.name||"Unknown Tech"),e}yn(n,t);var i=n.prototype;return i.triggerSourceset=function(t){var n=this;this.isReady_||this.one("ready",(function(){return n.setTimeout((function(){return n.triggerSourceset(t)}),1)})),this.trigger({src:t,type:"sourceset"})},i.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},i.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},i.trackProgress=function(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Lu(this,(function(){var t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,1===t&&this.stopTrackingProgress()})),500)},i.onDurationChange=function(t){this.duration_=this.duration()},i.buffered=function(){return uh(0,0)},i.bufferedPercent=function(){return hh(this.buffered(),this.duration_)},i.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},i.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},i.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},i.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)},i.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},i.dispose=function(){this.clearTracks(Hh.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},i.clearTracks=function(t){var n=this;(t=[].concat(t)).forEach((function(t){for(var i=n[t+"Tracks"]()||[],e=i.length;e--;){var r=i[e];"text"===t&&n.removeRemoteTextTrack(r),i.removeTrack(r)}}))},i.cleanupAutoTextTracks=function(){for(var t=this.autoRemoteTextTracks_||[],n=t.length;n--;){var i=t[n];this.removeRemoteTextTrack(i)}},i.reset=function(){},i.crossOrigin=function(){},i.setCrossOrigin=function(){},i.error=function(t){return void 0!==t&&(this.error_=new ch(t),this.trigger("error")),this.error_},i.played=function(){return this.hasStarted_?uh(0,0):uh()},i.play=function(){},i.setScrubbing=function(){},i.scrubbing=function(){},i.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},i.initTrackListeners=function(){var t=this;Hh.names.forEach((function(n){var i=Hh[n],e=function(){t.trigger(n+"trackchange")},r=t[i.getterName]();r.addEventListener("removetrack",e),r.addEventListener("addtrack",e),t.on("dispose",(function(){r.removeEventListener("removetrack",e),r.removeEventListener("addtrack",e)}))}))},i.addWebVttScript_=function(){var t=this;if(!bt.WebVTT)if(hn.body.contains(this.el())){if(!this.options_["vtt.js"]&&la(mi)&&Object.keys(mi).length>0)return void this.trigger("vttjsloaded");var n=hn.createElement("script");n.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",n.onload=function(){t.trigger("vttjsloaded")},n.onerror=function(){t.trigger("vttjserror")},this.on("dispose",(function(){n.onload=null,n.onerror=null})),bt.WebVTT=!0,this.el().parentNode.appendChild(n)}else this.ready(this.addWebVttScript_)},i.emulateTextTracks=function(){var t=this,n=this.textTracks(),i=this.remoteTextTracks(),e=function(t){return n.addTrack(t.track)},r=function(t){return n.removeTrack(t.track)};i.on("addtrack",e),i.on("removetrack",r),this.addWebVttScript_();var s=function(){return t.trigger("texttrackchange")},o=function(){s();for(var t=0;t<n.length;t++){var i=n[t];i.removeEventListener("cuechange",s),"showing"===i.mode&&i.addEventListener("cuechange",s)}};o(),n.addEventListener("change",o),n.addEventListener("addtrack",o),n.addEventListener("removetrack",o),this.on("dispose",(function(){i.off("addtrack",e),i.off("removetrack",r),n.removeEventListener("change",o),n.removeEventListener("addtrack",o),n.removeEventListener("removetrack",o);for(var t=0;t<n.length;t++){n[t].removeEventListener("cuechange",s)}}))},i.addTextTrack=function(t,n,i){if(!t)throw new Error("TextTrack kind is required but was not provided");return function(t,n,i,e,r){void 0===r&&(r={});var s=t.textTracks();r.kind=n,i&&(r.label=i),e&&(r.language=e),r.tech=t;var o=new qh.text.TrackClass(r);return s.addTrack(o),o}(this,t,n,i)},i.createRemoteTextTrack=function(t){var n=th(t,{tech:this});return new Xh.remoteTextEl.TrackClass(n)},i.addRemoteTextTrack=function(t,n){var i=this;void 0===t&&(t={});var e=this.createRemoteTextTrack(t);return!0!==n&&!1!==n&&(sa.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),n=!0),this.remoteTextTrackEls().addTrackElement_(e),this.remoteTextTracks().addTrack(e.track),!0!==n&&this.ready((function(){return i.autoRemoteTextTracks_.addTrack(e.track)})),e},i.removeRemoteTextTrack=function(t){var n=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(n),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)},i.getVideoPlaybackQuality=function(){return{}},i.requestPictureInPicture=function(){var t=this.options_.Promise||bt.Promise;if(t)return t.reject()},i.disablePictureInPicture=function(){return!0},i.setDisablePictureInPicture=function(){},i.setPoster=function(){},i.playsinline=function(){},i.setPlaysinline=function(){},i.overrideNativeAudioTracks=function(){},i.overrideNativeVideoTracks=function(){},i.canPlayType=function(){return""},n.canPlayType=function(){return""},n.canPlaySource=function(t,i){return n.canPlayType(t.type)},n.isTech=function(t){return t.prototype instanceof n||t instanceof n||t===n},n.registerTech=function(t,i){if(n.techs_||(n.techs_={}),!n.isTech(i))throw new Error("Tech "+t+" must be a Tech");if(!n.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!n.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=Zu(t),n.techs_[t]=i,n.techs_[Ku(t)]=i,"Tech"!==t&&n.defaultTechOrder_.push(t),i},n.getTech=function(t){if(t)return n.techs_&&n.techs_[t]?n.techs_[t]:(t=Zu(t),bt&&bt.videojs&&bt.videojs[t]?(sa.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),bt.videojs[t]):void 0)},n}(sh);qh.names.forEach((function(t){var n=qh[t];Gh.prototype[n.getterName]=function(){return this[n.privateName]=this[n.privateName]||new n.ListClass,this[n.privateName]}})),Gh.prototype.featuresVolumeControl=!0,Gh.prototype.featuresMuteControl=!0,Gh.prototype.featuresFullscreenResize=!1,Gh.prototype.featuresPlaybackRate=!1,Gh.prototype.featuresProgressEvents=!1,Gh.prototype.featuresSourceset=!1,Gh.prototype.featuresTimeupdateEvents=!1,Gh.prototype.featuresNativeTextTracks=!1,Gh.withSourceHandlers=function(t){t.registerSourceHandler=function(n,i){var e=t.sourceHandlers;e||(e=t.sourceHandlers=[]),void 0===i&&(i=e.length),e.splice(i,0,n)},t.canPlayType=function(n){for(var i,e=t.sourceHandlers||[],r=0;r<e.length;r++)if(i=e[r].canPlayType(n))return i;return""},t.selectSourceHandler=function(n,i){for(var e=t.sourceHandlers||[],r=0;r<e.length;r++)if(e[r].canHandleSource(n,i))return e[r];return null},t.canPlaySource=function(n,i){var e=t.selectSourceHandler(n,i);return e?e.canHandleSource(n,i):""};["seekable","seeking","duration"].forEach((function(t){var n=this[t];"function"==typeof n&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):n.apply(this,arguments)})}),t.prototype),t.prototype.setSource=function(n){var i=t.selectSourceHandler(n,this.options_);i||(t.nativeSourceHandler?i=t.nativeSourceHandler:sa.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),i!==t.nativeSourceHandler&&(this.currentSource_=n),this.sourceHandler_=i.handleSource(n,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},sh.registerComponent("Tech",Gh),Gh.registerTech("Tech",Gh),Gh.defaultTechOrder_=[];var Wh={},Yh={},Jh={};function Qh(t,n,i){t.setTimeout((function(){return ic(n,Wh[n.type],i,t)}),1)}function $h(t,n,i,e){void 0===e&&(e=null);var r="call"+Zu(i),s=t.reduce(nc(r),e),o=s===Jh,a=o?null:n[i](s);return function(t,n,i,e){for(var r=t.length-1;r>=0;r--){var s=t[r];s[n]&&s[n](e,i)}}(t,i,a,o),a}var Kh={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Zh={setCurrentTime:1,setMuted:1,setVolume:1},tc={play:1,pause:1};function nc(t){return function(n,i){return n===Jh?Jh:i[t]?i[t](n):n}}function ic(t,n,i,e,r,s){void 0===t&&(t={}),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===s&&(s=!1);var o=n,a=o[0],u=o.slice(1);if("string"==typeof a)ic(t,Wh[a],i,e,r,s);else if(a){var h=function(t,n){var i=Yh[t.id()],e=null;if(null==i)return e=n(t),Yh[t.id()]=[[n,e]],e;for(var r=0;r<i.length;r++){var s=i[r],o=s[0],a=s[1];o===n&&(e=a)}return null===e&&(e=n(t),i.push([n,e])),e}(e,a);if(!h.setSource)return r.push(h),ic(t,u,i,e,r,s);h.setSource(ca({},t),(function(n,o){if(n)return ic(t,u,i,e,r,s);r.push(h),ic(o,t.type===o.type?u:Wh[o.type],i,e,r,s)}))}else u.length?ic(t,u,i,e,r,s):s?i(t,r):ic(t,Wh["*"],i,e,r,!0)}var ec={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},rc=function(t){void 0===t&&(t="");var n=Rh(t);return ec[n.toLowerCase()]||""},sc=function t(n){if(Array.isArray(n)){var i=[];n.forEach((function(n){n=t(n),Array.isArray(n)?i=i.concat(n):fa(n)&&i.push(n)})),n=i}else n="string"==typeof n&&n.trim()?[oc({src:n})]:fa(n)&&"string"==typeof n.src&&n.src&&n.src.trim()?[oc(n)]:[];return n};function oc(t){if(!t.type){var n=rc(t.src);n&&(t.type=n)}return t}var ac=function(t){function n(n,i,e){var r,s=th({createEl:!1},i);if(r=t.call(this,n,s,e)||this,i.playerOptions.sources&&0!==i.playerOptions.sources.length)n.src(i.playerOptions.sources);else for(var o=0,a=i.playerOptions.techOrder;o<a.length;o++){var u=Zu(a[o]),h=Gh.getTech(u);if(u||(h=sh.getComponent(u)),h&&h.isSupported()){n.loadTech_(u);break}}return r}return yn(n,t),n}(sh);sh.registerComponent("MediaLoader",ac);var uc=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).handleMouseOver_=function(t){return e.handleMouseOver(t)},e.handleMouseOut_=function(t){return e.handleMouseOut(t)},e.handleClick_=function(t){return e.handleClick(t)},e.handleKeyDown_=function(t){return e.handleKeyDown(t)},e.emitTapEvents(),e.enable(),e}yn(n,t);var i=n.prototype;return i.createEl=function(t,n,i){void 0===t&&(t="div"),void 0===n&&(n={}),void 0===i&&(i={}),n=ca({className:this.buildCSSClass(),tabIndex:0},n),"button"===t&&sa.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),i=ca({role:"button"},i),this.tabIndex_=n.tabIndex;var e=Va(t,n,i);return e.appendChild(Va("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(e),e},i.dispose=function(){this.controlTextEl_=null,t.prototype.dispose.call(this)},i.createControlTextEl=function(t){return this.controlTextEl_=Va("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_},i.controlText=function(t,n){if(void 0===n&&(n=this.el()),void 0===t)return this.controlText_||"Need Text";var i=this.localize(t);this.controlText_=t,Ha(this.controlTextEl_,i),this.nonIconControl||this.player_.options_.noUITitleAttributes||n.setAttribute("title",i)},i.buildCSSClass=function(){return"vjs-control vjs-button "+t.prototype.buildCSSClass.call(this)},i.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},i.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},i.handleLanguagechange=function(){this.controlText(this.controlText_)},i.handleClick=function(t){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},i.handleKeyDown=function(n){dn.isEventKey(n,"Space")||dn.isEventKey(n,"Enter")?(n.preventDefault(),n.stopPropagation(),this.trigger("click")):t.prototype.handleKeyDown.call(this,n)},n}(sh);sh.registerComponent("ClickableComponent",uc);var hc=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).update(),e.update_=function(t){return e.update(t)},n.on("posterchange",e.update_),e}yn(n,t);var i=n.prototype;return i.dispose=function(){this.player().off("posterchange",this.update_),t.prototype.dispose.call(this)},i.createEl=function(){return Va("div",{className:"vjs-poster",tabIndex:-1})},i.update=function(t){var n=this.player().poster();this.setSrc(n),n?this.show():this.hide()},i.setSrc=function(t){var n="";t&&(n='url("'+t+'")'),this.el_.style.backgroundImage=n},i.handleClick=function(t){if(this.player_.controls()){var n=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(Ea||ka)&&n||this.player_.tech(!0).focus(),this.player_.paused()?vh(this.player_.play()):this.player_.pause()}},n}(uc);sh.registerComponent("PosterImage",hc);var cc={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function fc(t,n){var i;if(4===t.length)i=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else{if(7!==t.length)throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");i=t.slice(1)}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+n+")"}function lc(t,n,i){try{t.style[n]=i}catch(t){return}}var vc=function(t){function n(n,i,e){var r;r=t.call(this,n,i,e)||this;var s=function(t){return r.updateDisplay(t)};return n.on("loadstart",(function(t){return r.toggleDisplay(t)})),n.on("texttrackchange",s),n.on("loadedmetadata",(function(t){return r.preselectTrack(t)})),n.ready(Lu(mn(r),(function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)this.hide();else{n.on("fullscreenchange",s),n.on("playerresize",s),bt.addEventListener("orientationchange",s),n.on("dispose",(function(){return bt.removeEventListener("orientationchange",s)}));for(var t=this.options_.playerOptions.tracks||[],i=0;i<t.length;i++)this.player_.addRemoteTextTrack(t[i],!0);this.preselectTrack()}}))),r}yn(n,t);var i=n.prototype;return i.preselectTrack=function(){for(var t,n,i,e={captions:1,subtitles:1},r=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage,o=0;o<r.length;o++){var a=r[o];s&&s.enabled&&s.language&&s.language===a.language&&a.kind in e?a.kind===s.kind?i=a:i||(i=a):s&&!s.enabled?(i=null,t=null,n=null):a.default&&("descriptions"!==a.kind||t?a.kind in e&&!n&&(n=a):t=a)}i?i.mode="showing":n?n.mode="showing":t&&(t.mode="showing")},i.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},i.clearDisplay=function(){"function"==typeof bt.WebVTT&&bt.WebVTT.processCues(bt,[],this.el_)},i.updateDisplay=function(){var t=this.player_.textTracks(),n=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),n){for(var i=[],e=0;e<t.length;++e){var r=t[e];"showing"===r.mode&&i.push(r)}this.updateForTrack(i)}else{for(var s=null,o=null,a=t.length;a--;){var u=t[a];"showing"===u.mode&&("descriptions"===u.kind?s=u:o=u)}o?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(o)):s&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(s))}},i.updateDisplayState=function(t){for(var n=this.player_.textTrackSettings.getValues(),i=t.activeCues,e=i.length;e--;){var r=i[e];if(r){var s=r.displayState;if(n.color&&(s.firstChild.style.color=n.color),n.textOpacity&&lc(s.firstChild,"color",fc(n.color||"#fff",n.textOpacity)),n.backgroundColor&&(s.firstChild.style.backgroundColor=n.backgroundColor),n.backgroundOpacity&&lc(s.firstChild,"backgroundColor",fc(n.backgroundColor||"#000",n.backgroundOpacity)),n.windowColor&&(n.windowOpacity?lc(s,"backgroundColor",fc(n.windowColor,n.windowOpacity)):s.style.backgroundColor=n.windowColor),n.edgeStyle&&("dropshadow"===n.edgeStyle?s.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===n.edgeStyle?s.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===n.edgeStyle?s.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===n.edgeStyle&&(s.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),n.fontPercent&&1!==n.fontPercent){var o=bt.parseFloat(s.style.fontSize);s.style.fontSize=o*n.fontPercent+"px",s.style.height="auto",s.style.top="auto"}n.fontFamily&&"default"!==n.fontFamily&&("small-caps"===n.fontFamily?s.firstChild.style.fontVariant="small-caps":s.firstChild.style.fontFamily=cc[n.fontFamily])}}},i.updateForTrack=function(t){if(Array.isArray(t)||(t=[t]),"function"==typeof bt.WebVTT&&!t.every((function(t){return!t.activeCues}))){for(var n=[],i=0;i<t.length;++i)for(var e=t[i],r=0;r<e.activeCues.length;++r)n.push(e.activeCues[r]);bt.WebVTT.processCues(bt,n,this.el_);for(var s=0;s<t.length;++s){for(var o=t[s],a=0;a<o.activeCues.length;++a){var u=o.activeCues[a].displayState;Ga(u,"vjs-text-track-cue"),Ga(u,"vjs-text-track-cue-"+(o.language?o.language:s)),o.language&&Ka(u,"lang",o.language)}this.player_.textTrackSettings&&this.updateDisplayState(o)}}},n}(sh);sh.registerComponent("TextTrackDisplay",vc);var dc=function(t){function n(){return t.apply(this,arguments)||this}return yn(n,t),n.prototype.createEl=function(){var n=this.player_.isAudio(),i=this.localize(n?"Audio Player":"Video Player"),e=Va("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[i])}),r=t.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(e),r},n}(sh);sh.registerComponent("LoadingSpinner",dc);var pc=function(t){function n(){return t.apply(this,arguments)||this}yn(n,t);var i=n.prototype;return i.createEl=function(t,n,i){void 0===n&&(n={}),void 0===i&&(i={});var e=Va("button",n=ca({className:this.buildCSSClass()},n),i=ca({type:"button"},i));return e.appendChild(Va("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(e),e},i.addChild=function(t,n){void 0===n&&(n={});var i=this.constructor.name;return sa.warn("Adding an actionable (user controllable) child to a Button ("+i+") is not supported; use a ClickableComponent instead."),sh.prototype.addChild.call(this,t,n)},i.enable=function(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},i.disable=function(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},i.handleKeyDown=function(n){dn.isEventKey(n,"Space")||dn.isEventKey(n,"Enter")?n.stopPropagation():t.prototype.handleKeyDown.call(this,n)},n}(uc);sh.registerComponent("Button",pc);var mc=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).mouseused_=!1,e.on("mousedown",(function(t){return e.handleMouseDown(t)})),e}yn(n,t);var i=n.prototype;return i.buildCSSClass=function(){return"vjs-big-play-button"},i.handleClick=function(t){var n=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY){var i=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return vh(n),void(!this.player_.tech(!0)||(Ea||ka)&&i||this.player_.tech(!0).focus())}var e=this.player_.getChild("controlBar"),r=e&&e.getChild("playToggle");if(r){var s=function(){return r.focus()};lh(n)?n.then(s,(function(){})):this.setTimeout(s,1)}else this.player_.tech(!0).focus()},i.handleKeyDown=function(n){this.mouseused_=!1,t.prototype.handleKeyDown.call(this,n)},i.handleMouseDown=function(t){this.mouseused_=!0},n}(pc);mc.prototype.controlText_="Play Video",sh.registerComponent("BigPlayButton",mc);var gc=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).controlText(i&&i.controlText||e.localize("Close")),e}yn(n,t);var i=n.prototype;return i.buildCSSClass=function(){return"vjs-close-button "+t.prototype.buildCSSClass.call(this)},i.handleClick=function(t){this.trigger({type:"close",bubbles:!1})},i.handleKeyDown=function(n){dn.isEventKey(n,"Esc")?(n.preventDefault(),n.stopPropagation(),this.trigger("click")):t.prototype.handleKeyDown.call(this,n)},n}(pc);sh.registerComponent("CloseButton",gc);var bc=function(t){function n(n,i){var e;return void 0===i&&(i={}),e=t.call(this,n,i)||this,i.replay=void 0===i.replay||i.replay,e.on(n,"play",(function(t){return e.handlePlay(t)})),e.on(n,"pause",(function(t){return e.handlePause(t)})),i.replay&&e.on(n,"ended",(function(t){return e.handleEnded(t)})),e}yn(n,t);var i=n.prototype;return i.buildCSSClass=function(){return"vjs-play-control "+t.prototype.buildCSSClass.call(this)},i.handleClick=function(t){this.player_.paused()?vh(this.player_.play()):this.player_.pause()},i.handleSeeked=function(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)},i.handlePlay=function(t){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},i.handlePause=function(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},i.handleEnded=function(t){var n=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",(function(t){return n.handleSeeked(t)}))},n}(pc);bc.prototype.controlText_="Play",sh.registerComponent("PlayToggle",bc);var yc=function(t,n){t=t<0?0:t;var i=Math.floor(t%60),e=Math.floor(t/60%60),r=Math.floor(t/3600),s=Math.floor(n/60%60),o=Math.floor(n/3600);return(isNaN(t)||t===1/0)&&(r=e=i="-"),(r=r>0||o>0?r+":":"")+(e=((r||s>=10)&&e<10?"0"+e:e)+":")+(i=i<10?"0"+i:i)},jc=yc;function wc(t,n){return void 0===n&&(n=t),jc(t,n)}var Tc=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).on(n,["timeupdate","ended"],(function(t){return e.updateContent(t)})),e.updateTextNode_(),e}yn(n,t);var i=n.prototype;return i.createEl=function(){var n=this.buildCSSClass(),i=t.prototype.createEl.call(this,"div",{className:n+" vjs-time-control vjs-control"}),e=Va("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+" "},{role:"presentation"});return i.appendChild(e),this.contentEl_=Va("span",{className:n+"-display"},{"aria-live":"off",role:"presentation"}),i.appendChild(this.contentEl_),i},i.dispose=function(){this.contentEl_=null,this.textNode_=null,t.prototype.dispose.call(this)},i.updateTextNode_=function(t){var n=this;void 0===t&&(t=0),t=wc(t),this.formattedTime_!==t&&(this.formattedTime_=t,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",(function(){if(n.contentEl_){var t=n.textNode_;t&&n.contentEl_.firstChild!==t&&(t=null,sa.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),n.textNode_=hn.createTextNode(n.formattedTime_),n.textNode_&&(t?n.contentEl_.replaceChild(n.textNode_,t):n.contentEl_.appendChild(n.textNode_))}})))},i.updateContent=function(t){},n}(sh);Tc.prototype.labelText_="Time",Tc.prototype.controlText_="Time",sh.registerComponent("TimeDisplay",Tc);var Ac=function(t){function n(){return t.apply(this,arguments)||this}yn(n,t);var i=n.prototype;return i.buildCSSClass=function(){return"vjs-current-time"},i.updateContent=function(t){var n;n=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(n)},n}(Tc);Ac.prototype.labelText_="Current Time",Ac.prototype.controlText_="Current Time",sh.registerComponent("CurrentTimeDisplay",Ac);var kc=function(t){function n(n,i){var e,r=function(t){return e.updateContent(t)};return(e=t.call(this,n,i)||this).on(n,"durationchange",r),e.on(n,"loadstart",r),e.on(n,"loadedmetadata",r),e}yn(n,t);var i=n.prototype;return i.buildCSSClass=function(){return"vjs-duration"},i.updateContent=function(t){var n=this.player_.duration();this.updateTextNode_(n)},n}(Tc);kc.prototype.labelText_="Duration",kc.prototype.controlText_="Duration",sh.registerComponent("DurationDisplay",kc);var xc=function(t){function n(){return t.apply(this,arguments)||this}return yn(n,t),n.prototype.createEl=function(){var n=t.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),i=t.prototype.createEl.call(this,"div"),e=t.prototype.createEl.call(this,"span",{textContent:"/"});return i.appendChild(e),n.appendChild(i),n},n}(sh);sh.registerComponent("TimeDivider",xc);var Sc=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).on(n,"durationchange",(function(t){return e.updateContent(t)})),e}yn(n,t);var i=n.prototype;return i.buildCSSClass=function(){return"vjs-remaining-time"},i.createEl=function(){var n=t.prototype.createEl.call(this);return!1!==this.options_.displayNegative&&n.insertBefore(Va("span",{},{"aria-hidden":!0},"-"),this.contentEl_),n},i.updateContent=function(t){var n;"number"==typeof this.player_.duration()&&(n=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(n))},n}(Tc);Sc.prototype.labelText_="Remaining Time",Sc.prototype.controlText_="Remaining Time",sh.registerComponent("RemainingTimeDisplay",Sc);var Ec=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).updateShowing(),e.on(e.player(),"durationchange",(function(t){return e.updateShowing(t)})),e}yn(n,t);var i=n.prototype;return i.createEl=function(){var n=t.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Va("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Va("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+" "})),this.contentEl_.appendChild(hn.createTextNode(this.localize("LIVE"))),n.appendChild(this.contentEl_),n},i.dispose=function(){this.contentEl_=null,t.prototype.dispose.call(this)},i.updateShowing=function(t){this.player().duration()===1/0?this.show():this.hide()},n}(sh);sh.registerComponent("LiveDisplay",Ec);var Ic=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).updateLiveEdgeStatus(),e.player_.liveTracker&&(e.updateLiveEdgeStatusHandler_=function(t){return e.updateLiveEdgeStatus(t)},e.on(e.player_.liveTracker,"liveedgechange",e.updateLiveEdgeStatusHandler_)),e}yn(n,t);var i=n.prototype;return i.createEl=function(){var n=t.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=Va("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),n.appendChild(this.textEl_),n},i.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},i.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},i.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,t.prototype.dispose.call(this)},n}(pc);Ic.prototype.controlText_="Seek to live, currently playing live",sh.registerComponent("SeekToLive",Ic);var Oc=function(t,n,i){return t=Number(t),Math.min(i,Math.max(n,isNaN(t)?n:t))},Dc=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).handleMouseDown_=function(t){return e.handleMouseDown(t)},e.handleMouseUp_=function(t){return e.handleMouseUp(t)},e.handleKeyDown_=function(t){return e.handleKeyDown(t)},e.handleClick_=function(t){return e.handleClick(t)},e.handleMouseMove_=function(t){return e.handleMouseMove(t)},e.update_=function(t){return e.update(t)},e.bar=e.getChild(e.options_.barName),e.vertical(!!e.options_.vertical),e.enable(),e}yn(n,t);var i=n.prototype;return i.enabled=function(){return this.enabled_},i.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},i.disable=function(){if(this.enabled()){var t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},i.createEl=function(n,i,e){return void 0===i&&(i={}),void 0===e&&(e={}),i.className=i.className+" vjs-slider",i=ca({tabIndex:0},i),e=ca({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},e),t.prototype.createEl.call(this,n,i,e)},i.handleMouseDown=function(t){var n=this.bar.el_.ownerDocument;"mousedown"===t.type&&t.preventDefault(),"touchstart"!==t.type||xa||t.preventDefault(),tu(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(n,"mousemove",this.handleMouseMove_),this.on(n,"mouseup",this.handleMouseUp_),this.on(n,"touchmove",this.handleMouseMove_),this.on(n,"touchend",this.handleMouseUp_),this.handleMouseMove(t,!0)},i.handleMouseMove=function(t){},i.handleMouseUp=function(){var t=this.bar.el_.ownerDocument;nu(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()},i.update=function(){var t=this;if(this.el_&&this.bar){var n=this.getProgress();return n===this.progress_||(this.progress_=n,this.requestNamedAnimationFrame("Slider#update",(function(){var i=t.vertical()?"height":"width";t.bar.el().style[i]=(100*n).toFixed(2)+"%"}))),n}},i.getProgress=function(){return Number(Oc(this.getPercent(),0,1).toFixed(4))},i.calculateDistance=function(t){var n=ru(this.el_,t);return this.vertical()?n.y:n.x},i.handleKeyDown=function(n){dn.isEventKey(n,"Left")||dn.isEventKey(n,"Down")?(n.preventDefault(),n.stopPropagation(),this.stepBack()):dn.isEventKey(n,"Right")||dn.isEventKey(n,"Up")?(n.preventDefault(),n.stopPropagation(),this.stepForward()):t.prototype.handleKeyDown.call(this,n)},i.handleClick=function(t){t.stopPropagation(),t.preventDefault()},i.vertical=function(t){if(void 0===t)return this.vertical_||!1;this.vertical_=!!t,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},n}(sh);sh.registerComponent("Slider",Dc);var Nc=function(t,n){return Oc(t/n*100,0,100).toFixed(2)+"%"},Mc=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).partEls_=[],e.on(n,"progress",(function(t){return e.update(t)})),e}yn(n,t);var i=n.prototype;return i.createEl=function(){var n=t.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),i=Va("span",{className:"vjs-control-text"}),e=Va("span",{textContent:this.localize("Loaded")}),r=hn.createTextNode(": ");return this.percentageEl_=Va("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),n.appendChild(i),i.appendChild(e),i.appendChild(r),i.appendChild(this.percentageEl_),n},i.dispose=function(){this.partEls_=null,this.percentageEl_=null,t.prototype.dispose.call(this)},i.update=function(t){var n=this;this.requestNamedAnimationFrame("LoadProgressBar#update",(function(){var t=n.player_.liveTracker,i=n.player_.buffered(),e=t&&t.isLive()?t.seekableEnd():n.player_.duration(),r=n.player_.bufferedEnd(),s=n.partEls_,o=Nc(r,e);n.percent_!==o&&(n.el_.style.width=o,Ha(n.percentageEl_,o),n.percent_=o);for(var a=0;a<i.length;a++){var u=i.start(a),h=i.end(a),c=s[a];c||(c=n.el_.appendChild(Va()),s[a]=c),c.dataset.start===u&&c.dataset.end===h||(c.dataset.start=u,c.dataset.end=h,c.style.left=Nc(u,r),c.style.width=Nc(h-u,r))}for(var f=s.length;f>i.length;f--)n.el_.removeChild(s[f-1]);s.length=i.length}))},n}(sh);sh.registerComponent("LoadProgressBar",Mc);var Cc=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).update=Bu(Lu(mn(e),e.update),30),e}yn(n,t);var i=n.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},i.update=function(t,n,i){var e=eu(this.el_),r=iu(this.player_.el()),s=t.width*n;if(r&&e){var o=t.left-r.left+s,a=t.width-s+(r.right-t.right),u=e.width/2;o<u?u+=u-o:a<u&&(u=a),u<0?u=0:u>e.width&&(u=e.width),u=Math.round(u),this.el_.style.right="-"+u+"px",this.write(i)}},i.write=function(t){Ha(this.el_,t)},i.updateTime=function(t,n,i,e){var r=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",(function(){var s,o=r.player_.duration();if(r.player_.liveTracker&&r.player_.liveTracker.isLive()){var a=r.player_.liveTracker.liveWindow(),u=a-n*a;s=(u<1?"":"-")+wc(u,a)}else s=wc(i,o);r.update(t,n,s),e&&e()}))},n}(sh);sh.registerComponent("TimeTooltip",Cc);var Rc=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).update=Bu(Lu(mn(e),e.update),30),e}yn(n,t);var i=n.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},i.update=function(t,n){var i=this.getChild("timeTooltip");if(i){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();i.updateTime(t,n,e)}},n}(sh);Rc.prototype.options_={children:[]},Ca||ja||Rc.prototype.options_.children.push("timeTooltip"),sh.registerComponent("PlayProgressBar",Rc);var Uc=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).update=Bu(Lu(mn(e),e.update),30),e}yn(n,t);var i=n.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},i.update=function(t,n){var i=this,e=n*this.player_.duration();this.getChild("timeTooltip").updateTime(t,n,e,(function(){i.el_.style.left=t.width*n+"px"}))},n}(sh);Uc.prototype.options_={children:["timeTooltip"]},sh.registerComponent("MouseTimeDisplay",Uc);var Pc=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).setEventHandlers_(),e}yn(n,t);var i=n.prototype;return i.setEventHandlers_=function(){var t=this;this.update_=Lu(this,this.update),this.update=Bu(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(n){return t.enableInterval_(n)},this.disableIntervalHandler_=function(n){return t.disableInterval_(n)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in hn&&"visibilityState"in hn&&this.on(hn,"visibilitychange",this.toggleVisibility_)},i.toggleVisibility_=function(t){"hidden"===hn.visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(t)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())},i.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},i.disableInterval_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t&&"ended"!==t.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},i.update=function(n){var i=this;if("hidden"!==hn.visibilityState){var e=t.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",(function(){var t=i.player_.ended()?i.player_.duration():i.getCurrentTime_(),n=i.player_.liveTracker,r=i.player_.duration();n&&n.isLive()&&(r=i.player_.liveTracker.liveCurrentTime()),i.percent_!==e&&(i.el_.setAttribute("aria-valuenow",(100*e).toFixed(2)),i.percent_=e),i.currentTime_===t&&i.duration_===r||(i.el_.setAttribute("aria-valuetext",i.localize("progress bar timing: currentTime={1} duration={2}",[wc(t,r),wc(r,r)],"{1} of {2}")),i.currentTime_=t,i.duration_=r),i.bar&&i.bar.update(iu(i.el()),i.getProgress())})),e}},i.userSeek_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(t)},i.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},i.getPercent=function(){var t,n=this.getCurrentTime_(),i=this.player_.liveTracker;return i&&i.isLive()?(t=(n-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(t=1)):t=n/this.player_.duration(),t},i.handleMouseDown=function(n){cu(n)&&(n.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),t.prototype.handleMouseDown.call(this,n))},i.handleMouseMove=function(t,n){if(void 0===n&&(n=!1),cu(t)){var i;n||this.player_.scrubbing()||this.player_.scrubbing(!0);var e=this.calculateDistance(t),r=this.player_.liveTracker;if(r&&r.isLive()){if(e>=.99)return void r.seekToLiveEdge();var s=r.seekableStart(),o=r.liveCurrentTime();if((i=s+e*r.liveWindow())>=o&&(i=o),i<=s&&(i=s+.1),i===1/0)return}else(i=e*this.player_.duration())===this.player_.duration()&&(i-=.1);this.userSeek_(i)}},i.enable=function(){t.prototype.enable.call(this);var n=this.getChild("mouseTimeDisplay");n&&n.show()},i.disable=function(){t.prototype.disable.call(this);var n=this.getChild("mouseTimeDisplay");n&&n.hide()},i.handleMouseUp=function(n){t.prototype.handleMouseUp.call(this,n),n&&n.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?vh(this.player_.play()):this.update_()},i.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},i.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},i.handleAction=function(t){this.player_.paused()?this.player_.play():this.player_.pause()},i.handleKeyDown=function(n){var i=this.player_.liveTracker;if(dn.isEventKey(n,"Space")||dn.isEventKey(n,"Enter"))n.preventDefault(),n.stopPropagation(),this.handleAction(n);else if(dn.isEventKey(n,"Home"))n.preventDefault(),n.stopPropagation(),this.userSeek_(0);else if(dn.isEventKey(n,"End"))n.preventDefault(),n.stopPropagation(),i&&i.isLive()?this.userSeek_(i.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(dn(n))){n.preventDefault(),n.stopPropagation();var e=10*(dn.codes[dn(n)]-dn.codes[0])/100;i&&i.isLive()?this.userSeek_(i.seekableStart()+i.liveWindow()*e):this.userSeek_(this.player_.duration()*e)}else dn.isEventKey(n,"PgDn")?(n.preventDefault(),n.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):dn.isEventKey(n,"PgUp")?(n.preventDefault(),n.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):t.prototype.handleKeyDown.call(this,n)},i.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in hn&&"visibilityState"in hn&&this.off(hn,"visibilitychange",this.toggleVisibility_),t.prototype.dispose.call(this)},n}(Dc);Pc.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Ca||ja||Pc.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),sh.registerComponent("SeekBar",Pc);var Lc=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).handleMouseMove=Bu(Lu(mn(e),e.handleMouseMove),30),e.throttledHandleMouseSeek=Bu(Lu(mn(e),e.handleMouseSeek),30),e.handleMouseUpHandler_=function(t){return e.handleMouseUp(t)},e.handleMouseDownHandler_=function(t){return e.handleMouseDown(t)},e.enable(),e}yn(n,t);var i=n.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},i.handleMouseMove=function(t){var n=this.getChild("seekBar");if(n){var i=n.getChild("playProgressBar"),e=n.getChild("mouseTimeDisplay");if(i||e){var r=n.el(),s=eu(r),o=ru(r,t).x;o=Oc(o,0,1),e&&e.update(s,o),i&&i.update(s,n.getProgress())}}},i.handleMouseSeek=function(t){var n=this.getChild("seekBar");n&&n.handleMouseMove(t)},i.enabled=function(){return this.enabled_},i.disable=function(){if(this.children().forEach((function(t){return t.disable&&t.disable()})),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var t=this.getChild("seekBar");this.player_.scrubbing(!1),t.videoWasPlaying&&vh(this.player_.play())}},i.enable=function(){this.children().forEach((function(t){return t.enable&&t.enable()})),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},i.removeListenersAddedOnMousedownAndTouchstart=function(){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},i.handleMouseDown=function(t){var n=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(t),this.on(n,"mousemove",this.throttledHandleMouseSeek),this.on(n,"touchmove",this.throttledHandleMouseSeek),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)},i.handleMouseUp=function(t){var n=this.getChild("seekBar");n&&n.handleMouseUp(t),this.removeListenersAddedOnMousedownAndTouchstart()},n}(sh);Lc.prototype.options_={children:["seekBar"]},sh.registerComponent("ProgressControl",Lc);var Bc=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).on(n,["enterpictureinpicture","leavepictureinpicture"],(function(t){return e.handlePictureInPictureChange(t)})),e.on(n,["disablepictureinpicturechanged","loadedmetadata"],(function(t){return e.handlePictureInPictureEnabledChange(t)})),e.disable(),e}yn(n,t);var i=n.prototype;return i.buildCSSClass=function(){return"vjs-picture-in-picture-control "+t.prototype.buildCSSClass.call(this)},i.handlePictureInPictureEnabledChange=function(){hn.pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},i.handlePictureInPictureChange=function(t){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},i.handleClick=function(t){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},n}(pc);Bc.prototype.controlText_="Picture-in-Picture",sh.registerComponent("PictureInPictureToggle",Bc);var Fc=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).on(n,"fullscreenchange",(function(t){return e.handleFullscreenChange(t)})),!1===hn[n.fsApi_.fullscreenEnabled]&&e.disable(),e}yn(n,t);var i=n.prototype;return i.buildCSSClass=function(){return"vjs-fullscreen-control "+t.prototype.buildCSSClass.call(this)},i.handleFullscreenChange=function(t){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},i.handleClick=function(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},n}(pc);Fc.prototype.controlText_="Fullscreen",sh.registerComponent("FullscreenToggle",Fc);var _c=function(t){function n(){return t.apply(this,arguments)||this}return yn(n,t),n.prototype.createEl=function(){var n=t.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return n.appendChild(t.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),n},n}(sh);sh.registerComponent("VolumeLevel",_c);var zc=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).update=Bu(Lu(mn(e),e.update),30),e}yn(n,t);var i=n.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},i.update=function(t,n,i,e){if(!i){var r=iu(this.el_),s=iu(this.player_.el()),o=t.width*n;if(!s||!r)return;var a=t.left-s.left+o,u=t.width-o+(s.right-t.right),h=r.width/2;a<h?h+=h-a:u<h&&(h=u),h<0?h=0:h>r.width&&(h=r.width),this.el_.style.right="-"+h+"px"}this.write(e+"%")},i.write=function(t){Ha(this.el_,t)},i.updateVolume=function(t,n,i,e,r){var s=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",(function(){s.update(t,n,i,e.toFixed(0)),r&&r()}))},n}(sh);sh.registerComponent("VolumeLevelTooltip",zc);var Vc=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).update=Bu(Lu(mn(e),e.update),30),e}yn(n,t);var i=n.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},i.update=function(t,n,i){var e=this,r=100*n;this.getChild("volumeLevelTooltip").updateVolume(t,n,i,r,(function(){i?e.el_.style.bottom=t.height*n+"px":e.el_.style.left=t.width*n+"px"}))},n}(sh);Vc.prototype.options_={children:["volumeLevelTooltip"]},sh.registerComponent("MouseVolumeLevelDisplay",Vc);var Hc=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).on("slideractive",(function(t){return e.updateLastVolume_(t)})),e.on(n,"volumechange",(function(t){return e.updateARIAAttributes(t)})),n.ready((function(){return e.updateARIAAttributes()})),e}yn(n,t);var i=n.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},i.handleMouseDown=function(n){cu(n)&&t.prototype.handleMouseDown.call(this,n)},i.handleMouseMove=function(t){var n=this.getChild("mouseVolumeLevelDisplay");if(n){var i=this.el(),e=iu(i),r=this.vertical(),s=ru(i,t);s=r?s.y:s.x,s=Oc(s,0,1),n.update(e,s,r)}cu(t)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))},i.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},i.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},i.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},i.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},i.updateARIAAttributes=function(t){var n=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",n),this.el_.setAttribute("aria-valuetext",n+"%")},i.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},i.updateLastVolume_=function(){var t=this,n=this.player_.volume();this.one("sliderinactive",(function(){0===t.player_.volume()&&t.player_.lastVolume_(n)}))},n}(Dc);Hc.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Ca||ja||Hc.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),Hc.prototype.playerEvent="volumechange",sh.registerComponent("VolumeBar",Hc);var Xc=function(t){function n(n,i){var e;return void 0===i&&(i={}),i.vertical=i.vertical||!1,(void 0===i.volumeBar||la(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),e=t.call(this,n,i)||this,function(t,n){n.tech_&&!n.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(n,"loadstart",(function(){n.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")}))}(mn(e),n),e.throttledHandleMouseMove=Bu(Lu(mn(e),e.handleMouseMove),30),e.handleMouseUpHandler_=function(t){return e.handleMouseUp(t)},e.on("mousedown",(function(t){return e.handleMouseDown(t)})),e.on("touchstart",(function(t){return e.handleMouseDown(t)})),e.on("mousemove",(function(t){return e.handleMouseMove(t)})),e.on(e.volumeBar,["focus","slideractive"],(function(){e.volumeBar.addClass("vjs-slider-active"),e.addClass("vjs-slider-active"),e.trigger("slideractive")})),e.on(e.volumeBar,["blur","sliderinactive"],(function(){e.volumeBar.removeClass("vjs-slider-active"),e.removeClass("vjs-slider-active"),e.trigger("sliderinactive")})),e}yn(n,t);var i=n.prototype;return i.createEl=function(){var n="vjs-volume-horizontal";return this.options_.vertical&&(n="vjs-volume-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+n})},i.handleMouseDown=function(t){var n=this.el_.ownerDocument;this.on(n,"mousemove",this.throttledHandleMouseMove),this.on(n,"touchmove",this.throttledHandleMouseMove),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)},i.handleMouseUp=function(t){var n=this.el_.ownerDocument;this.off(n,"mousemove",this.throttledHandleMouseMove),this.off(n,"touchmove",this.throttledHandleMouseMove),this.off(n,"mouseup",this.handleMouseUpHandler_),this.off(n,"touchend",this.handleMouseUpHandler_)},i.handleMouseMove=function(t){this.volumeBar.handleMouseMove(t)},n}(sh);Xc.prototype.options_={children:["volumeBar"]},sh.registerComponent("VolumeControl",Xc);var qc=function(t){function n(n,i){var e;return e=t.call(this,n,i)||this,function(t,n){n.tech_&&!n.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(n,"loadstart",(function(){n.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")}))}(mn(e),n),e.on(n,["loadstart","volumechange"],(function(t){return e.update(t)})),e}yn(n,t);var i=n.prototype;return i.buildCSSClass=function(){return"vjs-mute-control "+t.prototype.buildCSSClass.call(this)},i.handleClick=function(t){var n=this.player_.volume(),i=this.player_.lastVolume_();if(0===n){var e=i<.1?.1:i;this.player_.volume(e),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},i.update=function(t){this.updateIcon_(),this.updateControlText_()},i.updateIcon_=function(){var t=this.player_.volume(),n=3;Ca&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===t||this.player_.muted()?n=0:t<.33?n=1:t<.67&&(n=2);for(var i=0;i<4;i++)Wa(this.el_,"vjs-vol-"+i);Ga(this.el_,"vjs-vol-"+n)},i.updateControlText_=function(){var t=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)},n}(pc);qc.prototype.controlText_="Mute",sh.registerComponent("MuteToggle",qc);var Gc=function(t){function n(n,i){var e;return void 0===i&&(i={}),void 0!==i.inline?i.inline=i.inline:i.inline=!0,(void 0===i.volumeControl||la(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),(e=t.call(this,n,i)||this).handleKeyPressHandler_=function(t){return e.handleKeyPress(t)},e.on(n,["loadstart"],(function(t){return e.volumePanelState_(t)})),e.on(e.muteToggle,"keyup",(function(t){return e.handleKeyPress(t)})),e.on(e.volumeControl,"keyup",(function(t){return e.handleVolumeControlKeyUp(t)})),e.on("keydown",(function(t){return e.handleKeyPress(t)})),e.on("mouseover",(function(t){return e.handleMouseOver(t)})),e.on("mouseout",(function(t){return e.handleMouseOut(t)})),e.on(e.volumeControl,["slideractive"],e.sliderActive_),e.on(e.volumeControl,["sliderinactive"],e.sliderInactive_),e}yn(n,t);var i=n.prototype;return i.sliderActive_=function(){this.addClass("vjs-slider-active")},i.sliderInactive_=function(){this.removeClass("vjs-slider-active")},i.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},i.createEl=function(){var n="vjs-volume-panel-horizontal";return this.options_.inline||(n="vjs-volume-panel-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+n})},i.dispose=function(){this.handleMouseOut(),t.prototype.dispose.call(this)},i.handleVolumeControlKeyUp=function(t){dn.isEventKey(t,"Esc")&&this.muteToggle.focus()},i.handleMouseOver=function(t){this.addClass("vjs-hover"),Du(hn,"keyup",this.handleKeyPressHandler_)},i.handleMouseOut=function(t){this.removeClass("vjs-hover"),Nu(hn,"keyup",this.handleKeyPressHandler_)},i.handleKeyPress=function(t){dn.isEventKey(t,"Esc")&&this.handleMouseOut()},n}(sh);Gc.prototype.options_={children:["muteToggle","volumeControl"]},sh.registerComponent("VolumePanel",Gc);var Wc=function(t){function n(n,i){var e;return e=t.call(this,n,i)||this,i&&(e.menuButton_=i.menuButton),e.focusedChild_=-1,e.on("keydown",(function(t){return e.handleKeyDown(t)})),e.boundHandleBlur_=function(t){return e.handleBlur(t)},e.boundHandleTapClick_=function(t){return e.handleTapClick(t)},e}yn(n,t);var i=n.prototype;return i.addEventListenerForItem=function(t){t instanceof sh&&(this.on(t,"blur",this.boundHandleBlur_),this.on(t,["tap","click"],this.boundHandleTapClick_))},i.removeEventListenerForItem=function(t){t instanceof sh&&(this.off(t,"blur",this.boundHandleBlur_),this.off(t,["tap","click"],this.boundHandleTapClick_))},i.removeChild=function(n){"string"==typeof n&&(n=this.getChild(n)),this.removeEventListenerForItem(n),t.prototype.removeChild.call(this,n)},i.addItem=function(t){var n=this.addChild(t);n&&this.addEventListenerForItem(n)},i.createEl=function(){var n=this.options_.contentElType||"ul";this.contentEl_=Va(n,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var i=t.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return i.appendChild(this.contentEl_),Du(i,"click",(function(t){t.preventDefault(),t.stopImmediatePropagation()})),i},i.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,t.prototype.dispose.call(this)},i.handleBlur=function(t){var n=t.relatedTarget||hn.activeElement;if(!this.children().some((function(t){return t.el()===n}))){var i=this.menuButton_;i&&i.buttonPressed_&&n!==i.el().firstChild&&i.unpressButton()}},i.handleTapClick=function(t){if(this.menuButton_){this.menuButton_.unpressButton();var n=this.children();if(!Array.isArray(n))return;var i=n.filter((function(n){return n.el()===t.target}))[0];if(!i)return;"CaptionSettingsMenuItem"!==i.name()&&this.menuButton_.focus()}},i.handleKeyDown=function(t){dn.isEventKey(t,"Left")||dn.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):(dn.isEventKey(t,"Right")||dn.isEventKey(t,"Up"))&&(t.preventDefault(),t.stopPropagation(),this.stepBack())},i.stepForward=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_+1),this.focus(t)},i.stepBack=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_-1),this.focus(t)},i.focus=function(t){void 0===t&&(t=0);var n=this.children().slice();n.length&&n[0].hasClass("vjs-menu-title")&&n.shift(),n.length>0&&(t<0?t=0:t>=n.length&&(t=n.length-1),this.focusedChild_=t,n[t].el_.focus())},n}(sh);sh.registerComponent("Menu",Wc);var Yc=function(t){function n(n,i){var e;void 0===i&&(i={}),(e=t.call(this,n,i)||this).menuButton_=new pc(n,i),e.menuButton_.controlText(e.controlText_),e.menuButton_.el_.setAttribute("aria-haspopup","true");var r=pc.prototype.buildCSSClass();e.menuButton_.el_.className=e.buildCSSClass()+" "+r,e.menuButton_.removeClass("vjs-control"),e.addChild(e.menuButton_),e.update(),e.enabled_=!0;var s=function(t){return e.handleClick(t)};return e.handleMenuKeyUp_=function(t){return e.handleMenuKeyUp(t)},e.on(e.menuButton_,"tap",s),e.on(e.menuButton_,"click",s),e.on(e.menuButton_,"keydown",(function(t){return e.handleKeyDown(t)})),e.on(e.menuButton_,"mouseenter",(function(){e.addClass("vjs-hover"),e.menu.show(),Du(hn,"keyup",e.handleMenuKeyUp_)})),e.on("mouseleave",(function(t){return e.handleMouseLeave(t)})),e.on("keydown",(function(t){return e.handleSubmenuKeyDown(t)})),e}yn(n,t);var i=n.prototype;return i.update=function(){var t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},i.createMenu=function(){var t=new Wc(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var n=Va("li",{className:"vjs-menu-title",textContent:Zu(this.options_.title),tabIndex:-1}),i=new sh(this.player_,{el:n});t.addItem(i)}if(this.items=this.createItems(),this.items)for(var e=0;e<this.items.length;e++)t.addItem(this.items[e]);return t},i.createItems=function(){},i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},i.buildWrapperCSSClass=function(){var n="vjs-menu-button";return!0===this.options_.inline?n+="-inline":n+="-popup","vjs-menu-button "+n+" "+pc.prototype.buildCSSClass()+" "+t.prototype.buildCSSClass.call(this)},i.buildCSSClass=function(){var n="vjs-menu-button";return!0===this.options_.inline?n+="-inline":n+="-popup","vjs-menu-button "+n+" "+t.prototype.buildCSSClass.call(this)},i.controlText=function(t,n){return void 0===n&&(n=this.menuButton_.el()),this.menuButton_.controlText(t,n)},i.dispose=function(){this.handleMouseLeave(),t.prototype.dispose.call(this)},i.handleClick=function(t){this.buttonPressed_?this.unpressButton():this.pressButton()},i.handleMouseLeave=function(t){this.removeClass("vjs-hover"),Nu(hn,"keyup",this.handleMenuKeyUp_)},i.focus=function(){this.menuButton_.focus()},i.blur=function(){this.menuButton_.blur()},i.handleKeyDown=function(t){dn.isEventKey(t,"Esc")||dn.isEventKey(t,"Tab")?(this.buttonPressed_&&this.unpressButton(),dn.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus())):(dn.isEventKey(t,"Up")||dn.isEventKey(t,"Down"))&&(this.buttonPressed_||(t.preventDefault(),this.pressButton()))},i.handleMenuKeyUp=function(t){(dn.isEventKey(t,"Esc")||dn.isEventKey(t,"Tab"))&&this.removeClass("vjs-hover")},i.handleSubmenuKeyPress=function(t){this.handleSubmenuKeyDown(t)},i.handleSubmenuKeyDown=function(t){(dn.isEventKey(t,"Esc")||dn.isEventKey(t,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),dn.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus()))},i.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Ca&&_a())return;this.menu.focus()}},i.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},i.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},i.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},n}(sh);sh.registerComponent("MenuButton",Yc);var Jc=function(t){function n(n,i){var e,r=i.tracks;if((e=t.call(this,n,i)||this).items.length<=1&&e.hide(),!r)return mn(e);var s=Lu(mn(e),e.update);return r.addEventListener("removetrack",s),r.addEventListener("addtrack",s),r.addEventListener("labelchange",s),e.player_.on("ready",s),e.player_.on("dispose",(function(){r.removeEventListener("removetrack",s),r.removeEventListener("addtrack",s),r.removeEventListener("labelchange",s)})),e}return yn(n,t),n}(Yc);sh.registerComponent("TrackButton",Jc);var Qc=["Tab","Esc","Up","Down","Right","Left"],$c=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).selectable=i.selectable,e.isSelected_=i.selected||!1,e.multiSelectable=i.multiSelectable,e.selected(e.isSelected_),e.selectable?e.multiSelectable?e.el_.setAttribute("role","menuitemcheckbox"):e.el_.setAttribute("role","menuitemradio"):e.el_.setAttribute("role","menuitem"),e}yn(n,t);var i=n.prototype;return i.createEl=function(n,i,e){this.nonIconControl=!0;var r=t.prototype.createEl.call(this,"li",ca({className:"vjs-menu-item",tabIndex:-1},i),e);return r.replaceChild(Va("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),r.querySelector(".vjs-icon-placeholder")),r},i.handleKeyDown=function(n){Qc.some((function(t){return dn.isEventKey(n,t)}))||t.prototype.handleKeyDown.call(this,n)},i.handleClick=function(t){this.selected(!0)},i.selected=function(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},n}(uc);sh.registerComponent("MenuItem",$c);var Kc=function(t){function n(n,i){var e,r=i.track,s=n.textTracks();i.label=r.label||r.language||"Unknown",i.selected="showing"===r.mode,(e=t.call(this,n,i)||this).track=r,e.kinds=(i.kinds||[i.kind||e.track.kind]).filter(Boolean);var o,a=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.handleTracksChange.apply(mn(e),n)},u=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.handleSelectedLanguageChange.apply(mn(e),n)};(n.on(["loadstart","texttrackchange"],a),s.addEventListener("change",a),s.addEventListener("selectedlanguagechange",u),e.on("dispose",(function(){n.off(["loadstart","texttrackchange"],a),s.removeEventListener("change",a),s.removeEventListener("selectedlanguagechange",u)})),void 0===s.onchange)&&e.on(["tap","click"],(function(){if("object"!=typeof bt.Event)try{o=new bt.Event("change")}catch(t){}o||(o=hn.createEvent("Event")).initEvent("change",!0,!0),s.dispatchEvent(o)}));return e.handleTracksChange(),e}yn(n,t);var i=n.prototype;return i.handleClick=function(n){var i=this.track,e=this.player_.textTracks();if(t.prototype.handleClick.call(this,n),e)for(var r=0;r<e.length;r++){var s=e[r];-1!==this.kinds.indexOf(s.kind)&&(s===i?"showing"!==s.mode&&(s.mode="showing"):"disabled"!==s.mode&&(s.mode="disabled"))}},i.handleTracksChange=function(t){var n="showing"===this.track.mode;n!==this.isSelected_&&this.selected(n)},i.handleSelectedLanguageChange=function(t){if("showing"===this.track.mode){var n=this.player_.cache_.selectedLanguage;if(n&&n.enabled&&n.language===this.track.language&&n.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},i.dispose=function(){this.track=null,t.prototype.dispose.call(this)},n}($c);sh.registerComponent("TextTrackMenuItem",Kc);var Zc=function(t){function n(n,i){return i.track={player:n,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,t.call(this,n,i)||this}yn(n,t);var i=n.prototype;return i.handleTracksChange=function(t){for(var n=this.player().textTracks(),i=!0,e=0,r=n.length;e<r;e++){var s=n[e];if(this.options_.kinds.indexOf(s.kind)>-1&&"showing"===s.mode){i=!1;break}}i!==this.isSelected_&&this.selected(i)},i.handleSelectedLanguageChange=function(t){for(var n=this.player().textTracks(),i=!0,e=0,r=n.length;e<r;e++){var s=n[e];if(["captions","descriptions","subtitles"].indexOf(s.kind)>-1&&"showing"===s.mode){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})},n}(Kc);sh.registerComponent("OffTextTrackMenuItem",Zc);var tf=function(t){function n(n,i){return void 0===i&&(i={}),i.tracks=n.textTracks(),t.call(this,n,i)||this}return yn(n,t),n.prototype.createItems=function(t,n){var i;void 0===t&&(t=[]),void 0===n&&(n=Kc),this.label_&&(i=this.label_+" off"),t.push(new Zc(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;var e=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<e.length;r++){var s=e[r];if(this.kinds_.indexOf(s.kind)>-1){var o=new n(this.player_,{track:s,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass("vjs-"+s.kind+"-menu-item"),t.push(o)}}return t},n}(Jc);sh.registerComponent("TextTrackButton",tf);var nf=function(t){function n(n,i){var e,r=i.track,s=i.cue,o=n.currentTime();return i.selectable=!0,i.multiSelectable=!1,i.label=s.text,i.selected=s.startTime<=o&&o<s.endTime,(e=t.call(this,n,i)||this).track=r,e.cue=s,r.addEventListener("cuechange",Lu(mn(e),e.update)),e}yn(n,t);var i=n.prototype;return i.handleClick=function(n){t.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},i.update=function(t){var n=this.cue,i=this.player_.currentTime();this.selected(n.startTime<=i&&i<n.endTime)},n}($c);sh.registerComponent("ChaptersTrackMenuItem",nf);var ef=function(t){function n(n,i,e){return t.call(this,n,i,e)||this}yn(n,t);var i=n.prototype;return i.buildCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildWrapperCSSClass.call(this)},i.update=function(n){this.track_&&(!n||"addtrack"!==n.type&&"removetrack"!==n.type)||this.setTrack(this.findChaptersTrack()),t.prototype.update.call(this)},i.setTrack=function(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.addEventListener("load",this.updateHandler_)}}},i.findChaptersTrack=function(){for(var t=this.player_.textTracks()||[],n=t.length-1;n>=0;n--){var i=t[n];if(i.kind===this.kind_)return i}},i.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Zu(this.kind_))},i.createMenu=function(){return this.options_.title=this.getMenuCaption(),t.prototype.createMenu.call(this)},i.createItems=function(){var t=[];if(!this.track_)return t;var n=this.track_.cues;if(!n)return t;for(var i=0,e=n.length;i<e;i++){var r=n[i],s=new nf(this.player_,{track:this.track_,cue:r});t.push(s)}return t},n}(tf);ef.prototype.kind_="chapters",ef.prototype.controlText_="Chapters",sh.registerComponent("ChaptersButton",ef);var rf=function(t){function n(n,i,e){var r;r=t.call(this,n,i,e)||this;var s=n.textTracks(),o=Lu(mn(r),r.handleTracksChange);return s.addEventListener("change",o),r.on("dispose",(function(){s.removeEventListener("change",o)})),r}yn(n,t);var i=n.prototype;return i.handleTracksChange=function(t){for(var n=this.player().textTracks(),i=!1,e=0,r=n.length;e<r;e++){var s=n[e];if(s.kind!==this.kind_&&"showing"===s.mode){i=!0;break}}i?this.disable():this.enable()},i.buildCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildWrapperCSSClass.call(this)},n}(tf);rf.prototype.kind_="descriptions",rf.prototype.controlText_="Descriptions",sh.registerComponent("DescriptionsButton",rf);var sf=function(t){function n(n,i,e){return t.call(this,n,i,e)||this}yn(n,t);var i=n.prototype;return i.buildCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildWrapperCSSClass.call(this)},n}(tf);sf.prototype.kind_="subtitles",sf.prototype.controlText_="Subtitles",sh.registerComponent("SubtitlesButton",sf);var of=function(t){function n(n,i){var e;return i.track={player:n,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",(e=t.call(this,n,i)||this).addClass("vjs-texttrack-settings"),e.controlText(", opens "+i.kind+" settings dialog"),e}return yn(n,t),n.prototype.handleClick=function(t){this.player().getChild("textTrackSettings").open()},n}(Kc);sh.registerComponent("CaptionSettingsMenuItem",of);var af=function(t){function n(n,i,e){return t.call(this,n,i,e)||this}yn(n,t);var i=n.prototype;return i.buildCSSClass=function(){return"vjs-captions-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-captions-button "+t.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var n=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(n.push(new of(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),t.prototype.createItems.call(this,n)},n}(tf);af.prototype.kind_="captions",af.prototype.controlText_="Captions",sh.registerComponent("CaptionsButton",af);var uf=function(t){function n(){return t.apply(this,arguments)||this}return yn(n,t),n.prototype.createEl=function(n,i,e){var r=t.prototype.createEl.call(this,n,i,e),s=r.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(s.appendChild(Va("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(Va("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),r},n}(Kc);sh.registerComponent("SubsCapsMenuItem",uf);var hf=function(t){function n(n,i){var e;return void 0===i&&(i={}),(e=t.call(this,n,i)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(e.player_.language_)>-1&&(e.label_="captions"),e.menuButton_.controlText(Zu(e.label_)),e}yn(n,t);var i=n.prototype;return i.buildCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var n=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(n.push(new of(this.player_,{kind:this.label_})),this.hideThreshold_+=1),n=t.prototype.createItems.call(this,n,uf)},n}(tf);hf.prototype.kinds_=["captions","subtitles"],hf.prototype.controlText_="Subtitles",sh.registerComponent("SubsCapsButton",hf);var cf=function(t){function n(n,i){var e,r=i.track,s=n.audioTracks();i.label=r.label||r.language||"Unknown",i.selected=r.enabled,(e=t.call(this,n,i)||this).track=r,e.addClass("vjs-"+r.kind+"-menu-item");var o=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.handleTracksChange.apply(mn(e),n)};return s.addEventListener("change",o),e.on("dispose",(function(){s.removeEventListener("change",o)})),e}yn(n,t);var i=n.prototype;return i.createEl=function(n,i,e){var r=t.prototype.createEl.call(this,n,i,e),s=r.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(s.appendChild(Va("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(Va("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),r},i.handleClick=function(n){if(t.prototype.handleClick.call(this,n),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var i=this.player_.audioTracks(),e=0;e<i.length;e++){var r=i[e];r!==this.track&&(r.enabled=r===this.track)}},i.handleTracksChange=function(t){this.selected(this.track.enabled)},n}($c);sh.registerComponent("AudioTrackMenuItem",cf);var ff=function(t){function n(n,i){return void 0===i&&(i={}),i.tracks=n.audioTracks(),t.call(this,n,i)||this}yn(n,t);var i=n.prototype;return i.buildCSSClass=function(){return"vjs-audio-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-audio-button "+t.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(t){void 0===t&&(t=[]),this.hideThreshold_=1;for(var n=this.player_.audioTracks(),i=0;i<n.length;i++){var e=n[i];t.push(new cf(this.player_,{track:e,selectable:!0,multiSelectable:!1}))}return t},n}(Jc);ff.prototype.controlText_="Audio Track",sh.registerComponent("AudioTrackButton",ff);var lf=function(t){function n(n,i){var e,r=i.rate,s=parseFloat(r,10);return i.label=r,i.selected=s===n.playbackRate(),i.selectable=!0,i.multiSelectable=!1,(e=t.call(this,n,i)||this).label=r,e.rate=s,e.on(n,"ratechange",(function(t){return e.update(t)})),e}yn(n,t);var i=n.prototype;return i.handleClick=function(n){t.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},i.update=function(t){this.selected(this.player().playbackRate()===this.rate)},n}($c);lf.prototype.contentElType="button",sh.registerComponent("PlaybackRateMenuItem",lf);var vf=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).menuButton_.el_.setAttribute("aria-describedby",e.labelElId_),e.updateVisibility(),e.updateLabel(),e.on(n,"loadstart",(function(t){return e.updateVisibility(t)})),e.on(n,"ratechange",(function(t){return e.updateLabel(t)})),e.on(n,"playbackrateschange",(function(t){return e.handlePlaybackRateschange(t)})),e}yn(n,t);var i=n.prototype;return i.createEl=function(){var n=t.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Va("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),n.appendChild(this.labelEl_),n},i.dispose=function(){this.labelEl_=null,t.prototype.dispose.call(this)},i.buildCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){for(var t=this.playbackRates(),n=[],i=t.length-1;i>=0;i--)n.push(new lf(this.player(),{rate:t[i]+"x"}));return n},i.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},i.handleClick=function(t){var n=this.player().playbackRate(),i=this.playbackRates(),e=(i.indexOf(n)+1)%i.length;this.player().playbackRate(i[e])},i.handlePlaybackRateschange=function(t){this.update()},i.playbackRates=function(){var t=this.player();return t.playbackRates&&t.playbackRates()||[]},i.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},i.updateVisibility=function(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},i.updateLabel=function(t){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},n}(Yc);vf.prototype.controlText_="Playback Rate",sh.registerComponent("PlaybackRateMenuButton",vf);var df=function(t){function n(){return t.apply(this,arguments)||this}yn(n,t);var i=n.prototype;return i.buildCSSClass=function(){return"vjs-spacer "+t.prototype.buildCSSClass.call(this)},i.createEl=function(n,i,e){return void 0===n&&(n="div"),void 0===i&&(i={}),void 0===e&&(e={}),i.className||(i.className=this.buildCSSClass()),t.prototype.createEl.call(this,n,i,e)},n}(sh);sh.registerComponent("Spacer",df);var pf=function(t){function n(){return t.apply(this,arguments)||this}yn(n,t);var i=n.prototype;return i.buildCSSClass=function(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:" "})},n}(df);sh.registerComponent("CustomControlSpacer",pf);var mf=function(t){function n(){return t.apply(this,arguments)||this}return yn(n,t),n.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},n}(sh);mf.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in hn&&mf.prototype.options_.children.splice(mf.prototype.options_.children.length-1,0,"pictureInPictureToggle"),sh.registerComponent("ControlBar",mf);var gf=function(t){function n(n,i){var e;return(e=t.call(this,n,i)||this).on(n,"error",(function(t){return e.open(t)})),e}yn(n,t);var i=n.prototype;return i.buildCSSClass=function(){return"vjs-error-display "+t.prototype.buildCSSClass.call(this)},i.content=function(){var t=this.player().error();return t?this.localize(t.message):""},n}(gh);gf.prototype.options_=fn({},gh.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),sh.registerComponent("ErrorDisplay",gf);var bf=["#000","Black"],yf=["#00F","Blue"],jf=["#0FF","Cyan"],wf=["#0F0","Green"],Tf=["#F0F","Magenta"],Af=["#F00","Red"],kf=["#FFF","White"],xf=["#FF0","Yellow"],Sf=["1","Opaque"],Ef=["0.5","Semi-Transparent"],If=["0","Transparent"],Of={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[bf,kf,Af,wf,yf,xf,Tf,jf]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Sf,Ef,If]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[kf,bf,Af,wf,yf,xf,Tf,jf]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(t){return"1.00"===t?null:Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Sf,Ef]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[If,Ef,Sf]}};function Df(t,n){if(n&&(t=n(t)),t&&"none"!==t)return t}Of.windowColor.options=Of.backgroundColor.options;var Nf=function(t){function n(n,i){var e;return i.temporary=!1,(e=t.call(this,n,i)||this).updateDisplay=e.updateDisplay.bind(mn(e)),e.fill(),e.hasBeenOpened_=e.hasBeenFilled_=!0,e.endDialog=Va("p",{className:"vjs-control-text",textContent:e.localize("End of dialog window.")}),e.el().appendChild(e.endDialog),e.setDefaults(),void 0===i.persistTextTrackSettings&&(e.options_.persistTextTrackSettings=e.options_.playerOptions.persistTextTrackSettings),e.on(e.$(".vjs-done-button"),"click",(function(){e.saveSettings(),e.close()})),e.on(e.$(".vjs-default-button"),"click",(function(){e.setDefaults(),e.updateDisplay()})),ha(Of,(function(t){e.on(e.$(t.selector),"change",e.updateDisplay)})),e.options_.persistTextTrackSettings&&e.restoreSettings(),e}yn(n,t);var i=n.prototype;return i.dispose=function(){this.endDialog=null,t.prototype.dispose.call(this)},i.createElSelect_=function(t,n,i){var e=this;void 0===n&&(n=""),void 0===i&&(i="label");var r=Of[t],s=r.id.replace("%s",this.id_),o=[n,s].join(" ").trim();return["<"+i+' id="'+s+'" class="'+("label"===i?"vjs-label":"")+'">',this.localize(r.label),"</"+i+">",'<select aria-labelledby="'+o+'">'].concat(r.options.map((function(t){var n=s+"-"+t[1].replace(/\W+/g,"");return['<option id="'+n+'" value="'+t[0]+'" ','aria-labelledby="'+o+" "+n+'">',e.localize(t[1]),"</option>"].join("")}))).concat("</select>").join("")},i.createElFgColor_=function(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")},i.createElBgColor_=function(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")},i.createElWinColor_=function(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")},i.createElColors_=function(){return Va("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},i.createElFont_=function(){return Va("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},i.createElControls_=function(){var t=this.localize("restore all settings to the default values");return Va("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},i.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},i.label=function(){return this.localize("Caption Settings Dialog")},i.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},i.buildCSSClass=function(){return t.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},i.getValues=function(){var t,n,i,e=this;return n=function(t,n,i){var r,s,o=(r=e.$(n.selector),s=n.parser,Df(r.options[r.options.selectedIndex].value,s));return void 0!==o&&(t[i]=o),t},void 0===(i={})&&(i=0),ua(t=Of).reduce((function(i,e){return n(i,t[e],e)}),i)},i.setValues=function(t){var n=this;ha(Of,(function(i,e){!function(t,n,i){if(n)for(var e=0;e<t.options.length;e++)if(Df(t.options[e].value,i)===n){t.selectedIndex=e;break}}(n.$(i.selector),t[e],i.parser)}))},i.setDefaults=function(){var t=this;ha(Of,(function(n){var i=n.hasOwnProperty("default")?n.default:0;t.$(n.selector).selectedIndex=i}))},i.restoreSettings=function(){var t;try{t=JSON.parse(bt.localStorage.getItem("vjs-text-track-settings"))}catch(t){sa.warn(t)}t&&this.setValues(t)},i.saveSettings=function(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?bt.localStorage.setItem("vjs-text-track-settings",JSON.stringify(t)):bt.localStorage.removeItem("vjs-text-track-settings")}catch(t){sa.warn(t)}}},i.updateDisplay=function(){var t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()},i.conditionalBlur_=function(){this.previouslyActiveEl_=null;var t=this.player_.controlBar,n=t&&t.subsCapsButton,i=t&&t.captionsButton;n?n.focus():i&&i.focus()},n}(gh);sh.registerComponent("TextTrackSettings",Nf);var Mf=function(t){function n(n,i){var e,r=i.ResizeObserver||bt.ResizeObserver;null===i.ResizeObserver&&(r=!1);var s=th({createEl:!r,reportTouchActivity:!1},i);return(e=t.call(this,n,s)||this).ResizeObserver=i.ResizeObserver||bt.ResizeObserver,e.loadListener_=null,e.resizeObserver_=null,e.debouncedHandler_=function(t,n,i,e){var r;void 0===e&&(e=bt);var s=function(){var s=this,o=arguments,a=function(){r=null,a=null,i||t.apply(s,o)};!r&&i&&t.apply(s,o),e.clearTimeout(r),r=e.setTimeout(a,n)};return s.cancel=function(){e.clearTimeout(r),r=null},s}((function(){e.resizeHandler()}),100,!1,mn(e)),r?(e.resizeObserver_=new e.ResizeObserver(e.debouncedHandler_),e.resizeObserver_.observe(n.el())):(e.loadListener_=function(){if(e.el_&&e.el_.contentWindow){var t=e.debouncedHandler_,n=e.unloadListener_=function(){Nu(this,"resize",t),Nu(this,"unload",n),n=null};Du(e.el_.contentWindow,"unload",n),Du(e.el_.contentWindow,"resize",t)}},e.one("load",e.loadListener_)),e}yn(n,t);var i=n.prototype;return i.createEl=function(){return t.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},i.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},i.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,t.prototype.dispose.call(this)},n}(sh);sh.registerComponent("ResizeManager",Mf);var Cf={trackingThreshold:20,liveTolerance:15},Rf=function(t){function n(n,i){var e,r=th(Cf,i,{createEl:!1});return(e=t.call(this,n,r)||this).handleVisibilityChange_=function(t){return e.handleVisibilityChange(t)},e.trackLiveHandler_=function(){return e.trackLive_()},e.handlePlay_=function(t){return e.handlePlay(t)},e.handleFirstTimeupdate_=function(t){return e.handleFirstTimeupdate(t)},e.handleSeeked_=function(t){return e.handleSeeked(t)},e.seekToLiveEdge_=function(t){return e.seekToLiveEdge(t)},e.reset_(),e.on(e.player_,"durationchange",(function(t){return e.handleDurationchange(t)})),e.on(e.player_,"canplay",(function(){return e.toggleTracking()})),Ea&&"hidden"in hn&&"visibilityState"in hn&&e.on(hn,"visibilitychange",e.handleVisibilityChange_),e}yn(n,t);var i=n.prototype;return i.handleVisibilityChange=function(){this.player_.duration()===1/0&&(hn.hidden?this.stopTracking():this.startTracking())},i.trackLive_=function(){var t=this.player_.seekable();if(t&&t.length){var n=Number(bt.performance.now().toFixed(4)),i=-1===this.lastTime_?0:(n-this.lastTime_)/1e3;this.lastTime_=n,this.pastSeekEnd_=this.pastSeekEnd()+i;var e=this.liveCurrentTime(),r=this.player_.currentTime(),s=this.player_.paused()||this.seekedBehindLive_||Math.abs(e-r)>this.options_.liveTolerance;this.timeupdateSeen_&&e!==1/0||(s=!1),s!==this.behindLiveEdge_&&(this.behindLiveEdge_=s,this.trigger("liveedgechange"))}},i.handleDurationchange=function(){this.toggleTracking()},i.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},i.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},i.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},i.handleSeeked=function(){var t=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&t>2,this.nextSeekedFromUser_=!1,this.trackLive_()},i.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},i.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},i.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},i.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},i.seekableEnd=function(){for(var t=this.player_.seekable(),n=[],i=t?t.length:0;i--;)n.push(t.end(i));return n.length?n.sort()[n.length-1]:1/0},i.seekableStart=function(){for(var t=this.player_.seekable(),n=[],i=t?t.length:0;i--;)n.push(t.start(i));return n.length?n.sort()[0]:0},i.liveWindow=function(){var t=this.liveCurrentTime();return t===1/0?0:t-this.seekableStart()},i.isLive=function(){return this.isTracking()},i.atLiveEdge=function(){return!this.behindLiveEdge()},i.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},i.pastSeekEnd=function(){var t=this.seekableEnd();return-1!==this.lastSeekEnd_&&t!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=t,this.pastSeekEnd_},i.behindLiveEdge=function(){return this.behindLiveEdge_},i.isTracking=function(){return"number"==typeof this.trackingInterval_},i.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},i.dispose=function(){this.off(hn,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),t.prototype.dispose.call(this)},n}(sh);sh.registerComponent("LiveTracker",Rf);var Uf,Pf=function(t){var n=t.el();if(n.hasAttribute("src"))return t.triggerSourceset(n.src),!0;var i=t.$$("source"),e=[],r="";if(!i.length)return!1;for(var s=0;s<i.length;s++){var o=i[s].src;o&&-1===e.indexOf(o)&&e.push(o)}return!!e.length&&(1===e.length&&(r=e[0]),t.triggerSourceset(r),!0)},Lf=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(t){var n=hn.createElement(this.nodeName.toLowerCase());n.innerHTML=t;for(var i=hn.createDocumentFragment();n.childNodes.length;)i.appendChild(n.childNodes[0]);return this.innerText="",bt.Element.prototype.appendChild.call(this,i),this.innerHTML}}),Bf=function(t,n){for(var i={},e=0;e<t.length&&!((i=Object.getOwnPropertyDescriptor(t[e],n))&&i.set&&i.get);e++);return i.enumerable=!0,i.configurable=!0,i},Ff=function(t){var n=t.el();if(!n.resetSourceWatch_){var i={},e=function(t){return Bf([t.el(),bt.HTMLMediaElement.prototype,bt.Element.prototype,Lf],"innerHTML")}(t),r=function(i){return function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];var o=i.apply(n,r);return Pf(t),o}};["append","appendChild","insertAdjacentHTML"].forEach((function(t){n[t]&&(i[t]=n[t],n[t]=r(i[t]))})),Object.defineProperty(n,"innerHTML",th(e,{set:r(e.set)})),n.resetSourceWatch_=function(){n.resetSourceWatch_=null,Object.keys(i).forEach((function(t){n[t]=i[t]})),Object.defineProperty(n,"innerHTML",e)},t.one("sourceset",n.resetSourceWatch_)}},_f=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Ch(bt.Element.prototype.getAttribute.call(this,"src")):""},set:function(t){return bt.Element.prototype.setAttribute.call(this,"src",t),t}}),zf=function(t){if(t.featuresSourceset){var n=t.el();if(!n.resetSourceset_){var i=function(t){return Bf([t.el(),bt.HTMLMediaElement.prototype,_f],"src")}(t),e=n.setAttribute,r=n.load;Object.defineProperty(n,"src",th(i,{set:function(e){var r=i.set.call(n,e);return t.triggerSourceset(n.src),r}})),n.setAttribute=function(i,r){var s=e.call(n,i,r);return/src/i.test(i)&&t.triggerSourceset(n.src),s},n.load=function(){var i=r.call(n);return Pf(t)||(t.triggerSourceset(""),Ff(t)),i},n.currentSrc?t.triggerSourceset(n.currentSrc):Pf(t)||Ff(t),n.resetSourceset_=function(){n.resetSourceset_=null,n.load=r,n.setAttribute=e,Object.defineProperty(n,"src",i),n.resetSourceWatch_&&n.resetSourceWatch_()}}}},Vf=function(t,n,i,e){void 0===e&&(e=!0);var r=function(i){return Object.defineProperty(t,n,{value:i,enumerable:!0,writable:!0})},s={configurable:!0,enumerable:!0,get:function(){var t=i();return r(t),t}};return e&&(s.set=r),Object.defineProperty(t,n,s)},Hf=function(t){function n(n,i){var e;e=t.call(this,n,i)||this;var r=n.source,s=!1;if(r&&(e.el_.currentSrc!==r.src||n.tag&&3===n.tag.initNetworkState_)?e.setSource(r):e.handleLateInit_(e.el_),n.enableSourceset&&e.setupSourcesetHandling_(),e.isScrubbing_=!1,e.el_.hasChildNodes()){for(var o=e.el_.childNodes,a=o.length,u=[];a--;){var h=o[a];"track"===h.nodeName.toLowerCase()&&(e.featuresNativeTextTracks?(e.remoteTextTrackEls().addTrackElement_(h),e.remoteTextTracks().addTrack(h.track),e.textTracks().addTrack(h.track),s||e.el_.hasAttribute("crossorigin")||!Uh(h.src)||(s=!0)):u.push(h))}for(var c=0;c<u.length;c++)e.el_.removeChild(u[c])}return e.proxyNativeTracks_(),e.featuresNativeTextTracks&&s&&sa.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),e.restoreMetadataTracksInIOSNativePlayer_(),(Da||Ma||Ta)&&!0===n.nativeControlsForTouch&&e.setControls(!0),e.proxyWebkitFullscreen_(),e.triggerReady(),e}yn(n,t);var i=n.prototype;return i.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),n.disposeMediaElement(this.el_),this.options_=null,t.prototype.dispose.call(this)},i.setupSourcesetHandling_=function(){zf(this)},i.restoreMetadataTracksInIOSNativePlayer_=function(){var t,n=this.textTracks(),i=function(){t=[];for(var i=0;i<n.length;i++){var e=n[i];"metadata"===e.kind&&t.push({track:e,storedMode:e.mode})}};i(),n.addEventListener("change",i),this.on("dispose",(function(){return n.removeEventListener("change",i)}));var e=function i(){for(var e=0;e<t.length;e++){var r=t[e];"disabled"===r.track.mode&&r.track.mode!==r.storedMode&&(r.track.mode=r.storedMode)}n.removeEventListener("change",i)};this.on("webkitbeginfullscreen",(function(){n.removeEventListener("change",i),n.removeEventListener("change",e),n.addEventListener("change",e)})),this.on("webkitendfullscreen",(function(){n.removeEventListener("change",i),n.addEventListener("change",i),n.removeEventListener("change",e)}))},i.overrideNative_=function(t,n){var i=this;if(n===this["featuresNative"+t+"Tracks"]){var e=t.toLowerCase();this[e+"TracksListeners_"]&&Object.keys(this[e+"TracksListeners_"]).forEach((function(t){i.el()[e+"Tracks"].removeEventListener(t,i[e+"TracksListeners_"][t])})),this["featuresNative"+t+"Tracks"]=!n,this[e+"TracksListeners_"]=null,this.proxyNativeTracksForType_(e)}},i.overrideNativeAudioTracks=function(t){this.overrideNative_("Audio",t)},i.overrideNativeVideoTracks=function(t){this.overrideNative_("Video",t)},i.proxyNativeTracksForType_=function(t){var n=this,i=Hh[t],e=this.el()[i.getterName],r=this[i.getterName]();if(this["featuresNative"+i.capitalName+"Tracks"]&&e&&e.addEventListener){var s={change:function(i){var e={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(e),"text"===t&&n[Xh.remoteText.getterName]().trigger(e)},addtrack:function(t){r.addTrack(t.track)},removetrack:function(t){r.removeTrack(t.track)}},o=function(){for(var t=[],n=0;n<r.length;n++){for(var i=!1,s=0;s<e.length;s++)if(e[s]===r[n]){i=!0;break}i||t.push(r[n])}for(;t.length;)r.removeTrack(t.shift())};this[i.getterName+"Listeners_"]=s,Object.keys(s).forEach((function(t){var i=s[t];e.addEventListener(t,i),n.on("dispose",(function(n){return e.removeEventListener(t,i)}))})),this.on("loadstart",o),this.on("dispose",(function(t){return n.off("loadstart",o)}))}},i.proxyNativeTracks_=function(){var t=this;Hh.names.forEach((function(n){t.proxyNativeTracksForType_(n)}))},i.createEl=function(){var t=this.options_.tag;if(!t||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(t){var i=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(i,t),n.disposeMediaElement(t),t=i}else{t=hn.createElement("video");var e=th({},this.options_.tag&&Qa(this.options_.tag));Da&&!0===this.options_.nativeControlsForTouch||delete e.controls,Ja(t,ca(e,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}void 0!==this.options_.preload&&Ka(t,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(t.disablePictureInPicture=this.options_.disablePictureInPicture);for(var r=["loop","muted","playsinline","autoplay"],s=0;s<r.length;s++){var o=r[s],a=this.options_[o];void 0!==a&&(a?Ka(t,o,o):Za(t,o),t[o]=a)}return t},i.handleLateInit_=function(t){if(0!==t.networkState&&3!==t.networkState){if(0===t.readyState){var n=!1,i=function(){n=!0};this.on("loadstart",i);var e=function(){n||this.trigger("loadstart")};return this.on("loadedmetadata",e),void this.ready((function(){this.off("loadstart",i),this.off("loadedmetadata",e),n||this.trigger("loadstart")}))}var r=["loadstart"];r.push("loadedmetadata"),t.readyState>=2&&r.push("loadeddata"),t.readyState>=3&&r.push("canplay"),t.readyState>=4&&r.push("canplaythrough"),this.ready((function(){r.forEach((function(t){this.trigger(t)}),this)}))}},i.setScrubbing=function(t){this.isScrubbing_=t},i.scrubbing=function(){return this.isScrubbing_},i.setCurrentTime=function(t){try{this.isScrubbing_&&this.el_.fastSeek&&Ra?this.el_.fastSeek(t):this.el_.currentTime=t}catch(t){sa(t,"Video is not ready. (Video.js)")}},i.duration=function(){var t=this;if(this.el_.duration===1/0&&ja&&xa&&0===this.el_.currentTime){return this.on("timeupdate",(function n(){t.el_.currentTime>0&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",n))})),NaN}return this.el_.duration||NaN},i.width=function(){return this.el_.offsetWidth},i.height=function(){return this.el_.offsetHeight},i.proxyWebkitFullscreen_=function(){var t=this;if("webkitDisplayingFullscreen"in this.el_){var n=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},i=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",n),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",i),this.on("dispose",(function(){t.off("webkitbeginfullscreen",i),t.off("webkitendfullscreen",n)}))}},i.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var t=bt.navigator&&bt.navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},i.enterFullScreen=function(){var t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA)vh(this.el_.play()),this.setTimeout((function(){t.pause();try{t.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}),0);else try{t.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},i.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},i.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},i.src=function(t){if(void 0===t)return this.el_.src;this.setSrc(t)},i.reset=function(){n.resetMediaElement(this.el_)},i.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},i.setControls=function(t){this.el_.controls=!!t},i.addTextTrack=function(n,i,e){return this.featuresNativeTextTracks?this.el_.addTextTrack(n,i,e):t.prototype.addTextTrack.call(this,n,i,e)},i.createRemoteTextTrack=function(n){if(!this.featuresNativeTextTracks)return t.prototype.createRemoteTextTrack.call(this,n);var i=hn.createElement("track");return n.kind&&(i.kind=n.kind),n.label&&(i.label=n.label),(n.language||n.srclang)&&(i.srclang=n.language||n.srclang),n.default&&(i.default=n.default),n.id&&(i.id=n.id),n.src&&(i.src=n.src),i},i.addRemoteTextTrack=function(n,i){var e=t.prototype.addRemoteTextTrack.call(this,n,i);return this.featuresNativeTextTracks&&this.el().appendChild(e),e},i.removeRemoteTextTrack=function(n){if(t.prototype.removeRemoteTextTrack.call(this,n),this.featuresNativeTextTracks)for(var i=this.$$("track"),e=i.length;e--;)n!==i[e]&&n!==i[e].track||this.el().removeChild(i[e])},i.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var t={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),bt.performance&&"function"==typeof bt.performance.now?t.creationTime=bt.performance.now():bt.performance&&bt.performance.timing&&"number"==typeof bt.performance.timing.navigationStart&&(t.creationTime=bt.Date.now()-bt.performance.timing.navigationStart),t},n}(Gh);Vf(Hf,"TEST_VID",(function(){if(Ba()){var t=hn.createElement("video"),n=hn.createElement("track");return n.kind="captions",n.srclang="en",n.label="English",t.appendChild(n),t}})),Hf.isSupported=function(){try{Hf.TEST_VID.volume=.5}catch(t){return!1}return!(!Hf.TEST_VID||!Hf.TEST_VID.canPlayType)},Hf.canPlayType=function(t){return Hf.TEST_VID.canPlayType(t)},Hf.canPlaySource=function(t,n){return Hf.canPlayType(t.type)},Hf.canControlVolume=function(){try{var t=Hf.TEST_VID.volume;Hf.TEST_VID.volume=t/2+.1;var n=t!==Hf.TEST_VID.volume;return n&&Ca?(bt.setTimeout((function(){Hf&&Hf.prototype&&(Hf.prototype.featuresVolumeControl=t!==Hf.TEST_VID.volume)})),!1):n}catch(t){return!1}},Hf.canMuteVolume=function(){try{var t=Hf.TEST_VID.muted;return Hf.TEST_VID.muted=!t,Hf.TEST_VID.muted?Ka(Hf.TEST_VID,"muted","muted"):Za(Hf.TEST_VID,"muted"),t!==Hf.TEST_VID.muted}catch(t){return!1}},Hf.canControlPlaybackRate=function(){if(ja&&xa&&Sa<58)return!1;try{var t=Hf.TEST_VID.playbackRate;return Hf.TEST_VID.playbackRate=t/2+.1,t!==Hf.TEST_VID.playbackRate}catch(t){return!1}},Hf.canOverrideAttributes=function(){try{var t=function(){};Object.defineProperty(hn.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(hn.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(hn.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(hn.createElement("audio"),"innerHTML",{get:t,set:t})}catch(t){return!1}return!0},Hf.supportsNativeTextTracks=function(){return Ra||Ca&&xa},Hf.supportsNativeVideoTracks=function(){return!(!Hf.TEST_VID||!Hf.TEST_VID.videoTracks)},Hf.supportsNativeAudioTracks=function(){return!(!Hf.TEST_VID||!Hf.TEST_VID.audioTracks)},Hf.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function(t){var n=t[0],i=t[1];Vf(Hf.prototype,n,(function(){return Hf[i]()}),!0)})),Hf.prototype.featuresVolumeControl=Hf.canControlVolume(),Hf.prototype.movingMediaElementInDOM=!Ca,Hf.prototype.featuresFullscreenResize=!0,Hf.prototype.featuresProgressEvents=!0,Hf.prototype.featuresTimeupdateEvents=!0,Hf.patchCanPlayType=function(){wa>=4&&!Aa&&!xa&&(Uf=Hf.TEST_VID&&Hf.TEST_VID.constructor.prototype.canPlayType,Hf.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(t)?"maybe":Uf.call(this,t)})},Hf.unpatchCanPlayType=function(){var t=Hf.TEST_VID.constructor.prototype.canPlayType;return Uf&&(Hf.TEST_VID.constructor.prototype.canPlayType=Uf),t},Hf.patchCanPlayType(),Hf.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},Hf.resetMediaElement=function(t){if(t){for(var n=t.querySelectorAll("source"),i=n.length;i--;)t.removeChild(n[i]);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(t){Hf.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(t){Hf.prototype["set"+Zu(t)]=function(n){this.el_[t]=n,n?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(t){Hf.prototype[t]=function(){return this.el_[t]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach((function(t){Hf.prototype["set"+Zu(t)]=function(n){this.el_[t]=n}})),["pause","load","play"].forEach((function(t){Hf.prototype[t]=function(){return this.el_[t]()}})),Gh.withSourceHandlers(Hf),Hf.nativeSourceHandler={},Hf.nativeSourceHandler.canPlayType=function(t){try{return Hf.TEST_VID.canPlayType(t)}catch(t){return""}},Hf.nativeSourceHandler.canHandleSource=function(t,n){if(t.type)return Hf.nativeSourceHandler.canPlayType(t.type);if(t.src){var i=Rh(t.src);return Hf.nativeSourceHandler.canPlayType("video/"+i)}return""},Hf.nativeSourceHandler.handleSource=function(t,n,i){n.setSrc(t.src)},Hf.nativeSourceHandler.dispose=function(){},Hf.registerSourceHandler(Hf.nativeSourceHandler),Gh.registerTech("Html5",Hf);var Xf=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],qf={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Gf=["tiny","xsmall","small","medium","large","xlarge","huge"],Wf={};Gf.forEach((function(t){var n="x"===t.charAt(0)?"x-"+t.substring(1):t;Wf[t]="vjs-layout-"+n}));var Yf={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Jf=function(t){function n(i,e,r){var s;if(i.id=i.id||e.id||"vjs_video_"+Au(),(e=ca(n.getTagSettings(i),e)).initChildren=!1,e.createEl=!1,e.evented=!1,e.reportTouchActivity=!1,!e.language)if("function"==typeof i.closest){var o=i.closest("[lang]");o&&o.getAttribute&&(e.language=o.getAttribute("lang"))}else for(var a=i;a&&1===a.nodeType;){if(Qa(a).hasOwnProperty("lang")){e.language=a.getAttribute("lang");break}a=a.parentNode}if((s=t.call(this,null,e,r)||this).boundDocumentFullscreenChange_=function(t){return s.documentFullscreenChange_(t)},s.boundFullWindowOnEscKey_=function(t){return s.fullWindowOnEscKey(t)},s.boundUpdateStyleEl_=function(t){return s.updateStyleEl_(t)},s.boundApplyInitTime_=function(t){return s.applyInitTime_(t)},s.boundUpdateCurrentBreakpoint_=function(t){return s.updateCurrentBreakpoint_(t)},s.boundHandleTechClick_=function(t){return s.handleTechClick_(t)},s.boundHandleTechDoubleClick_=function(t){return s.handleTechDoubleClick_(t)},s.boundHandleTechTouchStart_=function(t){return s.handleTechTouchStart_(t)},s.boundHandleTechTouchMove_=function(t){return s.handleTechTouchMove_(t)},s.boundHandleTechTouchEnd_=function(t){return s.handleTechTouchEnd_(t)},s.boundHandleTechTap_=function(t){return s.handleTechTap_(t)},s.isFullscreen_=!1,s.log=oa(s.id_),s.fsApi_=Zo,s.isPosterFromTech_=!1,s.queuedCallbacks_=[],s.isReady_=!1,s.hasStarted_=!1,s.userActive_=!1,s.debugEnabled_=!1,!s.options_||!s.options_.techOrder||!s.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(s.tag=i,s.tagAttributes=i&&Qa(i),s.language(s.options_.language),e.languages){var u={};Object.getOwnPropertyNames(e.languages).forEach((function(t){u[t.toLowerCase()]=e.languages[t]})),s.languages_=u}else s.languages_=n.prototype.options_.languages;s.resetCache_(),s.poster_=e.poster||"",s.controls_=!!e.controls,i.controls=!1,i.removeAttribute("controls"),s.changingSrc_=!1,s.playCallbacks_=[],s.playTerminatedQueue_=[],i.hasAttribute("autoplay")?s.autoplay(!0):s.autoplay(s.options_.autoplay),e.plugins&&Object.keys(e.plugins).forEach((function(t){if("function"!=typeof s[t])throw new Error('plugin "'+t+'" does not exist')})),s.scrubbing_=!1,s.el_=s.createEl(),Ju(mn(s),{eventBusKey:"el_"}),s.fsApi_.requestFullscreen&&(Du(hn,s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_),s.on(s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_)),s.fluid_&&s.on(["playerreset","resize"],s.boundUpdateStyleEl_);var h=th(s.options_);e.plugins&&Object.keys(e.plugins).forEach((function(t){s[t](e.plugins[t])})),e.debug&&s.debug(!0),s.options_.playerOptions=h,s.middleware_=[],s.playbackRates(e.playbackRates),s.initChildren(),s.isAudio("audio"===i.nodeName.toLowerCase()),s.controls()?s.addClass("vjs-controls-enabled"):s.addClass("vjs-controls-disabled"),s.el_.setAttribute("role","region"),s.isAudio()?s.el_.setAttribute("aria-label",s.localize("Audio Player")):s.el_.setAttribute("aria-label",s.localize("Video Player")),s.isAudio()&&s.addClass("vjs-audio"),s.flexNotSupported_()&&s.addClass("vjs-no-flex"),Da&&s.addClass("vjs-touch-enabled"),Ca||s.addClass("vjs-workinghover"),n.players[s.id_]=mn(s);var c="7.18.1".split(".")[0];return s.addClass("vjs-v"+c),s.userActive(!0),s.reportUserActivity(),s.one("play",(function(t){return s.listenForUserActivity_(t)})),s.on("stageclick",(function(t){return s.handleStageClick_(t)})),s.on("keydown",(function(t){return s.handleKeyDown(t)})),s.on("languagechange",(function(t){return s.handleLanguagechange(t)})),s.breakpoints(s.options_.breakpoints),s.responsive(s.options_.responsive),s}yn(n,t);var i=n.prototype;return i.dispose=function(){var i=this;this.trigger("dispose"),this.off("dispose"),Nu(hn,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Nu(hn,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),n.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Yh[this.id()]=null,qh.names.forEach((function(t){var n=qh[t],e=i[n.getterName]();e&&e.off&&e.off()})),t.prototype.dispose.call(this)},i.createEl=function(){var n,i=this.tag,e=this.playerElIngest_=i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player"),r="video-js"===this.tag.tagName.toLowerCase();e?n=this.el_=i.parentNode:r||(n=this.el_=t.prototype.createEl.call(this,"div"));var s=Qa(i);if(r){for(n=this.el_=i,i=this.tag=hn.createElement("video");n.children.length;)i.appendChild(n.firstChild);qa(n,"video-js")||Ga(n,"video-js"),n.appendChild(i),e=this.playerElIngest_=n,Object.keys(n).forEach((function(t){try{i[t]=n[t]}catch(t){}}))}if(i.setAttribute("tabindex","-1"),s.tabindex="-1",(Ea||xa&&Oa)&&(i.setAttribute("role","application"),s.role="application"),i.removeAttribute("width"),i.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach((function(t){r&&"class"===t||n.setAttribute(t,s[t]),r&&i.setAttribute(t,s[t])})),i.playerId=i.id,i.id+="_html5_api",i.className="vjs-tech",i.player=n.player=this,this.addClass("vjs-paused"),!0!==bt.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=ju("vjs-styles-dimensions");var o=lu(".vjs-styles-defaults"),a=lu("head");a.insertBefore(this.styleEl_,o?o.nextSibling:a.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var u=i.getElementsByTagName("a"),h=0;h<u.length;h++){var c=u.item(h);Ga(c,"vjs-hidden"),c.setAttribute("hidden","hidden")}return i.initNetworkState_=i.networkState,i.parentNode&&!e&&i.parentNode.insertBefore(n,i),Xa(i,n),this.children_.unshift(i),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=n,n},i.crossOrigin=function(t){if(!t)return this.techGet_("crossOrigin");"anonymous"===t||"use-credentials"===t?this.techCall_("setCrossOrigin",t):sa.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+t+'"')},i.width=function(t){return this.dimension("width",t)},i.height=function(t){return this.dimension("height",t)},i.dimension=function(t,n){var i=t+"_";if(void 0===n)return this[i]||0;if(""===n||"auto"===n)return this[i]=void 0,void this.updateStyleEl_();var e=parseFloat(n);isNaN(e)?sa.error('Improper value "'+n+'" supplied for for '+t):(this[i]=e,this.updateStyleEl_())},i.fluid=function(t){var n,i,e=this;if(void 0===t)return!!this.fluid_;this.fluid_=!!t,zu(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),t?(this.addClass("vjs-fluid"),this.fill(!1),i=function(){e.on(["playerreset","resize"],e.boundUpdateStyleEl_)},zu(n=this)?i():(n.eventedCallbacks||(n.eventedCallbacks=[]),n.eventedCallbacks.push(i))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},i.fill=function(t){if(void 0===t)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},i.aspectRatio=function(t){if(void 0===t)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()},i.updateStyleEl_=function(){if(!0!==bt.VIDEOJS_NO_DYNAMIC_STYLE){var t,n,i,e=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),r=e[1]/e[0];t=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/r:this.videoWidth()||300,n=void 0!==this.height_?this.height_:t*r,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),wu(this.styleEl_,"\n      ."+i+" {\n        width: "+t+"px;\n        height: "+n+"px;\n      }\n\n      ."+i+".vjs-fluid {\n        padding-top: "+100*r+"%;\n      }\n    ")}else{var s="number"==typeof this.width_?this.width_:this.options_.width,o="number"==typeof this.height_?this.height_:this.options_.height,a=this.tech_&&this.tech_.el();a&&(s>=0&&(a.width=s),o>=0&&(a.height=o))}},i.loadTech_=function(t,n){var i=this;this.tech_&&this.unloadTech_();var e=Zu(t),r=t.charAt(0).toLowerCase()+t.slice(1);"Html5"!==e&&this.tag&&(Gh.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=e,this.isReady_=!1;var s=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(s=!1);var o={source:n,autoplay:s,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};qh.names.forEach((function(t){var n=qh[t];o[n.getterName]=i[n.privateName]})),ca(o,this.options_[e]),ca(o,this.options_[r]),ca(o,this.options_[t.toLowerCase()]),this.tag&&(o.tag=this.tag),n&&n.src===this.cache_.src&&this.cache_.currentTime>0&&(o.startTime=this.cache_.currentTime);var a=Gh.getTech(t);if(!a)throw new Error("No Tech named '"+e+"' exists! '"+e+"' should be registered using videojs.registerTech()'");this.tech_=new a(o),this.tech_.ready(Lu(this,this.handleTechReady_),!0),mh(this.textTracksJson_||[],this.tech_),Xf.forEach((function(t){i.on(i.tech_,t,(function(n){return i["handleTech"+Zu(t)+"_"](n)}))})),Object.keys(qf).forEach((function(t){i.on(i.tech_,t,(function(n){0===i.tech_.playbackRate()&&i.tech_.seeking()?i.queuedCallbacks_.push({callback:i["handleTech"+qf[t]+"_"].bind(i),event:n}):i["handleTech"+qf[t]+"_"](n)}))})),this.on(this.tech_,"loadstart",(function(t){return i.handleTechLoadStart_(t)})),this.on(this.tech_,"sourceset",(function(t){return i.handleTechSourceset_(t)})),this.on(this.tech_,"waiting",(function(t){return i.handleTechWaiting_(t)})),this.on(this.tech_,"ended",(function(t){return i.handleTechEnded_(t)})),this.on(this.tech_,"seeking",(function(t){return i.handleTechSeeking_(t)})),this.on(this.tech_,"play",(function(t){return i.handleTechPlay_(t)})),this.on(this.tech_,"firstplay",(function(t){return i.handleTechFirstPlay_(t)})),this.on(this.tech_,"pause",(function(t){return i.handleTechPause_(t)})),this.on(this.tech_,"durationchange",(function(t){return i.handleTechDurationChange_(t)})),this.on(this.tech_,"fullscreenchange",(function(t,n){return i.handleTechFullscreenChange_(t,n)})),this.on(this.tech_,"fullscreenerror",(function(t,n){return i.handleTechFullscreenError_(t,n)})),this.on(this.tech_,"enterpictureinpicture",(function(t){return i.handleTechEnterPictureInPicture_(t)})),this.on(this.tech_,"leavepictureinpicture",(function(t){return i.handleTechLeavePictureInPicture_(t)})),this.on(this.tech_,"error",(function(t){return i.handleTechError_(t)})),this.on(this.tech_,"posterchange",(function(t){return i.handleTechPosterChange_(t)})),this.on(this.tech_,"textdata",(function(t){return i.handleTechTextData_(t)})),this.on(this.tech_,"ratechange",(function(t){return i.handleTechRateChange_(t)})),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===e&&this.tag||Xa(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},i.unloadTech_=function(){var t=this;qh.names.forEach((function(n){var i=qh[n];t[i.privateName]=t[i.getterName]()})),this.textTracksJson_=ph(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},i.tech=function(t){return void 0===t&&sa.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},i.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},i.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},i.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},i.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},i.manualAutoplay_=function(t){var n=this;if(this.tech_&&"string"==typeof t){var i,e=function(){var t=n.muted();n.muted(!0);var i=function(){n.muted(t)};n.playTerminatedQueue_.push(i);var e=n.play();if(lh(e))return e.catch((function(t){throw i(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(t||""))}))};if("any"!==t||this.muted()?i="muted"!==t||this.muted()?this.play():e():lh(i=this.play())&&(i=i.catch(e)),lh(i))return i.then((function(){n.trigger({type:"autoplay-success",autoplay:t})})).catch((function(){n.trigger({type:"autoplay-failure",autoplay:t})}))}},i.updateSourceCaches_=function(t){void 0===t&&(t="");var n=t,i="";"string"!=typeof n&&(n=t.src,i=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],n&&!i&&(i=function(t,n){if(!n)return"";if(t.cache_.source.src===n&&t.cache_.source.type)return t.cache_.source.type;var i=t.cache_.sources.filter((function(t){return t.src===n}));if(i.length)return i[0].type;for(var e=t.$$("source"),r=0;r<e.length;r++){var s=e[r];if(s.type&&s.src&&s.src===n)return s.type}return rc(n)}(this,n)),this.cache_.source=th({},t,{src:n,type:i});for(var e=this.cache_.sources.filter((function(t){return t.src&&t.src===n})),r=[],s=this.$$("source"),o=[],a=0;a<s.length;a++){var u=Qa(s[a]);r.push(u),u.src&&u.src===n&&o.push(u.src)}o.length&&!e.length?this.cache_.sources=r:e.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=n},i.handleTechSourceset_=function(t){var n=this;if(!this.changingSrc_){var i=function(t){return n.updateSourceCaches_(t)},e=this.currentSource().src,r=t.src;e&&!/^blob:/.test(e)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==e)&&(i=function(){}),i(r),t.src||this.tech_.any(["sourceset","loadstart"],(function(t){if("sourceset"!==t.type){var i=n.techGet("currentSrc");n.lastSource_.tech=i,n.updateSourceCaches_(i)}}))}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})},i.hasStarted=function(t){if(void 0===t)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},i.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},i.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((function(t){return t.callback(t.event)})),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},i.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting");var n=this.currentTime();this.on("timeupdate",(function i(){n!==t.currentTime()&&(t.removeClass("vjs-waiting"),t.off("timeupdate",i))}))},i.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},i.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},i.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},i.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},i.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},i.handleTechFirstPlay_=function(){this.options_.starttime&&(sa.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},i.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},i.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},i.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},i.handleTechClick_=function(t){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,t):this.paused()?vh(this.play()):this.pause()))},i.handleTechDoubleClick_=function(t){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(function(n){return n.contains(t.target)}))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},i.handleTechTap_=function(){this.userActive(!this.userActive())},i.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},i.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},i.handleTechTouchEnd_=function(t){t.cancelable&&t.preventDefault()},i.handleStageClick_=function(){this.reportUserActivity()},i.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},i.documentFullscreenChange_=function(t){var n=t.target.player;if(!n||n===this){var i=this.el(),e=hn[this.fsApi_.fullscreenElement]===i;!e&&i.matches?e=i.matches(":"+this.fsApi_.fullscreen):!e&&i.msMatchesSelector&&(e=i.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(e)}},i.handleTechFullscreenChange_=function(t,n){var i=this;n&&(n.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",(function(){i.removeClass("vjs-ios-native-fs")}))),this.isFullscreen(n.isFullscreen))},i.handleTechFullscreenError_=function(t,n){this.trigger("fullscreenerror",n)},i.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},i.handleTechEnterPictureInPicture_=function(t){this.isInPictureInPicture(!0)},i.handleTechLeavePictureInPicture_=function(t){this.isInPictureInPicture(!1)},i.handleTechError_=function(){var t=this.tech_.error();this.error(t)},i.handleTechTextData_=function(){var t=null;arguments.length>1&&(t=arguments[1]),this.trigger("textdata",t)},i.getCache=function(){return this.cache_},i.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},i.techCall_=function(t,n){this.ready((function(){if(t in Zh)return function(t,n,i,e){return n[i](t.reduce(nc(i),e))}(this.middleware_,this.tech_,t,n);if(t in tc)return $h(this.middleware_,this.tech_,t,n);try{this.tech_&&this.tech_[t](n)}catch(t){throw sa(t),t}}),!0)},i.techGet_=function(t){if(this.tech_&&this.tech_.isReady_){if(t in Kh)return function(t,n,i){return t.reduceRight(nc(i),n[i]())}(this.middleware_,this.tech_,t);if(t in tc)return $h(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(n){if(void 0===this.tech_[t])throw sa("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",n),n;if("TypeError"===n.name)throw sa("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",n),this.tech_.isReady_=!1,n;throw sa(n),n}}},i.play=function(){var t=this,n=this.options_.Promise||bt.Promise;return n?new n((function(n){t.play_(n)})):this.play_()},i.play_=function(t){var n=this;void 0===t&&(t=vh),this.playCallbacks_.push(t);var i=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!i)return this.waitToPlay_=function(t){n.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(i||!Ra&&!Ca||this.load());var e=this.techGet_("play");null===e?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(e)},i.runPlayTerminatedQueue_=function(){var t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],t.forEach((function(t){t()}))},i.runPlayCallbacks_=function(t){var n=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],n.forEach((function(n){n(t)}))},i.pause=function(){this.techCall_("pause")},i.paused=function(){return!1!==this.techGet_("paused")},i.played=function(){return this.techGet_("played")||uh(0,0)},i.scrubbing=function(t){if(void 0===t)return this.scrubbing_;this.scrubbing_=!!t,this.techCall_("setScrubbing",this.scrubbing_),t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},i.currentTime=function(t){return void 0!==t?(t<0&&(t=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",t),void(this.cache_.initTime=0)):(this.cache_.initTime=t,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},i.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},i.duration=function(t){if(void 0===t)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(t=parseFloat(t))<0&&(t=1/0),t!==this.cache_.duration&&(this.cache_.duration=t,t===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(t)||this.trigger("durationchange"))},i.remainingTime=function(){return this.duration()-this.currentTime()},i.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},i.buffered=function(){var t=this.techGet_("buffered");return t&&t.length||(t=uh(0,0)),t},i.bufferedPercent=function(){return hh(this.buffered(),this.duration())},i.bufferedEnd=function(){var t=this.buffered(),n=this.duration(),i=t.end(t.length-1);return i>n&&(i=n),i},i.volume=function(t){var n;return void 0!==t?(n=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=n,this.techCall_("setVolume",n),void(n>0&&this.lastVolume_(n))):(n=parseFloat(this.techGet_("volume")),isNaN(n)?1:n)},i.muted=function(t){if(void 0===t)return this.techGet_("muted")||!1;this.techCall_("setMuted",t)},i.defaultMuted=function(t){return void 0!==t?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1},i.lastVolume_=function(t){if(void 0===t||0===t)return this.cache_.lastVolume;this.cache_.lastVolume=t},i.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},i.isFullscreen=function(t){if(void 0!==t){var n=this.isFullscreen_;return this.isFullscreen_=Boolean(t),this.isFullscreen_!==n&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},i.requestFullscreen=function(t){var n=this.options_.Promise||bt.Promise;if(n){var i=this;return new n((function(n,e){function r(){i.off("fullscreenerror",o),i.off("fullscreenchange",s)}function s(){r(),n()}function o(t,n){r(),e(n)}i.one("fullscreenchange",s),i.one("fullscreenerror",o);var a=i.requestFullscreenHelper_(t);a&&(a.then(r,r),a.then(n,e))}))}return this.requestFullscreenHelper_()},i.requestFullscreenHelper_=function(t){var n,i=this;if(this.fsApi_.prefixed||(n=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==t&&(n=t)),this.fsApi_.requestFullscreen){var e=this.el_[this.fsApi_.requestFullscreen](n);return e&&e.then((function(){return i.isFullscreen(!0)}),(function(){return i.isFullscreen(!1)})),e}this.tech_.supportsFullScreen()&&!0==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},i.exitFullscreen=function(){var t=this.options_.Promise||bt.Promise;if(t){var n=this;return new t((function(t,i){function e(){n.off("fullscreenerror",s),n.off("fullscreenchange",r)}function r(){e(),t()}function s(t,n){e(),i(n)}n.one("fullscreenchange",r),n.one("fullscreenerror",s);var o=n.exitFullscreenHelper_();o&&(o.then(e,e),o.then(t,i))}))}return this.exitFullscreenHelper_()},i.exitFullscreenHelper_=function(){var t=this;if(this.fsApi_.requestFullscreen){var n=hn[this.fsApi_.exitFullscreen]();return n&&vh(n.then((function(){return t.isFullscreen(!1)}))),n}this.tech_.supportsFullScreen()&&!0==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},i.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=hn.documentElement.style.overflow,Du(hn,"keydown",this.boundFullWindowOnEscKey_),hn.documentElement.style.overflow="hidden",Ga(hn.body,"vjs-full-window"),this.trigger("enterFullWindow")},i.fullWindowOnEscKey=function(t){dn.isEventKey(t,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},i.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,Nu(hn,"keydown",this.boundFullWindowOnEscKey_),hn.documentElement.style.overflow=this.docOrigOverflow,Wa(hn.body,"vjs-full-window"),this.trigger("exitFullWindow")},i.disablePictureInPicture=function(t){if(void 0===t)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",t),this.options_.disablePictureInPicture=t,this.trigger("disablepictureinpicturechanged")},i.isInPictureInPicture=function(t){return void 0!==t?(this.isInPictureInPicture_=!!t,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},i.requestPictureInPicture=function(){if("pictureInPictureEnabled"in hn&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},i.exitPictureInPicture=function(){if("pictureInPictureEnabled"in hn)return hn.exitPictureInPicture()},i.handleKeyDown=function(t){var n=this.options_.userActions;if(n&&n.hotkeys){(function(t){var n=t.tagName.toLowerCase();if(t.isContentEditable)return!0;if("input"===n)return-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(t.type);return-1!==["textarea"].indexOf(n)})(this.el_.ownerDocument.activeElement)||("function"==typeof n.hotkeys?n.hotkeys.call(this,t):this.handleHotkeys(t))}},i.handleHotkeys=function(t){var n=this.options_.userActions?this.options_.userActions.hotkeys:{},i=n.fullscreenKey,e=void 0===i?function(t){return dn.isEventKey(t,"f")}:i,r=n.muteKey,s=void 0===r?function(t){return dn.isEventKey(t,"m")}:r,o=n.playPauseKey,a=void 0===o?function(t){return dn.isEventKey(t,"k")||dn.isEventKey(t,"Space")}:o;if(e.call(this,t)){t.preventDefault(),t.stopPropagation();var u=sh.getComponent("FullscreenToggle");!1!==hn[this.fsApi_.fullscreenEnabled]&&u.prototype.handleClick.call(this,t)}else if(s.call(this,t)){t.preventDefault(),t.stopPropagation(),sh.getComponent("MuteToggle").prototype.handleClick.call(this,t)}else if(a.call(this,t)){t.preventDefault(),t.stopPropagation(),sh.getComponent("PlayToggle").prototype.handleClick.call(this,t)}},i.canPlayType=function(t){for(var n,i=0,e=this.options_.techOrder;i<e.length;i++){var r=e[i],s=Gh.getTech(r);if(s||(s=sh.getComponent(r)),s){if(s.isSupported()&&(n=s.canPlayType(t)))return n}else sa.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},i.selectSource=function(t){var n,i=this,e=this.options_.techOrder.map((function(t){return[t,Gh.getTech(t)]})).filter((function(t){var n=t[0],i=t[1];return i?i.isSupported():(sa.error('The "'+n+'" tech is undefined. Skipped browser support check for that tech.'),!1)})),r=function(t,n,i){var e;return t.some((function(t){return n.some((function(n){if(e=i(t,n))return!0}))})),e},s=function(t,n){var e=t[0];if(t[1].canPlaySource(n,i.options_[e.toLowerCase()]))return{source:n,tech:e}};return(this.options_.sourceOrder?r(t,e,(n=s,function(t,i){return n(i,t)})):r(e,t,s))||!1},i.handleSrc_=function(t,n){var i=this;if(void 0===t)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var e=sc(t);if(e.length){if(this.changingSrc_=!0,n||(this.cache_.sources=e),this.updateSourceCaches_(e[0]),Qh(this,e[0],(function(t,r){var s,o;if(i.middleware_=r,n||(i.cache_.sources=e),i.updateSourceCaches_(t),i.src_(t))return e.length>1?i.handleSrc_(e.slice(1)):(i.changingSrc_=!1,i.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0),void i.triggerReady());s=r,o=i.tech_,s.forEach((function(t){return t.setTech&&t.setTech(o)}))})),this.options_.retryOnError&&e.length>1){var r=function(){i.error(null),i.handleSrc_(e.slice(1),!0)},s=function(){i.off("error",r)};this.one("error",r),this.one("playing",s),this.resetRetryOnError_=function(){i.off("error",r),i.off("playing",s)}}}else this.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0)},i.src=function(t){return this.handleSrc_(t,!1)},i.src_=function(t){var n,i,e=this,r=this.selectSource([t]);return!r||(n=r.tech,i=this.techName_,Zu(n)!==Zu(i)?(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready((function(){e.changingSrc_=!1})),!1):(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1}),!0),!1))},i.load=function(){this.techCall_("load")},i.reset=function(){var t=this,n=this.options_.Promise||bt.Promise;this.paused()||!n?this.doReset_():vh(this.play().then((function(){return t.doReset_()})))},i.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),zu(this)&&this.trigger("playerreset")},i.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},i.resetProgressBar_=function(){this.currentTime(0);var t=this.controlBar,n=t.durationDisplay,i=t.remainingTimeDisplay;n&&n.updateContent(),i&&i.updateContent()},i.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},i.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},i.currentSources=function(){var t=this.currentSource(),n=[];return 0!==Object.keys(t).length&&n.push(t),this.cache_.sources||n},i.currentSource=function(){return this.cache_.source||{}},i.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},i.currentType=function(){return this.currentSource()&&this.currentSource().type||""},i.preload=function(t){return void 0!==t?(this.techCall_("setPreload",t),void(this.options_.preload=t)):this.techGet_("preload")},i.autoplay=function(t){if(void 0===t)return this.options_.autoplay||!1;var n;"string"==typeof t&&/(any|play|muted)/.test(t)||!0===t&&this.options_.normalizeAutoplay?(this.options_.autoplay=t,this.manualAutoplay_("string"==typeof t?t:"play"),n=!1):this.options_.autoplay=!!t,n=void 0===n?this.options_.autoplay:n,this.tech_&&this.techCall_("setAutoplay",n)},i.playsinline=function(t){return void 0!==t?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")},i.loop=function(t){return void 0!==t?(this.techCall_("setLoop",t),void(this.options_.loop=t)):this.techGet_("loop")},i.poster=function(t){if(void 0===t)return this.poster_;t||(t=""),t!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))},i.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},i.controls=function(t){if(void 0===t)return!!this.controls_;t=!!t,this.controls_!==t&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},i.usingNativeControls=function(t){if(void 0===t)return!!this.usingNativeControls_;t=!!t,this.usingNativeControls_!==t&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},i.error=function(t){var n=this;if(void 0===t)return this.error_||null;if($o("beforeerror").forEach((function(i){var e=i(n,t);fa(e)&&!Array.isArray(e)||"string"==typeof e||"number"==typeof e||null===e?t=e:n.log.error("please return a value that MediaError expects in beforeerror hooks")})),this.options_.suppressNotSupportedError&&t&&4===t.code){var i=function(){this.error(t)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],i),void this.one("loadstart",(function(){this.off(["click","touchstart"],i)}))}if(null===t)return this.error_=t,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new ch(t),this.addClass("vjs-error"),sa.error("(CODE:"+this.error_.code+" "+ch.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),$o("error").forEach((function(t){return t(n,n.error_)}))},i.reportUserActivity=function(t){this.userActivity_=!0},i.userActive=function(t){if(void 0===t)return this.userActive_;if((t=!!t)!==this.userActive_){if(this.userActive_=t,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(t){t.stopPropagation(),t.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},i.listenForUserActivity_=function(){var t,n,i,e=Lu(this,this.reportUserActivity),r=function(n){e(),this.clearInterval(t)};this.on("mousedown",(function(){e(),this.clearInterval(t),t=this.setInterval(e,250)})),this.on("mousemove",(function(t){t.screenX===n&&t.screenY===i||(n=t.screenX,i=t.screenY,e())})),this.on("mouseup",r),this.on("mouseleave",r);var s,o=this.getChild("controlBar");!o||Ca||ja||(o.on("mouseenter",(function(t){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0})),o.on("mouseleave",(function(t){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",e),this.on("keyup",e),this.setInterval((function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(s);var t=this.options_.inactivityTimeout;t<=0||(s=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),t))}}),250)},i.playbackRate=function(t){if(void 0===t)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",t)},i.defaultPlaybackRate=function(t){return void 0!==t?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},i.isAudio=function(t){if(void 0===t)return!!this.isAudio_;this.isAudio_=!!t},i.addTextTrack=function(t,n,i){if(this.tech_)return this.tech_.addTextTrack(t,n,i)},i.addRemoteTextTrack=function(t,n){if(this.tech_)return this.tech_.addRemoteTextTrack(t,n)},i.removeRemoteTextTrack=function(t){void 0===t&&(t={});var n=t.track;if(n||(n=t),this.tech_)return this.tech_.removeRemoteTextTrack(n)},i.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},i.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},i.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},i.language=function(t){if(void 0===t)return this.language_;this.language_!==String(t).toLowerCase()&&(this.language_=String(t).toLowerCase(),zu(this)&&this.trigger("languagechange"))},i.languages=function(){return th(n.prototype.options_.languages,this.languages_)},i.toJSON=function(){var t=th(this.options_),n=t.tracks;t.tracks=[];for(var i=0;i<n.length;i++){var e=n[i];(e=th(e)).player=void 0,t.tracks[i]=e}return t},i.createModal=function(t,n){var i=this;(n=n||{}).content=t||"";var e=new gh(this,n);return this.addChild(e),e.on("dispose",(function(){i.removeChild(e)})),e.open(),e},i.updateCurrentBreakpoint_=function(){if(this.responsive())for(var t=this.currentBreakpoint(),n=this.currentWidth(),i=0;i<Gf.length;i++){var e=Gf[i];if(n<=this.breakpoints_[e]){if(t===e)return;t&&this.removeClass(Wf[t]),this.addClass(Wf[e]),this.breakpoint_=e;break}}},i.removeCurrentBreakpoint_=function(){var t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)},i.breakpoints=function(t){return void 0===t||(this.breakpoint_="",this.breakpoints_=ca({},Yf,t),this.updateCurrentBreakpoint_()),ca(this.breakpoints_)},i.responsive=function(t){return void 0===t?this.responsive_:(t=Boolean(t))!==this.responsive_?(this.responsive_=t,t?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t):void 0},i.currentBreakpoint=function(){return this.breakpoint_},i.currentBreakpointClass=function(){return Wf[this.breakpoint_]||""},i.loadMedia=function(t,n){var i=this;if(t&&"object"==typeof t){this.reset(),this.cache_.media=th(t);var e=this.cache_.media,r=e.artwork,s=e.poster,o=e.src,a=e.textTracks;!r&&s&&(this.cache_.media.artwork=[{src:s,type:rc(s)}]),o&&this.src(o),s&&this.poster(s),Array.isArray(a)&&a.forEach((function(t){return i.addRemoteTextTrack(t,!1)})),this.ready(n)}},i.getMedia=function(){if(!this.cache_.media){var t=this.poster(),n={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),(function(t){return{kind:t.kind,label:t.label,language:t.language,src:t.src}}))};return t&&(n.poster=t,n.artwork=[{src:n.poster,type:rc(n.poster)}]),n}return th(this.cache_.media)},n.getTagSettings=function(t){var n={sources:[],tracks:[]},i=Qa(t),e=i["data-setup"];if(qa(t,"vjs-fill")&&(i.fill=!0),qa(t,"vjs-fluid")&&(i.fluid=!0),null!==e){var r=jn(e||"{}"),s=r[0],o=r[1];s&&sa.error(s),ca(i,o)}if(ca(n,i),t.hasChildNodes())for(var a=t.childNodes,u=0,h=a.length;u<h;u++){var c=a[u],f=c.nodeName.toLowerCase();"source"===f?n.sources.push(Qa(c)):"track"===f&&n.tracks.push(Qa(c))}return n},i.flexNotSupported_=function(){var t=hn.createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)},i.debug=function(t){if(void 0===t)return this.debugEnabled_;t?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},i.playbackRates=function(t){if(void 0===t)return this.cache_.playbackRates;Array.isArray(t)&&t.every((function(t){return"number"==typeof t}))&&(this.cache_.playbackRates=t,this.trigger("playbackrateschange"))},n}(sh);qh.names.forEach((function(t){var n=qh[t];Jf.prototype[n.getterName]=function(){return this.tech_?this.tech_[n.getterName]():(this[n.privateName]=this[n.privateName]||new n.ListClass,this[n.privateName])}})),Jf.prototype.crossorigin=Jf.prototype.crossOrigin,Jf.players={};var Qf=bt.navigator;Jf.prototype.options_={techOrder:Gh.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Qf&&(Qf.languages&&Qf.languages[0]||Qf.userLanguage||Qf.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach((function(t){Jf.prototype[t]=function(){return this.techGet_(t)}})),Xf.forEach((function(t){Jf.prototype["handleTech"+Zu(t)+"_"]=function(){return this.trigger(t)}})),sh.registerComponent("Player",Jf);var $f={},Kf=function(t){return $f.hasOwnProperty(t)},Zf=function(t){return Kf(t)?$f[t]:void 0},tl=function(t,n){t.activePlugins_=t.activePlugins_||{},t.activePlugins_[n]=!0},nl=function(t,n,i){var e=(i?"before":"")+"pluginsetup";t.trigger(e,n),t.trigger(e+":"+n.name,n)},il=function(t,n){return n.prototype.name=t,function(){nl(this,{name:t,plugin:n,instance:null},!0);for(var i=arguments.length,e=new Array(i),r=0;r<i;r++)e[r]=arguments[r];var s=yi(n,[this].concat(e));return this[t]=function(){return s},nl(this,s.getEventHash()),s}},el=function(){function t(n){if(this.constructor===t)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=n,this.log||(this.log=this.player.log.createLogger(this.name)),Ju(this),delete this.trigger,$u(this,this.constructor.defaultState),tl(n,this.name),this.dispose=this.dispose.bind(this),n.on("dispose",this.dispose)}var n=t.prototype;return n.version=function(){return this.constructor.VERSION},n.getEventHash=function(t){return void 0===t&&(t={}),t.name=this.name,t.plugin=this.constructor,t.instance=this,t},n.trigger=function(t,n){return void 0===n&&(n={}),Mu(this.eventBusEl_,t,this.getEventHash(n))},n.handleStateChanged=function(t){},n.dispose=function(){var t=this.name,n=this.player;this.trigger("dispose"),this.off(),n.off("dispose",this.dispose),n.activePlugins_[t]=!1,this.player=this.state=null,n[t]=il(t,$f[t])},t.isBasic=function(n){var i="string"==typeof n?Zf(n):n;return"function"==typeof i&&!t.prototype.isPrototypeOf(i.prototype)},t.registerPlugin=function(n,i){if("string"!=typeof n)throw new Error('Illegal plugin name, "'+n+'", must be a string, was '+typeof n+".");if(Kf(n))sa.warn('A plugin named "'+n+'" already exists. You may want to avoid re-registering plugins!');else if(Jf.prototype.hasOwnProperty(n))throw new Error('Illegal plugin name, "'+n+'", cannot share a name with an existing player method!');if("function"!=typeof i)throw new Error('Illegal plugin for "'+n+'", must be a function, was '+typeof i+".");return $f[n]=i,"plugin"!==n&&(t.isBasic(i)?Jf.prototype[n]=function(t,n){var i=function(){nl(this,{name:t,plugin:n,instance:null},!0);var i=n.apply(this,arguments);return tl(this,t),nl(this,{name:t,plugin:n,instance:i}),i};return Object.keys(n).forEach((function(t){i[t]=n[t]})),i}(n,i):Jf.prototype[n]=il(n,i)),i},t.deregisterPlugin=function(t){if("plugin"===t)throw new Error("Cannot de-register base plugin.");Kf(t)&&(delete $f[t],delete Jf.prototype[t])},t.getPlugins=function(t){var n;return void 0===t&&(t=Object.keys($f)),t.forEach((function(t){var i=Zf(t);i&&((n=n||{})[t]=i)})),n},t.getPluginVersion=function(t){var n=Zf(t);return n&&n.VERSION||""},t}();el.getPlugin=Zf,el.BASE_PLUGIN_NAME="plugin",el.registerPlugin("plugin",el),Jf.prototype.usingPlugin=function(t){return!!this.activePlugins_&&!0===this.activePlugins_[t]},Jf.prototype.hasPlugin=function(t){return!!Kf(t)};var rl=function(t){return 0===t.indexOf("#")?t.slice(1):t};function sl(t,n,i){var e=sl.getPlayer(t);if(e)return n&&sa.warn('Player "'+t+'" is already initialised. Options will not be applied.'),i&&e.ready(i),e;var r="string"==typeof t?lu("#"+rl(t)):t;if(!Fa(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||sa.warn("The element supplied is not included in the DOM"),n=n||{},$o("beforesetup").forEach((function(t){var i=t(r,th(n));fa(i)&&!Array.isArray(i)?n=th(n,i):sa.error("please return an object in beforesetup hooks")}));var s=sh.getComponent("Player");return e=new s(r,n,i),$o("setup").forEach((function(t){return t(e)})),e}if(sl.hooks_=Qo,sl.hooks=$o,sl.hook=function(t,n){$o(t,n)},sl.hookOnce=function(t,n){$o(t,[].concat(n).map((function(n){return function i(){return Ko(t,i),n.apply(void 0,arguments)}})))},sl.removeHook=Ko,!0!==bt.VIDEOJS_NO_DYNAMIC_STYLE&&Ba()){var ol=lu(".vjs-styles-defaults");if(!ol){ol=ju("vjs-styles-defaults");var al=lu("head");al&&al.insertBefore(ol,al.firstChild),wu(ol,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}gu(1,sl),sl.VERSION="7.18.1",sl.options=Jf.prototype.options_,sl.getPlayers=function(){return Jf.players},sl.getPlayer=function(t){var n,i=Jf.players;if("string"==typeof t){var e=rl(t),r=i[e];if(r)return r;n=lu("#"+e)}else n=t;if(Fa(n)){var s=n,o=s.player,a=s.playerId;if(o||i[a])return o||i[a]}},sl.getAllPlayers=function(){return Object.keys(Jf.players).map((function(t){return Jf.players[t]})).filter(Boolean)},sl.players=Jf.players,sl.getComponent=sh.getComponent,sl.registerComponent=function(t,n){Gh.isTech(n)&&sa.warn("The "+t+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),sh.registerComponent.call(sh,t,n)},sl.getTech=Gh.getTech,sl.registerTech=Gh.registerTech,sl.use=function(t,n){Wh[t]=Wh[t]||[],Wh[t].push(n)},Object.defineProperty(sl,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(sl.middleware,"TERMINATOR",{value:Jh,writeable:!1,enumerable:!0}),sl.browser=Ua,sl.TOUCH_ENABLED=Da,sl.extend=function(t,n){void 0===n&&(n={});var i=function(){t.apply(this,arguments)},e={};for(var r in"object"==typeof n?(n.constructor!==Object.prototype.constructor&&(i=n.constructor),e=n):"function"==typeof n&&(i=n),wi(i,t),t&&(i.super_=t),e)e.hasOwnProperty(r)&&(i.prototype[r]=e[r]);return i},sl.mergeOptions=th,sl.bind=Lu,sl.registerPlugin=el.registerPlugin,sl.deregisterPlugin=el.deregisterPlugin,sl.plugin=function(t,n){return sa.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),el.registerPlugin(t,n)},sl.getPlugins=el.getPlugins,sl.getPlugin=el.getPlugin,sl.getPluginVersion=el.getPluginVersion,sl.addLanguage=function(t,n){var i;return t=(""+t).toLowerCase(),sl.options.languages=th(sl.options.languages,((i={})[t]=n,i)),sl.options.languages[t]},sl.log=sa,sl.createLogger=oa,sl.createTimeRange=sl.createTimeRanges=uh,sl.formatTime=wc,sl.setFormatTime=function(t){jc=t},sl.resetFormatTime=function(){jc=yc},sl.parseUrl=Mh,sl.isCrossOrigin=Uh,sl.EventTarget=Fu,sl.on=Du,sl.one=Cu,sl.off=Nu,sl.trigger=Mu,sl.xhr=Mn,sl.TextTrack=Fh,sl.AudioTrack=_h,sl.VideoTrack=zh,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((function(t){sl[t]=function(){return sa.warn("videojs."+t+"() is deprecated; use videojs.dom."+t+"() instead"),du[t].apply(null,arguments)}})),sl.computedStyle=va,sl.dom=du,sl.url=Ph,sl.defineLazyProperty=Vf,sl.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});
/*! @name @videojs/http-streaming @version 2.13.1 @license Apache-2.0 */
var ul=function(t,n){if(/^[a-z]+:/i.test(n))return n;/^data:/.test(t)&&(t=bt.location&&bt.location.href||"");var i="function"==typeof bt.URL,e=/^\/\//.test(t),r=!bt.location&&!/\/\//i.test(t);if(i?t=new bt.URL(t,bt.location||"http://example.com"):/\/\//i.test(t)||(t=Ai.buildAbsoluteURL(bt.location&&bt.location.href||"",t)),i){var s=new URL(n,t);return r?s.href.slice("http://example.com".length):e?s.href.slice(s.protocol.length):s.href}return Ai.buildAbsoluteURL(t,n)},hl=function(t,n,i){return t&&i&&i.responseURL&&n!==i.responseURL?i.responseURL:n},cl=function(t){return sl.log.debug?sl.log.debug.bind(sl,"VHS:",t+" >"):function(){}},fl=function(t,n){var i,e=[];if(t&&t.length)for(i=0;i<t.length;i++)n(t.start(i),t.end(i))&&e.push([t.start(i),t.end(i)]);return sl.createTimeRanges(e)},ll=function(t,n){return fl(t,(function(t,i){return t-.1<=n&&i+.1>=n}))},vl=function(t,n){return fl(t,(function(t){return t-.03333333333333333>=n}))},dl=function(t){var n=[];if(!t||!t.length)return"";for(var i=0;i<t.length;i++)n.push(t.start(i)+" => "+t.end(i));return n.join(", ")},pl=function(t){for(var n=[],i=0;i<t.length;i++)n.push({start:t.start(i),end:t.end(i)});return n},ml=function(t){if(t&&t.length&&t.end)return t.end(t.length-1)},gl=function(t,n){var i=0;if(!t||!t.length)return i;for(var e=0;e<t.length;e++){var r=t.start(e),s=t.end(e);n>s||(i+=n>r&&n<=s?s-n:s-r)}return i},bl=sl.createTimeRange,yl=function(t,n){if(!n.preload)return n.duration;var i=0;return(n.parts||[]).forEach((function(t){i+=t.duration})),(n.preloadHints||[]).forEach((function(n){"PART"===n.type&&(i+=t.partTargetDuration)})),i},jl=function(t){return(t.segments||[]).reduce((function(t,n,i){return n.parts?n.parts.forEach((function(e,r){t.push({duration:e.duration,segmentIndex:i,partIndex:r,part:e,segment:n})})):t.push({duration:n.duration,segmentIndex:i,partIndex:null,segment:n,part:null}),t}),[])},wl=function(t){var n=t.segments&&t.segments.length&&t.segments[t.segments.length-1];return n&&n.parts||[]},Tl=function(t){var n=t.preloadSegment;if(n){var i=n.parts,e=(n.preloadHints||[]).reduce((function(t,n){return t+("PART"===n.type?1:0)}),0);return e+=i&&i.length?i.length:0}},Al=function(t,n){if(n.endList)return 0;if(t&&t.suggestedPresentationDelay)return t.suggestedPresentationDelay;var i=wl(n).length>0;return i&&n.serverControl&&n.serverControl.partHoldBack?n.serverControl.partHoldBack:i&&n.partTargetDuration?3*n.partTargetDuration:n.serverControl&&n.serverControl.holdBack?n.serverControl.holdBack:n.targetDuration?3*n.targetDuration:0},kl=function(t,n,i){if(void 0===n&&(n=t.mediaSequence+t.segments.length),n<t.mediaSequence)return 0;var e=function(t,n){var i=0,e=n-t.mediaSequence,r=t.segments[e];if(r){if(void 0!==r.start)return{result:r.start,precise:!0};if(void 0!==r.end)return{result:r.end-r.duration,precise:!0}}for(;e--;){if(void 0!==(r=t.segments[e]).end)return{result:i+r.end,precise:!0};if(i+=yl(t,r),void 0!==r.start)return{result:i+r.start,precise:!0}}return{result:i,precise:!1}}(t,n);if(e.precise)return e.result;var r=function(t,n){for(var i,e=0,r=n-t.mediaSequence;r<t.segments.length;r++){if(void 0!==(i=t.segments[r]).start)return{result:i.start-e,precise:!0};if(e+=yl(t,i),void 0!==i.end)return{result:i.end-e,precise:!0}}return{result:-1,precise:!1}}(t,n);return r.precise?r.result:e.result+i},xl=function(t,n,i){if(!t)return 0;if("number"!=typeof i&&(i=0),void 0===n){if(t.totalDuration)return t.totalDuration;if(!t.endList)return bt.Infinity}return kl(t,n,i)},Sl=function(t){var n=t.defaultDuration,i=t.durationList,e=t.startIndex,r=t.endIndex,s=0;if(e>r){var o=[r,e];e=o[0],r=o[1]}if(e<0){for(var a=e;a<Math.min(0,r);a++)s+=n;e=0}for(var u=e;u<r;u++)s+=i[u].duration;return s},El=function(t,n,i,e){if(!t||!t.segments)return null;if(t.endList)return xl(t);if(null===n)return null;n=n||0;var r=kl(t,t.mediaSequence+t.segments.length,n);return i&&(r-=e="number"==typeof e?e:Al(null,t)),Math.max(0,r)},Il=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()},Ol=function(t){return t.excludeUntil&&t.excludeUntil===1/0},Dl=function(t){var n=Il(t);return!t.disabled&&!n},Nl=function(t,n){return n.attributes&&n.attributes[t]},Ml=function(t,n){if(1===t.playlists.length)return!0;var i=n.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===t.playlists.filter((function(t){return!!Dl(t)&&(t.attributes.BANDWIDTH||0)<i})).length},Cl=function(t,n){return!(!t&&!n||!t&&n||t&&!n)&&(t===n||(!(!t.id||!n.id||t.id!==n.id)||(!(!t.resolvedUri||!n.resolvedUri||t.resolvedUri!==n.resolvedUri)||!(!t.uri||!n.uri||t.uri!==n.uri))))},Rl=function(t,n){var i=t&&t.mediaGroups&&t.mediaGroups.AUDIO||{},e=!1;for(var r in i){for(var s in i[r])if(e=n(i[r][s]))break;if(e)break}return!!e},Ul=function(t){if(!t||!t.playlists||!t.playlists.length)return Rl(t,(function(t){return t.playlists&&t.playlists.length||t.uri}));for(var n=function(n){var i=t.playlists[n],e=i.attributes&&i.attributes.CODECS;return e&&e.split(",").every((function(t){return Ki(t)}))||Rl(t,(function(t){return Cl(i,t)}))?"continue":{v:!1}},i=0;i<t.playlists.length;i++){var e=n(i);if("continue"!==e&&"object"==typeof e)return e.v}return!0},Pl={liveEdgeDelay:Al,duration:xl,seekable:function(t,n,i){var e=n||0,r=El(t,n,!0,i);return null===r?bl():bl(e,r)},getMediaInfoForTime:function(t){for(var n=t.playlist,i=t.currentTime,e=t.startingSegmentIndex,r=t.startingPartIndex,s=t.startTime,o=t.experimentalExactManifestTimings,a=i-s,u=jl(n),h=0,c=0;c<u.length;c++){var f=u[c];if(e===f.segmentIndex&&("number"!=typeof r||"number"!=typeof f.partIndex||r===f.partIndex)){h=c;break}}if(a<0){if(h>0)for(var l=h-1;l>=0;l--){var v=u[l];if(a+=v.duration,o){if(a<0)continue}else if(a+.03333333333333333<=0)continue;return{partIndex:v.partIndex,segmentIndex:v.segmentIndex,startTime:s-Sl({defaultDuration:n.targetDuration,durationList:u,startIndex:h,endIndex:l})}}return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:i}}if(h<0){for(var d=h;d<0;d++)if((a-=n.targetDuration)<0)return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:i};h=0}for(var p=h;p<u.length;p++){var m=u[p];if(a-=m.duration,o){if(a>0)continue}else if(a-.03333333333333333>=0)continue;return{partIndex:m.partIndex,segmentIndex:m.segmentIndex,startTime:s+Sl({defaultDuration:n.targetDuration,durationList:u,startIndex:h,endIndex:p})}}return{segmentIndex:u[u.length-1].segmentIndex,partIndex:u[u.length-1].partIndex,startTime:i}},isEnabled:Dl,isDisabled:function(t){return t.disabled},isBlacklisted:Il,isIncompatible:Ol,playlistEnd:El,isAes:function(t){for(var n=0;n<t.segments.length;n++)if(t.segments[n].key)return!0;return!1},hasAttribute:Nl,estimateSegmentRequestTime:function(t,n,i,e){return void 0===e&&(e=0),Nl("BANDWIDTH",i)?(t*i.attributes.BANDWIDTH-8*e)/n:NaN},isLowestEnabledRendition:Ml,isAudioOnly:Ul,playlistMatch:Cl,segmentDurationWithParts:yl},Ll=sl.log,Bl=function(t,n){return t+"-"+n},Fl=function(t,n){t.mediaGroups&&["AUDIO","SUBTITLES"].forEach((function(i){if(t.mediaGroups[i])for(var e in t.mediaGroups[i])for(var r in t.mediaGroups[i][e]){var s=t.mediaGroups[i][e][r];n(s,i,e,r)}}))},_l=function(t){var n=t.playlist,i=t.uri,e=t.id;n.id=e,n.playlistErrors_=0,i&&(n.uri=i),n.attributes=n.attributes||{}},zl=function(t,n){t.uri=n;for(var i=0;i<t.playlists.length;i++)if(!t.playlists[i].uri){var e="placeholder-uri-"+i;t.playlists[i].uri=e}var r=Ul(t);Fl(t,(function(n,i,e,s){var o="placeholder-uri-"+i+"-"+e+"-"+s;if(!n.playlists||!n.playlists.length){if(r&&"AUDIO"===i&&!n.uri)for(var a=0;a<t.playlists.length;a++){var u=t.playlists[a];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===e)return}n.playlists=[fn({},n)]}n.playlists.forEach((function(n,i){var e=Bl(i,o);n.uri?n.resolvedUri=n.resolvedUri||ul(t.uri,n.uri):(n.uri=0===i?o:e,n.resolvedUri=n.uri),n.id=n.id||e,n.attributes=n.attributes||{},t.playlists[n.id]=n,t.playlists[n.uri]=n}))})),function(t){for(var n=t.playlists.length;n--;){var i=t.playlists[n];_l({playlist:i,id:Bl(n,i.uri)}),i.resolvedUri=ul(t.uri,i.uri),t.playlists[i.id]=i,t.playlists[i.uri]=i,i.attributes.BANDWIDTH||Ll.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(t),function(t){Fl(t,(function(n){n.uri&&(n.resolvedUri=ul(t.uri,n.uri))}))}(t)},Vl=sl.mergeOptions,Hl=sl.EventTarget,Xl=function(t,n){if(!t)return n;var i=Vl(t,n);if(t.preloadHints&&!n.preloadHints&&delete i.preloadHints,t.parts&&!n.parts)delete i.parts;else if(t.parts&&n.parts)for(var e=0;e<n.parts.length;e++)t.parts&&t.parts[e]&&(i.parts[e]=Vl(t.parts[e],n.parts[e]));return!t.skipped&&n.skipped&&(i.skipped=!1),t.preload&&!n.preload&&(i.preload=!1),i},ql=function(t,n){!t.resolvedUri&&t.uri&&(t.resolvedUri=ul(n,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=ul(n,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=ul(n,t.map.uri)),t.map&&t.map.key&&!t.map.key.resolvedUri&&(t.map.key.resolvedUri=ul(n,t.map.key.uri)),t.parts&&t.parts.length&&t.parts.forEach((function(t){t.resolvedUri||(t.resolvedUri=ul(n,t.uri))})),t.preloadHints&&t.preloadHints.length&&t.preloadHints.forEach((function(t){t.resolvedUri||(t.resolvedUri=ul(n,t.uri))}))},Gl=function(t){var n=t.segments||[],i=t.preloadSegment;if(i&&i.parts&&i.parts.length){if(i.preloadHints)for(var e=0;e<i.preloadHints.length;e++)if("MAP"===i.preloadHints[e].type)return n;i.duration=t.targetDuration,i.preload=!0,n.push(i)}return n},Wl=function(t,n){return t===n||t.segments&&n.segments&&t.segments.length===n.segments.length&&t.endList===n.endList&&t.mediaSequence===n.mediaSequence&&t.preloadSegment===n.preloadSegment},Yl=function(t,n,i){void 0===i&&(i=Wl);var e=Vl(t,{}),r=e.playlists[n.id];if(!r)return null;if(i(r,n))return null;n.segments=Gl(n);var s=Vl(r,n);if(s.preloadSegment&&!n.preloadSegment&&delete s.preloadSegment,r.segments){if(n.skip){n.segments=n.segments||[];for(var o=0;o<n.skip.skippedSegments;o++)n.segments.unshift({skipped:!0})}s.segments=function(t,n,i){var e=t.slice(),r=n.slice();i=i||0;for(var s,o=[],a=0;a<r.length;a++){var u=e[a+i],h=r[a];u?(s=u.map||s,o.push(Xl(u,h))):(s&&!h.map&&(h.map=s),o.push(h))}return o}(r.segments,n.segments,n.mediaSequence-r.mediaSequence)}s.segments.forEach((function(t){ql(t,s.resolvedUri)}));for(var a=0;a<e.playlists.length;a++)e.playlists[a].id===n.id&&(e.playlists[a]=s);return e.playlists[n.id]=s,e.playlists[n.uri]=s,Fl(t,(function(t,i,e,r){if(t.playlists)for(var s=0;s<t.playlists.length;s++)n.id===t.playlists[s].id&&(t.playlists[s]=n)})),e},Jl=function(t,n){var i=t.segments||[],e=i[i.length-1],r=e&&e.parts&&e.parts[e.parts.length-1],s=r&&r.duration||e&&e.duration;return n&&s?1e3*s:500*(t.partTargetDuration||t.targetDuration||10)},Ql=function(t){function n(n,i,e){var r;if(void 0===e&&(e={}),r=t.call(this)||this,!n)throw new Error("A non-empty playlist URL or object is required");r.logger_=cl("PlaylistLoader");var s=e,o=s.withCredentials,a=void 0!==o&&o,u=s.handleManifestRedirects,h=void 0!==u&&u;r.src=n,r.vhs_=i,r.withCredentials=a,r.handleManifestRedirects=h;var c=i.options_;return r.customTagParsers=c&&c.customTagParsers||[],r.customTagMappers=c&&c.customTagMappers||[],r.experimentalLLHLS=c&&c.experimentalLLHLS||!1,sl.browser.IE_VERSION&&(r.experimentalLLHLS=!1),r.state="HAVE_NOTHING",r.handleMediaupdatetimeout_=r.handleMediaupdatetimeout_.bind(mn(r)),r.on("mediaupdatetimeout",r.handleMediaupdatetimeout_),r}yn(n,t);var i=n.prototype;return i.handleMediaupdatetimeout_=function(){var t=this;if("HAVE_METADATA"===this.state){var n=this.media(),i=ul(this.master.uri,n.uri);this.experimentalLLHLS&&(i=function(t,n){if(n.endList||!n.serverControl)return t;var i={};if(n.serverControl.canBlockReload){var e=n.preloadSegment,r=n.mediaSequence+n.segments.length;if(e){var s=e.parts||[],o=Tl(n)-1;o>-1&&o!==s.length-1&&(i._HLS_part=o),(o>-1||s.length)&&r--}i._HLS_msn=r}if(n.serverControl&&n.serverControl.canSkipUntil&&(i._HLS_skip=n.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(i).length){var a=new bt.URL(t);["_HLS_skip","_HLS_msn","_HLS_part"].forEach((function(t){i.hasOwnProperty(t)&&a.searchParams.set(t,i[t])})),t=a.toString()}return t}(i,n)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:i,withCredentials:this.withCredentials},(function(n,i){if(t.request)return n?t.playlistRequestError(t.request,t.media(),"HAVE_METADATA"):void t.haveMetadata({playlistString:t.request.responseText,url:t.media().uri,id:t.media().id})}))}},i.playlistRequestError=function(t,n,i){var e=n.uri,r=n.id;this.request=null,i&&(this.state=i),this.error={playlist:this.master.playlists[r],status:t.status,message:"HLS playlist request error at URL: "+e+".",responseText:t.responseText,code:t.status>=500?4:2},this.trigger("error")},i.parseManifest_=function(t){var n=this,i=t.url;return function(t){var n=t.onwarn,i=t.oninfo,e=t.manifestString,r=t.customTagParsers,s=void 0===r?[]:r,o=t.customTagMappers,a=void 0===o?[]:o,u=t.experimentalLLHLS,h=new Gi;n&&h.on("warn",n),i&&h.on("info",i),s.forEach((function(t){return h.addParser(t)})),a.forEach((function(t){return h.addTagMapper(t)})),h.push(e),h.end();var c=h.manifest;if(u||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach((function(t){c.hasOwnProperty(t)&&delete c[t]})),c.segments&&c.segments.forEach((function(t){["parts","preloadHints"].forEach((function(n){t.hasOwnProperty(n)&&delete t[n]}))}))),!c.targetDuration){var f=10;c.segments&&c.segments.length&&(f=c.segments.reduce((function(t,n){return Math.max(t,n.duration)}),0)),n&&n("manifest has no targetDuration defaulting to "+f),c.targetDuration=f}var l=wl(c);if(l.length&&!c.partTargetDuration){var v=l.reduce((function(t,n){return Math.max(t,n.duration)}),0);n&&(n("manifest has no partTargetDuration defaulting to "+v),Ll.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),c.partTargetDuration=v}return c}({onwarn:function(t){var e=t.message;return n.logger_("m3u8-parser warn for "+i+": "+e)},oninfo:function(t){var e=t.message;return n.logger_("m3u8-parser info for "+i+": "+e)},manifestString:t.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},i.haveMetadata=function(t){var n=t.playlistString,i=t.playlistObject,e=t.url,r=t.id;this.request=null,this.state="HAVE_METADATA";var s=i||this.parseManifest_({url:e,manifestString:n});s.lastRequest=Date.now(),_l({playlist:s,uri:e,id:r});var o=Yl(this.master,s);this.targetDuration=s.partTargetDuration||s.targetDuration,this.pendingMedia_=null,o?(this.master=o,this.media_=this.master.playlists[r]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Jl(this.media(),!!o)),this.trigger("loadedplaylist")},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),bt.clearTimeout(this.mediaUpdateTimeout),bt.clearTimeout(this.finalRenditionTimeout),this.off()},i.stopRequest=function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}},i.media=function(t,n){var i=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof t){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}if(bt.clearTimeout(this.finalRenditionTimeout),n){var e=(t.partTargetDuration||t.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=bt.setTimeout(this.media.bind(this,t,!1),e)}else{var r=this.state,s=!this.media_||t.id!==this.media_.id,o=this.master.playlists[t.id];if(o&&o.endList||t.endList&&t.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,void(s&&(this.trigger("mediachanging"),"HAVE_MASTER"===r?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(Jl(t,!0)),s){if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=t,this.request=this.vhs_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials},(function(n,e){if(i.request){if(t.lastRequest=Date.now(),t.resolvedUri=hl(i.handleManifestRedirects,t.resolvedUri,e),n)return i.playlistRequestError(i.request,t,r);i.haveMetadata({playlistString:e.responseText,url:t.uri,id:t.id}),"HAVE_MASTER"===r?i.trigger("loadedmetadata"):i.trigger("mediachange")}}))}}},i.pause=function(){this.mediaUpdateTimeout&&(bt.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},i.load=function(t){var n=this;this.mediaUpdateTimeout&&(bt.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var i=this.media();if(t){var e=i?(i.partTargetDuration||i.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=bt.setTimeout((function(){n.mediaUpdateTimeout=null,n.load()}),e)}else this.started?i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},i.updateMediaUpdateTimeout_=function(t){var n=this;this.mediaUpdateTimeout&&(bt.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=bt.setTimeout((function(){n.mediaUpdateTimeout=null,n.trigger("mediaupdatetimeout"),n.updateMediaUpdateTimeout_(t)}),t))},i.start=function(){var t=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=bt.location.href),this.src.resolvedUri=this.src.uri,void setTimeout((function(){t.setupInitialPlaylist(t.src)}),0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(function(n,i){if(t.request){if(t.request=null,n)return t.error={status:i.status,message:"HLS playlist request error at URL: "+t.src+".",responseText:i.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");t.src=hl(t.handleManifestRedirects,t.src,i);var e=t.parseManifest_({manifestString:i.responseText,url:t.src});t.setupInitialPlaylist(e)}}))},i.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},i.setupInitialPlaylist=function(t){if(this.state="HAVE_MASTER",t.playlists)return this.master=t,zl(this.master,this.srcUri()),t.playlists.forEach((function(t){t.segments=Gl(t),t.segments.forEach((function(n){ql(n,t.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var n=this.srcUri()||bt.location.href;this.master=function(t,n){var i=Bl(0,n),e={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:bt.location.href,resolvedUri:bt.location.href,playlists:[{uri:n,id:i,resolvedUri:n,attributes:{}}]};return e.playlists[i]=e.playlists[0],e.playlists[n]=e.playlists[0],e}(0,n),this.haveMetadata({playlistObject:t,url:n,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},n}(Hl),$l=sl.xhr,Kl=sl.mergeOptions,Zl=function(t,n,i,e){var r="arraybuffer"===t.responseType?t.response:t.responseText;!n&&r&&(t.responseTime=Date.now(),t.roundTripTime=t.responseTime-t.requestTime,t.bytesReceived=r.byteLength||r.length,t.bandwidth||(t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3))),i.headers&&(t.responseHeaders=i.headers),n&&"ETIMEDOUT"===n.code&&(t.timedout=!0),n||t.aborted||200===i.statusCode||206===i.statusCode||0===i.statusCode||(n=new Error("XHR Failed with a response of: "+(t&&(r||t.responseText)))),e(n,t)},tv=function(){var t=function t(n,i){n=Kl({timeout:45e3},n);var e=t.beforeRequest||sl.Vhs.xhr.beforeRequest;if(e&&"function"==typeof e){var r=e(n);r&&(n=r)}var s=(!0===sl.Vhs.xhr.original?$l:sl.Vhs.xhr)(n,(function(t,n){return Zl(s,t,n,i)})),o=s.abort;return s.abort=function(){return s.aborted=!0,o.apply(s,arguments)},s.uri=n.uri,s.requestTime=Date.now(),s};return t.original=!0,t},nv=function(t){var n,i={};return t.byterange&&(i.Range="bytes="+(n=t.byterange).offset+"-"+("bigint"==typeof n.offset||"bigint"==typeof n.length?bt.BigInt(n.offset)+bt.BigInt(n.length)-bt.BigInt(1):n.offset+n.length-1)),i},iv=function(t,n){return t.start(n)+"-"+t.end(n)},ev=function(t,n){var i=t.toString(16);return"00".substring(0,2-i.length)+i+(n%2?" ":"")},rv=function(t){return t>=32&&t<126?String.fromCharCode(t):"."},sv=function(t){var n={};return Object.keys(t).forEach((function(i){var e=t[i];ArrayBuffer.isView(e)?n[i]={bytes:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength}:n[i]=e})),n},ov=function(t){var n=t.byterange||{length:1/0,offset:0};return[n.length,n.offset,t.resolvedUri].join(",")},av=function(t){return t.resolvedUri},uv=function(t){for(var n=Array.prototype.slice.call(t),i=16,e="",r=0;r<n.length/i;r++)e+=n.slice(r*i,r*i+i).map(ev).join("")+" "+n.slice(r*i,r*i+i).map(rv).join("")+"\n";return e},hv=Object.freeze({__proto__:null,createTransferableMessage:sv,initSegmentId:ov,segmentKeyId:av,hexDump:uv,tagDump:function(t){var n=t.bytes;return uv(n)},textRanges:function(t){var n,i="";for(n=0;n<t.length;n++)i+=iv(t,n)+" ";return i}}),cv=function(t){var n=t.playlist,i=t.time,e=void 0===i?void 0:i,r=t.callback;if(!r)throw new Error("getProgramTime: callback must be provided");if(!n||void 0===e)return r({message:"getProgramTime: playlist and time must be provided"});var s=function(t,n){if(!n||!n.segments||0===n.segments.length)return null;for(var i,e=0,r=0;r<n.segments.length&&!(t<=(e=(i=n.segments[r]).videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:e+i.duration));r++);var s=n.segments[n.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<t)return null;if(t>e){if(t>e+.25*s.duration)return null;i=s}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:e-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}}(e,n);if(!s)return r({message:"valid programTime was not found"});if("estimate"===s.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});var o={mediaSeconds:e},a=function(t,n){if(!n.dateTimeObject)return null;var i=n.videoTimingInfo.transmuxerPrependedSeconds,e=t-(n.videoTimingInfo.transmuxedPresentationStart+i);return new Date(n.dateTimeObject.getTime()+1e3*e)}(e,s.segment);return a&&(o.programDateTime=a.toISOString()),r(null,o)},fv=function t(n){var i=n.programTime,e=n.playlist,r=n.retryCount,s=void 0===r?2:r,o=n.seekTo,a=n.pauseAfterSeek,u=void 0===a||a,h=n.tech,c=n.callback;if(!c)throw new Error("seekToProgramTime: callback must be provided");if(void 0===i||!e||!o)return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!h.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!function(t){if(!t.segments||0===t.segments.length)return!1;for(var n=0;n<t.segments.length;n++)if(!t.segments[n].dateTimeObject)return!1;return!0}(e))return c({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});var f=function(t,n){var i;try{i=new Date(t)}catch(t){return null}if(!n||!n.segments||0===n.segments.length)return null;var e=n.segments[0];if(i<e.dateTimeObject)return null;for(var r=0;r<n.segments.length-1&&(e=n.segments[r],!(i<n.segments[r+1].dateTimeObject));r++);var s,o=n.segments[n.segments.length-1],a=o.dateTimeObject,u=o.videoTimingInfo?(s=o.videoTimingInfo).transmuxedPresentationEnd-s.transmuxedPresentationStart-s.transmuxerPrependedSeconds:o.duration+.25*o.duration;return i>new Date(a.getTime()+1e3*u)?null:(i>a&&(e=o),{segment:e,estimatedStart:e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationStart:Pl.duration(n,n.mediaSequence+n.segments.indexOf(e)),type:e.videoTimingInfo?"accurate":"estimate"})}(i,e);if(!f)return c({message:i+" was not found in the stream"});var l=f.segment,v=function(t,n){var i,e;try{i=new Date(t),e=new Date(n)}catch(t){}var r=i.getTime();return(e.getTime()-r)/1e3}(l.dateTimeObject,i);if("estimate"===f.type)return 0===s?c({message:i+" is not buffered yet. Try again"}):(o(f.estimatedStart+v),void h.one("seeked",(function(){t({programTime:i,playlist:e,retryCount:s-1,seekTo:o,pauseAfterSeek:u,tech:h,callback:c})})));var d=l.start+v;h.one("seeked",(function(){return c(null,h.currentTime())})),u&&h.pause(),o(d)},lv=function(t,n){if(4===t.readyState)return n()},vv=function(t,n,i){var e,r=[],s=!1,o=function(t,n,e,r){return n.abort(),s=!0,i(t,n,e,r)},a=function(t,n){if(!s){if(t)return o(t,n,"",r);var i=n.responseText.substring(r&&r.byteLength||0,n.responseText.length);if(r=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if((n=n.filter((function(t){return t&&(t.byteLength||t.length)&&"string"!=typeof t}))).length<=1)return go(n[0]);var e=n.reduce((function(t,n,i){return t+(n.byteLength||n.length)}),0),r=new Uint8Array(e),s=0;return n.forEach((function(t){t=go(t),r.set(t,s),s+=t.byteLength})),r}(r,To(i,!0)),e=e||xo(r),r.length<10||e&&r.length<e+2)return lv(n,(function(){return o(t,n,"",r)}));var a=Wo(r);return"ts"===a&&r.length<188||!a&&r.length<376?lv(n,(function(){return o(t,n,"",r)})):o(null,n,a,r)}},u=n({uri:t,beforeSend:function(t){t.overrideMimeType("text/plain; charset=x-user-defined"),t.addEventListener("progress",(function(n){return n.total,n.loaded,Zl(t,null,{statusCode:t.status},a)}))}},(function(t,n){return Zl(u,t,n,a)}));return u},dv=sl.EventTarget,pv=sl.mergeOptions,mv=function(t,n){if(!Wl(t,n))return!1;if(t.sidx&&n.sidx&&(t.sidx.offset!==n.sidx.offset||t.sidx.length!==n.sidx.length))return!1;if(!t.sidx&&n.sidx||t.sidx&&!n.sidx)return!1;if(t.segments&&!n.segments||!t.segments&&n.segments)return!1;if(!t.segments&&!n.segments)return!0;for(var i=0;i<t.segments.length;i++){var e=t.segments[i],r=n.segments[i];if(e.uri!==r.uri)return!1;if(e.byterange||r.byterange){var s=e.byterange,o=r.byterange;if(s&&!o||!s&&o)return!1;if(s.offset!==o.offset||s.length!==o.length)return!1}}return!0},gv=function(t,n){return(Boolean(!t.map&&!n.map)||Boolean(t.map&&n.map&&t.map.byterange.offset===n.map.byterange.offset&&t.map.byterange.length===n.map.byterange.length))&&t.uri===n.uri&&t.byterange.offset===n.byterange.offset&&t.byterange.length===n.byterange.length},bv=function(t,n){var i={};for(var e in t){var r=t[e].sidx;if(r){var s=ho(r);if(!n[s])break;var o=n[s].sidxInfo;gv(o,r)&&(i[s]=n[s])}}return i},yv=function(t){function n(n,i,e,r){var s;void 0===e&&(e={}),(s=t.call(this)||this).masterPlaylistLoader_=r||mn(s),r||(s.isMaster_=!0);var o=e,a=o.withCredentials,u=void 0!==a&&a,h=o.handleManifestRedirects,c=void 0!==h&&h;if(s.vhs_=i,s.withCredentials=u,s.handleManifestRedirects=c,!n)throw new Error("A non-empty playlist URL or object is required");return s.on("minimumUpdatePeriod",(function(){s.refreshXml_()})),s.on("mediaupdatetimeout",(function(){s.refreshMedia_(s.media().id)})),s.state="HAVE_NOTHING",s.loadedPlaylists_={},s.logger_=cl("DashPlaylistLoader"),s.isMaster_?(s.masterPlaylistLoader_.srcUrl=n,s.masterPlaylistLoader_.sidxMapping_={}):s.childPlaylist_=n,s}yn(n,t);var i=n.prototype;return i.requestErrored_=function(t,n,i){return!this.request||(this.request=null,t?(this.error="object"!=typeof t||t instanceof Error?{status:n.status,message:"DASH request error at URL: "+n.uri,response:n.response,code:2}:t,i&&(this.state=i),this.trigger("error"),!0):void 0)},i.addSidxSegments_=function(t,n,i){var e=this,r=t.sidx&&ho(t.sidx);if(t.sidx&&r&&!this.masterPlaylistLoader_.sidxMapping_[r]){var s=hl(this.handleManifestRedirects,t.sidx.resolvedUri),o=function(s,o){if(!e.requestErrored_(s,o,n)){var a,u=e.masterPlaylistLoader_.sidxMapping_;try{a=po(go(o.response).subarray(8))}catch(t){return void e.requestErrored_(t,o,n)}return u[r]={sidxInfo:t.sidx,sidx:a},uo(t,a,t.sidx.resolvedUri),i(!0)}};this.request=vv(s,this.vhs_.xhr,(function(n,i,r,a){if(n)return o(n,i);if(!r||"mp4"!==r)return o({status:i.status,message:"Unsupported "+(r||"unknown")+" container type for sidx segment at URL: "+s,response:"",playlist:t,internal:!0,blacklistDuration:1/0,code:2},i);var u=t.sidx.byterange,h=u.offset,c=u.length;if(a.length>=c+h)return o(n,{response:a.subarray(h,h+c),status:i.status,uri:i.uri});e.request=e.vhs_.xhr({uri:s,responseType:"arraybuffer",headers:nv({byterange:t.sidx.byterange})},o)}))}else this.mediaRequest_=bt.setTimeout((function(){return i(!1)}),0)},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},bt.clearTimeout(this.minimumUpdatePeriodTimeout_),bt.clearTimeout(this.mediaRequest_),bt.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},i.hasPendingRequest=function(){return this.request||this.mediaRequest_},i.stopRequest=function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}},i.media=function(t){var n=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var i=this.state;if("string"==typeof t){if(!this.masterPlaylistLoader_.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.masterPlaylistLoader_.master.playlists[t]}var e=!this.media_||t.id!==this.media_.id;if(e&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList)return this.state="HAVE_METADATA",this.media_=t,void(e&&(this.trigger("mediachanging"),this.trigger("mediachange")));e&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(t,i,(function(e){n.haveMetadata({startingState:i,playlist:t})})))},i.haveMetadata=function(t){var n=t.startingState,i=t.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[i.id]=i,this.mediaRequest_=null,this.refreshMedia_(i.id),"HAVE_MASTER"===n?this.trigger("loadedmetadata"):this.trigger("mediachange")},i.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),bt.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(bt.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},i.load=function(t){var n=this;bt.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var i=this.media();if(t){var e=i?i.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=bt.setTimeout((function(){return n.load()}),e)}else this.started?i&&!i.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},i.start=function(){var t=this;this.started=!0,this.isMaster_?this.requestMaster_((function(n,i){t.haveMaster_(),t.hasPendingRequest()||t.media_||t.media(t.masterPlaylistLoader_.master.playlists[0])})):this.mediaRequest_=bt.setTimeout((function(){return t.haveMaster_()}),0)},i.requestMaster_=function(t){var n=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(function(i,e){if(!n.requestErrored_(i,e)){var r=e.responseText!==n.masterPlaylistLoader_.masterXml_;return n.masterPlaylistLoader_.masterXml_=e.responseText,e.responseHeaders&&e.responseHeaders.date?n.masterLoaded_=Date.parse(e.responseHeaders.date):n.masterLoaded_=Date.now(),n.masterPlaylistLoader_.srcUrl=hl(n.handleManifestRedirects,n.masterPlaylistLoader_.srcUrl,e),r?(n.handleMaster_(),void n.syncClientServerClock_((function(){return t(e,r)}))):t(e,r)}"HAVE_NOTHING"===n.state&&(n.started=!1)}))},i.syncClientServerClock_=function(t){var n=this,i=fo(this.masterPlaylistLoader_.masterXml_);return null===i?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),t()):"DIRECT"===i.method?(this.masterPlaylistLoader_.clientOffset_=i.value-Date.now(),t()):void(this.request=this.vhs_.xhr({uri:ul(this.masterPlaylistLoader_.srcUrl,i.value),method:i.method,withCredentials:this.withCredentials},(function(e,r){if(n.request){if(e)return n.masterPlaylistLoader_.clientOffset_=n.masterLoaded_-Date.now(),t();var s;s="HEAD"===i.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):n.masterLoaded_:Date.parse(r.responseText),n.masterPlaylistLoader_.clientOffset_=s-Date.now(),t()}})))},i.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},i.handleMaster_=function(){this.mediaRequest_=null;var t,n,i,e,r,s,o,a=this.masterPlaylistLoader_.master,u=(t={masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:a},n=t.masterXml,i=t.srcUrl,e=t.clientOffset,r=t.sidxMapping,s=t.previousManifest,o=co(n,{manifestUri:i,clientOffset:e,sidxMapping:r,previousManifest:s}),zl(o,i),o);a&&(u=function(t,n,i){for(var e=!0,r=pv(t,{duration:n.duration,minimumUpdatePeriod:n.minimumUpdatePeriod,timelineStarts:n.timelineStarts}),s=0;s<n.playlists.length;s++){var o=n.playlists[s];if(o.sidx){var a=ho(o.sidx);i&&i[a]&&i[a].sidx&&uo(o,i[a].sidx,o.sidx.resolvedUri)}var u=Yl(r,o,mv);u&&(r=u,e=!1)}return Fl(n,(function(t,n,i,s){if(t.playlists&&t.playlists.length){var o=t.playlists[0].id,a=Yl(r,t.playlists[0],mv);a&&((r=a).mediaGroups[n][i][s].playlists[0]=r.playlists[o],e=!1)}})),n.minimumUpdatePeriod!==t.minimumUpdatePeriod&&(e=!1),e?null:r}(a,u,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=u||a;var h=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return h&&h!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=h),(!a||u&&u.minimumUpdatePeriod!==a.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(u)},i.updateMinimumUpdatePeriodTimeout_=function(){var t=this.masterPlaylistLoader_;t.createMupOnMedia_&&(t.off("loadedmetadata",t.createMupOnMedia_),t.createMupOnMedia_=null),t.minimumUpdatePeriodTimeout_&&(bt.clearTimeout(t.minimumUpdatePeriodTimeout_),t.minimumUpdatePeriodTimeout_=null);var n=t.master&&t.master.minimumUpdatePeriod;0===n&&(t.media()?n=1e3*t.media().targetDuration:(t.createMupOnMedia_=t.updateMinimumUpdatePeriodTimeout_,t.one("loadedmetadata",t.createMupOnMedia_))),"number"!=typeof n||n<=0?n<0&&this.logger_("found invalid minimumUpdatePeriod of "+n+", not setting a timeout"):this.createMUPTimeout_(n)},i.createMUPTimeout_=function(t){var n=this.masterPlaylistLoader_;n.minimumUpdatePeriodTimeout_=bt.setTimeout((function(){n.minimumUpdatePeriodTimeout_=null,n.trigger("minimumUpdatePeriod"),n.createMUPTimeout_(t)}),t)},i.refreshXml_=function(){var t=this;this.requestMaster_((function(n,i){var e,r,s;i&&(t.media_&&(t.media_=t.masterPlaylistLoader_.master.playlists[t.media_.id]),t.masterPlaylistLoader_.sidxMapping_=(e=t.masterPlaylistLoader_.master,r=t.masterPlaylistLoader_.sidxMapping_,s=bv(e.playlists,r),Fl(e,(function(t,n,i,e){if(t.playlists&&t.playlists.length){var o=t.playlists;s=pv(s,bv(o,r))}})),s),t.addSidxSegments_(t.media(),t.state,(function(n){t.refreshMedia_(t.media().id)})))}))},i.refreshMedia_=function(t){var n=this;if(!t)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var i=this.masterPlaylistLoader_.master.playlists,e=!this.media_||this.media_!==i[t];if(e?this.media_=i[t]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){!function t(){n.media().endList||(n.mediaUpdateTimeout=bt.setTimeout((function(){n.trigger("mediaupdatetimeout"),t()}),Jl(n.media(),Boolean(e))))}()}this.trigger("loadedplaylist")},n}(dv),jv={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},wv=function(t){return t.on=t.addEventListener,t.off=t.removeEventListener,t},Tv=function(t){return function(){var n=function(t){try{return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}catch(i){var n=new BlobBuilder;return n.append(t),URL.createObjectURL(n.getBlob())}}(t),i=wv(new Worker(n));i.objURL=n;var e=i.terminate;return i.on=i.addEventListener,i.off=i.removeEventListener,i.terminate=function(){return URL.revokeObjectURL(n),e.call(this)},i}},Av=function(t){return"var browserWorkerPolyFill = "+wv.toString()+";\nbrowserWorkerPolyFill(self);\n"+t},kv=function(t){return t.toString().replace(/^function.+?{/,"").slice(0,-1)},xv=Tv(Av(kv((function(){var t=function(){this.init=function(){var t={};this.on=function(n,i){t[n]||(t[n]=[]),t[n]=t[n].concat(i)},this.off=function(n,i){var e;return!!t[n]&&(e=t[n].indexOf(i),t[n]=t[n].slice(),t[n].splice(e,1),e>-1)},this.trigger=function(n){var i,e,r,s;if(i=t[n])if(2===arguments.length)for(r=i.length,e=0;e<r;++e)i[e].call(this,arguments[1]);else{for(s=[],e=arguments.length,e=1;e<arguments.length;++e)s.push(arguments[e]);for(r=i.length,e=0;e<r;++e)i[e].apply(this,s)}},this.dispose=function(){t={}}}};t.prototype.pipe=function(t){return this.on("data",(function(n){t.push(n)})),this.on("done",(function(n){t.flush(n)})),this.on("partialdone",(function(n){t.partialFlush(n)})),this.on("endedtimeline",(function(n){t.endTimeline(n)})),this.on("reset",(function(n){t.reset(n)})),t},t.prototype.push=function(t){this.trigger("data",t)},t.prototype.flush=function(t){this.trigger("done",t)},t.prototype.partialFlush=function(t){this.trigger("partialdone",t)},t.prototype.endTimeline=function(t){this.trigger("endedtimeline",t)},t.prototype.reset=function(t){this.trigger("reset",t)};var n,i,e,r,s,o,a,u,h,c,f,l,v,d,p,m,g,b,y,j,w,T,A,k,x,S,E,I,O,D,N,M,C,R,U,P,L,B,F,_,z=t,V=Math.pow(2,32),H={getUint64:function(t){var n,i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.getBigUint64?(n=i.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(n):n:i.getUint32(0)*V+i.getUint32(4)},MAX_UINT32:V},X=H.MAX_UINT32;!function(){var t;if(T={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(t in T)T.hasOwnProperty(t)&&(T[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);A=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),x=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),k=new Uint8Array([0,0,0,1]),S=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),E=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),I={video:S,audio:E},N=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),D=new Uint8Array([0,0,0,0,0,0,0,0]),M=new Uint8Array([0,0,0,0,0,0,0,0]),C=M,R=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),U=M,O=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),n=function(t){var n,i,e=[],r=0;for(n=1;n<arguments.length;n++)e.push(arguments[n]);for(n=e.length;n--;)r+=e[n].byteLength;for(i=new Uint8Array(r+8),new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,i.byteLength),i.set(t,4),n=0,r=8;n<e.length;n++)i.set(e[n],r),r+=e[n].byteLength;return i},i=function(){return n(T.dinf,n(T.dref,N))},e=function(t){return n(T.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))},p=function(t){return n(T.hdlr,I[t])},d=function(t){var i=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,255&t.duration,85,196,0,0]);return t.samplerate&&(i[12]=t.samplerate>>>24&255,i[13]=t.samplerate>>>16&255,i[14]=t.samplerate>>>8&255,i[15]=255&t.samplerate),n(T.mdhd,i)},v=function(t){return n(T.mdia,d(t),p(t.type),o(t))},s=function(t){return n(T.mfhd,new Uint8Array([0,0,0,0,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]))},o=function(t){return n(T.minf,"video"===t.type?n(T.vmhd,O):n(T.smhd,D),i(),g(t))},a=function(t,i){for(var e=[],r=i.length;r--;)e[r]=y(i[r]);return n.apply(null,[T.moof,s(t)].concat(e))},u=function(t){for(var i=t.length,e=[];i--;)e[i]=f(t[i]);return n.apply(null,[T.moov,c(4294967295)].concat(e).concat(h(t)))},h=function(t){for(var i=t.length,e=[];i--;)e[i]=j(t[i]);return n.apply(null,[T.mvex].concat(e))},c=function(t){var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return n(T.mvhd,i)},m=function(t){var i,e,r=t.samples||[],s=new Uint8Array(4+r.length);for(e=0;e<r.length;e++)i=r[e].flags,s[e+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return n(T.sdtp,s)},g=function(t){return n(T.stbl,b(t),n(T.stts,U),n(T.stsc,C),n(T.stsz,R),n(T.stco,M))},b=function(t){return n(T.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===t.type?P(t):L(t))},P=function(t){var i,e,r=t.sps||[],s=t.pps||[],o=[],a=[];for(i=0;i<r.length;i++)o.push((65280&r[i].byteLength)>>>8),o.push(255&r[i].byteLength),o=o.concat(Array.prototype.slice.call(r[i]));for(i=0;i<s.length;i++)a.push((65280&s[i].byteLength)>>>8),a.push(255&s[i].byteLength),a=a.concat(Array.prototype.slice.call(s[i]));if(e=[T.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),n(T.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([r.length],o,[s.length],a))),n(T.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],t.sarRatio){var u=t.sarRatio[0],h=t.sarRatio[1];e.push(n(T.pasp,new Uint8Array([(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u,(4278190080&h)>>24,(16711680&h)>>16,(65280&h)>>8,255&h])))}return n.apply(null,e)},L=function(t){return n(T.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&t.channelcount)>>8,255&t.channelcount,(65280&t.samplesize)>>8,255&t.samplesize,0,0,0,0,(65280&t.samplerate)>>8,255&t.samplerate,0,0]),e(t))},l=function(t){var i=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,0,(4278190080&t.duration)>>24,(16711680&t.duration)>>16,(65280&t.duration)>>8,255&t.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&t.width)>>8,255&t.width,0,0,(65280&t.height)>>8,255&t.height,0,0]);return n(T.tkhd,i)},y=function(t){var i,e,r,s,o,a;return i=n(T.tfhd,new Uint8Array([0,0,0,58,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),o=Math.floor(t.baseMediaDecodeTime/X),a=Math.floor(t.baseMediaDecodeTime%X),e=n(T.tfdt,new Uint8Array([1,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a])),92,"audio"===t.type?(r=w(t,92),n(T.traf,i,e,r)):(s=m(t),r=w(t,s.length+92),n(T.traf,i,e,r,s))},f=function(t){return t.duration=t.duration||4294967295,n(T.trak,l(t),v(t))},j=function(t){var i=new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==t.type&&(i[i.length-1]=0),n(T.trex,i)},_=function(t,n){var i=0,e=0,r=0,s=0;return t.length&&(void 0!==t[0].duration&&(i=1),void 0!==t[0].size&&(e=2),void 0!==t[0].flags&&(r=4),void 0!==t[0].compositionTimeOffset&&(s=8)),[0,0,i|e|r|s,1,(4278190080&t.length)>>>24,(16711680&t.length)>>>16,(65280&t.length)>>>8,255&t.length,(4278190080&n)>>>24,(16711680&n)>>>16,(65280&n)>>>8,255&n]},F=function(t,i){var e,r,s,o,a,u;for(i+=20+16*(o=t.samples||[]).length,s=_(o,i),(r=new Uint8Array(s.length+16*o.length)).set(s),e=s.length,u=0;u<o.length;u++)a=o[u],r[e++]=(4278190080&a.duration)>>>24,r[e++]=(16711680&a.duration)>>>16,r[e++]=(65280&a.duration)>>>8,r[e++]=255&a.duration,r[e++]=(4278190080&a.size)>>>24,r[e++]=(16711680&a.size)>>>16,r[e++]=(65280&a.size)>>>8,r[e++]=255&a.size,r[e++]=a.flags.isLeading<<2|a.flags.dependsOn,r[e++]=a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,r[e++]=61440&a.flags.degradationPriority,r[e++]=15&a.flags.degradationPriority,r[e++]=(4278190080&a.compositionTimeOffset)>>>24,r[e++]=(16711680&a.compositionTimeOffset)>>>16,r[e++]=(65280&a.compositionTimeOffset)>>>8,r[e++]=255&a.compositionTimeOffset;return n(T.trun,r)},B=function(t,i){var e,r,s,o,a,u;for(i+=20+8*(o=t.samples||[]).length,s=_(o,i),(e=new Uint8Array(s.length+8*o.length)).set(s),r=s.length,u=0;u<o.length;u++)a=o[u],e[r++]=(4278190080&a.duration)>>>24,e[r++]=(16711680&a.duration)>>>16,e[r++]=(65280&a.duration)>>>8,e[r++]=255&a.duration,e[r++]=(4278190080&a.size)>>>24,e[r++]=(16711680&a.size)>>>16,e[r++]=(65280&a.size)>>>8,e[r++]=255&a.size;return n(T.trun,e)},w=function(t,n){return"audio"===t.type?B(t,n):F(t,n)};r=function(){return n(T.ftyp,A,k,A,x)};var q,G,W,Y,J,Q,$,K,Z=function(t){return n(T.mdat,t)},tt=a,nt=function(t){var n,i=r(),e=u(t);return(n=new Uint8Array(i.byteLength+e.byteLength)).set(i),n.set(e,i.byteLength),n},it=function(t,n){var i={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return i.dataOffset=n,i.compositionTimeOffset=t.pts-t.dts,i.duration=t.duration,i.size=4*t.length,i.size+=t.byteLength,t.keyFrame&&(i.flags.dependsOn=2,i.flags.isNonSyncSample=0),i},et=function(t){var n,i,e=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,e.byteLength=0,n=0;n<t.length;n++)"access_unit_delimiter_rbsp"===(i=t[n]).nalUnitType?(e.length&&(e.duration=i.dts-e.dts,r.byteLength+=e.byteLength,r.nalCount+=e.length,r.duration+=e.duration,r.push(e)),(e=[i]).byteLength=i.data.byteLength,e.pts=i.pts,e.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(e.keyFrame=!0),e.duration=i.dts-e.dts,e.byteLength+=i.data.byteLength,e.push(i));return r.length&&(!e.duration||e.duration<=0)&&(e.duration=r[r.length-1].duration),r.byteLength+=e.byteLength,r.nalCount+=e.length,r.duration+=e.duration,r.push(e),r},rt=function(t){var n,i,e=[],r=[];for(e.byteLength=0,e.nalCount=0,e.duration=0,e.pts=t[0].pts,e.dts=t[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=t[0].pts,r.dts=t[0].dts,n=0;n<t.length;n++)(i=t[n]).keyFrame?(e.length&&(r.push(e),r.byteLength+=e.byteLength,r.nalCount+=e.nalCount,r.duration+=e.duration),(e=[i]).nalCount=i.length,e.byteLength=i.byteLength,e.pts=i.pts,e.dts=i.dts,e.duration=i.duration):(e.duration+=i.duration,e.nalCount+=i.length,e.byteLength+=i.byteLength,e.push(i));return r.length&&e.duration<=0&&(e.duration=r[r.length-1].duration),r.byteLength+=e.byteLength,r.nalCount+=e.nalCount,r.duration+=e.duration,r.push(e),r},st=function(t){var n;return!t[0][0].keyFrame&&t.length>1&&(n=t.shift(),t.byteLength-=n.byteLength,t.nalCount-=n.nalCount,t[0][0].dts=n.dts,t[0][0].pts=n.pts,t[0][0].duration+=n.duration),t},ot=function(t,n){var i,e,r,s,o,a=n||0,u=[];for(i=0;i<t.length;i++)for(s=t[i],e=0;e<s.length;e++)o=s[e],a+=(r=it(o,a)).size,u.push(r);return u},at=function(t){var n,i,e,r,s,o,a=0,u=t.byteLength,h=t.nalCount,c=new Uint8Array(u+4*h),f=new DataView(c.buffer);for(n=0;n<t.length;n++)for(r=t[n],i=0;i<r.length;i++)for(s=r[i],e=0;e<s.length;e++)o=s[e],f.setUint32(a,o.data.byteLength),a+=4,c.set(o.data,a),a+=o.data.byteLength;return c},ut=[33,16,5,32,164,27],ht=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ct=function(t){for(var n=[];t--;)n.push(0);return n},ft=function(){if(!q){var t={96e3:[ut,[227,64],ct(154),[56]],88200:[ut,[231],ct(170),[56]],64e3:[ut,[248,192],ct(240),[56]],48e3:[ut,[255,192],ct(268),[55,148,128],ct(54),[112]],44100:[ut,[255,192],ct(268),[55,163,128],ct(84),[112]],32e3:[ut,[255,192],ct(268),[55,234],ct(226),[112]],24e3:[ut,[255,192],ct(268),[55,255,128],ct(268),[111,112],ct(126),[224]],16e3:[ut,[255,192],ct(268),[55,255,128],ct(268),[111,255],ct(269),[223,108],ct(195),[1,192]],12e3:[ht,ct(268),[3,127,248],ct(268),[6,255,240],ct(268),[13,255,224],ct(268),[27,253,128],ct(259),[56]],11025:[ht,ct(268),[3,127,248],ct(268),[6,255,240],ct(268),[13,255,224],ct(268),[27,255,192],ct(268),[55,175,128],ct(108),[112]],8e3:[ht,ct(268),[3,121,16],ct(47),[7]]};n=t,q=Object.keys(n).reduce((function(t,i){return t[i]=new Uint8Array(n[i].reduce((function(t,n){return t.concat(n)}),[])),t}),{})}var n;return q},lt=9e4;Q=function(t,n){return G(J(t,n))},$=function(t,n){return W(Y(t),n)},K=function(t,n,i){return Y(i?t:t-n)};var vt=lt,dt=G=function(t){return t*lt},pt=(W=function(t,n){return t*n},Y=function(t){return t/lt}),mt=(J=function(t,n){return t/n},Q),gt=$,bt=K,yt=function(t,n,i,e){var r,s,o,a,u,h=0,c=0,f=0;if(n.length&&(r=mt(t.baseMediaDecodeTime,t.samplerate),s=Math.ceil(vt/(t.samplerate/1024)),i&&e&&(h=r-Math.max(i,e),f=(c=Math.floor(h/s))*s),!(c<1||f>vt/2))){for((o=ft()[t.samplerate])||(o=n[0].data),a=0;a<c;a++)u=n[0],n.splice(0,0,{data:o,dts:u.dts-s,pts:u.pts-s});return t.baseMediaDecodeTime-=Math.floor(gt(f,t.samplerate)),f}},jt=function(t,n,i){return n.minSegmentDts>=i?t:(n.minSegmentDts=1/0,t.filter((function(t){return t.dts>=i&&(n.minSegmentDts=Math.min(n.minSegmentDts,t.dts),n.minSegmentPts=n.minSegmentDts,!0)})))},wt=function(t){var n,i,e=[];for(n=0;n<t.length;n++)i=t[n],e.push({size:i.data.byteLength,duration:1024});return e},Tt=function(t){var n,i,e=0,r=new Uint8Array(function(t){var n,i=0;for(n=0;n<t.length;n++)i+=t[n].data.byteLength;return i}(t));for(n=0;n<t.length;n++)i=t[n],r.set(i.data,e),e+=i.data.byteLength;return r},At=vt,kt=function(t){delete t.minSegmentDts,delete t.maxSegmentDts,delete t.minSegmentPts,delete t.maxSegmentPts},xt=function(t,n){var i,e=t.minSegmentDts;return n||(e-=t.timelineStartInfo.dts),i=t.timelineStartInfo.baseMediaDecodeTime,i+=e,i=Math.max(0,i),"audio"===t.type&&(i*=t.samplerate/At,i=Math.floor(i)),i},St=function(t,n){"number"==typeof n.pts&&(void 0===t.timelineStartInfo.pts&&(t.timelineStartInfo.pts=n.pts),void 0===t.minSegmentPts?t.minSegmentPts=n.pts:t.minSegmentPts=Math.min(t.minSegmentPts,n.pts),void 0===t.maxSegmentPts?t.maxSegmentPts=n.pts:t.maxSegmentPts=Math.max(t.maxSegmentPts,n.pts)),"number"==typeof n.dts&&(void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=n.dts),void 0===t.minSegmentDts?t.minSegmentDts=n.dts:t.minSegmentDts=Math.min(t.minSegmentDts,n.dts),void 0===t.maxSegmentDts?t.maxSegmentDts=n.dts:t.maxSegmentDts=Math.max(t.maxSegmentDts,n.dts))},Et=function(t){for(var n=0,i={payloadType:-1,payloadSize:0},e=0,r=0;n<t.byteLength&&128!==t[n];){for(;255===t[n];)e+=255,n++;for(e+=t[n++];255===t[n];)r+=255,n++;if(r+=t[n++],!i.payload&&4===e){if("GA94"===String.fromCharCode(t[n+3],t[n+4],t[n+5],t[n+6])){i.payloadType=e,i.payloadSize=r,i.payload=t.subarray(n,n+r);break}i.payload=void 0}n+=r,e=0,r=0}return i},It=function(t){return 181!==t.payload[0]||49!=(t.payload[1]<<8|t.payload[2])||"GA94"!==String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])||3!==t.payload[7]?null:t.payload.subarray(8,t.payload.length-1)},Ot=function(t,n){var i,e,r,s,o=[];if(!(64&n[0]))return o;for(e=31&n[0],i=0;i<e;i++)s={type:3&n[(r=3*i)+2],pts:t},4&n[r+2]&&(s.ccData=n[r+3]<<8|n[r+4],o.push(s));return o},Dt=function(t){for(var n,i,e=t.byteLength,r=[],s=1;s<e-2;)0===t[s]&&0===t[s+1]&&3===t[s+2]?(r.push(s+2),s+=2):s++;if(0===r.length)return t;n=e-r.length,i=new Uint8Array(n);var o=0;for(s=0;s<n;o++,s++)o===r[0]&&(o++,r.shift()),i[s]=t[o];return i},Nt=4,Mt=function t(n){n=n||{},t.prototype.init.call(this),this.parse708captions_="boolean"!=typeof n.parse708captions||n.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Vt(0,0),new Vt(0,1),new Vt(1,0),new Vt(1,1)],this.parse708captions_&&(this.cc708Stream_=new Lt({captionServices:n.captionServices})),this.reset(),this.ccStreams_.forEach((function(t){t.on("data",this.trigger.bind(this,"data")),t.on("partialdone",this.trigger.bind(this,"partialdone")),t.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(Mt.prototype=new z).push=function(t){var n,i,e;if("sei_rbsp"===t.nalUnitType&&(n=Et(t.escapedRBSP)).payload&&n.payloadType===Nt&&(i=It(n)))if(t.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(t.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));e=Ot(t.pts,i),this.captionPackets_=this.captionPackets_.concat(e),this.latestDts_!==t.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=t.dts}},Mt.prototype.flushCCStreams=function(t){this.ccStreams_.forEach((function(n){return"flush"===t?n.flush():n.partialFlush()}),this)},Mt.prototype.flushStream=function(t){this.captionPackets_.length?(this.captionPackets_.forEach((function(t,n){t.presortIndex=n})),this.captionPackets_.sort((function(t,n){return t.pts===n.pts?t.presortIndex-n.presortIndex:t.pts-n.pts})),this.captionPackets_.forEach((function(t){t.type<2?this.dispatchCea608Packet(t):this.dispatchCea708Packet(t)}),this),this.captionPackets_.length=0,this.flushCCStreams(t)):this.flushCCStreams(t)},Mt.prototype.flush=function(){return this.flushStream("flush")},Mt.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Mt.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(t){t.reset()}))},Mt.prototype.dispatchCea608Packet=function(t){this.setsTextOrXDSActive(t)?this.activeCea608Channel_[t.type]=null:this.setsChannel1Active(t)?this.activeCea608Channel_[t.type]=0:this.setsChannel2Active(t)&&(this.activeCea608Channel_[t.type]=1),null!==this.activeCea608Channel_[t.type]&&this.ccStreams_[(t.type<<1)+this.activeCea608Channel_[t.type]].push(t)},Mt.prototype.setsChannel1Active=function(t){return 4096==(30720&t.ccData)},Mt.prototype.setsChannel2Active=function(t){return 6144==(30720&t.ccData)},Mt.prototype.setsTextOrXDSActive=function(t){return 256==(28928&t.ccData)||4138==(30974&t.ccData)||6186==(30974&t.ccData)},Mt.prototype.dispatchCea708Packet=function(t){this.parse708captions_&&this.cc708Stream_.push(t)};var Ct={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Rt=function(t){return 32<=t&&t<=127||160<=t&&t<=255},Ut=function(t){this.windowNum=t,this.reset()};Ut.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Ut.prototype.getText=function(){return this.rows.join("\n")},Ut.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Ut.prototype.newLine=function(t){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(t),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Ut.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},Ut.prototype.addText=function(t){this.rows[this.rowIdx]+=t},Ut.prototype.backspace=function(){if(!this.isEmpty()){var t=this.rows[this.rowIdx];this.rows[this.rowIdx]=t.substr(0,t.length-1)}};var Pt=function(t,n,i){this.serviceNum=t,this.text="",this.currentWindow=new Ut(-1),this.windows=[],this.stream=i,"string"==typeof n&&this.createTextDecoder(n)};Pt.prototype.init=function(t,n){this.startPts=t;for(var i=0;i<8;i++)this.windows[i]=new Ut(i),"function"==typeof n&&(this.windows[i].beforeRowOverflow=n)},Pt.prototype.setCurrentWindow=function(t){this.currentWindow=this.windows[t]},Pt.prototype.createTextDecoder=function(t){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(t)}catch(n){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+t+" encoding. "+n})}};var Lt=function t(n){n=n||{},t.prototype.init.call(this);var i,e=this,r=n.captionServices||{},s={};Object.keys(r).forEach((function(t){i=r[t],/^SERVICE/.test(t)&&(s[t]=i.encoding)})),this.serviceEncodings=s,this.current708Packet=null,this.services={},this.push=function(t){3===t.type?(e.new708Packet(),e.add708Bytes(t)):(null===e.current708Packet&&e.new708Packet(),e.add708Bytes(t))}};Lt.prototype=new z,Lt.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Lt.prototype.add708Bytes=function(t){var n=t.ccData,i=n>>>8,e=255&n;this.current708Packet.ptsVals.push(t.pts),this.current708Packet.data.push(i),this.current708Packet.data.push(e)},Lt.prototype.push708Packet=function(){var t=this.current708Packet,n=t.data,i=null,e=null,r=0,s=n[r++];for(t.seq=s>>6,t.sizeCode=63&s;r<n.length;r++)e=31&(s=n[r++]),7===(i=s>>5)&&e>0&&(i=s=n[r++]),this.pushServiceBlock(i,r,e),e>0&&(r+=e-1)},Lt.prototype.pushServiceBlock=function(t,n,i){var e,r=n,s=this.current708Packet.data,o=this.services[t];for(o||(o=this.initService(t,r));r<n+i&&r<s.length;r++)e=s[r],Rt(e)?r=this.handleText(r,o):24===e?r=this.multiByteCharacter(r,o):16===e?r=this.extendedCommands(r,o):128<=e&&e<=135?r=this.setCurrentWindow(r,o):152<=e&&e<=159?r=this.defineWindow(r,o):136===e?r=this.clearWindows(r,o):140===e?r=this.deleteWindows(r,o):137===e?r=this.displayWindows(r,o):138===e?r=this.hideWindows(r,o):139===e?r=this.toggleWindows(r,o):151===e?r=this.setWindowAttributes(r,o):144===e?r=this.setPenAttributes(r,o):145===e?r=this.setPenColor(r,o):146===e?r=this.setPenLocation(r,o):143===e?o=this.reset(r,o):8===e?o.currentWindow.backspace():12===e?o.currentWindow.clearText():13===e?o.currentWindow.pendingNewLine=!0:14===e?o.currentWindow.clearText():141===e&&r++},Lt.prototype.extendedCommands=function(t,n){var i=this.current708Packet.data[++t];return Rt(i)&&(t=this.handleText(t,n,{isExtended:!0})),t},Lt.prototype.getPts=function(t){return this.current708Packet.ptsVals[Math.floor(t/2)]},Lt.prototype.initService=function(t,n){var i,e,r=this;return(i="SERVICE"+t)in this.serviceEncodings&&(e=this.serviceEncodings[i]),this.services[t]=new Pt(t,e,r),this.services[t].init(this.getPts(n),(function(n){r.flushDisplayed(n,r.services[t])})),this.services[t]},Lt.prototype.handleText=function(t,n,i){var e,r,s,o,a=i&&i.isExtended,u=i&&i.isMultiByte,h=this.current708Packet.data,c=a?4096:0,f=h[t],l=h[t+1],v=n.currentWindow;return n.textDecoder_&&!a?(u?(r=[f,l],t++):r=[f],e=n.textDecoder_.decode(new Uint8Array(r))):(o=Ct[s=c|f]||s,e=4096&s&&s===o?"":String.fromCharCode(o)),v.pendingNewLine&&!v.isEmpty()&&v.newLine(this.getPts(t)),v.pendingNewLine=!1,v.addText(e),t},Lt.prototype.multiByteCharacter=function(t,n){var i=this.current708Packet.data,e=i[t+1],r=i[t+2];return Rt(e)&&Rt(r)&&(t=this.handleText(++t,n,{isMultiByte:!0})),t},Lt.prototype.setCurrentWindow=function(t,n){var i=7&this.current708Packet.data[t];return n.setCurrentWindow(i),t},Lt.prototype.defineWindow=function(t,n){var i=this.current708Packet.data,e=i[t],r=7&e;n.setCurrentWindow(r);var s=n.currentWindow;return e=i[++t],s.visible=(32&e)>>5,s.rowLock=(16&e)>>4,s.columnLock=(8&e)>>3,s.priority=7&e,e=i[++t],s.relativePositioning=(128&e)>>7,s.anchorVertical=127&e,e=i[++t],s.anchorHorizontal=e,e=i[++t],s.anchorPoint=(240&e)>>4,s.rowCount=15&e,e=i[++t],s.columnCount=63&e,e=i[++t],s.windowStyle=(56&e)>>3,s.penStyle=7&e,s.virtualRowCount=s.rowCount+1,t},Lt.prototype.setWindowAttributes=function(t,n){var i=this.current708Packet.data,e=i[t],r=n.currentWindow.winAttr;return e=i[++t],r.fillOpacity=(192&e)>>6,r.fillRed=(48&e)>>4,r.fillGreen=(12&e)>>2,r.fillBlue=3&e,e=i[++t],r.borderType=(192&e)>>6,r.borderRed=(48&e)>>4,r.borderGreen=(12&e)>>2,r.borderBlue=3&e,e=i[++t],r.borderType+=(128&e)>>5,r.wordWrap=(64&e)>>6,r.printDirection=(48&e)>>4,r.scrollDirection=(12&e)>>2,r.justify=3&e,e=i[++t],r.effectSpeed=(240&e)>>4,r.effectDirection=(12&e)>>2,r.displayEffect=3&e,t},Lt.prototype.flushDisplayed=function(t,n){for(var i=[],e=0;e<8;e++)n.windows[e].visible&&!n.windows[e].isEmpty()&&i.push(n.windows[e].getText());n.endPts=t,n.text=i.join("\n\n"),this.pushCaption(n),n.startPts=t},Lt.prototype.pushCaption=function(t){""!==t.text&&(this.trigger("data",{startPts:t.startPts,endPts:t.endPts,text:t.text,stream:"cc708_"+t.serviceNum}),t.text="",t.startPts=t.endPts)},Lt.prototype.displayWindows=function(t,n){var i=this.current708Packet.data[++t],e=this.getPts(t);this.flushDisplayed(e,n);for(var r=0;r<8;r++)i&1<<r&&(n.windows[r].visible=1);return t},Lt.prototype.hideWindows=function(t,n){var i=this.current708Packet.data[++t],e=this.getPts(t);this.flushDisplayed(e,n);for(var r=0;r<8;r++)i&1<<r&&(n.windows[r].visible=0);return t},Lt.prototype.toggleWindows=function(t,n){var i=this.current708Packet.data[++t],e=this.getPts(t);this.flushDisplayed(e,n);for(var r=0;r<8;r++)i&1<<r&&(n.windows[r].visible^=1);return t},Lt.prototype.clearWindows=function(t,n){var i=this.current708Packet.data[++t],e=this.getPts(t);this.flushDisplayed(e,n);for(var r=0;r<8;r++)i&1<<r&&n.windows[r].clearText();return t},Lt.prototype.deleteWindows=function(t,n){var i=this.current708Packet.data[++t],e=this.getPts(t);this.flushDisplayed(e,n);for(var r=0;r<8;r++)i&1<<r&&n.windows[r].reset();return t},Lt.prototype.setPenAttributes=function(t,n){var i=this.current708Packet.data,e=i[t],r=n.currentWindow.penAttr;return e=i[++t],r.textTag=(240&e)>>4,r.offset=(12&e)>>2,r.penSize=3&e,e=i[++t],r.italics=(128&e)>>7,r.underline=(64&e)>>6,r.edgeType=(56&e)>>3,r.fontStyle=7&e,t},Lt.prototype.setPenColor=function(t,n){var i=this.current708Packet.data,e=i[t],r=n.currentWindow.penColor;return e=i[++t],r.fgOpacity=(192&e)>>6,r.fgRed=(48&e)>>4,r.fgGreen=(12&e)>>2,r.fgBlue=3&e,e=i[++t],r.bgOpacity=(192&e)>>6,r.bgRed=(48&e)>>4,r.bgGreen=(12&e)>>2,r.bgBlue=3&e,e=i[++t],r.edgeRed=(48&e)>>4,r.edgeGreen=(12&e)>>2,r.edgeBlue=3&e,t},Lt.prototype.setPenLocation=function(t,n){var i=this.current708Packet.data,e=i[t],r=n.currentWindow.penLoc;return n.currentWindow.pendingNewLine=!0,e=i[++t],r.row=15&e,e=i[++t],r.column=63&e,t},Lt.prototype.reset=function(t,n){var i=this.getPts(t);return this.flushDisplayed(i,n),this.initService(n.serviceNum,t)};var Bt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ft=function(t){return null===t?"":(t=Bt[t]||t,String.fromCharCode(t))},_t=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],zt=function(){for(var t=[],n=15;n--;)t.push("");return t},Vt=function t(n,i){t.prototype.init.call(this),this.field_=n||0,this.dataChannel_=i||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(t){var n,i,e,r,s;if((n=32639&t.ccData)!==this.lastControlCode_){if(4096==(61440&n)?this.lastControlCode_=n:n!==this.PADDING_&&(this.lastControlCode_=null),e=n>>>8,r=255&n,n!==this.PADDING_)if(n===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(n===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(t.pts),this.flushDisplayed(t.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=t.pts;else if(n===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(t.pts);else if(n===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(t.pts);else if(n===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(t.pts);else if(n===this.CARRIAGE_RETURN_)this.clearFormatting(t.pts),this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;else if(n===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(n===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(t.pts),this.displayed_=zt();else if(n===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=zt();else if(n===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(t.pts),this.displayed_=zt()),this.mode_="paintOn",this.startPts_=t.pts;else if(this.isSpecialCharacter(e,r))s=Ft((e=(3&e)<<8)|r),this[this.mode_](t.pts,s),this.column_++;else if(this.isExtCharacter(e,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),s=Ft((e=(3&e)<<8)|r),this[this.mode_](t.pts,s),this.column_++;else if(this.isMidRowCode(e,r))this.clearFormatting(t.pts),this[this.mode_](t.pts," "),this.column_++,14==(14&r)&&this.addFormatting(t.pts,["i"]),1==(1&r)&&this.addFormatting(t.pts,["u"]);else if(this.isOffsetControlCode(e,r))this.column_+=3&r;else if(this.isPAC(e,r)){var o=_t.indexOf(7968&n);"rollUp"===this.mode_&&(o-this.rollUpRows_+1<0&&(o=this.rollUpRows_-1),this.setRollUp(t.pts,o)),o!==this.row_&&(this.clearFormatting(t.pts),this.row_=o),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(t.pts,["u"]),16==(16&n)&&(this.column_=4*((14&n)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(t.pts,["i"])}else this.isNormalChar(e)&&(0===r&&(r=null),s=Ft(e),s+=Ft(r),this[this.mode_](t.pts,s),this.column_+=s.length)}else this.lastControlCode_=null}};Vt.prototype=new z,Vt.prototype.flushDisplayed=function(t){var n=this.displayed_.map((function(t,n){try{return t.trim()}catch(t){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+n+"."}),""}}),this).join("\n").replace(/^\n+|\n+$/g,"");n.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:n,stream:this.name_})},Vt.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=zt(),this.nonDisplayed_=zt(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Vt.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Vt.prototype.isSpecialCharacter=function(t,n){return t===this.EXT_&&n>=48&&n<=63},Vt.prototype.isExtCharacter=function(t,n){return(t===this.EXT_+1||t===this.EXT_+2)&&n>=32&&n<=63},Vt.prototype.isMidRowCode=function(t,n){return t===this.EXT_&&n>=32&&n<=47},Vt.prototype.isOffsetControlCode=function(t,n){return t===this.OFFSET_&&n>=33&&n<=35},Vt.prototype.isPAC=function(t,n){return t>=this.BASE_&&t<this.BASE_+8&&n>=64&&n<=127},Vt.prototype.isColorPAC=function(t){return t>=64&&t<=79||t>=96&&t<=127},Vt.prototype.isNormalChar=function(t){return t>=32&&t<=127},Vt.prototype.setRollUp=function(t,n){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(t),this.nonDisplayed_=zt(),this.displayed_=zt()),void 0!==n&&n!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[n-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===n&&(n=this.row_),this.topRow_=n-this.rollUpRows_+1},Vt.prototype.addFormatting=function(t,n){this.formatting_=this.formatting_.concat(n);var i=n.reduce((function(t,n){return t+"<"+n+">"}),"");this[this.mode_](t,i)},Vt.prototype.clearFormatting=function(t){if(this.formatting_.length){var n=this.formatting_.reverse().reduce((function(t,n){return t+"</"+n+">"}),"");this.formatting_=[],this[this.mode_](t,n)}},Vt.prototype.popOn=function(t,n){var i=this.nonDisplayed_[this.row_];i+=n,this.nonDisplayed_[this.row_]=i},Vt.prototype.rollUp=function(t,n){var i=this.displayed_[this.row_];i+=n,this.displayed_[this.row_]=i},Vt.prototype.shiftRowsUp_=function(){var t;for(t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.row_+1;t<15;t++)this.displayed_[t]="";for(t=this.topRow_;t<this.row_;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[this.row_]=""},Vt.prototype.paintOn=function(t,n){var i=this.displayed_[this.row_];i+=n,this.displayed_[this.row_]=i};var Ht={CaptionStream:Mt,Cea608Stream:Vt,Cea708Stream:Lt},Xt={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},qt="shared",Gt=function(t,n){var i=1;for(t>n&&(i=-1);Math.abs(n-t)>4294967296;)t+=8589934592*i;return t},Wt=function t(n){var i,e;t.prototype.init.call(this),this.type_=n||qt,this.push=function(t){this.type_!==qt&&t.type!==this.type_||(void 0===e&&(e=t.dts),t.dts=Gt(t.dts,e),t.pts=Gt(t.pts,e),i=t.dts,this.trigger("data",t))},this.flush=function(){e=i,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){e=void 0,i=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Wt.prototype=new z;var Yt,Jt=Wt,Qt=Gt,$t=function(t,n,i){var e,r="";for(e=n;e<i;e++)r+="%"+("00"+t[e].toString(16)).slice(-2);return r},Kt=function(t,n,i){return decodeURIComponent($t(t,n,i))},Zt=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},tn={TXXX:function(t){var n;if(3===t.data[0]){for(n=1;n<t.data.length;n++)if(0===t.data[n]){t.description=Kt(t.data,1,n),t.value=Kt(t.data,n+1,t.data.length).replace(/\0*$/,"");break}t.data=t.value}},WXXX:function(t){var n;if(3===t.data[0])for(n=1;n<t.data.length;n++)if(0===t.data[n]){t.description=Kt(t.data,1,n),t.url=Kt(t.data,n+1,t.data.length);break}},PRIV:function(t){var n,i;for(n=0;n<t.data.length;n++)if(0===t.data[n]){t.owner=(i=t.data,unescape($t(i,0,n)));break}t.privateData=t.data.subarray(n+1),t.data=t.privateData}};(Yt=function(t){var n,i={descriptor:t&&t.descriptor},e=0,r=[],s=0;if(Yt.prototype.init.call(this),this.dispatchType=Xt.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(n=0;n<i.descriptor.length;n++)this.dispatchType+=("00"+i.descriptor[n].toString(16)).slice(-2);this.push=function(t){var n,i,o,a,u;if("timed-metadata"===t.type)if(t.dataAlignmentIndicator&&(s=0,r.length=0),0===r.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(r.push(t),s+=t.data.byteLength,1===r.length&&(e=Zt(t.data.subarray(6,10)),e+=10),!(s<e)){for(n={data:new Uint8Array(e),frames:[],pts:r[0].pts,dts:r[0].dts},u=0;u<e;)n.data.set(r[0].data.subarray(0,e-u),u),u+=r[0].data.byteLength,s-=r[0].data.byteLength,r.shift();i=10,64&n.data[5]&&(i+=4,i+=Zt(n.data.subarray(10,14)),e-=Zt(n.data.subarray(16,20)));do{if((o=Zt(n.data.subarray(i+4,i+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((a={id:String.fromCharCode(n.data[i],n.data[i+1],n.data[i+2],n.data[i+3]),data:n.data.subarray(i+10,i+o+10)}).key=a.id,tn[a.id]&&(tn[a.id](a),"com.apple.streaming.transportStreamTimestamp"===a.owner)){var h=a.data,c=(1&h[3])<<30|h[4]<<22|h[5]<<14|h[6]<<6|h[7]>>>2;c*=4,c+=3&h[7],a.timeStamp=c,void 0===n.pts&&void 0===n.dts&&(n.pts=a.timeStamp,n.dts=a.timeStamp),this.trigger("timestamp",a)}n.frames.push(a),i+=10,i+=o}while(i<e);this.trigger("data",n)}}}).prototype=new z;var nn,en,rn,sn=Yt,on=Jt,an=188;(nn=function(){var t=new Uint8Array(an),n=0;nn.prototype.init.call(this),this.push=function(i){var e,r=0,s=an;for(n?((e=new Uint8Array(i.byteLength+n)).set(t.subarray(0,n)),e.set(i,n),n=0):e=i;s<e.byteLength;)71!==e[r]||71!==e[s]?(r++,s++):(this.trigger("data",e.subarray(r,s)),r+=an,s+=an);r<e.byteLength&&(t.set(e.subarray(r),0),n=e.byteLength-r)},this.flush=function(){n===an&&71===t[0]&&(this.trigger("data",t),n=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){n=0,this.trigger("reset")}}).prototype=new z,(en=function(){var t,n,i,e;en.prototype.init.call(this),e=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,t=function(t,e){var r=0;e.payloadUnitStartIndicator&&(r+=t[r]+1),"pat"===e.type?n(t.subarray(r),e):i(t.subarray(r),e)},n=function(t,n){n.section_number=t[7],n.last_section_number=t[8],e.pmtPid=(31&t[10])<<8|t[11],n.pmtPid=e.pmtPid},i=function(t,n){var i,r;if(1&t[5]){for(e.programMapTable={video:null,audio:null,"timed-metadata":{}},i=3+((15&t[1])<<8|t[2])-4,r=12+((15&t[10])<<8|t[11]);r<i;){var s=t[r],o=(31&t[r+1])<<8|t[r+2];s===Xt.H264_STREAM_TYPE&&null===e.programMapTable.video?e.programMapTable.video=o:s===Xt.ADTS_STREAM_TYPE&&null===e.programMapTable.audio?e.programMapTable.audio=o:s===Xt.METADATA_STREAM_TYPE&&(e.programMapTable["timed-metadata"][o]=s),r+=5+((15&t[r+3])<<8|t[r+4])}n.programMapTable=e.programMapTable}},this.push=function(n){var i={},e=4;if(i.payloadUnitStartIndicator=!!(64&n[1]),i.pid=31&n[1],i.pid<<=8,i.pid|=n[2],(48&n[3])>>>4>1&&(e+=n[e]+1),0===i.pid)i.type="pat",t(n.subarray(e),i),this.trigger("data",i);else if(i.pid===this.pmtPid)for(i.type="pmt",t(n.subarray(e),i),this.trigger("data",i);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([n,e,i]):this.processPes_(n,e,i)},this.processPes_=function(t,n,i){i.pid===this.programMapTable.video?i.streamType=Xt.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=Xt.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=t.subarray(n),this.trigger("data",i)}}).prototype=new z,en.STREAM_TYPES={h264:27,adts:15},(rn=function(){var t,n=this,i=!1,e={data:[],size:0},r={data:[],size:0},s={data:[],size:0},o=function(t,i,e){var r,s,o=new Uint8Array(t.size),a={type:i},u=0,h=0;if(t.data.length&&!(t.size<9)){for(a.trackId=t.data[0].pid,u=0;u<t.data.length;u++)s=t.data[u],o.set(s.data,h),h+=s.data.byteLength;var c,f,l,v;f=a,v=(c=o)[0]<<16|c[1]<<8|c[2],f.data=new Uint8Array,1===v&&(f.packetLength=6+(c[4]<<8|c[5]),f.dataAlignmentIndicator=0!=(4&c[6]),192&(l=c[7])&&(f.pts=(14&c[9])<<27|(255&c[10])<<20|(254&c[11])<<12|(255&c[12])<<5|(254&c[13])>>>3,f.pts*=4,f.pts+=(6&c[13])>>>1,f.dts=f.pts,64&l&&(f.dts=(14&c[14])<<27|(255&c[15])<<20|(254&c[16])<<12|(255&c[17])<<5|(254&c[18])>>>3,f.dts*=4,f.dts+=(6&c[18])>>>1)),f.data=c.subarray(9+c[8])),r="video"===i||a.packetLength<=t.size,(e||r)&&(t.size=0,t.data.length=0),r&&n.trigger("data",a)}};rn.prototype.init.call(this),this.push=function(a){({pat:function(){},pes:function(){var t,n;switch(a.streamType){case Xt.H264_STREAM_TYPE:t=e,n="video";break;case Xt.ADTS_STREAM_TYPE:t=r,n="audio";break;case Xt.METADATA_STREAM_TYPE:t=s,n="timed-metadata";break;default:return}a.payloadUnitStartIndicator&&o(t,n,!0),t.data.push(a),t.size+=a.data.byteLength},pmt:function(){var e={type:"metadata",tracks:[]};null!==(t=a.programMapTable).video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),i=!0,n.trigger("data",e)}})[a.type]()},this.reset=function(){e.size=0,e.data.length=0,r.size=0,r.data.length=0,this.trigger("reset")},this.flushStreams_=function(){o(e,"video"),o(r,"audio"),o(s,"timed-metadata")},this.flush=function(){if(!i&&t){var e={type:"metadata",tracks:[]};null!==t.video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),n.trigger("data",e)}i=!1,this.flushStreams_(),this.trigger("done")}}).prototype=new z;var un={PAT_PID:0,MP2T_PACKET_LENGTH:an,TransportPacketStream:nn,TransportParseStream:en,ElementaryStream:rn,TimestampRolloverStream:on,CaptionStream:Ht.CaptionStream,Cea608Stream:Ht.Cea608Stream,Cea708Stream:Ht.Cea708Stream,MetadataStream:sn};for(var hn in Xt)Xt.hasOwnProperty(hn)&&(un[hn]=Xt[hn]);var cn,fn=un,ln=vt,vn=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(cn=function(t){var n,i=0;cn.prototype.init.call(this),this.skipWarn_=function(t,n){this.trigger("log",{level:"warn",message:"adts skiping bytes "+t+" to "+n+" in frame "+i+" outside syncword"})},this.push=function(e){var r,s,o,a,u,h=0;if(t||(i=0),"audio"===e.type){var c;for(n&&n.length?(o=n,(n=new Uint8Array(o.byteLength+e.data.byteLength)).set(o),n.set(e.data,o.byteLength)):n=e.data;h+7<n.length;)if(255===n[h]&&240==(246&n[h+1])){if("number"==typeof c&&(this.skipWarn_(c,h),c=null),s=2*(1&~n[h+1]),r=(3&n[h+3])<<11|n[h+4]<<3|(224&n[h+5])>>5,u=(a=1024*(1+(3&n[h+6])))*ln/vn[(60&n[h+2])>>>2],n.byteLength-h<r)break;this.trigger("data",{pts:e.pts+i*u,dts:e.dts+i*u,sampleCount:a,audioobjecttype:1+(n[h+2]>>>6&3),channelcount:(1&n[h+2])<<2|(192&n[h+3])>>>6,samplerate:vn[(60&n[h+2])>>>2],samplingfrequencyindex:(60&n[h+2])>>>2,samplesize:16,data:n.subarray(h+7+s,h+r)}),i++,h+=r}else"number"!=typeof c&&(c=h),h++;"number"==typeof c&&(this.skipWarn_(c,h),c=null),n=n.subarray(h)}},this.flush=function(){i=0,this.trigger("done")},this.reset=function(){n=void 0,this.trigger("reset")},this.endTimeline=function(){n=void 0,this.trigger("endedtimeline")}}).prototype=new z;var dn,pn,mn,gn=cn,bn=function(t){var n=t.byteLength,i=0,e=0;this.length=function(){return 8*n},this.bitsAvailable=function(){return 8*n+e},this.loadWord=function(){var r=t.byteLength-n,s=new Uint8Array(4),o=Math.min(4,n);if(0===o)throw new Error("no bytes available");s.set(t.subarray(r,r+o)),i=new DataView(s.buffer).getUint32(0),e=8*o,n-=o},this.skipBits=function(t){var r;e>t?(i<<=t,e-=t):(t-=e,t-=8*(r=Math.floor(t/8)),n-=r,this.loadWord(),i<<=t,e-=t)},this.readBits=function(t){var r=Math.min(e,t),s=i>>>32-r;return(e-=r)>0?i<<=r:n>0&&this.loadWord(),(r=t-r)>0?s<<r|this.readBits(r):s},this.skipLeadingZeros=function(){var t;for(t=0;t<e;++t)if(0!=(i&2147483648>>>t))return i<<=t,e-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(pn=function(){var t,n,i=0;pn.prototype.init.call(this),this.push=function(e){var r;n?((r=new Uint8Array(n.byteLength+e.data.byteLength)).set(n),r.set(e.data,n.byteLength),n=r):n=e.data;for(var s=n.byteLength;i<s-3;i++)if(1===n[i+2]){t=i+5;break}for(;t<s;)switch(n[t]){case 0:if(0!==n[t-1]){t+=2;break}if(0!==n[t-2]){t++;break}i+3!==t-2&&this.trigger("data",n.subarray(i+3,t-2));do{t++}while(1!==n[t]&&t<s);i=t-2,t+=3;break;case 1:if(0!==n[t-1]||0!==n[t-2]){t+=3;break}this.trigger("data",n.subarray(i+3,t-2)),i=t-2,t+=3;break;default:t+=3}n=n.subarray(i),t-=i,i=0},this.reset=function(){n=null,i=0,this.trigger("reset")},this.flush=function(){n&&n.byteLength>3&&this.trigger("data",n.subarray(i+3)),n=null,i=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new z,mn={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(dn=function(){var t,n,i,e,r,s,o,a=new pn;dn.prototype.init.call(this),t=this,this.push=function(t){"video"===t.type&&(n=t.trackId,i=t.pts,e=t.dts,a.push(t))},a.on("data",(function(o){var a={trackId:n,pts:i,dts:e,data:o,nalUnitTypeCode:31&o[0]};switch(a.nalUnitTypeCode){case 5:a.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:a.nalUnitType="sei_rbsp",a.escapedRBSP=r(o.subarray(1));break;case 7:a.nalUnitType="seq_parameter_set_rbsp",a.escapedRBSP=r(o.subarray(1)),a.config=s(a.escapedRBSP);break;case 8:a.nalUnitType="pic_parameter_set_rbsp";break;case 9:a.nalUnitType="access_unit_delimiter_rbsp"}t.trigger("data",a)})),a.on("done",(function(){t.trigger("done")})),a.on("partialdone",(function(){t.trigger("partialdone")})),a.on("reset",(function(){t.trigger("reset")})),a.on("endedtimeline",(function(){t.trigger("endedtimeline")})),this.flush=function(){a.flush()},this.partialFlush=function(){a.partialFlush()},this.reset=function(){a.reset()},this.endTimeline=function(){a.endTimeline()},o=function(t,n){var i,e=8,r=8;for(i=0;i<t;i++)0!==r&&(r=(e+n.readExpGolomb()+256)%256),e=0===r?e:r},r=function(t){for(var n,i,e=t.byteLength,r=[],s=1;s<e-2;)0===t[s]&&0===t[s+1]&&3===t[s+2]?(r.push(s+2),s+=2):s++;if(0===r.length)return t;n=e-r.length,i=new Uint8Array(n);var o=0;for(s=0;s<n;o++,s++)o===r[0]&&(o++,r.shift()),i[s]=t[o];return i},s=function(t){var n,i,e,r,s,a,u,h,c,f,l,v,d=0,p=0,m=0,g=0,b=[1,1];if(i=(n=new bn(t)).readUnsignedByte(),r=n.readUnsignedByte(),e=n.readUnsignedByte(),n.skipUnsignedExpGolomb(),mn[i]&&(3===(s=n.readUnsignedExpGolomb())&&n.skipBits(1),n.skipUnsignedExpGolomb(),n.skipUnsignedExpGolomb(),n.skipBits(1),n.readBoolean()))for(l=3!==s?8:12,v=0;v<l;v++)n.readBoolean()&&o(v<6?16:64,n);if(n.skipUnsignedExpGolomb(),0===(a=n.readUnsignedExpGolomb()))n.readUnsignedExpGolomb();else if(1===a)for(n.skipBits(1),n.skipExpGolomb(),n.skipExpGolomb(),u=n.readUnsignedExpGolomb(),v=0;v<u;v++)n.skipExpGolomb();if(n.skipUnsignedExpGolomb(),n.skipBits(1),h=n.readUnsignedExpGolomb(),c=n.readUnsignedExpGolomb(),0===(f=n.readBits(1))&&n.skipBits(1),n.skipBits(1),n.readBoolean()&&(d=n.readUnsignedExpGolomb(),p=n.readUnsignedExpGolomb(),m=n.readUnsignedExpGolomb(),g=n.readUnsignedExpGolomb()),n.readBoolean()&&n.readBoolean()){switch(n.readUnsignedByte()){case 1:b=[1,1];break;case 2:b=[12,11];break;case 3:b=[10,11];break;case 4:b=[16,11];break;case 5:b=[40,33];break;case 6:b=[24,11];break;case 7:b=[20,11];break;case 8:b=[32,11];break;case 9:b=[80,33];break;case 10:b=[18,11];break;case 11:b=[15,11];break;case 12:b=[64,33];break;case 13:b=[160,99];break;case 14:b=[4,3];break;case 15:b=[3,2];break;case 16:b=[2,1];break;case 255:b=[n.readUnsignedByte()<<8|n.readUnsignedByte(),n.readUnsignedByte()<<8|n.readUnsignedByte()]}b&&(b[0],b[1])}return{profileIdc:i,levelIdc:e,profileCompatibility:r,width:16*(h+1)-2*d-2*p,height:(2-f)*(c+1)*16-2*m-2*g,sarRatio:b}}}).prototype=new z;var yn,jn={H264Stream:dn,NalByteStream:pn},wn=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Tn=function(t,n){var i=t[n+6]<<21|t[n+7]<<14|t[n+8]<<7|t[n+9];return i=i>=0?i:0,(16&t[n+5])>>4?i+20:i+10},An=function t(n,i){return n.length-i<10||n[i]!=="I".charCodeAt(0)||n[i+1]!=="D".charCodeAt(0)||n[i+2]!=="3".charCodeAt(0)?i:t(n,i+=Tn(n,i))},kn=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},xn={isLikelyAacData:function(t){var n=An(t,0);return t.length>=n+2&&255==(255&t[n])&&240==(240&t[n+1])&&16==(22&t[n+1])},parseId3TagSize:Tn,parseAdtsSize:function(t,n){var i=(224&t[n+5])>>5,e=t[n+4]<<3;return 6144&t[n+3]|e|i},parseType:function(t,n){return t[n]==="I".charCodeAt(0)&&t[n+1]==="D".charCodeAt(0)&&t[n+2]==="3".charCodeAt(0)?"timed-metadata":!0&t[n]&&240==(240&t[n+1])?"audio":null},parseSampleRate:function(t){for(var n=0;n+5<t.length;){if(255===t[n]&&240==(246&t[n+1]))return wn[(60&t[n+2])>>>2];n++}return null},parseAacTimestamp:function(t){var n,i,e;n=10,64&t[5]&&(n+=4,n+=kn(t.subarray(10,14)));do{if((i=kn(t.subarray(n+4,n+8)))<1)return null;if("PRIV"===String.fromCharCode(t[n],t[n+1],t[n+2],t[n+3])){e=t.subarray(n+10,n+i+10);for(var r=0;r<e.byteLength;r++)if(0===e[r]){if("com.apple.streaming.transportStreamTimestamp"===unescape(function(t,n,i){var e,r="";for(e=n;e<i;e++)r+="%"+("00"+t[e].toString(16)).slice(-2);return r}(e,0,r))){var s=e.subarray(r+1),o=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;return o*=4,o+=3&s[7]}break}}n+=10,n+=i}while(n<t.byteLength);return null}};(yn=function(){var t=new Uint8Array,n=0;yn.prototype.init.call(this),this.setTimestamp=function(t){n=t},this.push=function(i){var e,r,s,o,a=0,u=0;for(t.length?(o=t.length,(t=new Uint8Array(i.byteLength+o)).set(t.subarray(0,o)),t.set(i,o)):t=i;t.length-u>=3;)if(t[u]!=="I".charCodeAt(0)||t[u+1]!=="D".charCodeAt(0)||t[u+2]!=="3".charCodeAt(0))if(255!=(255&t[u])||240!=(240&t[u+1]))u++;else{if(t.length-u<7)break;if(u+(a=xn.parseAdtsSize(t,u))>t.length)break;s={type:"audio",data:t.subarray(u,u+a),pts:n,dts:n},this.trigger("data",s),u+=a}else{if(t.length-u<10)break;if(u+(a=xn.parseId3TagSize(t,u))>t.length)break;r={type:"timed-metadata",data:t.subarray(u,u+a)},this.trigger("data",r),u+=a}e=t.length-u,t=e>0?t.subarray(u):new Uint8Array},this.reset=function(){t=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){t=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new z;var Sn,En,In,On,Dn=yn,Nn=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Mn=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Cn=jn.H264Stream,Rn=xn.isLikelyAacData,Un=vt,Pn=function(t,n){n.stream=t,this.trigger("log",n)},Ln=function(t,n){for(var i=Object.keys(n),e=0;e<i.length;e++){var r=i[e];"headOfPipeline"!==r&&n[r].on&&n[r].on("log",Pn.bind(t,r))}},Bn=function(t,n){var i;if(t.length!==n.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==n[i])return!1;return!0},Fn=function(t,n,i,e,r,s){return{start:{dts:t,pts:t+(i-n)},end:{dts:t+(e-n),pts:t+(r-i)},prependedContentDuration:s,baseMediaDecodeTime:t}};(En=function(t,n){var i,e=[],r=0,s=0,o=1/0;i=(n=n||{}).firstSequenceNumber||0,En.prototype.init.call(this),this.push=function(n){St(t,n),t&&Nn.forEach((function(i){t[i]=n[i]})),e.push(n)},this.setEarliestDts=function(t){r=t},this.setVideoBaseMediaDecodeTime=function(t){o=t},this.setAudioAppendStart=function(t){s=t},this.flush=function(){var a,u,h,c,f,l,v;0!==e.length?(a=jt(e,t,r),t.baseMediaDecodeTime=xt(t,n.keepOriginalTimestamps),v=yt(t,a,s,o),t.samples=wt(a),h=Z(Tt(a)),e=[],u=tt(i,[t]),c=new Uint8Array(u.byteLength+h.byteLength),i++,c.set(u),c.set(h,u.byteLength),kt(t),f=Math.ceil(1024*Un/t.samplerate),a.length&&(l=a.length*f,this.trigger("segmentTimingInfo",Fn(mt(t.baseMediaDecodeTime,t.samplerate),a[0].dts,a[0].pts,a[0].dts+l,a[0].pts+l,v||0)),this.trigger("timingInfo",{start:a[0].pts,end:a[0].pts+l})),this.trigger("data",{track:t,boxes:c}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){kt(t),e=[],this.trigger("reset")}}).prototype=new z,(Sn=function(t,n){var i,e,r,s=[],o=[];i=(n=n||{}).firstSequenceNumber||0,Sn.prototype.init.call(this),delete t.minPTS,this.gopCache_=[],this.push=function(n){St(t,n),"seq_parameter_set_rbsp"!==n.nalUnitType||e||(e=n.config,t.sps=[n.data],Mn.forEach((function(n){t[n]=e[n]}),this)),"pic_parameter_set_rbsp"!==n.nalUnitType||r||(r=n.data,t.pps=[n.data]),s.push(n)},this.flush=function(){for(var e,r,a,u,h,c,f,l,v=0;s.length&&"access_unit_delimiter_rbsp"!==s[0].nalUnitType;)s.shift();if(0===s.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(e=et(s),(a=rt(e))[0][0].keyFrame||((r=this.getGopForFusion_(s[0],t))?(v=r.duration,a.unshift(r),a.byteLength+=r.byteLength,a.nalCount+=r.nalCount,a.pts=r.pts,a.dts=r.dts,a.duration+=r.duration):a=st(a)),o.length){var d;if(!(d=n.alignGopsAtEnd?this.alignGopsAtEnd_(a):this.alignGopsAtStart_(a)))return this.gopCache_.unshift({gop:a.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");kt(t),a=d}St(t,a),t.samples=ot(a),h=Z(at(a)),t.baseMediaDecodeTime=xt(t,n.keepOriginalTimestamps),this.trigger("processedGopsInfo",a.map((function(t){return{pts:t.pts,dts:t.dts,byteLength:t.byteLength}}))),f=a[0],l=a[a.length-1],this.trigger("segmentTimingInfo",Fn(t.baseMediaDecodeTime,f.dts,f.pts,l.dts+l.duration,l.pts+l.duration,v)),this.trigger("timingInfo",{start:a[0].pts,end:a[a.length-1].pts+a[a.length-1].duration}),this.gopCache_.unshift({gop:a.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.trigger("baseMediaDecodeTime",t.baseMediaDecodeTime),this.trigger("timelineStartInfo",t.timelineStartInfo),u=tt(i,[t]),c=new Uint8Array(u.byteLength+h.byteLength),i++,c.set(u),c.set(h,u.byteLength),this.trigger("data",{track:t,boxes:c}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),s=[],this.gopCache_.length=0,o.length=0,this.trigger("reset")},this.resetStream_=function(){kt(t),e=void 0,r=void 0},this.getGopForFusion_=function(n){var i,e,r,s,o,a=1/0;for(o=0;o<this.gopCache_.length;o++)r=(s=this.gopCache_[o]).gop,t.pps&&Bn(t.pps[0],s.pps[0])&&t.sps&&Bn(t.sps[0],s.sps[0])&&(r.dts<t.timelineStartInfo.dts||(i=n.dts-r.dts-r.duration)>=-1e4&&i<=45e3&&(!e||a>i)&&(e=s,a=i));return e?e.gop:null},this.alignGopsAtStart_=function(t){var n,i,e,r,s,a,u,h;for(s=t.byteLength,a=t.nalCount,u=t.duration,n=i=0;n<o.length&&i<t.length&&(e=o[n],r=t[i],e.pts!==r.pts);)r.pts>e.pts?n++:(i++,s-=r.byteLength,a-=r.nalCount,u-=r.duration);return 0===i?t:i===t.length?null:((h=t.slice(i)).byteLength=s,h.duration=u,h.nalCount=a,h.pts=h[0].pts,h.dts=h[0].dts,h)},this.alignGopsAtEnd_=function(t){var n,i,e,r,s,a,u;for(n=o.length-1,i=t.length-1,s=null,a=!1;n>=0&&i>=0;){if(e=o[n],r=t[i],e.pts===r.pts){a=!0;break}e.pts>r.pts?n--:(n===o.length-1&&(s=i),i--)}if(!a&&null===s)return null;if(0===(u=a?i:s))return t;var h=t.slice(u),c=h.reduce((function(t,n){return t.byteLength+=n.byteLength,t.duration+=n.duration,t.nalCount+=n.nalCount,t}),{byteLength:0,duration:0,nalCount:0});return h.byteLength=c.byteLength,h.duration=c.duration,h.nalCount=c.nalCount,h.pts=h[0].pts,h.dts=h[0].dts,h},this.alignGopsWith=function(t){o=t}}).prototype=new z,(On=function(t,n){this.numberOfTracks=0,this.metadataStream=n,void 0!==(t=t||{}).remux?this.remuxTracks=!!t.remux:this.remuxTracks=!0,"boolean"==typeof t.keepOriginalTimestamps?this.keepOriginalTimestamps=t.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,On.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):(this.pendingTracks.push(t.track),this.pendingBytes+=t.boxes.byteLength,"video"===t.track.type&&(this.videoTrack=t.track,this.pendingBoxes.push(t.boxes)),void("audio"===t.track.type&&(this.audioTrack=t.track,this.pendingBoxes.unshift(t.boxes))))}}).prototype=new z,On.prototype.flush=function(t){var n,i,e,r,s=0,o={captions:[],captionStreams:{},metadata:[],info:{}},a=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(a=this.videoTrack.timelineStartInfo.pts,Mn.forEach((function(t){o.info[t]=this.videoTrack[t]}),this)):this.audioTrack&&(a=this.audioTrack.timelineStartInfo.pts,Nn.forEach((function(t){o.info[t]=this.audioTrack[t]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,e=nt(this.pendingTracks),o.initSegment=new Uint8Array(e.byteLength),o.initSegment.set(e),o.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)o.data.set(this.pendingBoxes[r],s),s+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(n=this.pendingCaptions[r]).startTime=bt(n.startPts,a,this.keepOriginalTimestamps),n.endTime=bt(n.endPts,a,this.keepOriginalTimestamps),o.captionStreams[n.stream]=!0,o.captions.push(n);for(r=0;r<this.pendingMetadata.length;r++)(i=this.pendingMetadata[r]).cueTime=bt(i.pts,a,this.keepOriginalTimestamps),o.metadata.push(i);for(o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),r=0;r<o.captions.length;r++)n=o.captions[r],this.trigger("caption",n);for(r=0;r<o.metadata.length;r++)i=o.metadata[r],this.trigger("id3Frame",i)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},On.prototype.setRemux=function(t){this.remuxTracks=t},(In=function(t){var n,i,e=this,r=!0;In.prototype.init.call(this),t=t||{},this.baseMediaDecodeTime=t.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="aac",r.metadataStream=new fn.MetadataStream,r.aacStream=new Dn,r.audioTimestampRolloverStream=new fn.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new fn.TimestampRolloverStream("timed-metadata"),r.adtsStream=new gn,r.coalesceStream=new On(t,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",(function(t){r.aacStream.setTimestamp(t.timeStamp)})),r.aacStream.on("data",(function(s){"timed-metadata"!==s.type&&"audio"!==s.type||r.audioSegmentStream||(i=i||{timelineStartInfo:{baseMediaDecodeTime:e.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new En(i,t),r.audioSegmentStream.on("log",e.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",e.trigger.bind(e,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),e.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!n}))})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),Ln(this,r)},this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="ts",r.metadataStream=new fn.MetadataStream,r.packetStream=new fn.TransportPacketStream,r.parseStream=new fn.TransportParseStream,r.elementaryStream=new fn.ElementaryStream,r.timestampRolloverStream=new fn.TimestampRolloverStream,r.adtsStream=new gn,r.h264Stream=new Cn,r.captionStream=new fn.CaptionStream(t),r.coalesceStream=new On(t,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",(function(s){var o;if("metadata"===s.type){for(o=s.tracks.length;o--;)n||"video"!==s.tracks[o].type?i||"audio"!==s.tracks[o].type||((i=s.tracks[o]).timelineStartInfo.baseMediaDecodeTime=e.baseMediaDecodeTime):(n=s.tracks[o]).timelineStartInfo.baseMediaDecodeTime=e.baseMediaDecodeTime;n&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new Sn(n,t),r.videoSegmentStream.on("log",e.getLogTrigger_("videoSegmentStream")),r.videoSegmentStream.on("timelineStartInfo",(function(n){i&&!t.keepOriginalTimestamps&&(i.timelineStartInfo=n,r.audioSegmentStream.setEarliestDts(n.dts-e.baseMediaDecodeTime))})),r.videoSegmentStream.on("processedGopsInfo",e.trigger.bind(e,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",e.trigger.bind(e,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",(function(t){i&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(t)})),r.videoSegmentStream.on("timingInfo",e.trigger.bind(e,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),i&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new En(i,t),r.audioSegmentStream.on("log",e.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",e.trigger.bind(e,"audioTimingInfo")),r.audioSegmentStream.on("segmentTimingInfo",e.trigger.bind(e,"audioSegmentTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),e.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!n})}})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",(function(t){t.dispatchType=r.metadataStream.dispatchType,e.trigger("id3Frame",t)})),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),Ln(this,r)},this.setBaseMediaDecodeTime=function(e){var r=this.transmuxPipeline_;t.keepOriginalTimestamps||(this.baseMediaDecodeTime=e),i&&(i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,kt(i),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),n&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,kt(n),r.captionStream.reset()),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(t){i&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(t)},this.setRemux=function(n){var i=this.transmuxPipeline_;t.remux=n,i&&i.coalesceStream&&i.coalesceStream.setRemux(n)},this.alignGopsWith=function(t){n&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(t)},this.getLogTrigger_=function(t){var n=this;return function(i){i.stream=t,n.trigger("log",i)}},this.push=function(t){if(r){var n=Rn(t);n&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():n||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(t)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new z;var _n,zn,Vn,Hn={Transmuxer:In,VideoSegmentStream:Sn,AudioSegmentStream:En,AUDIO_PROPERTIES:Nn,VIDEO_PROPERTIES:Mn,generateSegmentTimingInfo:Fn},Xn=function(t){return t>>>0},qn=function(t){var n="";return n+=String.fromCharCode(t[0]),n+=String.fromCharCode(t[1]),n+=String.fromCharCode(t[2]),n+=String.fromCharCode(t[3])},Gn=Xn,Wn=function t(n,i){var e,r,s,o,a,u=[];if(!i.length)return null;for(e=0;e<n.byteLength;)r=Gn(n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]),s=qn(n.subarray(e+4,e+8)),o=r>1?e+r:n.byteLength,s===i[0]&&(1===i.length?u.push(n.subarray(e+8,o)):(a=t(n.subarray(e+8,o),i.slice(1))).length&&(u=u.concat(a))),e=o;return u},Yn=Xn,Jn=H.getUint64,Qn=function(t){var n={version:t[0],flags:new Uint8Array(t.subarray(1,4))};return 1===n.version?n.baseMediaDecodeTime=Jn(t.subarray(4)):n.baseMediaDecodeTime=Yn(t[4]<<24|t[5]<<16|t[6]<<8|t[7]),n},$n=function(t){return{isLeading:(12&t[0])>>>2,dependsOn:3&t[0],isDependedOn:(192&t[1])>>>6,hasRedundancy:(48&t[1])>>>4,paddingValue:(14&t[1])>>>1,isNonSyncSample:1&t[1],degradationPriority:t[2]<<8|t[3]}},Kn=function(t){var n,i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},e=new DataView(t.buffer,t.byteOffset,t.byteLength),r=1&i.flags[2],s=4&i.flags[2],o=1&i.flags[1],a=2&i.flags[1],u=4&i.flags[1],h=8&i.flags[1],c=e.getUint32(4),f=8;for(r&&(i.dataOffset=e.getInt32(f),f+=4),s&&c&&(n={flags:$n(t.subarray(f,f+4))},f+=4,o&&(n.duration=e.getUint32(f),f+=4),a&&(n.size=e.getUint32(f),f+=4),h&&(1===i.version?n.compositionTimeOffset=e.getInt32(f):n.compositionTimeOffset=e.getUint32(f),f+=4),i.samples.push(n),c--);c--;)n={},o&&(n.duration=e.getUint32(f),f+=4),a&&(n.size=e.getUint32(f),f+=4),u&&(n.flags=$n(t.subarray(f,f+4)),f+=4),h&&(1===i.version?n.compositionTimeOffset=e.getInt32(f):n.compositionTimeOffset=e.getUint32(f),f+=4),i.samples.push(n);return i},Zn=function(t){var n,i=new DataView(t.buffer,t.byteOffset,t.byteLength),e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:i.getUint32(4)},r=1&e.flags[2],s=2&e.flags[2],o=8&e.flags[2],a=16&e.flags[2],u=32&e.flags[2],h=65536&e.flags[0],c=131072&e.flags[0];return n=8,r&&(n+=4,e.baseDataOffset=i.getUint32(12),n+=4),s&&(e.sampleDescriptionIndex=i.getUint32(n),n+=4),o&&(e.defaultSampleDuration=i.getUint32(n),n+=4),a&&(e.defaultSampleSize=i.getUint32(n),n+=4),u&&(e.defaultSampleFlags=i.getUint32(n)),h&&(e.durationIsEmpty=!0),!r&&c&&(e.baseDataOffsetIsMoof=!0),e},ti="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ni="undefined"!=typeof window?window:void 0!==ti?ti:"undefined"!=typeof self?self:{},ii=Dt,ei=Ht.CaptionStream,ri=function(t,n){for(var i=t,e=0;e<n.length;e++){var r=n[e];if(i<r.size)return r;i-=r.size}return null},si=function(t,n){var i=Wn(t,["moof","traf"]),e=Wn(t,["mdat"]),r={},s=[];return e.forEach((function(t,n){var e=i[n];s.push({mdat:t,traf:e})})),s.forEach((function(t){var i,e=t.mdat,s=t.traf,o=Wn(s,["tfhd"]),a=Zn(o[0]),u=a.trackId,h=Wn(s,["tfdt"]),c=h.length>0?Qn(h[0]).baseMediaDecodeTime:0,f=Wn(s,["trun"]);n===u&&f.length>0&&(i=function(t,n,i){var e,r,s,o,a=new DataView(t.buffer,t.byteOffset,t.byteLength),u={logs:[],seiNals:[]};for(r=0;r+4<t.length;r+=s)if(s=a.getUint32(r),r+=4,!(s<=0))switch(31&t[r]){case 6:var h=t.subarray(r+1,r+1+s),c=ri(r,n);if(e={nalUnitType:"sei_rbsp",size:s,data:h,escapedRBSP:ii(h),trackId:i},c)e.pts=c.pts,e.dts=c.dts,o=c;else{if(!o){u.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+r+" for trackId "+i+". See mux.js#223."});break}e.pts=o.pts,e.dts=o.dts}u.seiNals.push(e)}return u}(e,function(t,n,i){var e=n,r=i.defaultSampleDuration||0,s=i.defaultSampleSize||0,o=i.trackId,a=[];return t.forEach((function(t){var n=Kn(t).samples;n.forEach((function(t){void 0===t.duration&&(t.duration=r),void 0===t.size&&(t.size=s),t.trackId=o,t.dts=e,void 0===t.compositionTimeOffset&&(t.compositionTimeOffset=0),"bigint"==typeof e?(t.pts=e+ni.BigInt(t.compositionTimeOffset),e+=ni.BigInt(t.duration)):(t.pts=e+t.compositionTimeOffset,e+=t.duration)})),a=a.concat(n)})),a}(f,c,a),u),r[u]||(r[u]={seiNals:[],logs:[]}),r[u].seiNals=r[u].seiNals.concat(i.seiNals),r[u].logs=r[u].logs.concat(i.logs))})),r},oi=function(){var t,n,i,e,r,s,o=!1;this.isInitialized=function(){return o},this.init=function(n){t=new ei,o=!0,s=!!n&&n.isPartial,t.on("data",(function(t){t.startTime=t.startPts/e,t.endTime=t.endPts/e,r.captions.push(t),r.captionStreams[t.stream]=!0})),t.on("log",(function(t){r.logs.push(t)}))},this.isNewInit=function(t,n){return!(t&&0===t.length||n&&"object"==typeof n&&0===Object.keys(n).length)&&(i!==t[0]||e!==n[i])},this.parse=function(t,s,o){var a;if(!this.isInitialized())return null;if(!s||!o)return null;if(this.isNewInit(s,o))i=s[0],e=o[i];else if(null===i||!e)return n.push(t),null;for(;n.length>0;){var u=n.shift();this.parse(u,s,o)}return(a=function(t,n,i){if(null===n)return null;var e=si(t,n)[n]||{};return{seiNals:e.seiNals,logs:e.logs,timescale:i}}(t,i,e))&&a.logs&&(r.logs=r.logs.concat(a.logs)),null!==a&&a.seiNals?(this.pushNals(a.seiNals),this.flushStream(),r):r.logs.length?{logs:r.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(n){if(!this.isInitialized()||!n||0===n.length)return null;n.forEach((function(n){t.push(n)}))},this.flushStream=function(){if(!this.isInitialized())return null;s?t.partialFlush():t.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={},r.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){n=[],i=null,e=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},ai=Xn,ui=function(t){return("00"+t.toString(16)).slice(-2)},hi=H.getUint64;_n=function(t,n){var i=Wn(n,["moof","traf"]).reduce((function(n,i){var e,r,s=Wn(i,["tfhd"])[0],o=ai(s[4]<<24|s[5]<<16|s[6]<<8|s[7]),a=t[o]||9e4,u=Wn(i,["tfdt"])[0],h=new DataView(u.buffer,u.byteOffset,u.byteLength);return"bigint"==typeof(e=1===u[0]?hi(u.subarray(4,12)):h.getUint32(4))?r=e/ni.BigInt(a):"number"!=typeof e||isNaN(e)||(r=e/a),r<Number.MAX_SAFE_INTEGER&&(r=Number(r)),r<n&&(n=r),n}),1/0);return"bigint"==typeof i||isFinite(i)?i:0},zn=function(t){var n=Wn(t,["moov","trak"]),i=[];return n.forEach((function(t){var n,e,r={},s=Wn(t,["tkhd"])[0];s&&(e=(n=new DataView(s.buffer,s.byteOffset,s.byteLength)).getUint8(0),r.id=0===e?n.getUint32(12):n.getUint32(20));var o=Wn(t,["mdia","hdlr"])[0];if(o){var a=qn(o.subarray(8,12));r.type="vide"===a?"video":"soun"===a?"audio":a}var u=Wn(t,["mdia","minf","stbl","stsd"])[0];if(u){var h=u.subarray(8);r.codec=qn(h.subarray(4,8));var c,f=Wn(h,[r.codec])[0];f&&(/^[asm]vc[1-9]$/i.test(r.codec)?(c=f.subarray(78),"avcC"===qn(c.subarray(4,8))&&c.length>11?(r.codec+=".",r.codec+=ui(c[9]),r.codec+=ui(c[10]),r.codec+=ui(c[11])):r.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(r.codec)?(c=f.subarray(28),"esds"===qn(c.subarray(4,8))&&c.length>20&&0!==c[19]?(r.codec+="."+ui(c[19]),r.codec+="."+ui(c[20]>>>2&63).replace(/^0/,"")):r.codec="mp4a.40.2"):r.codec=r.codec.toLowerCase())}var l=Wn(t,["mdia","mdhd"])[0];l&&(r.timescale=Vn(l)),i.push(r)})),i};var ci=_n,fi=zn,li=(Vn=function(t){var n=0===t[0]?12:20;return ai(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3])},function(t){var n=31&t[1];return n<<=8,n|=t[2]}),vi=function(t){return!!(64&t[1])},di=function(t){var n=0;return(48&t[3])>>>4>1&&(n+=t[4]+1),n},pi=function(t){switch(t){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},mi={parseType:function(t,n){var i=li(t);return 0===i?"pat":i===n?"pmt":n?"pes":null},parsePat:function(t){var n=vi(t),i=4+di(t);return n&&(i+=t[i]+1),(31&t[i+10])<<8|t[i+11]},parsePmt:function(t){var n={},i=vi(t),e=4+di(t);if(i&&(e+=t[e]+1),1&t[e+5]){var r;r=3+((15&t[e+1])<<8|t[e+2])-4;for(var s=12+((15&t[e+10])<<8|t[e+11]);s<r;){var o=e+s;n[(31&t[o+1])<<8|t[o+2]]=t[o],s+=5+((15&t[o+3])<<8|t[o+4])}return n}},parsePayloadUnitStartIndicator:vi,parsePesType:function(t,n){switch(n[li(t)]){case Xt.H264_STREAM_TYPE:return"video";case Xt.ADTS_STREAM_TYPE:return"audio";case Xt.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(t){if(!vi(t))return null;var n=4+di(t);if(n>=t.byteLength)return null;var i,e=null;return 192&(i=t[n+7])&&((e={}).pts=(14&t[n+9])<<27|(255&t[n+10])<<20|(254&t[n+11])<<12|(255&t[n+12])<<5|(254&t[n+13])>>>3,e.pts*=4,e.pts+=(6&t[n+13])>>>1,e.dts=e.pts,64&i&&(e.dts=(14&t[n+14])<<27|(255&t[n+15])<<20|(254&t[n+16])<<12|(255&t[n+17])<<5|(254&t[n+18])>>>3,e.dts*=4,e.dts+=(6&t[n+18])>>>1)),e},videoPacketContainsKeyFrame:function(t){for(var n=4+di(t),i=t.subarray(n),e=0,r=0,s=!1;r<i.byteLength-3;r++)if(1===i[r+2]){e=r+5;break}for(;e<i.byteLength;)switch(i[e]){case 0:if(0!==i[e-1]){e+=2;break}if(0!==i[e-2]){e++;break}r+3!==e-2&&"slice_layer_without_partitioning_rbsp_idr"===pi(31&i[r+3])&&(s=!0);do{e++}while(1!==i[e]&&e<i.length);r=e-2,e+=3;break;case 1:if(0!==i[e-1]||0!==i[e-2]){e+=3;break}"slice_layer_without_partitioning_rbsp_idr"===pi(31&i[r+3])&&(s=!0),r=e-2,e+=3;break;default:e+=3}return i=i.subarray(r),e-=r,r=0,i&&i.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===pi(31&i[r+3])&&(s=!0),s}},gi=Qt,bi={};bi.ts=mi,bi.aac=xn;var yi=vt,ji=188,wi=71,Ti=function(t,n,i){for(var e,r,s,o,a=0,u=ji,h=!1;u<=t.byteLength;)if(t[a]!==wi||t[u]!==wi&&u!==t.byteLength)a++,u++;else{switch(e=t.subarray(a,u),bi.ts.parseType(e,n.pid)){case"pes":r=bi.ts.parsePesType(e,n.table),s=bi.ts.parsePayloadUnitStartIndicator(e),"audio"===r&&s&&(o=bi.ts.parsePesTime(e))&&(o.type="audio",i.audio.push(o),h=!0)}if(h)break;a+=ji,u+=ji}for(a=(u=t.byteLength)-ji,h=!1;a>=0;)if(t[a]!==wi||t[u]!==wi&&u!==t.byteLength)a--,u--;else{switch(e=t.subarray(a,u),bi.ts.parseType(e,n.pid)){case"pes":r=bi.ts.parsePesType(e,n.table),s=bi.ts.parsePayloadUnitStartIndicator(e),"audio"===r&&s&&(o=bi.ts.parsePesTime(e))&&(o.type="audio",i.audio.push(o),h=!0)}if(h)break;a-=ji,u-=ji}},Ai=function(t,n,i){for(var e,r,s,o,a,u,h,c=0,f=ji,l=!1,v={data:[],size:0};f<t.byteLength;)if(t[c]!==wi||t[f]!==wi)c++,f++;else{switch(e=t.subarray(c,f),bi.ts.parseType(e,n.pid)){case"pes":if(r=bi.ts.parsePesType(e,n.table),s=bi.ts.parsePayloadUnitStartIndicator(e),"video"===r&&(s&&!l&&(o=bi.ts.parsePesTime(e))&&(o.type="video",i.video.push(o),l=!0),!i.firstKeyFrame)){if(s&&0!==v.size){for(a=new Uint8Array(v.size),u=0;v.data.length;)h=v.data.shift(),a.set(h,u),u+=h.byteLength;if(bi.ts.videoPacketContainsKeyFrame(a)){var d=bi.ts.parsePesTime(a);d?(i.firstKeyFrame=d,i.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}v.size=0}v.data.push(e),v.size+=e.byteLength}}if(l&&i.firstKeyFrame)break;c+=ji,f+=ji}for(c=(f=t.byteLength)-ji,l=!1;c>=0;)if(t[c]!==wi||t[f]!==wi)c--,f--;else{switch(e=t.subarray(c,f),bi.ts.parseType(e,n.pid)){case"pes":r=bi.ts.parsePesType(e,n.table),s=bi.ts.parsePayloadUnitStartIndicator(e),"video"===r&&s&&(o=bi.ts.parsePesTime(e))&&(o.type="video",i.video.push(o),l=!0)}if(l)break;c-=ji,f-=ji}},ki=function(t){var n={pid:null,table:null},i={};for(var e in function(t,n){for(var i,e=0,r=ji;r<t.byteLength;)if(t[e]!==wi||t[r]!==wi)e++,r++;else{switch(i=t.subarray(e,r),bi.ts.parseType(i,n.pid)){case"pat":n.pid=bi.ts.parsePat(i);break;case"pmt":var s=bi.ts.parsePmt(i);n.table=n.table||{},Object.keys(s).forEach((function(t){n.table[t]=s[t]}))}e+=ji,r+=ji}}(t,n),n.table){if(n.table.hasOwnProperty(e))switch(n.table[e]){case Xt.H264_STREAM_TYPE:i.video=[],Ai(t,n,i),0===i.video.length&&delete i.video;break;case Xt.ADTS_STREAM_TYPE:i.audio=[],Ti(t,n,i),0===i.audio.length&&delete i.audio}}return i},xi=function(t,n){var i;return(i=bi.aac.isLikelyAacData(t)?function(t){for(var n,i=!1,e=0,r=null,s=null,o=0,a=0;t.length-a>=3;){switch(bi.aac.parseType(t,a)){case"timed-metadata":if(t.length-a<10){i=!0;break}if((o=bi.aac.parseId3TagSize(t,a))>t.length){i=!0;break}null===s&&(n=t.subarray(a,a+o),s=bi.aac.parseAacTimestamp(n)),a+=o;break;case"audio":if(t.length-a<7){i=!0;break}if((o=bi.aac.parseAdtsSize(t,a))>t.length){i=!0;break}null===r&&(n=t.subarray(a,a+o),r=bi.aac.parseSampleRate(n)),e++,a+=o;break;default:a++}if(i)return null}if(null===r||null===s)return null;var u=yi/r;return{audio:[{type:"audio",dts:s,pts:s},{type:"audio",dts:s+1024*e*u,pts:s+1024*e*u}]}}(t):ki(t))&&(i.audio||i.video)?(function(t,n){if(t.audio&&t.audio.length){var i=n;(void 0===i||isNaN(i))&&(i=t.audio[0].dts),t.audio.forEach((function(t){t.dts=gi(t.dts,i),t.pts=gi(t.pts,i),t.dtsTime=t.dts/yi,t.ptsTime=t.pts/yi}))}if(t.video&&t.video.length){var e=n;if((void 0===e||isNaN(e))&&(e=t.video[0].dts),t.video.forEach((function(t){t.dts=gi(t.dts,e),t.pts=gi(t.pts,e),t.dtsTime=t.dts/yi,t.ptsTime=t.pts/yi})),t.firstKeyFrame){var r=t.firstKeyFrame;r.dts=gi(r.dts,e),r.pts=gi(r.pts,e),r.dtsTime=r.dts/yi,r.ptsTime=r.pts/yi}}}(i,n),i):null},Si=function(){function t(t,n){this.options=n||{},this.self=t,this.init()}var n=t.prototype;return n.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Hn.Transmuxer(this.options),function(t,n){n.on("data",(function(n){var i=n.initSegment;n.initSegment={data:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength};var e=n.data;n.data=e.buffer,t.postMessage({action:"data",segment:n,byteOffset:e.byteOffset,byteLength:e.byteLength},[n.data])})),n.on("done",(function(n){t.postMessage({action:"done"})})),n.on("gopInfo",(function(n){t.postMessage({action:"gopInfo",gopInfo:n})})),n.on("videoSegmentTimingInfo",(function(n){var i={start:{decode:pt(n.start.dts),presentation:pt(n.start.pts)},end:{decode:pt(n.end.dts),presentation:pt(n.end.pts)},baseMediaDecodeTime:pt(n.baseMediaDecodeTime)};n.prependedContentDuration&&(i.prependedContentDuration=pt(n.prependedContentDuration)),t.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:i})})),n.on("audioSegmentTimingInfo",(function(n){var i={start:{decode:pt(n.start.dts),presentation:pt(n.start.pts)},end:{decode:pt(n.end.dts),presentation:pt(n.end.pts)},baseMediaDecodeTime:pt(n.baseMediaDecodeTime)};n.prependedContentDuration&&(i.prependedContentDuration=pt(n.prependedContentDuration)),t.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:i})})),n.on("id3Frame",(function(n){t.postMessage({action:"id3Frame",id3Frame:n})})),n.on("caption",(function(n){t.postMessage({action:"caption",caption:n})})),n.on("trackinfo",(function(n){t.postMessage({action:"trackinfo",trackInfo:n})})),n.on("audioTimingInfo",(function(n){t.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:pt(n.start),end:pt(n.end)}})})),n.on("videoTimingInfo",(function(n){t.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:pt(n.start),end:pt(n.end)}})})),n.on("log",(function(n){t.postMessage({action:"log",log:n})}))}(this.self,this.transmuxer)},n.pushMp4Captions=function(t){this.captionParser||(this.captionParser=new oi,this.captionParser.init());var n=new Uint8Array(t.data,t.byteOffset,t.byteLength),i=this.captionParser.parse(n,t.trackIds,t.timescales);this.self.postMessage({action:"mp4Captions",captions:i&&i.captions||[],logs:i&&i.logs||[],data:n.buffer},[n.buffer])},n.probeMp4StartTime=function(t){var n=t.timescales,i=t.data,e=ci(n,i);this.self.postMessage({action:"probeMp4StartTime",startTime:e,data:i},[i.buffer])},n.probeMp4Tracks=function(t){var n=t.data,i=fi(n);this.self.postMessage({action:"probeMp4Tracks",tracks:i,data:n},[n.buffer])},n.probeTs=function(t){var n=t.data,i=t.baseStartTime,e="number"!=typeof i||isNaN(i)?void 0:i*vt,r=xi(n,e),s=null;r&&((s={hasVideo:r.video&&2===r.video.length||!1,hasAudio:r.audio&&2===r.audio.length||!1}).hasVideo&&(s.videoStart=r.video[0].ptsTime),s.hasAudio&&(s.audioStart=r.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:s,data:n},[n.buffer])},n.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},n.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},n.push=function(t){var n=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(n)},n.reset=function(){this.transmuxer.reset()},n.setTimestampOffset=function(t){var n=t.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(dt(n)))},n.setAudioAppendStart=function(t){this.transmuxer.setAudioAppendStart(Math.ceil(dt(t.appendStart)))},n.setRemux=function(t){this.transmuxer.setRemux(t.remux)},n.flush=function(t){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},n.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},n.alignGopsWith=function(t){this.transmuxer.alignGopsWith(t.gopsToAlignWith.slice())},t}();self.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new Si(self,t.data.options):(this.messageHandlers||(this.messageHandlers=new Si(self)),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}})))),Sv=function(t){var n=t.transmuxer,i=t.bytes,e=t.audioAppendStart,r=t.gopsToAlignWith,s=t.remux,o=t.onData,a=t.onTrackInfo,u=t.onAudioTimingInfo,h=t.onVideoTimingInfo,c=t.onVideoSegmentTimingInfo,f=t.onAudioSegmentTimingInfo,l=t.onId3,v=t.onCaptions,d=t.onDone,p=t.onEndedTimeline,m=t.onTransmuxerLog,g=t.isEndOfTimeline,b={buffer:[]},y=g;if(n.onmessage=function(i){n.currentTransmux===t&&("data"===i.data.action&&function(t,n,i){var e=t.data.segment,r=e.type,s=e.initSegment,o=e.captions,a=e.captionStreams,u=e.metadata,h=e.videoFrameDtsTime,c=e.videoFramePtsTime;n.buffer.push({captions:o,captionStreams:a,metadata:u});var f=t.data.segment.boxes||{data:t.data.segment.data},l={type:r,data:new Uint8Array(f.data,f.data.byteOffset,f.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};void 0!==h&&(l.videoFrameDtsTime=h),void 0!==c&&(l.videoFramePtsTime=c),i(l)}(i,b,o),"trackinfo"===i.data.action&&a(i.data.trackInfo),"gopInfo"===i.data.action&&function(t,n){n.gopInfo=t.data.gopInfo}(i,b),"audioTimingInfo"===i.data.action&&u(i.data.audioTimingInfo),"videoTimingInfo"===i.data.action&&h(i.data.videoTimingInfo),"videoSegmentTimingInfo"===i.data.action&&c(i.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===i.data.action&&f(i.data.audioSegmentTimingInfo),"id3Frame"===i.data.action&&l([i.data.id3Frame],i.data.id3Frame.dispatchType),"caption"===i.data.action&&v(i.data.caption),"endedtimeline"===i.data.action&&(y=!1,p()),"log"===i.data.action&&m(i.data.log),"transmuxed"===i.data.type&&(y||(n.onmessage=null,function(t){var n=t.transmuxedData,i=t.callback;n.buffer=[],i(n)}({transmuxedData:b,callback:d}),Ev(n))))},e&&n.postMessage({action:"setAudioAppendStart",appendStart:e}),Array.isArray(r)&&n.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),void 0!==s&&n.postMessage({action:"setRemux",remux:s}),i.byteLength){var j=i instanceof ArrayBuffer?i:i.buffer,w=i instanceof ArrayBuffer?0:i.byteOffset;n.postMessage({action:"push",data:j,byteOffset:w,byteLength:i.byteLength},[j])}g&&n.postMessage({action:"endTimeline"}),n.postMessage({action:"flush"})},Ev=function(t){t.currentTransmux=null,t.transmuxQueue.length&&(t.currentTransmux=t.transmuxQueue.shift(),"function"==typeof t.currentTransmux?t.currentTransmux():Sv(t.currentTransmux))},Iv=function(t,n){t.postMessage({action:n}),Ev(t)},Ov=function(t,n){if(!n.currentTransmux)return n.currentTransmux=t,void Iv(n,t);n.transmuxQueue.push(Iv.bind(null,n,t))},Dv=function(t){if(!t.transmuxer.currentTransmux)return t.transmuxer.currentTransmux=t,void Sv(t);t.transmuxer.transmuxQueue.push(t)},Nv=function(t){Ov("reset",t)},Mv=function(t){var n=new xv;n.currentTransmux=null,n.transmuxQueue=[];var i=n.terminate;return n.terminate=function(){return n.currentTransmux=null,n.transmuxQueue.length=0,i.call(n)},n.postMessage({action:"init",options:t}),n},Cv=function(t){var n=t.transmuxer,i=t.endAction||t.action,e=t.callback,r=fn({},t,{endAction:null,transmuxer:null,callback:null});if(n.addEventListener("message",(function r(s){s.data.action===i&&(n.removeEventListener("message",r),s.data.data&&(s.data.data=new Uint8Array(s.data.data,t.byteOffset||0,t.byteLength||s.data.data.byteLength),t.data&&(t.data=s.data.data)),e(s.data))})),t.data){var s=t.data instanceof ArrayBuffer;r.byteOffset=s?0:t.data.byteOffset,r.byteLength=t.data.byteLength;var o=[s?t.data:t.data.buffer];n.postMessage(r,o)}else n.postMessage(r)},Rv=2,Uv=-101,Pv=-102,Lv=function(t){t.forEach((function(t){t.abort()}))},Bv=function(t,n){return n.timedout?{status:n.status,message:"HLS request timed-out at URL: "+n.uri,code:Uv,xhr:n}:n.aborted?{status:n.status,message:"HLS request aborted at URL: "+n.uri,code:Pv,xhr:n}:t?{status:n.status,message:"HLS request errored at URL: "+n.uri,code:Rv,xhr:n}:"arraybuffer"===n.responseType&&0===n.response.byteLength?{status:n.status,message:"Empty HLS response at URL: "+n.uri,code:Rv,xhr:n}:null},Fv=function(t,n,i){return function(e,r){var s=r.response,o=Bv(e,r);if(o)return i(o,t);if(16!==s.byteLength)return i({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:Rv,xhr:r},t);for(var a=new DataView(s),u=new Uint32Array([a.getUint32(0),a.getUint32(4),a.getUint32(8),a.getUint32(12)]),h=0;h<n.length;h++)n[h].bytes=u;return i(null,t)}},_v=function(t,n){var i=Wo(t.map.bytes);if("mp4"!==i){var e=t.map.resolvedUri||t.map.uri;return n({internal:!0,message:"Found unsupported "+(i||"unknown")+" container for initialization segment at URL: "+e,code:Rv})}Cv({action:"probeMp4Tracks",data:t.map.bytes,transmuxer:t.transmuxer,callback:function(i){var e=i.tracks,r=i.data;return t.map.bytes=r,e.forEach((function(n){t.map.tracks=t.map.tracks||{},t.map.tracks[n.type]||(t.map.tracks[n.type]=n,"number"==typeof n.id&&n.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[n.id]=n.timescale))})),n(null)}})},zv=function(t){var n=t.segment,i=t.finishProcessingFn,e=t.responseType;return function(t,r){var s=Bv(t,r);if(s)return i(s,n);var o="arraybuffer"!==e&&r.responseText?function(t){for(var n=new Uint8Array(new ArrayBuffer(t.length)),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n.buffer}(r.responseText.substring(n.lastReachedChar||0)):r.response;return n.stats=function(t){return{bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}}(r),n.key?n.encryptedBytes=new Uint8Array(o):n.bytes=new Uint8Array(o),i(null,n)}},Vv=function(t){var n=t.segment,i=t.bytes,e=t.trackInfoFn,r=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,o=t.audioSegmentTimingInfoFn,a=t.id3Fn,u=t.captionsFn,h=t.isEndOfTimeline,c=t.endedTimelineFn,f=t.dataFn,l=t.doneFn,v=t.onTransmuxerLog,d=n.map&&n.map.tracks||{},p=Boolean(d.audio&&d.video),m=r.bind(null,n,"audio","start"),g=r.bind(null,n,"audio","end"),b=r.bind(null,n,"video","start"),y=r.bind(null,n,"video","end");Cv({action:"probeTs",transmuxer:n.transmuxer,data:i,baseStartTime:n.baseStartTime,callback:function(t){n.bytes=i=t.data;var r=t.result;r&&(e(n,{hasAudio:r.hasAudio,hasVideo:r.hasVideo,isMuxed:p}),e=null,r.hasAudio&&!p&&m(r.audioStart),r.hasVideo&&b(r.videoStart),m=null,b=null),Dv({bytes:i,transmuxer:n.transmuxer,audioAppendStart:n.audioAppendStart,gopsToAlignWith:n.gopsToAlignWith,remux:p,onData:function(t){t.type="combined"===t.type?"video":t.type,f(n,t)},onTrackInfo:function(t){e&&(p&&(t.isMuxed=!0),e(n,t))},onAudioTimingInfo:function(t){m&&void 0!==t.start&&(m(t.start),m=null),g&&void 0!==t.end&&g(t.end)},onVideoTimingInfo:function(t){b&&void 0!==t.start&&(b(t.start),b=null),y&&void 0!==t.end&&y(t.end)},onVideoSegmentTimingInfo:function(t){s(t)},onAudioSegmentTimingInfo:function(t){o(t)},onId3:function(t,i){a(n,t,i)},onCaptions:function(t){u(n,[t])},isEndOfTimeline:h,onEndedTimeline:function(){c()},onTransmuxerLog:v,onDone:function(t){l&&(t.type="combined"===t.type?"video":t.type,l(null,n,t))}})}})},Hv=function(t){var n=t.segment,i=t.bytes,e=t.trackInfoFn,r=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,o=t.audioSegmentTimingInfoFn,a=t.id3Fn,u=t.captionsFn,h=t.isEndOfTimeline,c=t.endedTimelineFn,f=t.dataFn,l=t.doneFn,v=t.onTransmuxerLog,d=new Uint8Array(i);if(function(t){return Eo(t,["moof"]).length>0}(d)){n.isFmp4=!0;var p=n.map.tracks,m={isFmp4:!0,hasVideo:!!p.video,hasAudio:!!p.audio};p.audio&&p.audio.codec&&"enca"!==p.audio.codec&&(m.audioCodec=p.audio.codec),p.video&&p.video.codec&&"encv"!==p.video.codec&&(m.videoCodec=p.video.codec),p.video&&p.audio&&(m.isMuxed=!0),e(n,m);var g=function(t){f(n,{data:d,type:m.hasAudio&&!m.isMuxed?"audio":"video"}),t&&t.length&&u(n,t),l(null,n,{})};Cv({action:"probeMp4StartTime",timescales:n.map.timescales,data:d,transmuxer:n.transmuxer,callback:function(t){var e=t.data,s=t.startTime;i=e.buffer,n.bytes=d=e,m.hasAudio&&!m.isMuxed&&r(n,"audio","start",s),m.hasVideo&&r(n,"video","start",s),p.video&&e.byteLength&&n.transmuxer?Cv({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:n.transmuxer,data:d,timescales:n.map.timescales,trackIds:[p.video.id],callback:function(t){i=t.data.buffer,n.bytes=d=t.data,t.logs.forEach((function(t){v(sl.mergeOptions(t,{stream:"mp4CaptionParser"}))})),g(t.captions)}}):g()}})}else if(n.transmuxer){if(void 0===n.container&&(n.container=Wo(d)),"ts"!==n.container&&"aac"!==n.container)return e(n,{hasAudio:!1,hasVideo:!1}),void l(null,n,{});Vv({segment:n,bytes:i,trackInfoFn:e,timingInfoFn:r,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:a,captionsFn:u,isEndOfTimeline:h,endedTimelineFn:c,dataFn:f,doneFn:l,onTransmuxerLog:v})}else l(null,n,{})},Xv=function(t,n){var i,e=t.id,r=t.key,s=t.encryptedBytes,o=t.decryptionWorker;o.addEventListener("message",(function t(i){if(i.data.source===e){o.removeEventListener("message",t);var r=i.data.decrypted;n(new Uint8Array(r.bytes,r.byteOffset,r.byteLength))}})),i=r.bytes.slice?r.bytes.slice():new Uint32Array(Array.prototype.slice.call(r.bytes)),o.postMessage(sv({source:e,encrypted:s,key:i,iv:r.iv}),[s.buffer,i.buffer])},qv=function(t){var n=t.activeXhrs,i=t.decryptionWorker,e=t.trackInfoFn,r=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,o=t.audioSegmentTimingInfoFn,a=t.id3Fn,u=t.captionsFn,h=t.isEndOfTimeline,c=t.endedTimelineFn,f=t.dataFn,l=t.doneFn,v=t.onTransmuxerLog,d=0,p=!1;return function(t,m){if(!p){if(t)return p=!0,Lv(n),l(t,m);if((d+=1)===n.length){var g=function(){if(m.encryptedBytes)return function(t){var n=t.decryptionWorker,i=t.segment,e=t.trackInfoFn,r=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,o=t.audioSegmentTimingInfoFn,a=t.id3Fn,u=t.captionsFn,h=t.isEndOfTimeline,c=t.endedTimelineFn,f=t.dataFn,l=t.doneFn,v=t.onTransmuxerLog;Xv({id:i.requestId,key:i.key,encryptedBytes:i.encryptedBytes,decryptionWorker:n},(function(t){i.bytes=t,Hv({segment:i,bytes:i.bytes,trackInfoFn:e,timingInfoFn:r,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:a,captionsFn:u,isEndOfTimeline:h,endedTimelineFn:c,dataFn:f,doneFn:l,onTransmuxerLog:v})}))}({decryptionWorker:i,segment:m,trackInfoFn:e,timingInfoFn:r,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:a,captionsFn:u,isEndOfTimeline:h,endedTimelineFn:c,dataFn:f,doneFn:l,onTransmuxerLog:v});Hv({segment:m,bytes:m.bytes,trackInfoFn:e,timingInfoFn:r,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:a,captionsFn:u,isEndOfTimeline:h,endedTimelineFn:c,dataFn:f,doneFn:l,onTransmuxerLog:v})};if(m.endOfAllRequests=Date.now(),m.map&&m.map.encryptedBytes&&!m.map.bytes)return Xv({decryptionWorker:i,id:m.requestId+"-init",encryptedBytes:m.map.encryptedBytes,key:m.map.key},(function(t){m.map.bytes=t,_v(m,(function(t){if(t)return Lv(n),l(t,m);g()}))}));g()}}}},Gv=function(t){var n=t.segment,i=t.progressFn;return t.trackInfoFn,t.timingInfoFn,t.videoSegmentTimingInfoFn,t.audioSegmentTimingInfoFn,t.id3Fn,t.captionsFn,t.isEndOfTimeline,t.endedTimelineFn,t.dataFn,function(t){if(!t.target.aborted)return n.stats=sl.mergeOptions(n.stats,function(t){var n=t.target,i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-n.requestTime||0};return i.bytesReceived=t.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i}(t)),!n.stats.firstBytesReceivedAt&&n.stats.bytesReceived&&(n.stats.firstBytesReceivedAt=Date.now()),i(t,n)}},Wv=function(t){var n=t.xhr,i=t.xhrOptions,e=t.decryptionWorker,r=t.segment,s=t.abortFn,o=t.progressFn,a=t.trackInfoFn,u=t.timingInfoFn,h=t.videoSegmentTimingInfoFn,c=t.audioSegmentTimingInfoFn,f=t.id3Fn,l=t.captionsFn,v=t.isEndOfTimeline,d=t.endedTimelineFn,p=t.dataFn,m=t.doneFn,g=t.onTransmuxerLog,b=[],y=qv({activeXhrs:b,decryptionWorker:e,trackInfoFn:a,timingInfoFn:u,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:c,id3Fn:f,captionsFn:l,isEndOfTimeline:v,endedTimelineFn:d,dataFn:p,doneFn:m,onTransmuxerLog:g});if(r.key&&!r.key.bytes){var j=[r.key];r.map&&!r.map.bytes&&r.map.key&&r.map.key.resolvedUri===r.key.resolvedUri&&j.push(r.map.key);var w=n(sl.mergeOptions(i,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),Fv(r,j,y));b.push(w)}if(r.map&&!r.map.bytes){if(r.map.key&&(!r.key||r.key.resolvedUri!==r.map.key.resolvedUri)){var T=n(sl.mergeOptions(i,{uri:r.map.key.resolvedUri,responseType:"arraybuffer"}),Fv(r,[r.map.key],y));b.push(T)}var A=n(sl.mergeOptions(i,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:nv(r.map)}),function(t){var n=t.segment,i=t.finishProcessingFn;return function(t,e){var r=Bv(t,e);if(r)return i(r,n);var s=new Uint8Array(e.response);if(n.map.key)return n.map.encryptedBytes=s,i(null,n);n.map.bytes=s,_v(n,(function(t){if(t)return t.xhr=e,t.status=e.status,i(t,n);i(null,n)}))}}({segment:r,finishProcessingFn:y}));b.push(A)}var k=sl.mergeOptions(i,{uri:r.part&&r.part.resolvedUri||r.resolvedUri,responseType:"arraybuffer",headers:nv(r)}),x=n(k,zv({segment:r,finishProcessingFn:y,responseType:k.responseType}));x.addEventListener("progress",Gv({segment:r,progressFn:o,trackInfoFn:a,timingInfoFn:u,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:c,id3Fn:f,captionsFn:l,isEndOfTimeline:v,endedTimelineFn:d,dataFn:p})),b.push(x);var S={};return b.forEach((function(t){t.addEventListener("loadend",function(t){var n=t.loadendState,i=t.abortFn;return function(t){t.target.aborted&&i&&!n.calledAbortFn&&(i(),n.calledAbortFn=!0)}}({loadendState:S,abortFn:s}))})),function(){return Lv(b)}},Yv=cl("CodecUtils"),Jv=function(t,n){var i=n.attributes||{};return t&&t.mediaGroups&&t.mediaGroups.AUDIO&&i.AUDIO&&t.mediaGroups.AUDIO[i.AUDIO]},Qv=function(t){var n={};return t.forEach((function(t){var i=t.mediaType,e=t.type,r=t.details;n[i]=n[i]||[],n[i].push(Qi(""+e+r))})),Object.keys(n).forEach((function(t){if(n[t].length>1)return Yv("multiple "+t+" codecs found as attributes: "+n[t].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(n[t]=null);n[t]=n[t][0]})),n},$v=function(t){var n=0;return t.audio&&n++,t.video&&n++,n},Kv=function(t,n){var i=n.attributes||{},e=Qv(function(t){var n=t.attributes||{};if(n.CODECS)return $i(n.CODECS)}(n)||[]);if(Jv(t,n)&&!e.audio&&!function(t,n){if(!Jv(t,n))return!0;var i=n.attributes||{},e=t.mediaGroups.AUDIO[i.AUDIO];for(var r in e)if(!e[r].uri&&!e[r].playlists)return!0;return!1}(t,n)){var r=Qv(function(t,n){if(!t.mediaGroups.AUDIO||!n)return null;var i=t.mediaGroups.AUDIO[n];if(!i)return null;for(var e in i){var r=i[e];if(r.default&&r.playlists)return $i(r.playlists[0].attributes.CODECS)}return null}(t,i.AUDIO)||[]);r.audio&&(e.audio=r.audio)}return e},Zv=cl("PlaylistSelector"),td=function(t){if(t&&t.playlist){var n=t.playlist;return JSON.stringify({id:n.id,bandwidth:t.bandwidth,width:t.width,height:t.height,codecs:n.attributes&&n.attributes.CODECS||""})}},nd=function(t,n){if(!t)return"";var i=bt.getComputedStyle(t);return i?i[n]:""},id=function(t,n){var i=t.slice();t.sort((function(t,e){var r=n(t,e);return 0===r?i.indexOf(t)-i.indexOf(e):r}))},ed=function(t,n){var i,e;return t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),i=i||bt.Number.MAX_VALUE,n.attributes.BANDWIDTH&&(e=n.attributes.BANDWIDTH),i-(e=e||bt.Number.MAX_VALUE)},rd=function(t,n,i,e,r,s){if(t){var o={bandwidth:n,width:i,height:e,limitRenditionByPlayerDimensions:r},a=t.playlists;Pl.isAudioOnly(t)&&(a=s.getAudioTrackPlaylists_(),o.audioOnly=!0);var u=a.map((function(t){var n=t.attributes&&t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width,i=t.attributes&&t.attributes.RESOLUTION&&t.attributes.RESOLUTION.height;return{bandwidth:t.attributes&&t.attributes.BANDWIDTH||bt.Number.MAX_VALUE,width:n,height:i,playlist:t}}));id(u,(function(t,n){return t.bandwidth-n.bandwidth}));var h=(u=u.filter((function(t){return!Pl.isIncompatible(t.playlist)}))).filter((function(t){return Pl.isEnabled(t.playlist)}));h.length||(h=u.filter((function(t){return!Pl.isDisabled(t.playlist)})));var c=h.filter((function(t){return t.bandwidth*jv.BANDWIDTH_VARIANCE<n})),f=c[c.length-1],l=c.filter((function(t){return t.bandwidth===f.bandwidth}))[0];if(!1===r){var v=l||h[0]||u[0];if(v&&v.playlist){var d="sortedPlaylistReps";return l&&(d="bandwidthBestRep"),h[0]&&(d="enabledPlaylistReps"),Zv("choosing "+td(v)+" using "+d+" with options",o),v.playlist}return Zv("could not choose a playlist with options",o),null}var p=c.filter((function(t){return t.width&&t.height}));id(p,(function(t,n){return t.width-n.width}));var m=p.filter((function(t){return t.width===i&&t.height===e}));f=m[m.length-1];var g,b,y,j,w=m.filter((function(t){return t.bandwidth===f.bandwidth}))[0];if(w||(b=(g=p.filter((function(t){return t.width>i||t.height>e}))).filter((function(t){return t.width===g[0].width&&t.height===g[0].height})),f=b[b.length-1],y=b.filter((function(t){return t.bandwidth===f.bandwidth}))[0]),s.experimentalLeastPixelDiffSelector){var T=p.map((function(t){return t.pixelDiff=Math.abs(t.width-i)+Math.abs(t.height-e),t}));id(T,(function(t,n){return t.pixelDiff===n.pixelDiff?n.bandwidth-t.bandwidth:t.pixelDiff-n.pixelDiff})),j=T[0]}var A=j||y||w||l||h[0]||u[0];if(A&&A.playlist){var k="sortedPlaylistReps";return j?k="leastPixelDiffRep":y?k="resolutionPlusOneRep":w?k="resolutionBestRep":l?k="bandwidthBestRep":h[0]&&(k="enabledPlaylistReps"),Zv("choosing "+td(A)+" using "+k+" with options",o),A.playlist}return Zv("could not choose a playlist with options",o),null}},sd=function(){var t=this.useDevicePixelRatio&&bt.devicePixelRatio||1;return rd(this.playlists.master,this.systemBandwidth,parseInt(nd(this.tech_.el(),"width"),10)*t,parseInt(nd(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},od=function(t){var n=t.inbandTextTracks,i=t.metadataArray,e=t.timestampOffset,r=t.videoDuration;if(i){var s=bt.WebKitDataCue||bt.VTTCue,o=n.metadataTrack_;if(o&&(i.forEach((function(t){var n=t.cueTime+e;!("number"!=typeof n||bt.isNaN(n)||n<0)&&n<1/0&&t.frames.forEach((function(t){var i=new s(n,n,t.value||t.url||t.data||"");i.frame=t,i.value=t,function(t){Object.defineProperties(t.frame,{id:{get:function(){return sl.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get:function(){return sl.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get:function(){return sl.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})}(i),o.addCue(i)}))})),o.cues&&o.cues.length)){for(var a=o.cues,u=[],h=0;h<a.length;h++)a[h]&&u.push(a[h]);var c=u.reduce((function(t,n){var i=t[n.startTime]||[];return i.push(n),t[n.startTime]=i,t}),{}),f=Object.keys(c).sort((function(t,n){return Number(t)-Number(n)}));f.forEach((function(t,n){var i=c[t],e=Number(f[n+1])||r;i.forEach((function(t){t.endTime=e}))}))}}},ad=function(t,n,i){var e,r;if(i&&i.cues)for(e=i.cues.length;e--;)(r=i.cues[e]).startTime>=t&&r.endTime<=n&&i.removeCue(r)},ud=function(t){return"number"==typeof t&&isFinite(t)},hd=function(t){var n=t.startOfSegment,i=t.duration,e=t.segment,r=t.part,s=t.playlist,o=s.mediaSequence,a=s.id,u=s.segments,h=void 0===u?[]:u,c=t.mediaIndex,f=t.partIndex,l=t.timeline,v=h.length-1,d="mediaIndex/partIndex increment";t.getMediaInfoForTime?d="getMediaInfoForTime ("+t.getMediaInfoForTime+")":t.isSyncRequest&&(d="getSyncSegmentCandidate (isSyncRequest)"),t.independent&&(d+=" with independent "+t.independent);var p="number"==typeof f,m=t.segment.uri?"segment":"pre-segment",g=p?Tl({preloadSegment:e})-1:0;return m+" ["+(o+c)+"/"+(o+v)+"]"+(p?" part ["+f+"/"+g+"]":"")+" segment start/end ["+e.start+" => "+e.end+"]"+(p?" part start/end ["+r.start+" => "+r.end+"]":"")+" startOfSegment ["+n+"] duration ["+i+"] timeline ["+l+"] selected by ["+d+"] playlist ["+a+"]"},cd=function(t){return t+"TimingInfo"},fd=function(t){var n=t.timelineChangeController,i=t.currentTimeline,e=t.segmentTimeline,r=t.loaderType,s=t.audioDisabled;if(i===e)return!1;if("audio"===r){var o=n.lastTimelineChange({type:"main"});return!o||o.to!==e}if("main"===r&&s){var a=n.pendingTimelineChange({type:"audio"});return!a||a.to!==e}return!1},ld=function(t){var n=t.segmentDuration,i=t.maxDuration;return!!n&&Math.round(n)>i+.03333333333333333},vd=function(t,n){if("hls"!==n)return null;var i,e,r=(i={audioTimingInfo:t.audioTimingInfo,videoTimingInfo:t.videoTimingInfo},e=0,["video","audio"].forEach((function(t){var n=i[t+"TimingInfo"];if(n){var r,s=n.start,o=n.end;"bigint"==typeof s||"bigint"==typeof o?r=bt.BigInt(o)-bt.BigInt(s):"number"==typeof s&&"number"==typeof o&&(r=o-s),void 0!==r&&r>e&&(e=r)}})),"bigint"==typeof e&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e);if(!r)return null;var s=t.playlist.targetDuration,o=ld({segmentDuration:r,maxDuration:2*s}),a=ld({segmentDuration:r,maxDuration:s}),u="Segment with index "+t.mediaIndex+" from playlist "+t.playlist.id+" has a duration of "+r+" when the reported duration is "+t.duration+" and the target duration is "+s+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return o||a?{severity:o?"warn":"info",message:u}:null},dd=function(t){function n(n,i){var e;if(e=t.call(this)||this,!n)throw new TypeError("Initialization settings are required");if("function"!=typeof n.currentTime)throw new TypeError("No currentTime getter specified");if(!n.mediaSource)throw new TypeError("No MediaSource specified");return e.bandwidth=n.bandwidth,e.throughput={rate:0,count:0},e.roundTrip=NaN,e.resetStats_(),e.mediaIndex=null,e.partIndex=null,e.hasPlayed_=n.hasPlayed,e.currentTime_=n.currentTime,e.seekable_=n.seekable,e.seeking_=n.seeking,e.duration_=n.duration,e.mediaSource_=n.mediaSource,e.vhs_=n.vhs,e.loaderType_=n.loaderType,e.currentMediaInfo_=void 0,e.startingMediaInfo_=void 0,e.segmentMetadataTrack_=n.segmentMetadataTrack,e.goalBufferLength_=n.goalBufferLength,e.sourceType_=n.sourceType,e.sourceUpdater_=n.sourceUpdater,e.inbandTextTracks_=n.inbandTextTracks,e.state_="INIT",e.timelineChangeController_=n.timelineChangeController,e.shouldSaveSegmentTimingInfo_=!0,e.parse708captions_=n.parse708captions,e.captionServices_=n.captionServices,e.experimentalExactManifestTimings=n.experimentalExactManifestTimings,e.checkBufferTimeout_=null,e.error_=void 0,e.currentTimeline_=-1,e.pendingSegment_=null,e.xhrOptions_=null,e.pendingSegments_=[],e.audioDisabled_=!1,e.isPendingTimestampOffset_=!1,e.gopBuffer_=[],e.timeMapping_=0,e.safeAppend_=sl.browser.IE_VERSION>=11,e.appendInitSegment_={audio:!0,video:!0},e.playlistOfLastInitSegment_={audio:null,video:null},e.callQueue_=[],e.loadQueue_=[],e.metadataQueue_={id3:[],caption:[]},e.waitingOnRemove_=!1,e.quotaExceededErrorRetryTimeout_=null,e.activeInitSegmentId_=null,e.initSegments_={},e.cacheEncryptionKeys_=n.cacheEncryptionKeys,e.keyCache_={},e.decrypter_=n.decrypter,e.syncController_=n.syncController,e.syncPoint_={segmentIndex:0,time:0},e.transmuxer_=e.createTransmuxer_(),e.triggerSyncInfoUpdate_=function(){return e.trigger("syncinfoupdate")},e.syncController_.on("syncinfoupdate",e.triggerSyncInfoUpdate_),e.mediaSource_.addEventListener("sourceopen",(function(){e.isEndOfStream_()||(e.ended_=!1)})),e.fetchAtBuffer_=!1,e.logger_=cl("SegmentLoader["+e.loaderType_+"]"),Object.defineProperty(mn(e),"state",{get:function(){return this.state_},set:function(t){t!==this.state_&&(this.logger_(this.state_+" -> "+t),this.state_=t,this.trigger("statechange"))}}),e.sourceUpdater_.on("ready",(function(){e.hasEnoughInfoToAppend_()&&e.processCallQueue_()})),"main"===e.loaderType_&&e.timelineChangeController_.on("pendingtimelinechange",(function(){e.hasEnoughInfoToAppend_()&&e.processCallQueue_()})),"audio"===e.loaderType_&&e.timelineChangeController_.on("timelinechange",(function(){e.hasEnoughInfoToLoad_()&&e.processLoadQueue_(),e.hasEnoughInfoToAppend_()&&e.processCallQueue_()})),e}yn(n,t);var i=n.prototype;return i.createTransmuxer_=function(){return Mv({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},i.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},i.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&bt.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},i.setAudio=function(t){this.audioDisabled_=!t,t?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},i.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},i.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,bt.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},i.checkForAbort_=function(t){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==t:(this.state="READY",!0)},i.error=function(t){return void 0!==t&&(this.logger_("error occurred:",t),this.error_=t),this.pendingSegment_=null,this.error_},i.endOfStream=function(){this.ended_=!0,this.transmuxer_&&Nv(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},i.buffered_=function(){var t=this.getMediaInfo_();if(!this.sourceUpdater_||!t)return sl.createTimeRanges();if("main"===this.loaderType_){var n=t.hasAudio,i=t.hasVideo,e=t.isMuxed;if(i&&n&&!this.audioDisabled_&&!e)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},i.initSegmentForMap=function(t,n){if(void 0===n&&(n=!1),!t)return null;var i=ov(t),e=this.initSegments_[i];return n&&!e&&t.bytes&&(this.initSegments_[i]=e={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,tracks:t.tracks,timescales:t.timescales}),e||t},i.segmentKey=function(t,n){if(void 0===n&&(n=!1),!t)return null;var i=av(t),e=this.keyCache_[i];this.cacheEncryptionKeys_&&n&&!e&&t.bytes&&(this.keyCache_[i]=e={resolvedUri:t.resolvedUri,bytes:t.bytes});var r={resolvedUri:(e||t).resolvedUri};return e&&(r.bytes=e.bytes),r},i.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},i.load=function(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.playlist=function(t,n){if(void 0===n&&(n={}),t){var i=this.playlist_,e=this.pendingSegment_;this.playlist_=t,this.xhrOptions_=n,"INIT"===this.state&&(t.syncInfo={mediaSequence:t.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(t));var r=null;if(i&&(i.id?r=i.id:i.uri&&(r=i.uri)),this.logger_("playlist update ["+r+" => "+(t.id||t.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!i||i.uri!==t.uri)return null!==this.mediaIndex&&(t.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var s=t.mediaSequence-i.mediaSequence;if(this.logger_("live window shift ["+s+"]"),null!==this.mediaIndex)if(this.mediaIndex-=s,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){var a=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=a}}e&&(e.mediaIndex-=s,e.mediaIndex<0?(e.mediaIndex=null,e.partIndex=null):(e.mediaIndex>=0&&(e.segment=t.segments[e.mediaIndex]),e.partIndex>=0&&e.segment.parts&&(e.part=e.segment.parts[e.partIndex]))),this.syncController_.saveExpiredSegmentInfo(i,t)}},i.pause=function(){this.checkBufferTimeout_&&(bt.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},i.paused=function(){return null===this.checkBufferTimeout_},i.resetEverything=function(t){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,t),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},i.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},i.resyncLoader=function(){this.transmuxer_&&Nv(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},i.remove=function(t,n,i,e){if(void 0===i&&(i=function(){}),void 0===e&&(e=!1),n===1/0&&(n=this.duration_()),n<=t)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var r=1,s=function(){0===--r&&i()};for(var o in!e&&this.audioDisabled_||(r++,this.sourceUpdater_.removeAudio(t,n,s)),(e||"main"===this.loaderType_)&&(this.gopBuffer_=function(t,n,i,e){for(var r=Math.ceil((n-e)*Jo),s=Math.ceil((i-e)*Jo),o=t.slice(),a=t.length;a--&&!(t[a].pts<=s););if(-1===a)return o;for(var u=a+1;u--&&!(t[u].pts<=r););return u=Math.max(u,0),o.splice(u,a-u+1),o}(this.gopBuffer_,t,n,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(t,n,s)),this.inbandTextTracks_)ad(t,n,this.inbandTextTracks_[o]);ad(t,n,this.segmentMetadataTrack_),s()}else this.logger_("skipping remove because no source updater or starting media info")},i.monitorBuffer_=function(){this.checkBufferTimeout_&&bt.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=bt.setTimeout(this.monitorBufferTick_.bind(this),1)},i.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&bt.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=bt.setTimeout(this.monitorBufferTick_.bind(this),500)},i.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var t=this.chooseNextRequest_();t&&("number"==typeof t.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline})),this.loadSegment_(t))}},i.isEndOfStream_=function(t,n,i){if(void 0===t&&(t=this.mediaIndex),void 0===n&&(n=this.playlist_),void 0===i&&(i=this.partIndex),!n||!this.mediaSource_)return!1;var e="number"==typeof t&&n.segments[t],r=t+1===n.segments.length,s=!e||!e.parts||i+1===e.parts.length;return n.endList&&"open"===this.mediaSource_.readyState&&r&&s},i.chooseNextRequest_=function(){var t=this.buffered_(),n=ml(t)||0,i=gl(t,this.currentTime_()),e=!this.hasPlayed_()&&i>=1,r=i>=this.goalBufferLength_(),s=this.playlist_.segments;if(!s.length||e||r)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(o.isSyncRequest)o.mediaIndex=function(t,n,i){n=n||[];for(var e=[],r=0,s=0;s<n.length;s++){var o=n[s];if(t===o.timeline&&(e.push(s),(r+=o.duration)>i))return s}return 0===e.length?0:e[e.length-1]}(this.currentTimeline_,s,n);else if(null!==this.mediaIndex){var a=s[this.mediaIndex],u="number"==typeof this.partIndex?this.partIndex:-1;o.startOfSegment=a.end?a.end:n,a.parts&&a.parts[u+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=u+1):o.mediaIndex=this.mediaIndex+1}else{var h=Pl.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?n:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),c=h.segmentIndex,f=h.startTime,l=h.partIndex;o.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+n:"currentTime "+this.currentTime_(),o.mediaIndex=c,o.startOfSegment=f,o.partIndex=l}var v=s[o.mediaIndex],d=v&&"number"==typeof o.partIndex&&v.parts&&v.parts[o.partIndex];if(!v||"number"==typeof o.partIndex&&!d)return null;if("number"!=typeof o.partIndex&&v.parts&&(o.partIndex=0,d=v.parts[0]),!i&&d&&!d.independent)if(0===o.partIndex){var p=s[o.mediaIndex-1],m=p.parts&&p.parts.length&&p.parts[p.parts.length-1];m&&m.independent&&(o.mediaIndex-=1,o.partIndex=p.parts.length-1,o.independent="previous segment")}else v.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");var g=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return o.mediaIndex>=s.length-1&&g&&!this.seeking_()?null:this.generateSegmentInfo_(o)},i.generateSegmentInfo_=function(t){var n=t.independent,i=t.playlist,e=t.mediaIndex,r=t.startOfSegment,s=t.isSyncRequest,o=t.partIndex,a=t.forceTimestampOffset,u=t.getMediaInfoForTime,h=i.segments[e],c="number"==typeof o&&h.parts[o],f={requestId:"segment-loader-"+Math.random(),uri:c&&c.resolvedUri||h.resolvedUri,mediaIndex:e,partIndex:c?o:null,isSyncRequest:s,startOfSegment:r,playlist:i,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:h.timeline,duration:c&&c.duration||h.duration,segment:h,part:c,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:u,independent:n},l=void 0!==a?a:this.isPendingTimestampOffset_;f.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:h.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),overrideCheck:l});var v=ml(this.sourceUpdater_.audioBuffered());return"number"==typeof v&&(f.audioAppendStart=v-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(f.gopsToAlignWith=function(t,n,i){if(null==n||!t.length)return[];var e,r=Math.ceil((n-i+3)*Jo);for(e=0;e<t.length&&!(t[e].pts>r);e++);return t.slice(e)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),f},i.timestampOffsetForSegment_=function(t){return i=(n=t).segmentTimeline,e=n.currentTimeline,r=n.startOfSegment,s=n.buffered,n.overrideCheck||i!==e?i<e?r:s.length?s.end(s.length-1):r:null;var n,i,e,r,s},i.earlyAbortWhenNeeded_=function(t){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)){var n=this.currentTime_(),i=t.bandwidth,e=this.pendingSegment_.duration,r=Pl.estimateSegmentRequestTime(e,i,this.playlist_,t.bytesReceived),s=function(t,n,i){return void 0===i&&(i=1),((t.length?t.end(t.length-1):0)-n)/i}(this.buffered_(),n,this.vhs_.tech_.playbackRate())-1;if(!(r<=s)){var o=function(t){var n=t.master,i=t.currentTime,e=t.bandwidth,r=t.duration,s=t.segmentDuration,o=t.timeUntilRebuffer,a=t.currentTimeline,u=t.syncController,h=n.playlists.filter((function(t){return!Pl.isIncompatible(t)})),c=h.filter(Pl.isEnabled);c.length||(c=h.filter((function(t){return!Pl.isDisabled(t)})));var f=c.filter(Pl.hasAttribute.bind(null,"BANDWIDTH")).map((function(t){var n=u.getSyncPoint(t,r,a,i)?1:2;return{playlist:t,rebufferingImpact:Pl.estimateSegmentRequestTime(s,e,t)*n-o}})),l=f.filter((function(t){return t.rebufferingImpact<=0}));return id(l,(function(t,n){return ed(n.playlist,t.playlist)})),l.length?l[0]:(id(f,(function(t,n){return t.rebufferingImpact-n.rebufferingImpact})),f[0]||null)}({master:this.vhs_.playlists.master,currentTime:n,bandwidth:i,duration:this.duration_(),segmentDuration:e,timeUntilRebuffer:s,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(o){var a=r-s-o.rebufferingImpact,u=.5;s<=.03333333333333333&&(u=1),!o.playlist||o.playlist.uri===this.playlist_.uri||a<u||(this.bandwidth=o.playlist.attributes.BANDWIDTH*jv.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},i.handleAbort_=function(t){this.logger_("Aborting "+hd(t)),this.mediaRequestsAborted+=1},i.handleProgress_=function(t,n){this.earlyAbortWhenNeeded_(n.stats),this.checkForAbort_(n.requestId)||this.trigger("progress")},i.handleTrackInfo_=function(t,n){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.checkForIllegalMediaSwitch(n)||(n=n||{},function(t,n){if(!t&&!n||!t&&n||t&&!n)return!1;if(t===n)return!0;var i=Object.keys(t).sort(),e=Object.keys(n).sort();if(i.length!==e.length)return!1;for(var r=0;r<i.length;r++){var s=i[r];if(s!==e[r])return!1;if(t[s]!==n[s])return!1}return!0}(this.currentMediaInfo_,n)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=n,this.currentMediaInfo_=n,this.logger_("trackinfo update",n),this.trigger("trackinfo")),this.checkForAbort_(t.requestId)||(this.pendingSegment_.trackInfo=n,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},i.handleTimingInfo_=function(t,n,i,e){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){var r=this.pendingSegment_,s=cd(n);r[s]=r[s]||{},r[s][i]=e,this.logger_("timinginfo: "+n+" - "+i+" - "+e),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},i.handleCaptions_=function(t,n){var i=this;if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId))if(0!==n.length)if(this.pendingSegment_.hasAppendedData_){var e=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),r={};n.forEach((function(t){r[t.stream]=r[t.stream]||{startTime:1/0,captions:[],endTime:0};var n=r[t.stream];n.startTime=Math.min(n.startTime,t.startTime+e),n.endTime=Math.max(n.endTime,t.endTime+e),n.captions.push(t)})),Object.keys(r).forEach((function(t){var n=r[t],s=n.startTime,o=n.endTime,a=n.captions,u=i.inbandTextTracks_;i.logger_("adding cues from "+s+" -> "+o+" for "+t),function(t,n,i){if(!t[i]){n.trigger({type:"usage",name:"vhs-608"}),n.trigger({type:"usage",name:"hls-608"});var e=i;/^cc708_/.test(i)&&(e="SERVICE"+i.split("_")[1]);var r=n.textTracks().getTrackById(e);if(r)t[i]=r;else{var s=i,o=i,a=!1,u=(n.options_.vhs&&n.options_.vhs.captionServices||{})[e];u&&(s=u.label,o=u.language,a=u.default),t[i]=n.addRemoteTextTrack({kind:"captions",id:e,default:a,label:s,language:o},!1).track}}}(u,i.vhs_.tech_,t),ad(s,o,u[t]),function(t){var n=t.inbandTextTracks,i=t.captionArray,e=t.timestampOffset;if(i){var r=bt.WebKitDataCue||bt.VTTCue;i.forEach((function(t){var i=t.stream;n[i].addCue(new r(t.startTime+e,t.endTime+e,t.text))}))}}({captionArray:a,inbandTextTracks:u,timestampOffset:e})})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,t,n));else this.logger_("SegmentLoader received no captions from a caption event")},i.handleId3_=function(t,n,i){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId))if(this.pendingSegment_.hasAppendedData_){var e=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();!function(t,n,i){t.metadataTrack_||(t.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,t.metadataTrack_.inBandMetadataTrackDispatchType=n)}(this.inbandTextTracks_,i,this.vhs_.tech_),od({inbandTextTracks:this.inbandTextTracks_,metadataArray:n,timestampOffset:e,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,t,n,i))},i.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach((function(t){return t()})),this.metadataQueue_.caption.forEach((function(t){return t()})),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},i.processCallQueue_=function(){var t=this.callQueue_;this.callQueue_=[],t.forEach((function(t){return t()}))},i.processLoadQueue_=function(){var t=this.loadQueue_;this.loadQueue_=[],t.forEach((function(t){return t()}))},i.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var t=this.pendingSegment_;return!!t&&(!this.getCurrentMediaInfo_()||!fd({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},i.getCurrentMediaInfo_=function(t){return void 0===t&&(t=this.pendingSegment_),t&&t.trackInfo||this.currentMediaInfo_},i.getMediaInfo_=function(t){return void 0===t&&(t=this.pendingSegment_),this.getCurrentMediaInfo_(t)||this.startingMediaInfo_},i.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var t=this.pendingSegment_,n=this.getCurrentMediaInfo_();if(!t||!n)return!1;var i=n.hasAudio,e=n.hasVideo,r=n.isMuxed;return!(e&&!t.videoTimingInfo)&&(!(i&&!this.audioDisabled_&&!r&&!t.audioTimingInfo)&&!fd({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},i.handleData_=function(t,n){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.part||i.segment),"closed"!==this.mediaSource_.readyState){if(t.map&&(t.map=this.initSegmentForMap(t.map,!0),i.segment.map=t.map),t.key&&this.segmentKey(t.key,!0),i.isFmp4=t.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)this.trigger("fmp4"),i.timingInfo.start=i[cd(n.type)].start;else{var e,r=this.getCurrentMediaInfo_(),s="main"===this.loaderType_&&r&&r.hasVideo;s&&(e=i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:s,firstVideoFrameTimeForData:e,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(i,n.type),this.updateSourceBufferTimestampOffset_(i),i.isSyncRequest){this.updateTimingInfoEnd_(i),this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:"main"===this.loaderType_});var o=this.chooseNextRequest_();if(o.mediaIndex!==i.mediaIndex||o.partIndex!==i.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,n)}}else this.callQueue_.push(this.handleData_.bind(this,t,n))},i.updateAppendInitSegmentStatus=function(t,n){"main"!==this.loaderType_||"number"!=typeof t.timestampOffset||t.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[n]!==t.playlist&&(this.appendInitSegment_[n]=!0)},i.getInitSegmentAndUpdateState_=function(t){var n=t.type,i=t.initSegment,e=t.map,r=t.playlist;if(e){var s=ov(e);if(this.activeInitSegmentId_===s)return null;i=this.initSegmentForMap(e,!0).bytes,this.activeInitSegmentId_=s}return i&&this.appendInitSegment_[n]?(this.playlistOfLastInitSegment_[n]=r,this.appendInitSegment_[n]=!1,this.activeInitSegmentId_=null,i):null},i.handleQuotaExceededError_=function(t,n){var i=this,e=t.segmentInfo,r=t.type,s=t.bytes,o=this.sourceUpdater_.audioBuffered(),a=this.sourceUpdater_.videoBuffered();o.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+pl(o).join(", ")),a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+pl(a).join(", "));var u=o.length?o.start(0):0,h=o.length?o.end(o.length-1):0,c=a.length?a.start(0):0,f=a.length?a.end(a.length-1):0;if(h-u<=1&&f-c<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+s.byteLength+", audio buffer: "+pl(o).join(", ")+", video buffer: "+pl(a).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:r,bytes:s}));var l=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+l),this.remove(0,l,(function(){i.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),i.waitingOnRemove_=!1,i.quotaExceededErrorRetryTimeout_=bt.setTimeout((function(){i.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),i.quotaExceededErrorRetryTimeout_=null,i.processCallQueue_()}),1e3)}),!0)},i.handleAppendError_=function(t,n){var i=t.segmentInfo,e=t.type,r=t.bytes;n&&(22!==n.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",n),this.error(e+" append of "+r.length+"b failed for segment #"+i.mediaIndex+" in playlist "+i.playlist.id),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:i,type:e,bytes:r}))},i.appendToSourceBuffer_=function(t){var n,i,e,r=t.segmentInfo,s=t.type,o=t.initSegment,a=t.data,u=t.bytes;if(!u){var h=[a],c=a.byteLength;o&&(h.unshift(o),c+=o.byteLength),e=0,(n={bytes:c,segments:h}).bytes&&(i=new Uint8Array(n.bytes),n.segments.forEach((function(t){i.set(t,e),e+=t.byteLength}))),u=i}this.sourceUpdater_.appendBuffer({segmentInfo:r,type:s,bytes:u},this.handleAppendError_.bind(this,{segmentInfo:r,type:s,bytes:u}))},i.handleSegmentTimingInfo_=function(t,n,i){if(this.pendingSegment_&&n===this.pendingSegment_.requestId){var e=this.pendingSegment_.segment,r=t+"TimingInfo";e[r]||(e[r]={}),e[r].transmuxerPrependedSeconds=i.prependedContentDuration||0,e[r].transmuxedPresentationStart=i.start.presentation,e[r].transmuxedDecodeStart=i.start.decode,e[r].transmuxedPresentationEnd=i.end.presentation,e[r].transmuxedDecodeEnd=i.end.decode,e[r].baseMediaDecodeTime=i.baseMediaDecodeTime}},i.appendData_=function(t,n){var i=n.type,e=n.data;if(e&&e.byteLength&&("audio"!==i||!this.audioDisabled_)){var r=this.getInitSegmentAndUpdateState_({type:i,initSegment:n.initSegment,playlist:t.playlist,map:t.isFmp4?t.segment.map:null});this.appendToSourceBuffer_({segmentInfo:t,type:i,initSegment:r,data:e})}},i.loadSegment_=function(t){var n=this;this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),"number"==typeof t.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(t):this.loadQueue_.push((function(){var i=fn({},t,{forceTimestampOffset:!0});fn(t,n.generateSegmentInfo_(i)),n.isPendingTimestampOffset_=!1,n.updateTransmuxerAndRequestSegment_(t)}))},i.updateTransmuxerAndRequestSegment_=function(t){var n=this;this.shouldUpdateTransmuxerTimestampOffset_(t.timestampOffset)&&(this.gopBuffer_.length=0,t.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t.timestampOffset}));var i=this.createSimplifiedSegmentObj_(t),e=this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex),r=null!==this.mediaIndex,s=t.timeline!==this.currentTimeline_&&t.timeline>0,o=e||r&&s;this.logger_("Requesting "+hd(t)),i.map&&!i.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),t.abortRequests=Wv({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:i,abortFn:this.handleAbort_.bind(this,t),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",t.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",t.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:o,endedTimelineFn:function(){n.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(i){var e=i.message,r=i.level,s=i.stream;n.logger_(hd(t)+" logged from transmuxer stream "+s+" as a "+r+": "+e)}})},i.trimBackBuffer_=function(t){var n=function(t,n,i){var e=n-jv.BACK_BUFFER_LENGTH;t.length&&(e=Math.max(e,t.start(0)));var r=n-i;return Math.min(r,e)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);n>0&&this.remove(0,n)},i.createSimplifiedSegmentObj_=function(t){var n=t.segment,i=t.part,e={resolvedUri:i?i.resolvedUri:n.resolvedUri,byterange:i?i.byterange:n.byterange,requestId:t.requestId,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,part:t.part},r=t.playlist.segments[t.mediaIndex-1];if(r&&r.timeline===n.timeline&&(r.videoTimingInfo?e.baseStartTime=r.videoTimingInfo.transmuxedDecodeEnd:r.audioTimingInfo&&(e.baseStartTime=r.audioTimingInfo.transmuxedDecodeEnd)),n.key){var s=n.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);e.key=this.segmentKey(n.key),e.key.iv=s}return n.map&&(e.map=this.initSegmentForMap(n.map)),e},i.saveTransferStats_=function(t){this.mediaRequests+=1,t&&(this.mediaBytesTransferred+=t.bytesReceived,this.mediaTransferDuration+=t.roundTripTime)},i.saveBandwidthRelatedStats_=function(t,n){this.pendingSegment_.byteLength=n.bytesReceived,t<.016666666666666666?this.logger_("Ignoring segment's bandwidth because its duration of "+t+" is less than the min to record 0.016666666666666666"):(this.bandwidth=n.bandwidth,this.roundTrip=n.roundTripTime)},i.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},i.segmentRequestFinished_=function(t,n,i){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,t,n,i));else if(this.saveTransferStats_(n.stats),this.pendingSegment_&&n.requestId===this.pendingSegment_.requestId){if(t){if(this.pendingSegment_=null,this.state="READY",t.code===Pv)return;return this.pause(),t.code===Uv?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(t),void this.trigger("error"))}var e=this.pendingSegment_;this.saveBandwidthRelatedStats_(e.duration,n.stats),e.endOfAllRequests=n.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=function(t,n,i){if(!n.length)return t;if(i)return n.slice();for(var e=n[0].pts,r=0;r<t.length&&!(t[r].pts>=e);r++);return t.slice(0,r).concat(n)}(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(e)}},i.setTimeMapping_=function(t){var n=this.syncController_.mappingForTimeline(t);null!==n&&(this.timeMapping_=n)},i.updateMediaSecondsLoaded_=function(t){"number"==typeof t.start&&"number"==typeof t.end?this.mediaSecondsLoaded+=t.end-t.start:this.mediaSecondsLoaded+=t.duration},i.shouldUpdateTransmuxerTimestampOffset_=function(t){return null!==t&&("main"===this.loaderType_&&t!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&t!==this.sourceUpdater_.audioTimestampOffset())},i.trueSegmentStart_=function(t){var n=t.currentStart,i=t.playlist,e=t.mediaIndex,r=t.firstVideoFrameTimeForData,s=t.currentVideoTimestampOffset,o=t.useVideoTimingInfo,a=t.videoTimingInfo,u=t.audioTimingInfo;if(void 0!==n)return n;if(!o)return u.start;var h=i.segments[e-1];return 0!==e&&h&&void 0!==h.start&&h.end===r+s?a.start:r},i.waitForAppendsToComplete_=function(t){var n=this.getCurrentMediaInfo_(t);if(!n)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var i=n.hasAudio,e=n.hasVideo,r=n.isMuxed,s="main"===this.loaderType_&&e,o=!this.audioDisabled_&&i&&!r;if(t.waitingOnAppends=0,!t.hasAppendedData_)return t.timingInfo||"number"!=typeof t.timestampOffset||(this.isPendingTimestampOffset_=!0),t.timingInfo={start:0},t.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(t),this.processMetadataQueue_()),void this.checkAppendsDone_(t);s&&t.waitingOnAppends++,o&&t.waitingOnAppends++,s&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,t)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,t))},i.checkAppendsDone_=function(t){this.checkForAbort_(t.requestId)||(t.waitingOnAppends--,0===t.waitingOnAppends&&this.handleAppendsDone_())},i.checkForIllegalMediaSwitch=function(t){var n=function(t,n,i){return"main"===t&&n&&i?i.hasAudio||i.hasVideo?n.hasVideo&&!i.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!n.hasVideo&&i.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),t);return!!n&&(this.error({message:n,blacklistDuration:1/0}),this.trigger("error"),!0)},i.updateSourceBufferTimestampOffset_=function(t){if(null!==t.timestampOffset&&"number"==typeof t.timingInfo.start&&!t.changedTimestampOffset&&"main"===this.loaderType_){var n=!1;t.timestampOffset-=t.timingInfo.start,t.changedTimestampOffset=!0,t.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(t.timestampOffset),n=!0),t.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(t.timestampOffset),n=!0),n&&this.trigger("timestampoffset")}},i.updateTimingInfoEnd_=function(t){t.timingInfo=t.timingInfo||{};var n=this.getMediaInfo_(),i="main"===this.loaderType_&&n&&n.hasVideo&&t.videoTimingInfo?t.videoTimingInfo:t.audioTimingInfo;i&&(t.timingInfo.end="number"==typeof i.end?i.end:i.start+t.duration)},i.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var t=this.pendingSegment_;this.updateTimingInfoEnd_(t),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:"main"===this.loaderType_});var n=vd(t,this.sourceType_);if(n&&("warn"===n.severity?sl.log.warn(n.message):this.logger_(n.message)),this.recordThroughput_(t),this.pendingSegment_=null,this.state="READY",!t.isSyncRequest||(this.trigger("syncinfoupdate"),t.hasAppendedData_)){this.logger_("Appended "+hd(t)),this.addSegmentMetadataCue_(t),this.fetchAtBuffer_=!0,this.currentTimeline_!==t.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:t.timeline})),this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate");var i=t.segment,e=t.part,r=i.end&&this.currentTime_()-i.end>3*t.playlist.targetDuration,s=e&&e.end&&this.currentTime_()-e.end>3*t.playlist.partTargetDuration;if(r||s)return this.logger_("bad "+(r?"segment":"part")+" "+hd(t)),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=t.mediaIndex,this.partIndex=t.partIndex,this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex)&&this.endOfStream(),this.trigger("appended"),t.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+hd(t))},i.recordThroughput_=function(t){if(t.duration<.016666666666666666)this.logger_("Ignoring segment's throughput because its duration of "+t.duration+" is less than the min to record 0.016666666666666666");else{var n=this.throughput.rate,i=Date.now()-t.endOfAllRequests+1,e=Math.floor(t.byteLength/i*8*1e3);this.throughput.rate+=(e-n)/++this.throughput.count}},i.addSegmentMetadataCue_=function(t){if(this.segmentMetadataTrack_){var n=t.segment,i=n.start,e=n.end;if(ud(i)&&ud(e)){ad(i,e,this.segmentMetadataTrack_);var r=bt.WebKitDataCue||bt.VTTCue,s={custom:n.custom,dateTimeObject:n.dateTimeObject,dateTimeString:n.dateTimeString,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:i,end:e},o=new r(i,e,JSON.stringify(s));o.value=s,this.segmentMetadataTrack_.addCue(o)}}},n}(sl.EventTarget);function pd(){}var md,gd=function(t){return"string"!=typeof t?t:t.replace(/./,(function(t){return t.toUpperCase()}))},bd=["video","audio"],yd=function(t,n){var i=n[t+"Buffer"];return i&&i.updating||n.queuePending[t]},jd=function t(n,i){if(0!==i.queue.length){var e=0,r=i.queue[e];if("mediaSource"!==r.type){if("mediaSource"!==n&&i.ready()&&"closed"!==i.mediaSource.readyState&&!yd(n,i)){if(r.type!==n){if(null===(e=function(t,n){for(var i=0;i<n.length;i++){var e=n[i];if("mediaSource"===e.type)return null;if(e.type===t)return i}return null}(n,i.queue)))return;r=i.queue[e]}return i.queue.splice(e,1),i.queuePending[n]=r,r.action(n,i),r.doneFn?void 0:(i.queuePending[n]=null,void t(n,i))}}else i.updating()||"closed"===i.mediaSource.readyState||(i.queue.shift(),r.action(i),r.doneFn&&r.doneFn(),t("audio",i),t("video",i))}},wd=function(t,n){var i=n[t+"Buffer"],e=gd(t);i&&(i.removeEventListener("updateend",n["on"+e+"UpdateEnd_"]),i.removeEventListener("error",n["on"+e+"Error_"]),n.codecs[t]=null,n[t+"Buffer"]=null)},Td=function(t,n){return t&&n&&-1!==Array.prototype.indexOf.call(t.sourceBuffers,n)},Ad=function(t,n,i){return function(e,r){var s=r[e+"Buffer"];if(Td(r.mediaSource,s)){r.logger_("Appending segment "+n.mediaIndex+"'s "+t.length+" bytes to "+e+"Buffer");try{s.appendBuffer(t)}catch(t){r.logger_("Error with code "+t.code+" "+(22===t.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+n.mediaIndex+" to "+e+"Buffer"),r.queuePending[e]=null,i(t)}}}},kd=function(t,n){return function(i,e){var r=e[i+"Buffer"];if(Td(e.mediaSource,r)){e.logger_("Removing "+t+" to "+n+" from "+i+"Buffer");try{r.remove(t,n)}catch(r){e.logger_("Remove "+t+" to "+n+" from "+i+"Buffer failed")}}}},xd=function(t){return function(n,i){var e=i[n+"Buffer"];Td(i.mediaSource,e)&&(i.logger_("Setting "+n+"timestampOffset to "+t),e.timestampOffset=t)}},Sd=function(t){return function(n,i){t()}},Ed=function(t){return function(n){if("open"===n.mediaSource.readyState){n.logger_("Calling mediaSource endOfStream("+(t||"")+")");try{n.mediaSource.endOfStream(t)}catch(t){sl.log.warn("Failed to call media source endOfStream",t)}}}},Id=function(t){return function(n){n.logger_("Setting mediaSource duration to "+t);try{n.mediaSource.duration=t}catch(t){sl.log.warn("Failed to set media source duration",t)}}},Od=function(){return function(t,n){if("open"===n.mediaSource.readyState){var i=n[t+"Buffer"];if(Td(n.mediaSource,i)){n.logger_("calling abort on "+t+"Buffer");try{i.abort()}catch(n){sl.log.warn("Failed to abort on "+t+"Buffer",n)}}}}},Dd=function(t,n){return function(i){var e=gd(t),r=Zi(n);i.logger_("Adding "+t+"Buffer with codec "+n+" to mediaSource");var s=i.mediaSource.addSourceBuffer(r);s.addEventListener("updateend",i["on"+e+"UpdateEnd_"]),s.addEventListener("error",i["on"+e+"Error_"]),i.codecs[t]=n,i[t+"Buffer"]=s}},Nd=function(t){return function(n){var i=n[t+"Buffer"];if(wd(t,n),Td(n.mediaSource,i)){n.logger_("Removing "+t+"Buffer with codec "+n.codecs[t]+" from mediaSource");try{n.mediaSource.removeSourceBuffer(i)}catch(n){sl.log.warn("Failed to removeSourceBuffer "+t+"Buffer",n)}}}},Md=function(t){return function(n,i){var e=i[n+"Buffer"],r=Zi(t);Td(i.mediaSource,e)&&i.codecs[n]!==t&&(i.logger_("changing "+n+"Buffer codec from "+i.codecs[n]+" to "+t),e.changeType(r),i.codecs[n]=t)}},Cd=function(t){var n=t.type,i=t.sourceUpdater,e=t.action,r=t.doneFn,s=t.name;i.queue.push({type:n,action:e,doneFn:r,name:s}),jd(n,i)},Rd=function(t,n){return function(i){if(n.queuePending[t]){var e=n.queuePending[t].doneFn;n.queuePending[t]=null,e&&e(n[t+"Error_"])}jd(t,n)}},Ud=function(t){function n(n){var i;return(i=t.call(this)||this).mediaSource=n,i.sourceopenListener_=function(){return jd("mediaSource",mn(i))},i.mediaSource.addEventListener("sourceopen",i.sourceopenListener_),i.logger_=cl("SourceUpdater"),i.audioTimestampOffset_=0,i.videoTimestampOffset_=0,i.queue=[],i.queuePending={audio:null,video:null},i.delayedAudioAppendQueue_=[],i.videoAppendQueued_=!1,i.codecs={},i.onVideoUpdateEnd_=Rd("video",mn(i)),i.onAudioUpdateEnd_=Rd("audio",mn(i)),i.onVideoError_=function(t){i.videoError_=t},i.onAudioError_=function(t){i.audioError_=t},i.createdSourceBuffers_=!1,i.initializedEme_=!1,i.triggeredReady_=!1,i}yn(n,t);var i=n.prototype;return i.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},i.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},i.hasInitializedAnyEme=function(){return this.initializedEme_},i.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},i.createSourceBuffers=function(t){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(t),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},i.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},i.addSourceBuffer=function(t,n){Cd({type:"mediaSource",sourceUpdater:this,action:Dd(t,n),name:"addSourceBuffer"})},i.abort=function(t){Cd({type:t,sourceUpdater:this,action:Od(t),name:"abort"})},i.removeSourceBuffer=function(t){this.canRemoveSourceBuffer()?Cd({type:"mediaSource",sourceUpdater:this,action:Nd(t),name:"removeSourceBuffer"}):sl.log.error("removeSourceBuffer is not supported!")},i.canRemoveSourceBuffer=function(){return!sl.browser.IE_VERSION&&!sl.browser.IS_FIREFOX&&bt.MediaSource&&bt.MediaSource.prototype&&"function"==typeof bt.MediaSource.prototype.removeSourceBuffer},n.canChangeType=function(){return bt.SourceBuffer&&bt.SourceBuffer.prototype&&"function"==typeof bt.SourceBuffer.prototype.changeType},i.canChangeType=function(){return this.constructor.canChangeType()},i.changeType=function(t,n){this.canChangeType()?Cd({type:t,sourceUpdater:this,action:Md(n),name:"changeType"}):sl.log.error("changeType is not supported!")},i.addOrChangeSourceBuffers=function(t){var n=this;if(!t||"object"!=typeof t||0===Object.keys(t).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(t).forEach((function(i){var e=t[i];if(!n.hasCreatedSourceBuffers())return n.addSourceBuffer(i,e);n.canChangeType()&&n.changeType(i,e)}))},i.appendBuffer=function(t,n){var i=this,e=t.segmentInfo,r=t.type,s=t.bytes;if(this.processedAppend_=!0,"audio"===r&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([t,n]),void this.logger_("delayed audio append of "+s.length+" until video append");if(Cd({type:r,sourceUpdater:this,action:Ad(s,e||{mediaIndex:-1},n),doneFn:n,name:"appendBuffer"}),"video"===r){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var o=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+o.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,o.forEach((function(t){i.appendBuffer.apply(i,t)}))}},i.audioBuffered=function(){return Td(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:sl.createTimeRange()},i.videoBuffered=function(){return Td(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:sl.createTimeRange()},i.buffered=function(){var t=Td(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,n=Td(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return n&&!t?this.audioBuffered():t&&!n?this.videoBuffered():function(t,n){var i=null,e=null,r=0,s=[],o=[];if(!(t&&t.length&&n&&n.length))return sl.createTimeRange();for(var a=t.length;a--;)s.push({time:t.start(a),type:"start"}),s.push({time:t.end(a),type:"end"});for(a=n.length;a--;)s.push({time:n.start(a),type:"start"}),s.push({time:n.end(a),type:"end"});for(s.sort((function(t,n){return t.time-n.time})),a=0;a<s.length;a++)"start"===s[a].type?2==++r&&(i=s[a].time):"end"===s[a].type&&1==--r&&(e=s[a].time),null!==i&&null!==e&&(o.push([i,e]),i=null,e=null);return sl.createTimeRanges(o)}(this.audioBuffered(),this.videoBuffered())},i.setDuration=function(t,n){void 0===n&&(n=pd),Cd({type:"mediaSource",sourceUpdater:this,action:Id(t),name:"duration",doneFn:n})},i.endOfStream=function(t,n){void 0===t&&(t=null),void 0===n&&(n=pd),"string"!=typeof t&&(t=void 0),Cd({type:"mediaSource",sourceUpdater:this,action:Ed(t),name:"endOfStream",doneFn:n})},i.removeAudio=function(t,n,i){void 0===i&&(i=pd),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?Cd({type:"audio",sourceUpdater:this,action:kd(t,n),doneFn:i,name:"remove"}):i()},i.removeVideo=function(t,n,i){void 0===i&&(i=pd),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?Cd({type:"video",sourceUpdater:this,action:kd(t,n),doneFn:i,name:"remove"}):i()},i.updating=function(){return!(!yd("audio",this)&&!yd("video",this))},i.audioTimestampOffset=function(t){return void 0!==t&&this.audioBuffer&&this.audioTimestampOffset_!==t&&(Cd({type:"audio",sourceUpdater:this,action:xd(t),name:"timestampOffset"}),this.audioTimestampOffset_=t),this.audioTimestampOffset_},i.videoTimestampOffset=function(t){return void 0!==t&&this.videoBuffer&&this.videoTimestampOffset!==t&&(Cd({type:"video",sourceUpdater:this,action:xd(t),name:"timestampOffset"}),this.videoTimestampOffset_=t),this.videoTimestampOffset_},i.audioQueueCallback=function(t){this.audioBuffer&&Cd({type:"audio",sourceUpdater:this,action:Sd(t),name:"callback"})},i.videoQueueCallback=function(t){this.videoBuffer&&Cd({type:"video",sourceUpdater:this,action:Sd(t),name:"callback"})},i.dispose=function(){var t=this;this.trigger("dispose"),bd.forEach((function(n){t.abort(n),t.canRemoveSourceBuffer()?t.removeSourceBuffer(n):t[n+"QueueCallback"]((function(){return wd(n,t)}))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},n}(sl.EventTarget),Pd=function(t){return decodeURIComponent(escape(String.fromCharCode.apply(null,t)))},Ld=new Uint8Array("\n\n".split("").map((function(t){return t.charCodeAt(0)}))),Bd=function(t){function n(n,i){var e;return void 0===i&&(i={}),(e=t.call(this,n,i)||this).mediaSource_=null,e.subtitlesTrack_=null,e.loaderType_="subtitle",e.featuresNativeTextTracks_=n.featuresNativeTextTracks,e.shouldSaveSegmentTimingInfo_=!1,e}yn(n,t);var i=n.prototype;return i.createTransmuxer_=function(){return null},i.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return sl.createTimeRanges();var t=this.subtitlesTrack_.cues,n=t[0].startTime,i=t[t.length-1].startTime;return sl.createTimeRanges([[n,i]])},i.initSegmentForMap=function(t,n){if(void 0===n&&(n=!1),!t)return null;var i=ov(t),e=this.initSegments_[i];if(n&&!e&&t.bytes){var r=Ld.byteLength+t.bytes.byteLength,s=new Uint8Array(r);s.set(t.bytes),s.set(Ld,t.bytes.byteLength),this.initSegments_[i]=e={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:s}}return e||t},i.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.track=function(t){return void 0===t||(this.subtitlesTrack_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},i.remove=function(t,n){ad(t,n,this.subtitlesTrack_)},i.fillBuffer_=function(){var t=this,n=this.chooseNextRequest_();if(n){if(null===this.syncController_.timestampOffsetForTimeline(n.timeline)){return this.syncController_.one("timestampoffset",(function(){t.state="READY",t.paused()||t.monitorBuffer_()})),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(n)}},i.timestampOffsetForSegment_=function(){return null},i.chooseNextRequest_=function(){return this.skipEmptySegments_(t.prototype.chooseNextRequest_.call(this))},i.skipEmptySegments_=function(t){for(;t&&t.segment.empty;){if(t.mediaIndex+1>=t.playlist.segments.length){t=null;break}t=this.generateSegmentInfo_({playlist:t.playlist,mediaIndex:t.mediaIndex+1,startOfSegment:t.startOfSegment+t.duration,isSyncRequest:t.isSyncRequest})}return t},i.stopForError=function(t){this.error(t),this.state="READY",this.pause(),this.trigger("error")},i.segmentRequestFinished_=function(t,n,i){var e=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(n.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(t)return t.code===Uv&&this.handleTimeout_(),t.code===Pv?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(t);var r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,n.stats),this.state="APPENDING",this.trigger("appending");var s=r.segment;if(s.map&&(s.map.bytes=n.map.bytes),r.bytes=n.bytes,"function"!=typeof bt.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var o,a=function(){e.subtitlesTrack_.tech_.off("vttjsloaded",o),e.stopForError({message:"Error loading vtt.js"})};return o=function(){e.subtitlesTrack_.tech_.off("vttjserror",a),e.segmentRequestFinished_(t,n,i)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",o),void this.subtitlesTrack_.tech_.one("vttjserror",a)}s.requested=!0;try{this.parseVTTCues_(r)}catch(t){return void this.stopForError({message:t.message})}if(this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_),r.cues.length?r.timingInfo={start:r.cues[0].startTime,end:r.cues[r.cues.length-1].endTime}:r.timingInfo={start:r.startOfSegment,end:r.startOfSegment+r.duration},r.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");r.byteLength=r.bytes.byteLength,this.mediaSecondsLoaded+=s.duration,r.cues.forEach((function(t){e.subtitlesTrack_.addCue(e.featuresNativeTextTracks_?new bt.VTTCue(t.startTime,t.endTime,t.text):t)})),function(t){var n=t.cues;if(n)for(var i=0;i<n.length;i++){for(var e=[],r=0,s=0;s<n.length;s++)n[i].startTime===n[s].startTime&&n[i].endTime===n[s].endTime&&n[i].text===n[s].text&&++r>1&&e.push(n[s]);e.length&&e.forEach((function(n){return t.removeCue(n)}))}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},i.handleData_=function(){},i.updateTimingInfoEnd_=function(){},i.parseVTTCues_=function(t){var n,i=!1;"function"==typeof bt.TextDecoder?n=new bt.TextDecoder("utf8"):(n=bt.WebVTT.StringDecoder(),i=!0);var e=new bt.WebVTT.Parser(bt,bt.vttjs,n);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},e.oncue=t.cues.push.bind(t.cues),e.ontimestampmap=function(n){t.timestampmap=n},e.onparsingerror=function(t){sl.log.warn("Error encountered when parsing cues: "+t.message)},t.segment.map){var r=t.segment.map.bytes;i&&(r=Pd(r)),e.parse(r)}var s=t.bytes;i&&(s=Pd(s)),e.parse(s),e.flush()},i.updateTimeMapping_=function(t,n,i){var e=t.segment;if(n)if(t.cues.length){var r=t.timestampmap,s=r.MPEGTS/Jo-r.LOCAL+n.mapping;if(t.cues.forEach((function(t){t.startTime+=s,t.endTime+=s})),!i.syncInfo){var o=t.cues[0].startTime,a=t.cues[t.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+t.mediaIndex,time:Math.min(o,a-e.duration)}}}else e.empty=!0},n}(dd),Fd=function(t,n){for(var i=t.cues,e=0;e<i.length;e++){var r=i[e];if(n>=r.adStartTime&&n<=r.adEndTime)return r}return null},_d=[{name:"VOD",run:function(t,n,i,e,r){if(i!==1/0){return{time:0,segmentIndex:0,partIndex:null}}return null}},{name:"ProgramDateTime",run:function(t,n,i,e,r){if(!Object.keys(t.timelineToDatetimeMappings).length)return null;var s=null,o=null,a=jl(n);r=r||0;for(var u=0;u<a.length;u++){var h=a[n.endList||0===r?u:a.length-(u+1)],c=h.segment,f=t.timelineToDatetimeMappings[c.timeline];if(f&&c.dateTimeObject){var l=c.dateTimeObject.getTime()/1e3+f;if(c.parts&&"number"==typeof h.partIndex)for(var v=0;v<h.partIndex;v++)l+=c.parts[v].duration;var d=Math.abs(r-l);if(null!==o&&(0===d||o<d))break;o=d,s={time:l,segmentIndex:h.segmentIndex,partIndex:h.partIndex}}}return s}},{name:"Segment",run:function(t,n,i,e,r){var s=null,o=null;r=r||0;for(var a=jl(n),u=0;u<a.length;u++){var h=a[n.endList||0===r?u:a.length-(u+1)],c=h.segment,f=h.part&&h.part.start||c&&c.start;if(c.timeline===e&&void 0!==f){var l=Math.abs(r-f);if(null!==o&&o<l)break;(!s||null===o||o>=l)&&(o=l,s={time:f,segmentIndex:h.segmentIndex,partIndex:h.partIndex})}}return s}},{name:"Discontinuity",run:function(t,n,i,e,r){var s=null;if(r=r||0,n.discontinuityStarts&&n.discontinuityStarts.length)for(var o=null,a=0;a<n.discontinuityStarts.length;a++){var u=n.discontinuityStarts[a],h=n.discontinuitySequence+a+1,c=t.discontinuities[h];if(c){var f=Math.abs(r-c.time);if(null!==o&&o<f)break;(!s||null===o||o>=f)&&(o=f,s={time:c.time,segmentIndex:u,partIndex:null})}}return s}},{name:"Playlist",run:function(t,n,i,e,r){return n.syncInfo?{time:n.syncInfo.time,segmentIndex:n.syncInfo.mediaSequence-n.mediaSequence,partIndex:null}:null}}],zd=function(t){function n(n){var i;return(i=t.call(this)||this).timelines=[],i.discontinuities=[],i.timelineToDatetimeMappings={},i.logger_=cl("SyncController"),i}yn(n,t);var i=n.prototype;return i.getSyncPoint=function(t,n,i,e){var r=this.runStrategies_(t,n,i,e);return r.length?this.selectSyncPoint_(r,{key:"time",value:e}):null},i.getExpiredTime=function(t,n){if(!t||!t.segments)return null;var i=this.runStrategies_(t,n,t.discontinuitySequence,0);if(!i.length)return null;var e=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return e.segmentIndex>0&&(e.time*=-1),Math.abs(e.time+Sl({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.segmentIndex,endIndex:0}))},i.runStrategies_=function(t,n,i,e){for(var r=[],s=0;s<_d.length;s++){var o=_d[s],a=o.run(this,t,n,i,e);a&&(a.strategy=o.name,r.push({strategy:o.name,syncPoint:a}))}return r},i.selectSyncPoint_=function(t,n){for(var i=t[0].syncPoint,e=Math.abs(t[0].syncPoint[n.key]-n.value),r=t[0].strategy,s=1;s<t.length;s++){var o=Math.abs(t[s].syncPoint[n.key]-n.value);o<e&&(e=o,i=t[s].syncPoint,r=t[s].strategy)}return this.logger_("syncPoint for ["+n.key+": "+n.value+"] chosen with strategy ["+r+"]: [time:"+i.time+", segmentIndex:"+i.segmentIndex+("number"==typeof i.partIndex?",partIndex:"+i.partIndex:"")+"]"),i},i.saveExpiredSegmentInfo=function(t,n){var i=n.mediaSequence-t.mediaSequence;if(i>86400)sl.log.warn("Not saving expired segment info. Media sequence gap "+i+" is too large.");else for(var e=i-1;e>=0;e--){var r=t.segments[e];if(r&&void 0!==r.start){n.syncInfo={mediaSequence:t.mediaSequence+e,time:r.start},this.logger_("playlist refresh sync: [time:"+n.syncInfo.time+", mediaSequence: "+n.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},i.setDateTimeMappingForStart=function(t){if(this.timelineToDatetimeMappings={},t.segments&&t.segments.length&&t.segments[0].dateTimeObject){var n=t.segments[0],i=n.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[n.timeline]=-i}},i.saveSegmentTimingInfo=function(t){var n=t.segmentInfo,i=t.shouldSaveTimelineMapping,e=this.calculateSegmentTimeMapping_(n,n.timingInfo,i),r=n.segment;e&&(this.saveDiscontinuitySyncInfo_(n),n.playlist.syncInfo||(n.playlist.syncInfo={mediaSequence:n.playlist.mediaSequence+n.mediaIndex,time:r.start}));var s=r.dateTimeObject;r.discontinuity&&i&&s&&(this.timelineToDatetimeMappings[r.timeline]=-s.getTime()/1e3)},i.timestampOffsetForTimeline=function(t){return void 0===this.timelines[t]?null:this.timelines[t].time},i.mappingForTimeline=function(t){return void 0===this.timelines[t]?null:this.timelines[t].mapping},i.calculateSegmentTimeMapping_=function(t,n,i){var e,r,s=t.segment,o=t.part,a=this.timelines[t.timeline];if("number"==typeof t.timestampOffset)a={time:t.startOfSegment,mapping:t.startOfSegment-n.start},i&&(this.timelines[t.timeline]=a,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+t.timeline+": [time: "+a.time+"] [mapping: "+a.mapping+"]")),e=t.startOfSegment,r=n.end+a.mapping;else{if(!a)return!1;e=n.start+a.mapping,r=n.end+a.mapping}return o&&(o.start=e,o.end=r),(!s.start||e<s.start)&&(s.start=e),s.end=r,!0},i.saveDiscontinuitySyncInfo_=function(t){var n=t.playlist,i=t.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(n.discontinuityStarts&&n.discontinuityStarts.length)for(var e=0;e<n.discontinuityStarts.length;e++){var r=n.discontinuityStarts[e],s=n.discontinuitySequence+e+1,o=r-t.mediaIndex,a=Math.abs(o);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>a){var u=void 0;u=o<0?i.start-Sl({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:t.mediaIndex,endIndex:r}):i.end+Sl({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:t.mediaIndex+1,endIndex:r}),this.discontinuities[s]={time:u,accuracy:a}}}},i.dispose=function(){this.trigger("dispose"),this.off()},n}(sl.EventTarget),Vd=function(t){function n(){var n;return(n=t.call(this)||this).pendingTimelineChanges_={},n.lastTimelineChanges_={},n}yn(n,t);var i=n.prototype;return i.clearPendingTimelineChange=function(t){this.pendingTimelineChanges_[t]=null,this.trigger("pendingtimelinechange")},i.pendingTimelineChange=function(t){var n=t.type,i=t.from,e=t.to;return"number"==typeof i&&"number"==typeof e&&(this.pendingTimelineChanges_[n]={type:n,from:i,to:e},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[n]},i.lastTimelineChange=function(t){var n=t.type,i=t.from,e=t.to;return"number"==typeof i&&"number"==typeof e&&(this.lastTimelineChanges_[n]={type:n,from:i,to:e},delete this.pendingTimelineChanges_[n],this.trigger("timelinechange")),this.lastTimelineChanges_[n]},i.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},n}(sl.EventTarget),Hd=Tv(Av(kv((function(){function t(t,n,i){return t(i={path:n,exports:{},require:function(t,n){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==n&&i.path)}},i.exports),i.exports}var n=t((function(t){function n(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}t.exports=function(t,i,e){return i&&n(t.prototype,i),e&&n(t,e),t},t.exports.default=t.exports,t.exports.g=!0})),i=t((function(t){function n(i,e){return t.exports=n=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},t.exports.default=t.exports,t.exports.g=!0,n(i,e)}t.exports=n,t.exports.default=t.exports,t.exports.g=!0})),e=t((function(t){t.exports=function(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n)},t.exports.default=t.exports,t.exports.g=!0})),r=function(){function t(){this.listeners={}}var n=t.prototype;return n.on=function(t,n){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(n)},n.off=function(t,n){if(!this.listeners[t])return!1;var i=this.listeners[t].indexOf(n);return this.listeners[t]=this.listeners[t].slice(0),this.listeners[t].splice(i,1),i>-1},n.trigger=function(t){var n=this.listeners[t];if(n)if(2===arguments.length)for(var i=n.length,e=0;e<i;++e)n[e].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),s=n.length,o=0;o<s;++o)n[o].apply(this,r)},n.dispose=function(){this.listeners={}},n.pipe=function(t){this.on("data",(function(n){t.push(n)}))},t}();
/*! @name aes-decrypter @version 3.1.2 @license Apache-2.0 */
var s=null,o=function(){function t(t){var n,i,e;s||(s=function(){var t,n,i,e,r,s,o,a,u=[[[],[],[],[],[]],[[],[],[],[],[]]],h=u[0],c=u[1],f=h[4],l=c[4],v=[],d=[];for(t=0;t<256;t++)d[(v[t]=t<<1^283*(t>>7))^t]=t;for(n=i=0;!f[n];n^=e||1,i=d[i]||1)for(s=(s=i^i<<1^i<<2^i<<3^i<<4)>>8^255&s^99,f[n]=s,l[s]=n,a=16843009*v[r=v[e=v[n]]]^65537*r^257*e^16843008*n,o=257*v[s]^16843008*s,t=0;t<4;t++)h[t][n]=o=o<<24^o>>>8,c[t][s]=a=a<<24^a>>>8;for(t=0;t<5;t++)h[t]=h[t].slice(0),c[t]=c[t].slice(0);return u}()),this._tables=[[s[0][0].slice(),s[0][1].slice(),s[0][2].slice(),s[0][3].slice(),s[0][4].slice()],[s[1][0].slice(),s[1][1].slice(),s[1][2].slice(),s[1][3].slice(),s[1][4].slice()]];var r=this._tables[0][4],o=this._tables[1],a=t.length,u=1;if(4!==a&&6!==a&&8!==a)throw new Error("Invalid aes key size");var h=t.slice(0),c=[];for(this._key=[h,c],n=a;n<4*a+28;n++)e=h[n-1],(n%a==0||8===a&&n%a==4)&&(e=r[e>>>24]<<24^r[e>>16&255]<<16^r[e>>8&255]<<8^r[255&e],n%a==0&&(e=e<<8^e>>>24^u<<24,u=u<<1^283*(u>>7))),h[n]=h[n-a]^e;for(i=0;n;i++,n--)e=h[3&i?n:n-4],c[i]=n<=4||i<4?e:o[0][r[e>>>24]]^o[1][r[e>>16&255]]^o[2][r[e>>8&255]]^o[3][r[255&e]]}return t.prototype.decrypt=function(t,n,i,e,r,s){var o,a,u,h,c=this._key[1],f=t^c[0],l=e^c[1],v=i^c[2],d=n^c[3],p=c.length/4-2,m=4,g=this._tables[1],b=g[0],y=g[1],j=g[2],w=g[3],T=g[4];for(h=0;h<p;h++)o=b[f>>>24]^y[l>>16&255]^j[v>>8&255]^w[255&d]^c[m],a=b[l>>>24]^y[v>>16&255]^j[d>>8&255]^w[255&f]^c[m+1],u=b[v>>>24]^y[d>>16&255]^j[f>>8&255]^w[255&l]^c[m+2],d=b[d>>>24]^y[f>>16&255]^j[l>>8&255]^w[255&v]^c[m+3],m+=4,f=o,l=a,v=u;for(h=0;h<4;h++)r[(3&-h)+s]=T[f>>>24]<<24^T[l>>16&255]<<16^T[v>>8&255]<<8^T[255&d]^c[m++],o=f,f=l,l=v,v=d,d=o},t}(),a=function(t){function n(){var n;return(n=t.call(this,r)||this).jobs=[],n.delay=1,n.timeout_=null,n}e(n,t);var i=n.prototype;return i.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},i.push=function(t){this.jobs.push(t),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},n}(r),u=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},h=function(){function t(n,i,e,r){var s=t.STEP,o=new Int32Array(n.buffer),h=new Uint8Array(n.byteLength),c=0;for(this.asyncStream_=new a,this.asyncStream_.push(this.decryptChunk_(o.subarray(c,c+s),i,e,h)),c=s;c<o.length;c+=s)e=new Uint32Array([u(o[c-4]),u(o[c-3]),u(o[c-2]),u(o[c-1])]),this.asyncStream_.push(this.decryptChunk_(o.subarray(c,c+s),i,e,h));this.asyncStream_.push((function(){
/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */
var t;r(null,(t=h).subarray(0,t.byteLength-t[t.byteLength-1]))}))}return t.prototype.decryptChunk_=function(t,n,i,e){return function(){var r=function(t,n,i){var e,r,s,a,h,c,f,l,v,d=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2),p=new o(Array.prototype.slice.call(n)),m=new Uint8Array(t.byteLength),g=new Int32Array(m.buffer);for(e=i[0],r=i[1],s=i[2],a=i[3],v=0;v<d.length;v+=4)h=u(d[v]),c=u(d[v+1]),f=u(d[v+2]),l=u(d[v+3]),p.decrypt(h,c,f,l,g,v),g[v]=u(g[v]^e),g[v+1]=u(g[v+1]^r),g[v+2]=u(g[v+2]^s),g[v+3]=u(g[v+3]^a),e=h,r=c,s=f,a=l;return m}(t,n,i);e.set(r,t.byteOffset)}},n(t,null,[{key:"STEP",get:function(){return 32e3}}]),t}();self.onmessage=function(t){var n=t.data,i=new Uint8Array(n.encrypted.bytes,n.encrypted.byteOffset,n.encrypted.byteLength),e=new Uint32Array(n.key.bytes,n.key.byteOffset,n.key.byteLength/4),r=new Uint32Array(n.iv.bytes,n.iv.byteOffset,n.iv.byteLength/4);new h(i,e,r,(function(t,i){var e,r;self.postMessage((e={source:n.source,decrypted:i},r={},Object.keys(e).forEach((function(t){var n=e[t];ArrayBuffer.isView(n)?r[t]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:r[t]=n})),r),[i.buffer])}))}})))),Xd=function(t){var n=t.default?"main":"alternative";return t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0&&(n="main-desc"),n},qd=function(t,n){t.abort(),t.pause(),n&&n.activePlaylistLoader&&(n.activePlaylistLoader.pause(),n.activePlaylistLoader=null)},Gd=function(t,n){n.activePlaylistLoader=t,t.load()},Wd={AUDIO:function(t,n){return function(){var i=n.segmentLoaders[t],e=n.mediaTypes[t],r=n.blacklistCurrentPlaylist;qd(i,e);var s=e.activeTrack(),o=e.activeGroup(),a=(o.filter((function(t){return t.default}))[0]||o[0]).id,u=e.tracks[a];if(s!==u){for(var h in sl.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),e.tracks)e.tracks[h].enabled=e.tracks[h]===u;e.onTrackChanged()}else r({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(t,n){return function(){var i=n.segmentLoaders[t],e=n.mediaTypes[t];sl.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),qd(i,e);var r=e.activeTrack();r&&(r.mode="disabled"),e.onTrackChanged()}}},Yd={AUDIO:function(t,n,i){if(n){var e=i.tech,r=i.requestOptions,s=i.segmentLoaders[t];n.on("loadedmetadata",(function(){var t=n.media();s.playlist(t,r),(!e.paused()||t.endList&&"none"!==e.preload())&&s.load()})),n.on("loadedplaylist",(function(){s.playlist(n.media(),r),e.paused()||s.load()})),n.on("error",Wd[t](t,i))}},SUBTITLES:function(t,n,i){var e=i.tech,r=i.requestOptions,s=i.segmentLoaders[t],o=i.mediaTypes[t];n.on("loadedmetadata",(function(){var t=n.media();s.playlist(t,r),s.track(o.activeTrack()),(!e.paused()||t.endList&&"none"!==e.preload())&&s.load()})),n.on("loadedplaylist",(function(){s.playlist(n.media(),r),e.paused()||s.load()})),n.on("error",Wd[t](t,i))}},Jd={AUDIO:function(t,n){var i=n.vhs,e=n.sourceType,r=n.segmentLoaders[t],s=n.requestOptions,o=n.master.mediaGroups,a=n.mediaTypes[t],u=a.groups,h=a.tracks,c=a.logger_,f=n.masterPlaylistLoader,l=Ul(f.master);for(var v in o[t]&&0!==Object.keys(o[t]).length||(o[t]={main:{default:{default:!0}}},l&&(o[t].main.default.playlists=f.master.playlists)),o[t])for(var d in u[v]||(u[v]=[]),o[t][v]){var p=o[t][v][d],m=void 0;if(l?(c("AUDIO group '"+v+"' label '"+d+"' is a master playlist"),p.isMasterPlaylist=!0,m=null):m="vhs-json"===e&&p.playlists?new Ql(p.playlists[0],i,s):p.resolvedUri?new Ql(p.resolvedUri,i,s):p.playlists&&"dash"===e?new yv(p.playlists[0],i,s,f):null,p=sl.mergeOptions({id:d,playlistLoader:m},p),Yd[t](t,p.playlistLoader,n),u[v].push(p),void 0===h[d]){var g=new sl.AudioTrack({id:d,kind:Xd(p),enabled:!1,language:p.language,default:p.default,label:d});h[d]=g}}r.on("error",Wd[t](t,n))},SUBTITLES:function(t,n){var i=n.tech,e=n.vhs,r=n.sourceType,s=n.segmentLoaders[t],o=n.requestOptions,a=n.master.mediaGroups,u=n.mediaTypes[t],h=u.groups,c=u.tracks,f=n.masterPlaylistLoader;for(var l in a[t])for(var v in h[l]||(h[l]=[]),a[t][l])if(!a[t][l][v].forced){var d=a[t][l][v],p=void 0;if("hls"===r)p=new Ql(d.resolvedUri,e,o);else if("dash"===r){if(!d.playlists.filter((function(t){return t.excludeUntil!==1/0})).length)return;p=new yv(d.playlists[0],e,o,f)}else"vhs-json"===r&&(p=new Ql(d.playlists?d.playlists[0]:d.resolvedUri,e,o));if(d=sl.mergeOptions({id:v,playlistLoader:p},d),Yd[t](t,d.playlistLoader,n),h[l].push(d),void 0===c[v]){var m=i.addRemoteTextTrack({id:v,kind:"subtitles",default:d.default&&d.autoselect,language:d.language,label:v},!1).track;c[v]=m}}s.on("error",Wd[t](t,n))},"CLOSED-CAPTIONS":function(t,n){var i=n.tech,e=n.master.mediaGroups,r=n.mediaTypes[t],s=r.groups,o=r.tracks;for(var a in e[t])for(var u in s[a]||(s[a]=[]),e[t][a]){var h=e[t][a][u];if(/^(?:CC|SERVICE)/.test(h.instreamId)){var c=i.options_.vhs&&i.options_.vhs.captionServices||{},f={label:u,language:h.language,instreamId:h.instreamId,default:h.default&&h.autoselect};if(c[f.instreamId]&&(f=sl.mergeOptions(f,c[f.instreamId])),void 0===f.default&&delete f.default,s[a].push(sl.mergeOptions({id:u},h)),void 0===o[u]){var l=i.addRemoteTextTrack({id:f.instreamId,kind:"captions",default:f.default,language:f.language,label:f.label},!1).track;o[u]=l}}}}},Qd=function t(n,i){for(var e=0;e<n.length;e++){if(Cl(i,n[e]))return!0;if(n[e].playlists&&t(n[e].playlists,i))return!0}return!1},$d={AUDIO:function(t,n){return function(){var i=n.mediaTypes[t].tracks;for(var e in i)if(i[e].enabled)return i[e];return null}},SUBTITLES:function(t,n){return function(){var i=n.mediaTypes[t].tracks;for(var e in i)if("showing"===i[e].mode||"hidden"===i[e].mode)return i[e];return null}}},Kd=function(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(n){Jd[n](n,t)}));var n=t.mediaTypes,i=t.masterPlaylistLoader,e=t.tech,r=t.vhs,s=t.segmentLoaders,o=s.AUDIO,a=s.main;["AUDIO","SUBTITLES"].forEach((function(i){n[i].activeGroup=function(t,n){return function(i){var e=n.masterPlaylistLoader,r=n.mediaTypes[t].groups,s=e.media();if(!s)return null;var o=null;s.attributes[t]&&(o=r[s.attributes[t]]);var a=Object.keys(r);if(!o)if("AUDIO"===t&&a.length>1&&Ul(n.master))for(var u=0;u<a.length;u++){var h=r[a[u]];if(Qd(h,s)){o=h;break}}else r.main?o=r.main:1===a.length&&(o=r[a[0]]);return void 0===i?o:null!==i&&o&&o.filter((function(t){return t.id===i.id}))[0]||null}}(i,t),n[i].activeTrack=$d[i](i,t),n[i].onGroupChanged=function(t,n){return function(){var i=n.segmentLoaders,e=i[t],r=i.main,s=n.mediaTypes[t],o=s.activeTrack(),a=s.getActiveGroup(),u=s.activePlaylistLoader,h=s.lastGroup_;a&&h&&a.id===h.id||(s.lastGroup_=a,s.lastTrack_=o,qd(e,s),a&&!a.isMasterPlaylist&&(a.playlistLoader?(e.resyncLoader(),Gd(a.playlistLoader,s)):u&&r.resetEverything()))}}(i,t),n[i].onGroupChanging=function(t,n){return function(){var i=n.segmentLoaders[t];n.mediaTypes[t].lastGroup_=null,i.abort(),i.pause()}}(i,t),n[i].onTrackChanged=function(t,n){return function(){var i=n.masterPlaylistLoader,e=n.segmentLoaders,r=e[t],s=e.main,o=n.mediaTypes[t],a=o.activeTrack(),u=o.getActiveGroup(),h=o.activePlaylistLoader,c=o.lastTrack_;if((!c||!a||c.id!==a.id)&&(o.lastGroup_=u,o.lastTrack_=a,qd(r,o),u)){if(u.isMasterPlaylist){if(!a||!c||a.id===c.id)return;var f=n.vhs.masterPlaylistController_,l=f.selectPlaylist();if(f.media()===l)return;return o.logger_("track change. Switching master audio from "+c.id+" to "+a.id),i.pause(),s.resetEverything(),void f.fastQualityChange_(l)}if("AUDIO"===t){if(!u.playlistLoader)return s.setAudio(!0),void s.resetEverything();r.setAudio(!0),s.setAudio(!1)}h!==u.playlistLoader?(r.track&&r.track(a),r.resetEverything(),Gd(u.playlistLoader,o)):Gd(u.playlistLoader,o)}}}(i,t),n[i].getActiveGroup=function(t,n){var i=n.mediaTypes;return function(){var n=i[t].activeTrack();return n?i[t].activeGroup(n):null}}(i,t)}));var u=n.AUDIO.activeGroup();if(u){var h=(u.filter((function(t){return t.default}))[0]||u[0]).id;n.AUDIO.tracks[h].enabled=!0,n.AUDIO.onGroupChanged(),n.AUDIO.onTrackChanged(),n.AUDIO.getActiveGroup().playlistLoader?(a.setAudio(!1),o.setAudio(!0)):a.setAudio(!0)}i.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(t){return n[t].onGroupChanged()}))})),i.on("mediachanging",(function(){["AUDIO","SUBTITLES"].forEach((function(t){return n[t].onGroupChanging()}))}));var c=function(){n.AUDIO.onTrackChanged(),e.trigger({type:"usage",name:"vhs-audio-change"}),e.trigger({type:"usage",name:"hls-audio-change"})};for(var f in e.audioTracks().addEventListener("change",c),e.remoteTextTracks().addEventListener("change",n.SUBTITLES.onTrackChanged),r.on("dispose",(function(){e.audioTracks().removeEventListener("change",c),e.remoteTextTracks().removeEventListener("change",n.SUBTITLES.onTrackChanged)})),e.clearTracks("audio"),n.AUDIO.tracks)e.audioTracks().addTrack(n.AUDIO.tracks[f])},Zd=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],tp=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]},np=function(t){function n(n){var i;i=t.call(this)||this;var e=n.src,r=n.handleManifestRedirects,s=n.withCredentials,o=n.tech,a=n.bandwidth,u=n.externVhs,h=n.useCueTags,c=n.blacklistDuration,f=n.enableLowInitialPlaylist,l=n.sourceType,v=n.cacheEncryptionKeys,d=n.experimentalBufferBasedABR,p=n.experimentalLeastPixelDiffSelector,m=n.captionServices;if(!e)throw new Error("A non-empty playlist URL or JSON manifest string is required");var g=n.maxPlaylistRetries;null==g&&(g=1/0),md=u,i.experimentalBufferBasedABR=Boolean(d),i.experimentalLeastPixelDiffSelector=Boolean(p),i.withCredentials=s,i.tech_=o,i.vhs_=o.vhs,i.sourceType_=l,i.useCueTags_=h,i.blacklistDuration=c,i.maxPlaylistRetries=g,i.enableLowInitialPlaylist=f,i.useCueTags_&&(i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues"),i.cueTagsTrack_.inBandMetadataTrackDispatchType=""),i.requestOptions_={withCredentials:s,handleManifestRedirects:r,maxPlaylistRetries:g,timeout:null},i.on("error",i.pauseLoading),i.mediaTypes_=function(){var t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(n){t[n]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:pd,activeTrack:pd,getActiveGroup:pd,onGroupChanged:pd,onTrackChanged:pd,lastTrack_:null,logger_:cl("MediaGroups["+n+"]")}})),t}(),i.mediaSource=new bt.MediaSource,i.handleDurationChange_=i.handleDurationChange_.bind(mn(i)),i.handleSourceOpen_=i.handleSourceOpen_.bind(mn(i)),i.handleSourceEnded_=i.handleSourceEnded_.bind(mn(i)),i.mediaSource.addEventListener("durationchange",i.handleDurationChange_),i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_),i.mediaSource.addEventListener("sourceended",i.handleSourceEnded_),i.seekable_=sl.createTimeRanges(),i.hasPlayed_=!1,i.syncController_=new zd(n),i.segmentMetadataTrack_=o.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new Hd,i.sourceUpdater_=new Ud(i.mediaSource),i.inbandTextTracks_={},i.timelineChangeController_=new Vd;var b={vhs:i.vhs_,parse708captions:n.parse708captions,captionServices:m,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.duration()},hasPlayed:function(){return i.hasPlayed_},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:a,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:v,sourceUpdater:i.sourceUpdater_,timelineChangeController:i.timelineChangeController_,experimentalExactManifestTimings:n.experimentalExactManifestTimings};i.masterPlaylistLoader_="dash"===i.sourceType_?new yv(e,i.vhs_,i.requestOptions_):new Ql(e,i.vhs_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=new dd(sl.mergeOptions(b,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),n),i.audioSegmentLoader_=new dd(sl.mergeOptions(b,{loaderType:"audio"}),n),i.subtitleSegmentLoader_=new Bd(sl.mergeOptions(b,{loaderType:"vtt",featuresNativeTextTracks:i.tech_.featuresNativeTextTracks}),n),i.setupSegmentLoaderListeners_(),i.experimentalBufferBasedABR&&(i.masterPlaylistLoader_.one("loadedplaylist",(function(){return i.startABRTimer_()})),i.tech_.on("pause",(function(){return i.stopABRTimer_()})),i.tech_.on("play",(function(){return i.startABRTimer_()}))),Zd.forEach((function(t){i[t+"_"]=tp.bind(mn(i),t)})),i.logger_=cl("MPC"),i.triggeredFmp4Usage=!1,"none"===i.tech_.preload()?(i.loadOnPlay_=function(){i.loadOnPlay_=null,i.masterPlaylistLoader_.load()},i.tech_.one("play",i.loadOnPlay_)):i.masterPlaylistLoader_.load(),i.timeToLoadedData__=-1,i.mainAppendsToLoadedData__=-1,i.audioAppendsToLoadedData__=-1;var y="none"===i.tech_.preload()?"play":"loadstart";return i.tech_.one(y,(function(){var t=Date.now();i.tech_.one("loadeddata",(function(){i.timeToLoadedData__=Date.now()-t,i.mainAppendsToLoadedData__=i.mainSegmentLoader_.mediaAppends,i.audioAppendsToLoadedData__=i.audioSegmentLoader_.mediaAppends}))})),i}yn(n,t);var i=n.prototype;return i.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},i.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},i.appendsToLoadedData_=function(){var t=this.mainAppendsToLoadedData_(),n=this.audioAppendsToLoadedData_();return-1===t||-1===n?-1:t+n},i.timeToLoadedData_=function(){return this.timeToLoadedData__},i.checkABR_=function(){var t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,"abr")},i.switchMedia_=function(t,n,i){var e=this.media(),r=e&&(e.id||e.uri),s=t.id||t.uri;r&&r!==s&&(this.logger_("switch media "+r+" -> "+s+" from "+n),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+n})),this.masterPlaylistLoader_.media(t,i)},i.startABRTimer_=function(){var t=this;this.stopABRTimer_(),this.abrTimer_=bt.setInterval((function(){return t.checkABR_()}),250)},i.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(bt.clearInterval(this.abrTimer_),this.abrTimer_=null)},i.getAudioTrackPlaylists_=function(){var t=this.master(),n=t&&t.playlists||[];if(!t||!t.mediaGroups||!t.mediaGroups.AUDIO)return n;var i,e=t.mediaGroups.AUDIO,r=Object.keys(e);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)i=this.mediaTypes_.AUDIO.activeTrack();else{var s=e.main||r.length&&e[r[0]];for(var o in s)if(s[o].default){i={label:o};break}}if(!i)return n;var a=[];for(var u in e)if(e[u][i.label]){var h=e[u][i.label];if(h.playlists&&h.playlists.length)a.push.apply(a,h.playlists);else if(h.uri)a.push(h);else if(t.playlists.length)for(var c=0;c<t.playlists.length;c++){var f=t.playlists[c];f.attributes&&f.attributes.AUDIO&&f.attributes.AUDIO===u&&a.push(f)}}return a.length?a:n},i.setupMasterPlaylistLoaderListeners_=function(){var t=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var n=t.masterPlaylistLoader_.media(),i=1.5*n.targetDuration*1e3;Ml(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?t.requestOptions_.timeout=0:t.requestOptions_.timeout=i,n.endList&&"none"!==t.tech_.preload()&&(t.mainSegmentLoader_.playlist(n,t.requestOptions_),t.mainSegmentLoader_.load()),Kd({sourceType:t.sourceType_,segmentLoaders:{AUDIO:t.audioSegmentLoader_,SUBTITLES:t.subtitleSegmentLoader_,main:t.mainSegmentLoader_},tech:t.tech_,requestOptions:t.requestOptions_,masterPlaylistLoader:t.masterPlaylistLoader_,vhs:t.vhs_,master:t.master(),mediaTypes:t.mediaTypes_,blacklistCurrentPlaylist:t.blacklistCurrentPlaylist.bind(t)}),t.triggerPresenceUsage_(t.master(),n),t.setupFirstPlay(),!t.mediaTypes_.AUDIO.activePlaylistLoader||t.mediaTypes_.AUDIO.activePlaylistLoader.media()?t.trigger("selectedinitialmedia"):t.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(function(){t.trigger("selectedinitialmedia")}))})),this.masterPlaylistLoader_.on("loadedplaylist",(function(){t.loadOnPlay_&&t.tech_.off("play",t.loadOnPlay_);var n=t.masterPlaylistLoader_.media();if(!n){var i;if(t.excludeUnsupportedVariants_(),t.enableLowInitialPlaylist&&(i=t.selectInitialPlaylist()),i||(i=t.selectPlaylist()),!i||!t.shouldSwitchToMedia_(i))return;if(t.initialMedia_=i,t.switchMedia_(t.initialMedia_,"initial"),!("vhs-json"===t.sourceType_&&t.initialMedia_.segments))return;n=t.initialMedia_}t.handleUpdatedMediaPlaylist(n)})),this.masterPlaylistLoader_.on("error",(function(){t.blacklistCurrentPlaylist(t.masterPlaylistLoader_.error)})),this.masterPlaylistLoader_.on("mediachanging",(function(){t.mainSegmentLoader_.abort(),t.mainSegmentLoader_.pause()})),this.masterPlaylistLoader_.on("mediachange",(function(){var n=t.masterPlaylistLoader_.media(),i=1.5*n.targetDuration*1e3;Ml(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?t.requestOptions_.timeout=0:t.requestOptions_.timeout=i,t.mainSegmentLoader_.playlist(n,t.requestOptions_),t.mainSegmentLoader_.load(),t.tech_.trigger({type:"mediachange",bubbles:!0})})),this.masterPlaylistLoader_.on("playlistunchanged",(function(){var n=t.masterPlaylistLoader_.media();"playlist-unchanged"!==n.lastExcludeReason_&&(t.stuckAtPlaylistEnd_(n)&&(t.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),t.tech_.trigger("playliststuck")))})),this.masterPlaylistLoader_.on("renditiondisabled",(function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),t.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})})),this.masterPlaylistLoader_.on("renditionenabled",(function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),t.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))},i.handleUpdatedMediaPlaylist=function(t){this.useCueTags_&&this.updateAdCues_(t),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.updateDuration(!t.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},i.triggerPresenceUsage_=function(t,n){var i=t.mediaGroups||{},e=!0,r=Object.keys(i.AUDIO);for(var s in i.AUDIO)for(var o in i.AUDIO[s]){i.AUDIO[s][o].uri||(e=!1)}e&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(i.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),md.Playlist.isAes(n)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),r.length&&Object.keys(i.AUDIO[r[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},i.shouldSwitchToMedia_=function(t){var n=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,i=this.tech_.currentTime(),e=this.bufferLowWaterLine(),r=this.bufferHighWaterLine();return function(t){var n=t.currentPlaylist,i=t.buffered,e=t.currentTime,r=t.nextPlaylist,s=t.bufferLowWaterLine,o=t.bufferHighWaterLine,a=t.duration,u=t.experimentalBufferBasedABR,h=t.log;if(!r)return sl.log.warn("We received no playlist to switch to. Please check your stream."),!1;var c="allowing switch "+(n&&n.id||"null")+" -> "+r.id;if(!n)return h(c+" as current playlist is not set"),!0;if(r.id===n.id)return!1;var f=Boolean(ll(i,e).length);if(!n.endList)return f||"number"!=typeof n.partTargetDuration?(h(c+" as current playlist is live"),!0):(h("not "+c+" as current playlist is live llhls, but currentTime isn't in buffered."),!1);var l=gl(i,e),v=u?jv.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:jv.MAX_BUFFER_LOW_WATER_LINE;if(a<v)return h(c+" as duration < max low water line ("+a+" < "+v+")"),!0;var d=r.attributes.BANDWIDTH,p=n.attributes.BANDWIDTH;if(d<p&&(!u||l<o)){var m=c+" as next bandwidth < current bandwidth ("+d+" < "+p+")";return u&&(m+=" and forwardBuffer < bufferHighWaterLine ("+l+" < "+o+")"),h(m),!0}if((!u||d>p)&&l>=s){var g=c+" as forwardBuffer >= bufferLowWaterLine ("+l+" >= "+s+")";return u&&(g+=" and next bandwidth > current bandwidth ("+d+" > "+p+")"),h(g),!0}return h("not "+c+" as no switching criteria met"),!1}({buffered:this.tech_.buffered(),currentTime:i,currentPlaylist:n,nextPlaylist:t,bufferLowWaterLine:e,bufferHighWaterLine:r,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},i.setupSegmentLoaderListeners_=function(){var t=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",(function(){var n=t.selectPlaylist();t.shouldSwitchToMedia_(n)&&t.switchMedia_(n,"bandwidthupdate"),t.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("progress",(function(){t.trigger("progress")}))),this.mainSegmentLoader_.on("error",(function(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())})),this.mainSegmentLoader_.on("appenderror",(function(){t.error=t.mainSegmentLoader_.error_,t.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(function(){t.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(function(){t.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),t.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(function(){t.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(function(){t.error=t.audioSegmentLoader_.error_,t.trigger("error")})),this.mainSegmentLoader_.on("ended",(function(){t.logger_("main segment loader ended"),t.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(n){t.experimentalBufferBasedABR||(t.delegateLoaders_("all",["abort"]),t.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))}));var n=function(){if(!t.sourceUpdater_.hasCreatedSourceBuffers())return t.tryToCreateSourceBuffers_();var n=t.getCodecsOrExclude_();n&&t.sourceUpdater_.addOrChangeSourceBuffers(n)};this.mainSegmentLoader_.on("trackinfo",n),this.audioSegmentLoader_.on("trackinfo",n),this.mainSegmentLoader_.on("fmp4",(function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(function(){t.logger_("audioSegmentLoader ended"),t.onEndOfStream()}))},i.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},i.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},i.smoothQualityChange_=function(t){void 0===t&&(t=this.selectPlaylist()),this.fastQualityChange_(t)},i.fastQualityChange_=function(t){var n=this;void 0===t&&(t=this.selectPlaylist()),t!==this.masterPlaylistLoader_.media()?(this.switchMedia_(t,"fast-quality"),this.mainSegmentLoader_.resetEverything((function(){sl.browser.IE_VERSION||sl.browser.IS_EDGE?n.tech_.setCurrentTime(n.tech_.currentTime()+.04):n.tech_.setCurrentTime(n.tech_.currentTime())}))):this.logger_("skipping fastQualityChange because new media is same as old")},i.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var t=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0)?this.tech_.setCurrentTime(t.end(t.length-1)):void 0}},i.setupFirstPlay=function(){var t=this,n=this.masterPlaylistLoader_.media();if(!n||this.tech_.paused()||this.hasPlayed_)return!1;if(!n.endList){var i=this.seekable();if(!i.length)return!1;if(sl.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(function(){t.trigger("firstplay"),t.tech_.setCurrentTime(i.end(0)),t.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(i.end(0))}return this.hasPlayed_=!0,this.load(),!0},i.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var t=this.tech_.play();void 0!==t&&"function"==typeof t.then&&t.then(null,(function(t){}))}this.trigger("sourceopen")},i.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var t=this.inbandTextTracks_.metadataTrack_.cues;if(t&&t.length){var n=this.duration();t[t.length-1].endTime=isNaN(n)||Math.abs(n)===1/0?Number.MAX_VALUE:n}}},i.handleDurationChange_=function(){this.tech_.trigger("durationchange")},i.onEndOfStream=function(){var t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var n=this.mainSegmentLoader_.getCurrentMediaInfo_();t=!n||n.hasVideo?t&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}t&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},i.stuckAtPlaylistEnd_=function(t){if(!this.seekable().length)return!1;var n=this.syncController_.getExpiredTime(t,this.duration());if(null===n)return!1;var i=md.Playlist.playlistEnd(t,n),e=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return i-e<=.1;var s=r.end(r.length-1);return s-e<=.1&&i-s<=.1},i.blacklistCurrentPlaylist=function(t,n){void 0===t&&(t={});var i=t.playlist||this.masterPlaylistLoader_.media();if(n=n||t.blacklistDuration||this.blacklistDuration,!i)return this.error=t,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));i.playlistErrors_++;var e,r=this.masterPlaylistLoader_.master.playlists,s=r.filter(Dl),o=1===s.length&&s[0]===i;if(1===r.length&&n!==1/0)return sl.log.warn("Problem encountered with playlist "+i.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(o);if(o){var a=!1;r.forEach((function(t){if(t!==i){var n=t.excludeUntil;void 0!==n&&n!==1/0&&(a=!0,delete t.excludeUntil)}})),a&&(sl.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}e=i.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*n,i.excludeUntil=e,t.reason&&(i.lastExcludeReason_=t.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var u=this.selectPlaylist();if(!u)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var h=t.internal?this.logger_:sl.log.warn,c=t.message?" "+t.message:"";h((t.internal?"Internal problem":"Problem")+" encountered with playlist "+i.id+"."+c+" Switching to playlist "+u.id+"."),u.attributes.AUDIO!==i.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),u.attributes.SUBTITLES!==i.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var f=u.targetDuration/2*1e3||5e3,l="number"==typeof u.lastRequest&&Date.now()-u.lastRequest<=f;return this.switchMedia_(u,"exclude",o||l)},i.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},i.delegateLoaders_=function(t,n){var i=this,e=[],r="all"===t;(r||"main"===t)&&e.push(this.masterPlaylistLoader_);var s=[];(r||"audio"===t)&&s.push("AUDIO"),(r||"subtitle"===t)&&(s.push("CLOSED-CAPTIONS"),s.push("SUBTITLES")),s.forEach((function(t){var n=i.mediaTypes_[t]&&i.mediaTypes_[t].activePlaylistLoader;n&&e.push(n)})),["main","audio","subtitle"].forEach((function(n){var r=i[n+"SegmentLoader_"];!r||t!==n&&"all"!==t||e.push(r)})),e.forEach((function(t){return n.forEach((function(n){"function"==typeof t[n]&&t[n]()}))}))},i.setCurrentTime=function(t){var n=ll(this.tech_.buffered(),t);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?n&&n.length?t:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},i.duration=function(){if(!this.masterPlaylistLoader_)return 0;var t=this.masterPlaylistLoader_.media();return t?t.endList?this.mediaSource?this.mediaSource.duration:md.Playlist.duration(t):1/0:0},i.seekable=function(){return this.seekable_},i.onSyncInfoUpdate_=function(){var t;if(this.masterPlaylistLoader_){var n=this.masterPlaylistLoader_.media();if(n){var i=this.syncController_.getExpiredTime(n,this.duration());if(null!==i){var e=this.masterPlaylistLoader_.master,r=md.Playlist.seekable(n,i,md.Playlist.liveEdgeDelay(e,n));if(0!==r.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(i=this.syncController_.getExpiredTime(n,this.duration())))return;if(0===(t=md.Playlist.seekable(n,i,md.Playlist.liveEdgeDelay(e,n))).length)return}var s,o;this.seekable_&&this.seekable_.length&&(s=this.seekable_.end(0),o=this.seekable_.start(0)),t?t.start(0)>r.end(0)||r.start(0)>t.end(0)?this.seekable_=r:this.seekable_=sl.createTimeRanges([[t.start(0)>r.start(0)?t.start(0):r.start(0),t.end(0)<r.end(0)?t.end(0):r.end(0)]]):this.seekable_=r,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===s&&this.seekable_.start(0)===o||(this.logger_("seekable updated ["+dl(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},i.updateDuration=function(t){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,t),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(t){var n=this.seekable();if(!n.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<n.end(n.length-1))&&this.sourceUpdater_.setDuration(n.end(n.length-1))}else{var i=this.tech_.buffered(),e=md.Playlist.duration(this.masterPlaylistLoader_.media());i.length>0&&(e=Math.max(e,i.end(i.length-1))),this.mediaSource.duration!==e&&this.sourceUpdater_.setDuration(e)}},i.dispose=function(){var t=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach((function(n){var i=t.mediaTypes_[n].groups;for(var e in i)i[e].forEach((function(t){t.playlistLoader&&t.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},i.master=function(){return this.masterPlaylistLoader_.master},i.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},i.areMediaTypesKnown_=function(){var t=!!this.mediaTypes_.AUDIO.activePlaylistLoader,n=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),i=!t||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!n||!i)},i.getCodecsOrExclude_=function(){var t=this,n={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};n.video=n.main;var i=Kv(this.master(),this.media()),e={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(n.main.hasVideo&&(e.video=i.video||n.main.videoCodec||"avc1.4d400d"),n.main.isMuxed&&(e.video+=","+(i.audio||n.main.audioCodec||"mp4a.40.2")),(n.main.hasAudio&&!n.main.isMuxed||n.audio.hasAudio||r)&&(e.audio=i.audio||n.main.audioCodec||n.audio.audioCodec||"mp4a.40.2",n.audio.isFmp4=n.main.hasAudio&&!n.main.isMuxed?n.main.isFmp4:n.audio.isFmp4),e.audio||e.video){var s,o={};if(["video","audio"].forEach((function(t){if(e.hasOwnProperty(t)&&(r=n[t].isFmp4,a=e[t],!(r?te(a):ne(a)))){var i=n[t].isFmp4?"browser":"muxer";o[i]=o[i]||[],o[i].push(e[t]),"audio"===t&&(s=i)}var r,a})),r&&s&&this.media().attributes.AUDIO){var a=this.media().attributes.AUDIO;this.master().playlists.forEach((function(n){(n.attributes&&n.attributes.AUDIO)===a&&n!==t.media()&&(n.excludeUntil=1/0)})),this.logger_("excluding audio group "+a+" as "+s+' does not support codec(s): "'+e.audio+'"')}if(!Object.keys(o).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var u=[];if(["video","audio"].forEach((function(n){var i=($i(t.sourceUpdater_.codecs[n]||"")[0]||{}).type,r=($i(e[n]||"")[0]||{}).type;i&&r&&i.toLowerCase()!==r.toLowerCase()&&u.push('"'+t.sourceUpdater_.codecs[n]+'" -> "'+e[n]+'"')})),u.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+u.join(", ")+".",blacklistDuration:1/0,internal:!0})}return e}var h=Object.keys(o).reduce((function(t,n){return t&&(t+=", "),t+=n+' does not support codec(s): "'+o[n].join(",")+'"'}),"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:h,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},i.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var t=this.getCodecsOrExclude_();if(t){this.sourceUpdater_.createSourceBuffers(t);var n=[t.video,t.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(n)}}},i.excludeUnsupportedVariants_=function(){var t=this,n=this.master().playlists,i=[];Object.keys(n).forEach((function(e){var r=n[e];if(-1===i.indexOf(r.id)){i.push(r.id);var s=Kv(t.master,r),o=[];!s.audio||ne(s.audio)||te(s.audio)||o.push("audio codec "+s.audio),!s.video||ne(s.video)||te(s.video)||o.push("video codec "+s.video),s.text&&"stpp.ttml.im1t"===s.text&&o.push("text codec "+s.text),o.length&&(r.excludeUntil=1/0,t.logger_("excluding "+r.id+" for unsupported: "+o.join(", ")))}}))},i.excludeIncompatibleVariants_=function(t){var n=this,i=[],e=this.master().playlists,r=Qv($i(t)),s=$v(r),o=r.video&&$i(r.video)[0]||null,a=r.audio&&$i(r.audio)[0]||null;Object.keys(e).forEach((function(t){var r=e[t];if(-1===i.indexOf(r.id)&&r.excludeUntil!==1/0){i.push(r.id);var u=[],h=Kv(n.masterPlaylistLoader_.master,r),c=$v(h);if(h.audio||h.video){if(c!==s&&u.push('codec count "'+c+'" !== "'+s+'"'),!n.sourceUpdater_.canChangeType()){var f=h.video&&$i(h.video)[0]||null,l=h.audio&&$i(h.audio)[0]||null;f&&o&&f.type.toLowerCase()!==o.type.toLowerCase()&&u.push('video codec "'+f.type+'" !== "'+o.type+'"'),l&&a&&l.type.toLowerCase()!==a.type.toLowerCase()&&u.push('audio codec "'+l.type+'" !== "'+a.type+'"')}u.length&&(r.excludeUntil=1/0,n.logger_("blacklisting "+r.id+": "+u.join(" && ")))}}}))},i.updateAdCues_=function(t){var n=0,i=this.seekable();i.length&&(n=i.start(0)),function(t,n,i){if(void 0===i&&(i=0),t.segments)for(var e,r=i,s=0;s<t.segments.length;s++){var o=t.segments[s];if(e||(e=Fd(n,r+o.duration/2)),e){if("cueIn"in o){e.endTime=r,e.adEndTime=r,r+=o.duration,e=null;continue}if(r<e.endTime){r+=o.duration;continue}e.endTime+=o.duration}else if("cueOut"in o&&((e=new bt.VTTCue(r,r+o.duration,o.cueOut)).adStartTime=r,e.adEndTime=r+parseFloat(o.cueOut),n.addCue(e)),"cueOutCont"in o){var a=o.cueOutCont.split("/").map(parseFloat),u=a[0],h=a[1];(e=new bt.VTTCue(r,r+o.duration,"")).adStartTime=r-u,e.adEndTime=e.adStartTime+h,n.addCue(e)}r+=o.duration}}(t,this.cueTagsTrack_,n)},i.goalBufferLength=function(){var t=this.tech_.currentTime(),n=jv.GOAL_BUFFER_LENGTH,i=jv.GOAL_BUFFER_LENGTH_RATE,e=Math.max(n,jv.MAX_GOAL_BUFFER_LENGTH);return Math.min(n+t*i,e)},i.bufferLowWaterLine=function(){var t=this.tech_.currentTime(),n=jv.BUFFER_LOW_WATER_LINE,i=jv.BUFFER_LOW_WATER_LINE_RATE,e=Math.max(n,jv.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(n,jv.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(n+t*i,this.experimentalBufferBasedABR?r:e)},i.bufferHighWaterLine=function(){return jv.BUFFER_HIGH_WATER_LINE},n}(sl.EventTarget),ip=function(t,n,i){var e,r,s,o=t.masterPlaylistController_,a=o[(t.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(o);if(n.attributes){var u=n.attributes.RESOLUTION;this.width=u&&u.width,this.height=u&&u.height,this.bandwidth=n.attributes.BANDWIDTH}this.codecs=Kv(o.master(),n),this.playlist=n,this.id=i,this.enabled=(e=t.playlists,r=n.id,s=a,function(t){var n=e.master.playlists[r],i=Ol(n),o=Dl(n);return void 0===t?o:(t?delete n.disabled:n.disabled=!0,t===o||i||(s(),t?e.trigger("renditionenabled"):e.trigger("renditiondisabled")),t)})},ep=["seeking","seeked","pause","playing","error"],rp=function(){function t(t){var n=this;this.masterPlaylistController_=t.masterPlaylistController,this.tech_=t.tech,this.seekable=t.seekable,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=t.liveRangeSafeTimeDelta,this.media=t.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=cl("PlaybackWatcher"),this.logger_("initialize");var i=function(){return n.monitorCurrentTime_()},e=function(){return n.monitorCurrentTime_()},r=function(){return n.techWaiting_()},s=function(){return n.cancelTimer_()},o=this.masterPlaylistController_,a=["main","subtitle","audio"],u={};a.forEach((function(t){u[t]={reset:function(){return n.resetSegmentDownloads_(t)},updateend:function(){return n.checkSegmentDownloads_(t)}},o[t+"SegmentLoader_"].on("appendsdone",u[t].updateend),o[t+"SegmentLoader_"].on("playlistupdate",u[t].reset),n.tech_.on(["seeked","seeking"],u[t].reset)}));var h=function(t){["main","audio"].forEach((function(i){o[i+"SegmentLoader_"][t]("appended",n.seekingAppendCheck_)}))};this.seekingAppendCheck_=function(){n.fixesBadSeeks_()&&(n.consecutiveUpdates=0,n.lastRecordedTime=n.tech_.currentTime(),h("off"))},this.clearSeekingAppendCheck_=function(){return h("off")},this.watchForBadSeeking_=function(){n.clearSeekingAppendCheck_(),h("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",r),this.tech_.on(ep,s),this.tech_.on("canplay",e),this.tech_.one("play",i),this.dispose=function(){n.clearSeekingAppendCheck_(),n.logger_("dispose"),n.tech_.off("waiting",r),n.tech_.off(ep,s),n.tech_.off("canplay",e),n.tech_.off("play",i),n.tech_.off("seeking",n.watchForBadSeeking_),n.tech_.off("seeked",n.clearSeekingAppendCheck_),a.forEach((function(t){o[t+"SegmentLoader_"].off("appendsdone",u[t].updateend),o[t+"SegmentLoader_"].off("playlistupdate",u[t].reset),n.tech_.off(["seeked","seeking"],u[t].reset)})),n.checkCurrentTimeTimeout_&&bt.clearTimeout(n.checkCurrentTimeTimeout_),n.cancelTimer_()}}var n=t.prototype;return n.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&bt.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=bt.setTimeout(this.monitorCurrentTime_.bind(this),250)},n.resetSegmentDownloads_=function(t){var n=this.masterPlaylistController_[t+"SegmentLoader_"];this[t+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+t+" loader"),this[t+"StalledDownloads_"]=0,this[t+"Buffered_"]=n.buffered_()},n.checkSegmentDownloads_=function(t){var n=this.masterPlaylistController_,i=n[t+"SegmentLoader_"],e=i.buffered_(),r=function(t,n){if(t===n)return!1;if(!t&&n||!n&&t)return!0;if(t.length!==n.length)return!0;for(var i=0;i<t.length;i++)if(t.start(i)!==n.start(i)||t.end(i)!==n.end(i))return!0;return!1}(this[t+"Buffered_"],e);this[t+"Buffered_"]=e,r?this.resetSegmentDownloads_(t):(this[t+"StalledDownloads_"]++,this.logger_("found #"+this[t+"StalledDownloads_"]+" "+t+" appends that did not increase buffer (possible stalled download)",{playlistId:i.playlist_&&i.playlist_.id,buffered:pl(e)}),this[t+"StalledDownloads_"]<10||(this.logger_(t+" loader stalled download exclusion"),this.resetSegmentDownloads_(t),this.tech_.trigger({type:"usage",name:"vhs-"+t+"-download-exclusion"}),"subtitle"!==t&&n.blacklistCurrentPlaylist({message:"Excessive "+t+" segment downloading detected."},1/0)))},n.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var t=this.tech_.currentTime(),n=this.tech_.buffered();if(this.lastRecordedTime===t&&(!n.length||t+.1>=n.end(n.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&t===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):t===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=t)}},n.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},n.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var t,n=this.seekable(),i=this.tech_.currentTime();this.afterSeekableWindow_(n,i,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(t=n.end(n.length-1));if(this.beforeSeekableWindow_(n,i)){var e=n.start(0);t=e+(e===n.end(0)?0:.1)}if(void 0!==t)return this.logger_("Trying to seek outside of seekable at time "+i+" with seekable range "+dl(n)+". Seeking to "+t+"."),this.tech_.setCurrentTime(t),!0;for(var r=this.masterPlaylistController_.sourceUpdater_,s=this.tech_.buffered(),o=r.audioBuffer?r.audioBuffered():null,a=r.videoBuffer?r.videoBuffered():null,u=this.media(),h=u.partTargetDuration?u.partTargetDuration:2*(u.targetDuration-.03333333333333333),c=[o,a],f=0;f<c.length;f++){if(c[f])if(gl(c[f],i)<h)return!1}var l=vl(s,i);return 0!==l.length&&(t=l.start(0)+.1,this.logger_("Buffered region starts ("+l.start(0)+")  just beyond seek point ("+i+"). Seeking to "+t+"."),this.tech_.setCurrentTime(t),!0)},n.waiting_=function(){if(!this.techWaiting_()){var t=this.tech_.currentTime(),n=this.tech_.buffered(),i=ll(n,t);return i.length&&t+3<=i.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(t),this.logger_("Stopped at "+t+" while inside a buffered region ["+i.start(0)+" -> "+i.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},n.techWaiting_=function(){var t=this.seekable(),n=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(t,n)){var i=t.end(t.length-1);return this.logger_("Fell out of live window at time "+n+". Seeking to live point (seekable end) "+i),this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var e=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,r=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:e.audioBuffered(),videoBuffered:e.videoBuffered(),currentTime:n}))return this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var s=vl(r,n);if(s.length>0){var o=s.start(0)-n;return this.logger_("Stopped at "+n+", setting timer for "+o+", seeking to "+s.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*o,n),!0}return!1},n.afterSeekableWindow_=function(t,n,i,e){if(void 0===e&&(e=!1),!t.length)return!1;var r=t.end(t.length-1)+.1;return!i.endList&&e&&(r=t.end(t.length-1)+3*i.targetDuration),n>r},n.beforeSeekableWindow_=function(t,n){return!!(t.length&&t.start(0)>0&&n<t.start(0)-this.liveRangeSafeTimeDelta)},n.videoUnderflow_=function(t){var n=t.videoBuffered,i=t.audioBuffered,e=t.currentTime;if(n){var r;if(n.length&&i.length){var s=ll(n,e-3),o=ll(n,e),a=ll(i,e);a.length&&!o.length&&s.length&&(r={start:s.end(0),end:a.end(0)})}else{vl(n,e).length||(r=this.gapFromVideoUnderflow_(n,e))}return!!r&&(this.logger_("Encountered a gap in video from "+r.start+" to "+r.end+". Seeking to current time "+e),!0)}},n.skipTheGap_=function(t){var n=this.tech_.buffered(),i=this.tech_.currentTime(),e=vl(n,i);this.cancelTimer_(),0!==e.length&&i===t&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",t,"nextRange start:",e.start(0)),this.tech_.setCurrentTime(e.start(0)+.03333333333333333),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},n.gapFromVideoUnderflow_=function(t,n){for(var i=function(t){if(t.length<2)return sl.createTimeRanges();for(var n=[],i=1;i<t.length;i++){var e=t.end(i-1),r=t.start(i);n.push([e,r])}return sl.createTimeRanges(n)}(t),e=0;e<i.length;e++){var r=i.start(e),s=i.end(e);if(n-r<4&&n-r>2)return{start:r,end:s}}return null},t}(),sp={errorInterval:30,getSource:function(t){return t(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},op=function t(n,i){var e=0,r=0,s=sl.mergeOptions(sp,i);n.ready((function(){n.trigger({type:"usage",name:"vhs-error-reload-initialized"}),n.trigger({type:"usage",name:"hls-error-reload-initialized"})}));var o=function(){r&&n.currentTime(r)},a=function(t){null!=t&&(r=n.duration()!==1/0&&n.currentTime()||0,n.one("loadedmetadata",o),n.src(t),n.trigger({type:"usage",name:"vhs-error-reload"}),n.trigger({type:"usage",name:"hls-error-reload"}),n.play())},u=function(){return Date.now()-e<1e3*s.errorInterval?(n.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void n.trigger({type:"usage",name:"hls-error-reload-canceled"})):s.getSource&&"function"==typeof s.getSource?(e=Date.now(),s.getSource.call(n,a)):void sl.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},h=function t(){n.off("loadedmetadata",o),n.off("error",u),n.off("dispose",t)};n.on("error",u),n.on("dispose",h),n.reloadSourceOnError=function(i){h(),t(n,i)}},ap={PlaylistLoader:Ql,Playlist:Pl,utils:hv,STANDARD_PLAYLIST_SELECTOR:sd,INITIAL_PLAYLIST_SELECTOR:function(){var t=this,n=this.playlists.master.playlists.filter(Pl.isEnabled);return id(n,(function(t,n){return ed(t,n)})),n.filter((function(n){return!!Kv(t.playlists.master,n).video}))[0]||null},lastBandwidthSelector:sd,movingAverageBandwidthSelector:function(t){var n=-1,i=-1;if(t<0||t>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var e=this.useDevicePixelRatio&&bt.devicePixelRatio||1;return n<0&&(n=this.systemBandwidth,i=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==i&&(n=t*this.systemBandwidth+(1-t)*n,i=this.systemBandwidth),rd(this.playlists.master,n,parseInt(nd(this.tech_.el(),"width"),10)*e,parseInt(nd(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:ed,comparePlaylistResolution:function(t,n){var i,e;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),i=i||bt.Number.MAX_VALUE,n.attributes.RESOLUTION&&n.attributes.RESOLUTION.width&&(e=n.attributes.RESOLUTION.width),i===(e=e||bt.Number.MAX_VALUE)&&t.attributes.BANDWIDTH&&n.attributes.BANDWIDTH?t.attributes.BANDWIDTH-n.attributes.BANDWIDTH:i-e},xhr:tv()};Object.keys(jv).forEach((function(t){Object.defineProperty(ap,t,{get:function(){return sl.log.warn("using Vhs."+t+" is UNSAFE be sure you know what you are doing"),jv[t]},set:function(n){sl.log.warn("using Vhs."+t+" is UNSAFE be sure you know what you are doing"),"number"!=typeof n||n<0?sl.log.warn("value of Vhs."+t+" must be greater than or equal to 0"):jv[t]=n}})}));var up=function(t,n){for(var i=n.media(),e=-1,r=0;r<t.length;r++)if(t[r].id===i.id){e=r;break}t.selectedIndex_=e,t.trigger({selectedIndex:e,type:"change"})};ap.canPlaySource=function(){return sl.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var hp=function(t){var n=t.player,i=t.sourceKeySystems,e=t.audioMedia,r=t.mainPlaylists;if(!n.eme.initializeMediaKeys)return Promise.resolve();var s=function(t,n){return t.reduce((function(t,i){if(!i.contentProtection)return t;var e=n.reduce((function(t,n){var e=i.contentProtection[n];return e&&e.pssh&&(t[n]={pssh:e.pssh}),t}),{});return Object.keys(e).length&&t.push(e),t}),[])}(e?r.concat([e]):r,Object.keys(i)),o=[],a=[];return s.forEach((function(t){a.push(new Promise((function(t,i){n.tech_.one("keysessioncreated",t)}))),o.push(new Promise((function(i,e){n.eme.initializeMediaKeys({keySystems:t},(function(t){t?e(t):i()}))})))})),Promise.race([Promise.all(o),Promise.race(a)])},cp=function(t){var n=t.player,i=function(t,n,i){if(!t)return t;var e={};n&&n.attributes&&n.attributes.CODECS&&(e=Qv($i(n.attributes.CODECS))),i&&i.attributes&&i.attributes.CODECS&&(e.audio=i.attributes.CODECS);var r=Zi(e.video),s=Zi(e.audio),o={};for(var a in t)o[a]={},s&&(o[a].audioContentType=s),r&&(o[a].videoContentType=r),n.contentProtection&&n.contentProtection[a]&&n.contentProtection[a].pssh&&(o[a].pssh=n.contentProtection[a].pssh),"string"==typeof t[a]&&(o[a].url=t[a]);return sl.mergeOptions(t,o)}(t.sourceKeySystems,t.media,t.audioMedia);return!!i&&(n.currentSource().keySystems=i,!(i&&!n.eme)||(sl.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1))},fp=function(){if(!bt.localStorage)return null;var t=bt.localStorage.getItem("videojs-vhs");if(!t)return null;try{return JSON.parse(t)}catch(t){return null}};ap.supportsNativeHls=function(){if(!hn||!hn.createElement)return!1;var t=hn.createElement("video");if(!sl.getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(n){return/maybe|probably/i.test(t.canPlayType(n))}))}(),ap.supportsNativeDash=!!(hn&&hn.createElement&&sl.getTech("Html5").isSupported())&&/maybe|probably/i.test(hn.createElement("video").canPlayType("application/dash+xml")),ap.supportsTypeNatively=function(t){return"hls"===t?ap.supportsNativeHls:"dash"===t&&ap.supportsNativeDash},ap.isSupported=function(){return sl.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var lp=function(t){function n(n,i,e){var r;if(r=t.call(this,i,sl.mergeOptions(e.hls,e.vhs))||this,e.hls&&Object.keys(e.hls).length&&sl.log.warn("Using hls options is deprecated. Use vhs instead."),"number"==typeof e.initialBandwidth&&(r.options_.bandwidth=e.initialBandwidth),r.logger_=cl("VhsHandler"),i.options_&&i.options_.playerId){var s=sl(i.options_.playerId);s.hasOwnProperty("hls")||Object.defineProperty(s,"hls",{get:function(){return sl.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"hls-player-access"}),mn(r)},configurable:!0}),s.hasOwnProperty("vhs")||Object.defineProperty(s,"vhs",{get:function(){return sl.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"vhs-player-access"}),mn(r)},configurable:!0}),s.hasOwnProperty("dash")||Object.defineProperty(s,"dash",{get:function(){return sl.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),mn(r)},configurable:!0}),r.player_=s}if(r.tech_=i,r.source_=n,r.stats={},r.ignoreNextSeekingEvent_=!1,r.setOptions_(),r.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(r.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return r.on(hn,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(t){var n=hn.fullscreenElement||hn.webkitFullscreenElement||hn.mozFullScreenElement||hn.msFullscreenElement;n&&n.contains(r.tech_.el())?r.masterPlaylistController_.fastQualityChange_():r.masterPlaylistController_.checkABR_()})),r.on(r.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),r.on(r.tech_,"error",(function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()})),r.on(r.tech_,"play",r.play),r}yn(n,t);var i=n.prototype;return i.setOptions_=function(){var t=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var n=fp();n&&n.bandwidth&&(this.options_.bandwidth=n.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),n&&n.throughput&&(this.options_.throughput=n.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=jv.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===jv.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach((function(n){void 0!==t.source_[n]&&(t.options_[n]=t.source_[n])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},i.src=function(t,n){var i=this;if(t){var e;this.setOptions_(),this.options_.src=0===(e=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(e.substring(e.indexOf(",")+1)):e,this.options_.tech=this.tech_,this.options_.externVhs=ap,this.options_.sourceType=re(n),this.options_.seekTo=function(t){i.tech_.setCurrentTime(t)},this.options_.smoothQualityChange&&sl.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new np(this.options_);var r=sl.mergeOptions({liveRangeSafeTimeDelta:.1},this.options_,{seekable:function(){return i.seekable()},media:function(){return i.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new rp(r),this.masterPlaylistController_.on("error",(function(){var t=sl.players[i.tech_.options_.playerId],n=i.masterPlaylistController_.error;"object"!=typeof n||n.code?"string"==typeof n&&(n={message:n,code:3}):n.code=3,t.error(n)}));var s=this.options_.experimentalBufferBasedABR?ap.movingAverageBandwidthSelector(.55):ap.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):s.bind(this),this.masterPlaylistController_.selectInitialPlaylist=ap.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(t){this.masterPlaylistController_.selectPlaylist=t.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(t){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=t,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var t=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,n=bt.navigator.connection||bt.navigator.mozConnection||bt.navigator.webkitConnection,i=1e7;if(this.options_.useNetworkInformationApi&&n){var e=1e3*n.downlink*1e3;t=e>=i&&t>=i?Math.max(t,e):e}return t},set:function(t){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=t,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var t,n=1/(this.bandwidth||1);return t=this.throughput>0?1/this.throughput:0,Math.floor(1/(n+t))},set:function(){sl.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return i.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return i.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return i.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return i.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return i.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return i.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return i.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return i.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return i.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return i.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return i.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return i.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return i.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return pl(i.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return i.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return i.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return i.tech_.name_},enumerable:!0},duration:{get:function(){return i.tech_.duration()},enumerable:!0},master:{get:function(){return i.playlists.master},enumerable:!0},playerDimensions:{get:function(){return i.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return pl(i.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return i.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",(function(){i.options_.useBandwidthFromLocalStorage&&function(t){if(!bt.localStorage)return!1;var n=fp();n=n?sl.mergeOptions(n,t):t;try{bt.localStorage.setItem("videojs-vhs",JSON.stringify(n))}catch(t){return!1}}({bandwidth:i.bandwidth,throughput:Math.round(i.throughput)})})),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var t;(t=i).representations=function(){var n=t.masterPlaylistController_.master(),i=Ul(n)?t.masterPlaylistController_.getAudioTrackPlaylists_():n.playlists;return i?i.filter((function(t){return!Ol(t)})).map((function(n,i){return new ip(t,n,n.id)})):[]}})),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",(function(){i.setupEme_()})),this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.masterPlaylistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=bt.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},i.createKeySessions_=function(){var t=this,n=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),hp({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:n&&n.media(),mainPlaylists:this.playlists.master.playlists}).then((function(){t.logger_("created EME key session"),t.masterPlaylistController_.sourceUpdater_.initializedEme()})).catch((function(n){t.logger_("error while creating EME key session",n),t.player_.error({message:"Failed to initialize media keys for EME",code:3})}))},i.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},i.setupEme_=function(){var t=this,n=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,i=cp({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:n&&n.media()});this.player_.tech_.on("keystatuschange",(function(n){"output-restricted"===n.status&&t.masterPlaylistController_.blacklistCurrentPlaylist({playlist:t.masterPlaylistController_.media(),message:"DRM keystatus changed to "+n.status+". Playlist will fail to play. Check for HDCP content.",blacklistDuration:1/0})})),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==sl.browser.IE_VERSION&&i?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()},i.setupQualityLevels_=function(){var t=this,n=sl.players[this.tech_.options_.playerId];n&&n.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=n.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var n,i;n=t.qualityLevels_,(i=t).representations().forEach((function(t){n.addQualityLevel(t)})),up(n,i.playlists)})),this.playlists.on("mediachange",(function(){up(t.qualityLevels_,t.playlists)})))},n.version=function(){return{"@videojs/http-streaming":"2.13.1","mux.js":"6.0.1","mpd-parser":"0.21.0","m3u8-parser":"4.7.0","aes-decrypter":"3.1.2"}},i.version=function(){return this.constructor.version()},i.canChangeType=function(){return Ud.canChangeType()},i.play=function(){this.masterPlaylistController_.play()},i.setCurrentTime=function(t){this.masterPlaylistController_.setCurrentTime(t)},i.duration=function(){return this.masterPlaylistController_.duration()},i.seekable=function(){return this.masterPlaylistController_.seekable()},i.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&bt.URL.revokeObjectURL&&(bt.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),t.prototype.dispose.call(this)},i.convertToProgramTime=function(t,n){return cv({playlist:this.masterPlaylistController_.media(),time:t,callback:n})},i.seekToProgramTime=function(t,n,i,e){return void 0===i&&(i=!0),void 0===e&&(e=2),fv({programTime:t,playlist:this.masterPlaylistController_.media(),retryCount:e,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:n})},n}(sl.getComponent("Component")),vp={name:"videojs-http-streaming",VERSION:"2.13.1",canHandleSource:function(t,n){void 0===n&&(n={});var i=sl.mergeOptions(sl.options,n);return vp.canPlayType(t.type,i)},handleSource:function(t,n,i){void 0===i&&(i={});var e=sl.mergeOptions(sl.options,i);return n.vhs=new lp(t,n,e),sl.hasOwnProperty("hls")||Object.defineProperty(n,"hls",{get:function(){return sl.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),n.vhs},configurable:!0}),n.vhs.xhr=tv(),n.vhs.src(t.src,t.type),n.vhs},canPlayType:function(t,n){void 0===n&&(n={});var i=sl.mergeOptions(sl.options,n),e=i.vhs,r=(e=void 0===e?{}:e).overrideNative,s=void 0===r?!sl.browser.IS_ANY_SAFARI:r,o=i.hls,a=(o=void 0===o?{}:o).overrideNative,u=void 0!==a&&a,h=re(t);return h&&(!ap.supportsTypeNatively(h)||u||s)?"maybe":""}};(te("avc1.4d400d,mp4a.40.2")&&sl.getTech("Html5").registerSourceHandler(vp,0),sl.VhsHandler=lp,Object.defineProperty(sl,"HlsHandler",{get:function(){return sl.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),lp},configurable:!0}),sl.VhsSourceHandler=vp,Object.defineProperty(sl,"HlsSourceHandler",{get:function(){return sl.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),vp},configurable:!0}),sl.Vhs=ap,Object.defineProperty(sl,"Hls",{get:function(){return sl.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),ap},configurable:!0}),sl.use||(sl.registerComponent("Hls",ap),sl.registerComponent("Vhs",ap)),sl.options.vhs=sl.options.vhs||{},sl.options.hls=sl.options.hls||{},sl.getPlugin&&sl.getPlugin("reloadSourceOnError"))||(sl.registerPlugin||sl.plugin)("reloadSourceOnError",(function(t){op(this,t)}));!function(t,n){void 0===n&&(n={});var i=n.insertAt;if(t&&"undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===i&&e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}('@charset "UTF-8";\n.vjs-modal-dialog .vjs-modal-dialog-content, .video-js .vjs-modal-dialog, .vjs-button > .vjs-icon-placeholder:before, .video-js .vjs-big-play-button .vjs-icon-placeholder:before {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.vjs-button > .vjs-icon-placeholder:before, .video-js .vjs-big-play-button .vjs-icon-placeholder:before {\n  text-align: center;\n}\n\n@font-face {\n  font-family: VideoJS;\n  src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABDkAAsAAAAAG6gAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPgAAAFZRiV3hY21hcAAAAYQAAADaAAADPv749/pnbHlmAAACYAAAC3AAABHQZg6OcWhlYWQAAA3QAAAAKwAAADYZw251aGhlYQAADfwAAAAdAAAAJA+RCLFobXR4AAAOHAAAABMAAACM744AAGxvY2EAAA4wAAAASAAAAEhF6kqubWF4cAAADngAAAAfAAAAIAE0AIFuYW1lAAAOmAAAASUAAAIK1cf1oHBvc3QAAA/AAAABJAAAAdPExYuNeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS7wTiBgZWBgaWQ5RkDA8MvCM0cwxDOeI6BgYmBlZkBKwhIc01hcPjI+FGJHcRdyA4RZgQRADK3CxEAAHic7dFZbsMgAEXRS0ycyZnnOeG7y+qC8pU1dHusIOXxuoxaOlwZYWQB0Aea4quIEN4E9LzKbKjzDeM6H/mua6Lmc/p8yhg0lvdYx15ZG8uOLQOGjMp3EzqmzJizYMmKNRu27Nhz4MiJMxeu3Ljz4Ekqm7T8P52G8PP3lnTOVk++Z6iN6QZzNN1F7ptuN7eGOjDUoaGODHVsuvU8MdTO9Hd5aqgzQ50b6sJQl4a6MtS1oW4MdWuoO0PdG+rBUI+GejLUs6FeDPVqqDdDvRvqw1CfhpqM9At0iFLaAAB4nJ1YDXBTVRZ+5/22TUlJ8we0pHlJm7RJf5O8F2j6EymlSPkpxaL8U2xpa3DKj0CBhc2IW4eWKSokIoLsuMqssM64f+jA4HSdWXXXscBq67IOs3FXZ1ZYWVyRFdo899yXtIBQZ90k7717zz3v3HPPOfd854YCCj9cL9dL0RQFOqCbGJnrHb5EayiKIWN8iA/hWBblo6hUWm8TtCDwE80WMJus/irwyxOdxeB0MDb14VNJHnXYoLLSl6FfCUYO9nYPTA8Epg9090LprfbBbZ2hY0UlJUXHQp3/vtWkS6EBv8+rPMq5u9692f/dNxJNiqwC1xPE9TCUgCsSdQWgE3XQD25lkG4CN2xmTcOXWBOyser6RN6KnGbKSbmQ3+d0OI1m2W8QzLLkI2sykrWAgJJEtA8vGGW/2Q+CmT3n8zS9wZwu2DCvtuZKZN3xkrLh36yCZuUomQSqGpY8t/25VfHVhw8z4ebGBtfLb0ya9PCaDc+8dGTvk2dsh6z7WzvowlXKUSWo9MJ15a3KrEP2loOr2Ojhw6iW6hf2BDdEccQvZGpaAy7YovSwq8kr7HGllxpd71rkS6G0Sf11sl9OvMK1+jwPPODxjUwkOim9CU3ix1wNjXDfmJSEn618Bs6lpWwUpU+8PCqLMY650zjq8VhCIP17NEKTx3eaLL+s5Pi6yJWaWjTHLR1jYzPSV9VF/6Ojdb/1kO3Mk3uhHC0x6gc1BjlKQ+nQFxTYdaJkZ7ySVxLBbhR1dsboNXp1tCYKW2LRaEzpYcIx2BKNxaL0ZaUnSqfFoiNhHKR/GkX6PWUSAaJelQaqZL1EpoHNsajSEyPSoJ9IjhIxTdjHLmwZvhRDOiFTY/YeQnvrVZmiTQtGncECXtFTBZLOVwwMRgoXHAkXzMzPn1nAJJ8jYSbMDaqN2waGLzNhih/bZynUBMpIWSg7VYi7DRx2m8ALkIdRCJwI6ArJx2EI8kaDWeTQKeAFk9fjl/1AvwktjQ1P7NjyMGQyfd4vjipX6M/i52D7Cq80kqlcxEcGXRr/FEcgs0u5uGgB4VWuMFfpdn2Re6Hi3PqzmxWKsz6+ae2Pn9hXXw/fqM859UiGC0oKYYILJBqJrsn1Z1E5qOs9rQCiUQRREjm8yJcbHF5cUJufX1vAHlefw0XgUoboS3ETfQlTxBC4SOtuE8VPRJTBSCQSjZCpk7Gqzu+masaZ2y7Zjehho4F3g82BNDkAHpORG4+OCS+f6JTPmtRn/PH1kch6d04sp7AQb25aQ/pqUyXeQ8vrebG8OYQdXOQ+585u0sdW9rqalzRURiJ+9F4MweRFrKUjl1GUYhH1A27WOHw5cTFSFPMo9EeUIGnQTZHIaJ7AHLaOKsOODaNF9jkBjYG2QEsQ2xjMUAx2bBEbeTBWMHwskBjngq56S/yfgkBnWBa4K9sqKtq2t1UI8S9He5XuBRbawAdatrQEAi30Aks2+LM8WeCbalVZkWNylvJ+dqJnzVb+OHlSoKW8nPCP7Rd+CcZ2DdWAGqJ2CBFOphgywFFCFBNtfAbGtNPBCwxvygHeYMZMY9ZboBqwq/pVrsbgN5tkv152ODlbMfiqwGMBgxa4Exz3QhovRIUp6acqZmQzRq0ypDXS2TPLT02YIkQETnOE445oOGxOmXAqUJNNG7XgupMjPq2ua9asrj5yY/yuKteO1Kx0YNJTufrirLe1mZnat7OL6rnUdCWenpW6I8mAnbsY8KWs1PuSovCW9A/Z25PQ24a7cNOqgmTkLmBMgh4THgc4b9k2IVv1/g/F5nGljwPLfOgHAzJzh45V/4+WenTzmMtR5Z7us2Tys909UHqrPY7KbckoxRvRHhmVc3cJGE97uml0R1S0jdULVl7EvZtDFVBF35N9cEdjpgmAiOlFZ+Dtoh93+D3zzHr8RRNZQhnCNMNbcegOvpEwZoL+06cJQ07h+th3fZ/7PVbVC6ngTAV/KoLFuO6+2KFcU651gEb5ugPSIb1D+Xp8V4+k3sEIGnw5mYe4If4k1lFYr6SCzmM2EQ8iWtmwjnBI9kTwe1TlfAmXh7H02by9fW2gsjKwtv0aaURKil4OdV7rDL1MXIFNrhdxohcZXYTnq47WisrKitaObbf5+yvkLi5J6lCNZZ+B6GC38VNBZBDidSS/+mSvh6s+srgC8pyKMvDtt+de3c9fU76ZPfuM8ud4Kv0fyP/LqfepMT/3oZxSqpZaTa1DaQYLY8TFsHYbWYsPoRhRWfL5eSSQbhUGgGC3YLbVMk6PitTFNGpAsNrC6D1VNBKgBHMejaiuRWEWGgsSDBTJjqWIl8kJLlsaLJ2tXDr6xGfT85bM2Q06a46x2HTgvdnV8z5YDy/27J4zt6x2VtkzjoYpkq36kaBr4eQSg7tyiVweWubXZugtadl58ydapfbORfKsDTuZ0OBgx4cfdjCf5tbWNITnL120fdOi1RV1C3uKGzNdwYLcMvZ3BxoPyTOCD1XvXTp7U10gWCVmTV9b3r2z0SkGWovb2hp9I89O8a2smlyaO8muMU+dRmtzp60IzAoFpjLr1n388boLyf0dRvxhsHZ0qbWqDkwqvvpkj4l0fY6EIXRi5sQSrAvsVYwXRy4qJ2EVtD1AN7a0HWth9ymvL1xc3WTUKK/TAHA/bXDVtVWfOMfuGxGZv4Ln/jVr9jc3j1yMv0tndmyt9Vq88Y9gH1wtLX3KWjot5++jWHgAoZZkQ14wGQ20Fli71UmKJAy4xKMSTGbVdybW7FDDAut9XpD5AzWrYO7zQ8qffqF8+Ynd/clrHcdyxGy3a/3+mfNnzC/cBsveTjnTvXf1o6vzOlZw7WtqtdmPK/Errz/6NNtD72zmNOZfbmYdTGHfoofqI79Oc+R2n1lrnL6pOm0Up7kwxhTW12Amm7WYkXR2qYrF2AmgmbAsxZjwy1xpg/m1Je2vrp8v/nz2xpmlBg4E9hrMU341wVpTOh/OfmGvAnra8q6uctr60ZQHV3Q+WMQJykMj8ZsWn2QBOmmHMB+m5pDIpTFonYigiaKAhGEiAHF7EliVnQkjoLVIMPtJpBKHYd3A8GYH9jJzrWwmHx5Qjp7vDAX0suGRym1vtm/9W1/HyR8vczfMs6Sk8DSv855/5dlX9oQq52hT8syyp2rx5Id17IAyAM3wIjQPMOHzytEB64q6D5zT91yNbnx3V/nqnd017S9Y0605k3izoXLpsxde2n38yoOV9s1LcjwzNjbdX6asnBVaBj/6/DwKwPkpcqbDG7BnsXoSqWnUAmottYF6jMSdVyYZh3zVXCjwTiwwHH6sGuRiEHQGzuRX6whZkp123oy1BWE2mEfJ/tvIRtM4ZM5bDXiMsPMaAKOTyc5uL57rqyyc5y5JE5pm1i2S2iUX0CcaQ6lC6Zog7JqSqZmYlosl2K6pwNA84zRnQW6SaALYZQGW5lhCtU/W34N6o+bKfZ8cf3/Cl/+iTX3wBzpOY4mRkeNf3rptycGSshQWgGbYt5jFc2e0+DglIrwl6DVWQ7BuwaJ3Xk1J4VL5urnLl/Wf+gHU/hZoZdKNym6lG+I34FaNeZKcSpJIo2IeCVvpdsDGfKvzJnAwmeD37Ow65ZWwSowpgwX5T69s/rB55dP5BcpgDKFV8p7q2sn/1uc93bVzT/w6UrCqDTWvfCq/oCD/qZXNoUj8BL5Kp6GU017frfNXkAtiiyf/SOCEeLqnd8R/Ql9GlCRfctS6k5chvIBuQ1zCCjoCHL2DHNHIXxMJ3kQeO8lbsUXONeSfA5EjcG6/E+KdhN4bP04vBhdi883+BFBzQbxFbvZzQeY9LNBZc0FNfn5NwfDn6rCTnTw6R8o+gfpf5hCom33cRuiTlss3KHmZjD+BPN+5gXuA2ziS/Q73mLxUkpbKN/eqwz5uK0X9F3h2d1V4nGNgZGBgAOJd776+iue3+crAzc4AAje5Bfcg0xz9YHEOBiYQBQA8FQlFAHicY2BkYGBnAAGOPgaG//85+hkYGVCBMgBGGwNYAAAAeJxjYGBgYB8EmKOPgQEAQ04BfgAAAAAAAA4AaAB+AMwA4AECAUIBbAGYAcICGAJYArQC4AMwA7AD3gQwBJYE3AUkBWYFigYgBmYGtAbqB1gIEghYCG4IhAi2COh4nGNgZGBgUGYoZWBnAAEmIOYCQgaG/2A+AwAYCQG2AHicXZBNaoNAGIZfE5PQCKFQ2lUps2oXBfOzzAESyDKBQJdGR2NQR3QSSE/QE/QEPUUPUHqsvsrXjTMw83zPvPMNCuAWP3DQDAejdm1GjzwS7pMmwi75XngAD4/CQ/oX4TFe4Qt7uMMbOzjuDc0EmXCP/C7cJ38Iu+RP4QEe8CU8pP8WHmOPX2EPz87TPo202ey2OjlnQSXV/6arOjWFmvszMWtd6CqwOlKHq6ovycLaWMWVydXKFFZnmVFlZU46tP7R2nI5ncbi/dDkfDtFBA2DDXbYkhKc+V0Bqs5Zt9JM1HQGBRTm/EezTmZNKtpcAMs9Yu6AK9caF76zoLWIWcfMGOSkVduvSWechqZsz040Ib2PY3urxBJTzriT95lipz+TN1fmAAAAeJxtkMl2wjAMRfOAhABlKm2h80C3+ajgCKKDY6cegP59TYBzukAL+z1Zsq8ctaJTTKPrsUQLbXQQI0EXKXroY4AbDDHCGBNMcYsZ7nCPB8yxwCOe8IwXvOIN7/jAJ76wxHfUqWX+OzgumWAjJMV17i0Ndlr6irLKO+qftdT7i6y4uFSUvCknay+lFYZIZaQcmfH/xIFdYn98bqhra1aKTM/6lWMnyaYirx1rFUQZFBkb2zJUtoXeJCeg0WnLtHeSFc3OtrnozNwqi0TkSpBMDB1nSde5oJXW23hTS2/T0LilglXX7dmFVxLnq5U0vYATHFk3zX3BOisoQHNDFDeZnqKDy9hRNawN7Vh727hFzcJ5c8TILrKZfH7tIPxAFP0BpLeJPA==) format("woff");\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-play, .video-js .vjs-play-control .vjs-icon-placeholder, .video-js .vjs-big-play-button .vjs-icon-placeholder:before {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-play:before, .video-js .vjs-play-control .vjs-icon-placeholder:before, .video-js .vjs-big-play-button .vjs-icon-placeholder:before {\n  content: "\\f101";\n}\n\n.vjs-icon-play-circle {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-play-circle:before {\n  content: "\\f102";\n}\n\n.vjs-icon-pause, .video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-pause:before, .video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before {\n  content: "\\f103";\n}\n\n.vjs-icon-volume-mute, .video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-volume-mute:before, .video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before {\n  content: "\\f104";\n}\n\n.vjs-icon-volume-low, .video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-volume-low:before, .video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before {\n  content: "\\f105";\n}\n\n.vjs-icon-volume-mid, .video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-volume-mid:before, .video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before {\n  content: "\\f106";\n}\n\n.vjs-icon-volume-high, .video-js .vjs-mute-control .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-volume-high:before, .video-js .vjs-mute-control .vjs-icon-placeholder:before {\n  content: "\\f107";\n}\n\n.vjs-icon-fullscreen-enter, .video-js .vjs-fullscreen-control .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-fullscreen-enter:before, .video-js .vjs-fullscreen-control .vjs-icon-placeholder:before {\n  content: "\\f108";\n}\n\n.vjs-icon-fullscreen-exit, .video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-fullscreen-exit:before, .video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before {\n  content: "\\f109";\n}\n\n.vjs-icon-square {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-square:before {\n  content: "\\f10a";\n}\n\n.vjs-icon-spinner {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-spinner:before {\n  content: "\\f10b";\n}\n\n.vjs-icon-subtitles, .video-js .vjs-subs-caps-button .vjs-icon-placeholder,\n.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder,\n.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder,\n.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder,\n.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder, .video-js .vjs-subtitles-button .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-subtitles:before, .video-js .vjs-subs-caps-button .vjs-icon-placeholder:before,\n.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder:before,\n.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder:before,\n.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder:before,\n.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder:before, .video-js .vjs-subtitles-button .vjs-icon-placeholder:before {\n  content: "\\f10c";\n}\n\n.vjs-icon-captions, .video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder,\n.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder, .video-js .vjs-captions-button .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-captions:before, .video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder:before,\n.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder:before, .video-js .vjs-captions-button .vjs-icon-placeholder:before {\n  content: "\\f10d";\n}\n\n.vjs-icon-chapters, .video-js .vjs-chapters-button .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-chapters:before, .video-js .vjs-chapters-button .vjs-icon-placeholder:before {\n  content: "\\f10e";\n}\n\n.vjs-icon-share {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-share:before {\n  content: "\\f10f";\n}\n\n.vjs-icon-cog {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-cog:before {\n  content: "\\f110";\n}\n\n.vjs-icon-circle, .vjs-seek-to-live-control .vjs-icon-placeholder, .video-js .vjs-volume-level, .video-js .vjs-play-progress {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-circle:before, .vjs-seek-to-live-control .vjs-icon-placeholder:before, .video-js .vjs-volume-level:before, .video-js .vjs-play-progress:before {\n  content: "\\f111";\n}\n\n.vjs-icon-circle-outline {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-circle-outline:before {\n  content: "\\f112";\n}\n\n.vjs-icon-circle-inner-circle {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-circle-inner-circle:before {\n  content: "\\f113";\n}\n\n.vjs-icon-hd {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-hd:before {\n  content: "\\f114";\n}\n\n.vjs-icon-cancel, .video-js .vjs-control.vjs-close-button .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-cancel:before, .video-js .vjs-control.vjs-close-button .vjs-icon-placeholder:before {\n  content: "\\f115";\n}\n\n.vjs-icon-replay, .video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-replay:before, .video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before {\n  content: "\\f116";\n}\n\n.vjs-icon-facebook {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-facebook:before {\n  content: "\\f117";\n}\n\n.vjs-icon-gplus {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-gplus:before {\n  content: "\\f118";\n}\n\n.vjs-icon-linkedin {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-linkedin:before {\n  content: "\\f119";\n}\n\n.vjs-icon-twitter {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-twitter:before {\n  content: "\\f11a";\n}\n\n.vjs-icon-tumblr {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-tumblr:before {\n  content: "\\f11b";\n}\n\n.vjs-icon-pinterest {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-pinterest:before {\n  content: "\\f11c";\n}\n\n.vjs-icon-audio-description, .video-js .vjs-descriptions-button .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-audio-description:before, .video-js .vjs-descriptions-button .vjs-icon-placeholder:before {\n  content: "\\f11d";\n}\n\n.vjs-icon-audio, .video-js .vjs-audio-button .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-audio:before, .video-js .vjs-audio-button .vjs-icon-placeholder:before {\n  content: "\\f11e";\n}\n\n.vjs-icon-next-item {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-next-item:before {\n  content: "\\f11f";\n}\n\n.vjs-icon-previous-item {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-previous-item:before {\n  content: "\\f120";\n}\n\n.vjs-icon-picture-in-picture-enter, .video-js .vjs-picture-in-picture-control .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-picture-in-picture-enter:before, .video-js .vjs-picture-in-picture-control .vjs-icon-placeholder:before {\n  content: "\\f121";\n}\n\n.vjs-icon-picture-in-picture-exit, .video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-picture-in-picture-exit:before, .video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder:before {\n  content: "\\f122";\n}\n\n.video-js {\n  display: block;\n  vertical-align: top;\n  box-sizing: border-box;\n  color: #fff;\n  background-color: #000;\n  position: relative;\n  padding: 0;\n  font-size: 10px;\n  line-height: 1;\n  font-weight: normal;\n  font-style: normal;\n  font-family: Arial, Helvetica, sans-serif;\n  word-break: initial;\n}\n.video-js:-moz-full-screen {\n  position: absolute;\n}\n.video-js:-webkit-full-screen {\n  width: 100% !important;\n  height: 100% !important;\n}\n\n.video-js[tabindex="-1"] {\n  outline: none;\n}\n\n.video-js *,\n.video-js *:before,\n.video-js *:after {\n  box-sizing: inherit;\n}\n\n.video-js ul {\n  font-family: inherit;\n  font-size: inherit;\n  line-height: inherit;\n  list-style-position: outside;\n  margin-left: 0;\n  margin-right: 0;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.video-js.vjs-fluid,\n.video-js.vjs-16-9,\n.video-js.vjs-4-3,\n.video-js.vjs-9-16,\n.video-js.vjs-1-1 {\n  width: 100%;\n  max-width: 100%;\n  height: 0;\n}\n\n.video-js.vjs-16-9 {\n  padding-top: 56.25%;\n}\n\n.video-js.vjs-4-3 {\n  padding-top: 75%;\n}\n\n.video-js.vjs-9-16 {\n  padding-top: 177.7777777778%;\n}\n\n.video-js.vjs-1-1 {\n  padding-top: 100%;\n}\n\n.video-js.vjs-fill {\n  width: 100%;\n  height: 100%;\n}\n\n.video-js .vjs-tech {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\nbody.vjs-full-window {\n  padding: 0;\n  margin: 0;\n  height: 100%;\n}\n\n.vjs-full-window .video-js.vjs-fullscreen {\n  position: fixed;\n  overflow: hidden;\n  z-index: 1000;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n}\n\n.video-js.vjs-fullscreen:not(.vjs-ios-native-fs) {\n  width: 100% !important;\n  height: 100% !important;\n  padding-top: 0 !important;\n}\n\n.video-js.vjs-fullscreen.vjs-user-inactive {\n  cursor: none;\n}\n\n.vjs-hidden {\n  display: none !important;\n}\n\n.vjs-disabled {\n  opacity: 0.5;\n  cursor: default;\n}\n\n.video-js .vjs-offscreen {\n  height: 1px;\n  left: -9999px;\n  position: absolute;\n  top: 0;\n  width: 1px;\n}\n\n.vjs-lock-showing {\n  display: block !important;\n  opacity: 1 !important;\n  visibility: visible !important;\n}\n\n.vjs-no-js {\n  padding: 20px;\n  color: #fff;\n  background-color: #000;\n  font-size: 18px;\n  font-family: Arial, Helvetica, sans-serif;\n  text-align: center;\n  width: 300px;\n  height: 150px;\n  margin: 0px auto;\n}\n\n.vjs-no-js a,\n.vjs-no-js a:visited {\n  color: #66A8CC;\n}\n\n.video-js .vjs-big-play-button {\n  font-size: 3em;\n  line-height: 1.5em;\n  height: 1.63332em;\n  width: 3em;\n  display: block;\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  padding: 0;\n  cursor: pointer;\n  opacity: 1;\n  border: 0.06666em solid #fff;\n  background-color: #2B333F;\n  background-color: rgba(43, 51, 63, 0.7);\n  border-radius: 0.3em;\n  transition: all 0.4s;\n}\n.vjs-big-play-centered .vjs-big-play-button {\n  top: 50%;\n  left: 50%;\n  margin-top: -0.81666em;\n  margin-left: -1.5em;\n}\n\n.video-js:hover .vjs-big-play-button,\n.video-js .vjs-big-play-button:focus {\n  border-color: #fff;\n  background-color: #73859f;\n  background-color: rgba(115, 133, 159, 0.5);\n  transition: all 0s;\n}\n\n.vjs-controls-disabled .vjs-big-play-button,\n.vjs-has-started .vjs-big-play-button,\n.vjs-using-native-controls .vjs-big-play-button,\n.vjs-error .vjs-big-play-button {\n  display: none;\n}\n\n.vjs-has-started.vjs-paused.vjs-show-big-play-button-on-pause .vjs-big-play-button {\n  display: block;\n}\n\n.video-js button {\n  background: none;\n  border: none;\n  color: inherit;\n  display: inline-block;\n  font-size: inherit;\n  line-height: inherit;\n  text-transform: none;\n  text-decoration: none;\n  transition: none;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n}\n\n.vjs-control .vjs-button {\n  width: 100%;\n  height: 100%;\n}\n\n.video-js .vjs-control.vjs-close-button {\n  cursor: pointer;\n  height: 3em;\n  position: absolute;\n  right: 0;\n  top: 0.5em;\n  z-index: 2;\n}\n.video-js .vjs-modal-dialog {\n  background: rgba(0, 0, 0, 0.8);\n  background: linear-gradient(180deg, rgba(0, 0, 0, 0.8), rgba(255, 255, 255, 0));\n  overflow: auto;\n}\n\n.video-js .vjs-modal-dialog > * {\n  box-sizing: border-box;\n}\n\n.vjs-modal-dialog .vjs-modal-dialog-content {\n  font-size: 1.2em;\n  line-height: 1.5;\n  padding: 20px 24px;\n  z-index: 1;\n}\n\n.vjs-menu-button {\n  cursor: pointer;\n}\n\n.vjs-menu-button.vjs-disabled {\n  cursor: default;\n}\n\n.vjs-workinghover .vjs-menu-button.vjs-disabled:hover .vjs-menu {\n  display: none;\n}\n\n.vjs-menu .vjs-menu-content {\n  display: block;\n  padding: 0;\n  margin: 0;\n  font-family: Arial, Helvetica, sans-serif;\n  overflow: auto;\n}\n\n.vjs-menu .vjs-menu-content > * {\n  box-sizing: border-box;\n}\n\n.vjs-scrubbing .vjs-control.vjs-menu-button:hover .vjs-menu {\n  display: none;\n}\n\n.vjs-menu li {\n  list-style: none;\n  margin: 0;\n  padding: 0.2em 0;\n  line-height: 1.4em;\n  font-size: 1.2em;\n  text-align: center;\n  text-transform: lowercase;\n}\n\n.vjs-menu li.vjs-menu-item:focus,\n.vjs-menu li.vjs-menu-item:hover,\n.js-focus-visible .vjs-menu li.vjs-menu-item:hover {\n  background-color: #73859f;\n  background-color: rgba(115, 133, 159, 0.5);\n}\n\n.vjs-menu li.vjs-selected,\n.vjs-menu li.vjs-selected:focus,\n.vjs-menu li.vjs-selected:hover,\n.js-focus-visible .vjs-menu li.vjs-selected:hover {\n  background-color: #fff;\n  color: #2B333F;\n}\n\n.video-js .vjs-menu *:not(.vjs-selected):focus:not(:focus-visible),\n.js-focus-visible .vjs-menu *:not(.vjs-selected):focus:not(.focus-visible) {\n  background: none;\n}\n\n.vjs-menu li.vjs-menu-title {\n  text-align: center;\n  text-transform: uppercase;\n  font-size: 1em;\n  line-height: 2em;\n  padding: 0;\n  margin: 0 0 0.3em 0;\n  font-weight: bold;\n  cursor: default;\n}\n\n.vjs-menu-button-popup .vjs-menu {\n  display: none;\n  position: absolute;\n  bottom: 0;\n  width: 10em;\n  left: -3em;\n  height: 0em;\n  margin-bottom: 1.5em;\n  border-top-color: rgba(43, 51, 63, 0.7);\n}\n\n.vjs-menu-button-popup .vjs-menu .vjs-menu-content {\n  background-color: #2B333F;\n  background-color: rgba(43, 51, 63, 0.7);\n  position: absolute;\n  width: 100%;\n  bottom: 1.5em;\n  max-height: 15em;\n}\n\n.vjs-layout-tiny .vjs-menu-button-popup .vjs-menu .vjs-menu-content,\n.vjs-layout-x-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content {\n  max-height: 5em;\n}\n\n.vjs-layout-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content {\n  max-height: 10em;\n}\n\n.vjs-layout-medium .vjs-menu-button-popup .vjs-menu .vjs-menu-content {\n  max-height: 14em;\n}\n\n.vjs-layout-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,\n.vjs-layout-x-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,\n.vjs-layout-huge .vjs-menu-button-popup .vjs-menu .vjs-menu-content {\n  max-height: 25em;\n}\n\n.vjs-workinghover .vjs-menu-button-popup.vjs-hover .vjs-menu,\n.vjs-menu-button-popup .vjs-menu.vjs-lock-showing {\n  display: block;\n}\n\n.video-js .vjs-menu-button-inline {\n  transition: all 0.4s;\n  overflow: hidden;\n}\n\n.video-js .vjs-menu-button-inline:before {\n  width: 2.222222222em;\n}\n\n.video-js .vjs-menu-button-inline:hover,\n.video-js .vjs-menu-button-inline:focus,\n.video-js .vjs-menu-button-inline.vjs-slider-active,\n.video-js.vjs-no-flex .vjs-menu-button-inline {\n  width: 12em;\n}\n\n.vjs-menu-button-inline .vjs-menu {\n  opacity: 0;\n  height: 100%;\n  width: auto;\n  position: absolute;\n  left: 4em;\n  top: 0;\n  padding: 0;\n  margin: 0;\n  transition: all 0.4s;\n}\n\n.vjs-menu-button-inline:hover .vjs-menu,\n.vjs-menu-button-inline:focus .vjs-menu,\n.vjs-menu-button-inline.vjs-slider-active .vjs-menu {\n  display: block;\n  opacity: 1;\n}\n\n.vjs-no-flex .vjs-menu-button-inline .vjs-menu {\n  display: block;\n  opacity: 1;\n  position: relative;\n  width: auto;\n}\n\n.vjs-no-flex .vjs-menu-button-inline:hover .vjs-menu,\n.vjs-no-flex .vjs-menu-button-inline:focus .vjs-menu,\n.vjs-no-flex .vjs-menu-button-inline.vjs-slider-active .vjs-menu {\n  width: auto;\n}\n\n.vjs-menu-button-inline .vjs-menu-content {\n  width: auto;\n  height: 100%;\n  margin: 0;\n  overflow: hidden;\n}\n\n.video-js .vjs-control-bar {\n  display: none;\n  width: 100%;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 3em;\n  background-color: #2B333F;\n  background-color: rgba(43, 51, 63, 0.7);\n}\n\n.vjs-has-started .vjs-control-bar {\n  display: flex;\n  visibility: visible;\n  opacity: 1;\n  transition: visibility 0.1s, opacity 0.1s;\n}\n\n.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar {\n  visibility: visible;\n  opacity: 0;\n  pointer-events: none;\n  transition: visibility 1s, opacity 1s;\n}\n\n.vjs-controls-disabled .vjs-control-bar,\n.vjs-using-native-controls .vjs-control-bar,\n.vjs-error .vjs-control-bar {\n  display: none !important;\n}\n\n.vjs-audio.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar {\n  opacity: 1;\n  visibility: visible;\n}\n\n.vjs-has-started.vjs-no-flex .vjs-control-bar {\n  display: table;\n}\n\n.video-js .vjs-control {\n  position: relative;\n  text-align: center;\n  margin: 0;\n  padding: 0;\n  height: 100%;\n  width: 4em;\n  flex: none;\n}\n\n.vjs-button > .vjs-icon-placeholder:before {\n  font-size: 1.8em;\n  line-height: 1.67;\n}\n\n.vjs-button > .vjs-icon-placeholder {\n  display: block;\n}\n\n.video-js .vjs-control:focus:before,\n.video-js .vjs-control:hover:before,\n.video-js .vjs-control:focus {\n  text-shadow: 0em 0em 1em white;\n}\n\n.video-js .vjs-control-text {\n  border: 0;\n  clip: rect(0 0 0 0);\n  height: 1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.vjs-no-flex .vjs-control {\n  display: table-cell;\n  vertical-align: middle;\n}\n\n.video-js .vjs-custom-control-spacer {\n  display: none;\n}\n\n.video-js .vjs-progress-control {\n  cursor: pointer;\n  flex: auto;\n  display: flex;\n  align-items: center;\n  min-width: 4em;\n  touch-action: none;\n}\n\n.video-js .vjs-progress-control.disabled {\n  cursor: default;\n}\n\n.vjs-live .vjs-progress-control {\n  display: none;\n}\n\n.vjs-liveui .vjs-progress-control {\n  display: flex;\n  align-items: center;\n}\n\n.vjs-no-flex .vjs-progress-control {\n  width: auto;\n}\n\n.video-js .vjs-progress-holder {\n  flex: auto;\n  transition: all 0.2s;\n  height: 0.3em;\n}\n\n.video-js .vjs-progress-control .vjs-progress-holder {\n  margin: 0 10px;\n}\n\n.video-js .vjs-progress-control:hover .vjs-progress-holder {\n  font-size: 1.6666666667em;\n}\n\n.video-js .vjs-progress-control:hover .vjs-progress-holder.disabled {\n  font-size: 1em;\n}\n\n.video-js .vjs-progress-holder .vjs-play-progress,\n.video-js .vjs-progress-holder .vjs-load-progress,\n.video-js .vjs-progress-holder .vjs-load-progress div {\n  position: absolute;\n  display: block;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  width: 0;\n}\n\n.video-js .vjs-play-progress {\n  background-color: #fff;\n}\n.video-js .vjs-play-progress:before {\n  font-size: 0.9em;\n  position: absolute;\n  right: -0.5em;\n  top: -0.3333333333em;\n  z-index: 1;\n}\n\n.video-js .vjs-load-progress {\n  background: rgba(115, 133, 159, 0.5);\n}\n\n.video-js .vjs-load-progress div {\n  background: rgba(115, 133, 159, 0.75);\n}\n\n.video-js .vjs-time-tooltip {\n  background-color: #fff;\n  background-color: rgba(255, 255, 255, 0.8);\n  border-radius: 0.3em;\n  color: #000;\n  float: right;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 1em;\n  padding: 6px 8px 8px 8px;\n  pointer-events: none;\n  position: absolute;\n  top: -3.4em;\n  visibility: hidden;\n  z-index: 1;\n}\n\n.video-js .vjs-progress-holder:focus .vjs-time-tooltip {\n  display: none;\n}\n\n.video-js .vjs-progress-control:hover .vjs-time-tooltip,\n.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip {\n  display: block;\n  font-size: 0.6em;\n  visibility: visible;\n}\n\n.video-js .vjs-progress-control.disabled:hover .vjs-time-tooltip {\n  font-size: 1em;\n}\n\n.video-js .vjs-progress-control .vjs-mouse-display {\n  display: none;\n  position: absolute;\n  width: 1px;\n  height: 100%;\n  background-color: #000;\n  z-index: 1;\n}\n\n.vjs-no-flex .vjs-progress-control .vjs-mouse-display {\n  z-index: 0;\n}\n\n.video-js .vjs-progress-control:hover .vjs-mouse-display {\n  display: block;\n}\n\n.video-js.vjs-user-inactive .vjs-progress-control .vjs-mouse-display {\n  visibility: hidden;\n  opacity: 0;\n  transition: visibility 1s, opacity 1s;\n}\n\n.video-js.vjs-user-inactive.vjs-no-flex .vjs-progress-control .vjs-mouse-display {\n  display: none;\n}\n\n.vjs-mouse-display .vjs-time-tooltip {\n  color: #fff;\n  background-color: #000;\n  background-color: rgba(0, 0, 0, 0.8);\n}\n\n.video-js .vjs-slider {\n  position: relative;\n  cursor: pointer;\n  padding: 0;\n  margin: 0 0.45em 0 0.45em;\n  /* iOS Safari */\n  -webkit-touch-callout: none;\n  /* Safari */\n  -webkit-user-select: none;\n  /* Konqueror HTML */\n  /* Firefox */\n  -moz-user-select: none;\n  /* Internet Explorer/Edge */\n  -ms-user-select: none;\n  /* Non-prefixed version, currently supported by Chrome and Opera */\n  user-select: none;\n  background-color: #73859f;\n  background-color: rgba(115, 133, 159, 0.5);\n}\n\n.video-js .vjs-slider.disabled {\n  cursor: default;\n}\n\n.video-js .vjs-slider:focus {\n  text-shadow: 0em 0em 1em white;\n  box-shadow: 0 0 1em #fff;\n}\n\n.video-js .vjs-mute-control {\n  cursor: pointer;\n  flex: none;\n}\n.video-js .vjs-volume-control {\n  cursor: pointer;\n  margin-right: 1em;\n  display: flex;\n}\n\n.video-js .vjs-volume-control.vjs-volume-horizontal {\n  width: 5em;\n}\n\n.video-js .vjs-volume-panel .vjs-volume-control {\n  visibility: visible;\n  opacity: 0;\n  width: 1px;\n  height: 1px;\n  margin-left: -1px;\n}\n\n.video-js .vjs-volume-panel {\n  transition: width 1s;\n}\n.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control, .video-js .vjs-volume-panel:active .vjs-volume-control, .video-js .vjs-volume-panel:focus .vjs-volume-control, .video-js .vjs-volume-panel .vjs-volume-control:active, .video-js .vjs-volume-panel.vjs-hover .vjs-mute-control ~ .vjs-volume-control, .video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active {\n  visibility: visible;\n  opacity: 1;\n  position: relative;\n  transition: visibility 0.1s, opacity 0.1s, height 0.1s, width 0.1s, left 0s, top 0s;\n}\n.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal, .video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal, .video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal, .video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal, .video-js .vjs-volume-panel.vjs-hover .vjs-mute-control ~ .vjs-volume-control.vjs-volume-horizontal, .video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal {\n  width: 5em;\n  height: 3em;\n  margin-right: 0;\n}\n.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-vertical, .video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-vertical, .video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-vertical, .video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-vertical, .video-js .vjs-volume-panel.vjs-hover .vjs-mute-control ~ .vjs-volume-control.vjs-volume-vertical, .video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-vertical {\n  left: -3.5em;\n  transition: left 0s;\n}\n.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover, .video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active, .video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active {\n  width: 10em;\n  transition: width 0.1s;\n}\n.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-mute-toggle-only {\n  width: 4em;\n}\n\n.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical {\n  height: 8em;\n  width: 3em;\n  left: -3000em;\n  transition: visibility 1s, opacity 1s, height 1s 1s, width 1s 1s, left 1s 1s, top 1s 1s;\n}\n\n.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal {\n  transition: visibility 1s, opacity 1s, height 1s 1s, width 1s, left 1s 1s, top 1s 1s;\n}\n\n.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal {\n  width: 5em;\n  height: 3em;\n  visibility: visible;\n  opacity: 1;\n  position: relative;\n  transition: none;\n}\n\n.video-js.vjs-no-flex .vjs-volume-control.vjs-volume-vertical,\n.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical {\n  position: absolute;\n  bottom: 3em;\n  left: 0.5em;\n}\n\n.video-js .vjs-volume-panel {\n  display: flex;\n}\n\n.video-js .vjs-volume-bar {\n  margin: 1.35em 0.45em;\n}\n\n.vjs-volume-bar.vjs-slider-horizontal {\n  width: 5em;\n  height: 0.3em;\n}\n\n.vjs-volume-bar.vjs-slider-vertical {\n  width: 0.3em;\n  height: 5em;\n  margin: 1.35em auto;\n}\n\n.video-js .vjs-volume-level {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  background-color: #fff;\n}\n.video-js .vjs-volume-level:before {\n  position: absolute;\n  font-size: 0.9em;\n  z-index: 1;\n}\n\n.vjs-slider-vertical .vjs-volume-level {\n  width: 0.3em;\n}\n.vjs-slider-vertical .vjs-volume-level:before {\n  top: -0.5em;\n  left: -0.3em;\n  z-index: 1;\n}\n\n.vjs-slider-horizontal .vjs-volume-level {\n  height: 0.3em;\n}\n.vjs-slider-horizontal .vjs-volume-level:before {\n  top: -0.3em;\n  right: -0.5em;\n}\n\n.video-js .vjs-volume-panel.vjs-volume-panel-vertical {\n  width: 4em;\n}\n\n.vjs-volume-bar.vjs-slider-vertical .vjs-volume-level {\n  height: 100%;\n}\n\n.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level {\n  width: 100%;\n}\n\n.video-js .vjs-volume-vertical {\n  width: 3em;\n  height: 8em;\n  bottom: 8em;\n  background-color: #2B333F;\n  background-color: rgba(43, 51, 63, 0.7);\n}\n\n.video-js .vjs-volume-horizontal .vjs-menu {\n  left: -2em;\n}\n\n.video-js .vjs-volume-tooltip {\n  background-color: #fff;\n  background-color: rgba(255, 255, 255, 0.8);\n  border-radius: 0.3em;\n  color: #000;\n  float: right;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 1em;\n  padding: 6px 8px 8px 8px;\n  pointer-events: none;\n  position: absolute;\n  top: -3.4em;\n  visibility: hidden;\n  z-index: 1;\n}\n\n.video-js .vjs-volume-control:hover .vjs-volume-tooltip,\n.video-js .vjs-volume-control:hover .vjs-progress-holder:focus .vjs-volume-tooltip {\n  display: block;\n  font-size: 1em;\n  visibility: visible;\n}\n\n.video-js .vjs-volume-vertical:hover .vjs-volume-tooltip,\n.video-js .vjs-volume-vertical:hover .vjs-progress-holder:focus .vjs-volume-tooltip {\n  left: 1em;\n  top: -12px;\n}\n\n.video-js .vjs-volume-control.disabled:hover .vjs-volume-tooltip {\n  font-size: 1em;\n}\n\n.video-js .vjs-volume-control .vjs-mouse-display {\n  display: none;\n  position: absolute;\n  width: 100%;\n  height: 1px;\n  background-color: #000;\n  z-index: 1;\n}\n\n.video-js .vjs-volume-horizontal .vjs-mouse-display {\n  width: 1px;\n  height: 100%;\n}\n\n.vjs-no-flex .vjs-volume-control .vjs-mouse-display {\n  z-index: 0;\n}\n\n.video-js .vjs-volume-control:hover .vjs-mouse-display {\n  display: block;\n}\n\n.video-js.vjs-user-inactive .vjs-volume-control .vjs-mouse-display {\n  visibility: hidden;\n  opacity: 0;\n  transition: visibility 1s, opacity 1s;\n}\n\n.video-js.vjs-user-inactive.vjs-no-flex .vjs-volume-control .vjs-mouse-display {\n  display: none;\n}\n\n.vjs-mouse-display .vjs-volume-tooltip {\n  color: #fff;\n  background-color: #000;\n  background-color: rgba(0, 0, 0, 0.8);\n}\n\n.vjs-poster {\n  display: inline-block;\n  vertical-align: middle;\n  background-repeat: no-repeat;\n  background-position: 50% 50%;\n  background-size: contain;\n  background-color: #000000;\n  cursor: pointer;\n  margin: 0;\n  padding: 0;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  height: 100%;\n}\n\n.vjs-has-started .vjs-poster {\n  display: none;\n}\n\n.vjs-audio.vjs-has-started .vjs-poster {\n  display: block;\n}\n\n.vjs-using-native-controls .vjs-poster {\n  display: none;\n}\n\n.video-js .vjs-live-control {\n  display: flex;\n  align-items: flex-start;\n  flex: auto;\n  font-size: 1em;\n  line-height: 3em;\n}\n\n.vjs-no-flex .vjs-live-control {\n  display: table-cell;\n  width: auto;\n  text-align: left;\n}\n\n.video-js:not(.vjs-live) .vjs-live-control,\n.video-js.vjs-liveui .vjs-live-control {\n  display: none;\n}\n\n.video-js .vjs-seek-to-live-control {\n  align-items: center;\n  cursor: pointer;\n  flex: none;\n  display: inline-flex;\n  height: 100%;\n  padding-left: 0.5em;\n  padding-right: 0.5em;\n  font-size: 1em;\n  line-height: 3em;\n  width: auto;\n  min-width: 4em;\n}\n\n.vjs-no-flex .vjs-seek-to-live-control {\n  display: table-cell;\n  width: auto;\n  text-align: left;\n}\n\n.video-js.vjs-live:not(.vjs-liveui) .vjs-seek-to-live-control,\n.video-js:not(.vjs-live) .vjs-seek-to-live-control {\n  display: none;\n}\n\n.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge {\n  cursor: auto;\n}\n\n.vjs-seek-to-live-control .vjs-icon-placeholder {\n  margin-right: 0.5em;\n  color: #888;\n}\n\n.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-icon-placeholder {\n  color: red;\n}\n\n.video-js .vjs-time-control {\n  flex: none;\n  font-size: 1em;\n  line-height: 3em;\n  min-width: 2em;\n  width: auto;\n  padding-left: 1em;\n  padding-right: 1em;\n}\n\n.vjs-live .vjs-time-control {\n  display: none;\n}\n\n.video-js .vjs-current-time,\n.vjs-no-flex .vjs-current-time {\n  display: none;\n}\n\n.video-js .vjs-duration,\n.vjs-no-flex .vjs-duration {\n  display: none;\n}\n\n.vjs-time-divider {\n  display: none;\n  line-height: 3em;\n}\n\n.vjs-live .vjs-time-divider {\n  display: none;\n}\n\n.video-js .vjs-play-control {\n  cursor: pointer;\n}\n\n.video-js .vjs-play-control .vjs-icon-placeholder {\n  flex: none;\n}\n\n.vjs-text-track-display {\n  position: absolute;\n  bottom: 3em;\n  left: 0;\n  right: 0;\n  top: 0;\n  pointer-events: none;\n}\n\n.video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display {\n  bottom: 1em;\n}\n\n.video-js .vjs-text-track {\n  font-size: 1.4em;\n  text-align: center;\n  margin-bottom: 0.1em;\n}\n\n.vjs-subtitles {\n  color: #fff;\n}\n\n.vjs-captions {\n  color: #fc6;\n}\n\n.vjs-tt-cue {\n  display: block;\n}\n\nvideo::-webkit-media-text-track-display {\n  transform: translateY(-3em);\n}\n\n.video-js.vjs-user-inactive.vjs-playing video::-webkit-media-text-track-display {\n  transform: translateY(-1.5em);\n}\n\n.video-js .vjs-picture-in-picture-control {\n  cursor: pointer;\n  flex: none;\n}\n.video-js .vjs-fullscreen-control {\n  cursor: pointer;\n  flex: none;\n}\n.vjs-playback-rate > .vjs-menu-button,\n.vjs-playback-rate .vjs-playback-rate-value {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.vjs-playback-rate .vjs-playback-rate-value {\n  pointer-events: none;\n  font-size: 1.5em;\n  line-height: 2;\n  text-align: center;\n}\n\n.vjs-playback-rate .vjs-menu {\n  width: 4em;\n  left: 0em;\n}\n\n.vjs-error .vjs-error-display .vjs-modal-dialog-content {\n  font-size: 1.4em;\n  text-align: center;\n}\n\n.vjs-error .vjs-error-display:before {\n  color: #fff;\n  content: "X";\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 4em;\n  left: 0;\n  line-height: 1;\n  margin-top: -0.5em;\n  position: absolute;\n  text-shadow: 0.05em 0.05em 0.1em #000;\n  text-align: center;\n  top: 50%;\n  vertical-align: middle;\n  width: 100%;\n}\n\n.vjs-loading-spinner {\n  display: none;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin: -25px 0 0 -25px;\n  opacity: 0.85;\n  text-align: left;\n  border: 6px solid rgba(43, 51, 63, 0.7);\n  box-sizing: border-box;\n  background-clip: padding-box;\n  width: 50px;\n  height: 50px;\n  border-radius: 25px;\n  visibility: hidden;\n}\n\n.vjs-seeking .vjs-loading-spinner,\n.vjs-waiting .vjs-loading-spinner {\n  display: block;\n  -webkit-animation: vjs-spinner-show 0s linear 0.3s forwards;\n          animation: vjs-spinner-show 0s linear 0.3s forwards;\n}\n\n.vjs-loading-spinner:before,\n.vjs-loading-spinner:after {\n  content: "";\n  position: absolute;\n  margin: -6px;\n  box-sizing: inherit;\n  width: inherit;\n  height: inherit;\n  border-radius: inherit;\n  opacity: 1;\n  border: inherit;\n  border-color: transparent;\n  border-top-color: white;\n}\n\n.vjs-seeking .vjs-loading-spinner:before,\n.vjs-seeking .vjs-loading-spinner:after,\n.vjs-waiting .vjs-loading-spinner:before,\n.vjs-waiting .vjs-loading-spinner:after {\n  -webkit-animation: vjs-spinner-spin 1.1s cubic-bezier(0.6, 0.2, 0, 0.8) infinite, vjs-spinner-fade 1.1s linear infinite;\n  animation: vjs-spinner-spin 1.1s cubic-bezier(0.6, 0.2, 0, 0.8) infinite, vjs-spinner-fade 1.1s linear infinite;\n}\n\n.vjs-seeking .vjs-loading-spinner:before,\n.vjs-waiting .vjs-loading-spinner:before {\n  border-top-color: white;\n}\n\n.vjs-seeking .vjs-loading-spinner:after,\n.vjs-waiting .vjs-loading-spinner:after {\n  border-top-color: white;\n  -webkit-animation-delay: 0.44s;\n  animation-delay: 0.44s;\n}\n\n@keyframes vjs-spinner-show {\n  to {\n    visibility: visible;\n  }\n}\n@-webkit-keyframes vjs-spinner-show {\n  to {\n    visibility: visible;\n  }\n}\n@keyframes vjs-spinner-spin {\n  100% {\n    transform: rotate(360deg);\n  }\n}\n@-webkit-keyframes vjs-spinner-spin {\n  100% {\n    -webkit-transform: rotate(360deg);\n  }\n}\n@keyframes vjs-spinner-fade {\n  0% {\n    border-top-color: #73859f;\n  }\n  20% {\n    border-top-color: #73859f;\n  }\n  35% {\n    border-top-color: white;\n  }\n  60% {\n    border-top-color: #73859f;\n  }\n  100% {\n    border-top-color: #73859f;\n  }\n}\n@-webkit-keyframes vjs-spinner-fade {\n  0% {\n    border-top-color: #73859f;\n  }\n  20% {\n    border-top-color: #73859f;\n  }\n  35% {\n    border-top-color: white;\n  }\n  60% {\n    border-top-color: #73859f;\n  }\n  100% {\n    border-top-color: #73859f;\n  }\n}\n.vjs-chapters-button .vjs-menu ul {\n  width: 24em;\n}\n\n.video-js .vjs-subs-caps-button + .vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder {\n  vertical-align: middle;\n  display: inline-block;\n  margin-bottom: -0.1em;\n}\n\n.video-js .vjs-subs-caps-button + .vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before {\n  font-family: VideoJS;\n  content: "";\n  font-size: 1.5em;\n  line-height: inherit;\n}\n\n.video-js .vjs-audio-button + .vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder {\n  vertical-align: middle;\n  display: inline-block;\n  margin-bottom: -0.1em;\n}\n\n.video-js .vjs-audio-button + .vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before {\n  font-family: VideoJS;\n  content: " ";\n  font-size: 1.5em;\n  line-height: inherit;\n}\n\n.video-js.vjs-layout-small .vjs-current-time,\n.video-js.vjs-layout-small .vjs-time-divider,\n.video-js.vjs-layout-small .vjs-duration,\n.video-js.vjs-layout-small .vjs-remaining-time,\n.video-js.vjs-layout-small .vjs-playback-rate,\n.video-js.vjs-layout-small .vjs-volume-control, .video-js.vjs-layout-x-small .vjs-current-time,\n.video-js.vjs-layout-x-small .vjs-time-divider,\n.video-js.vjs-layout-x-small .vjs-duration,\n.video-js.vjs-layout-x-small .vjs-remaining-time,\n.video-js.vjs-layout-x-small .vjs-playback-rate,\n.video-js.vjs-layout-x-small .vjs-volume-control, .video-js.vjs-layout-tiny .vjs-current-time,\n.video-js.vjs-layout-tiny .vjs-time-divider,\n.video-js.vjs-layout-tiny .vjs-duration,\n.video-js.vjs-layout-tiny .vjs-remaining-time,\n.video-js.vjs-layout-tiny .vjs-playback-rate,\n.video-js.vjs-layout-tiny .vjs-volume-control {\n  display: none;\n}\n.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover, .video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:active, .video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active, .video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover, .video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover, .video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:active, .video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active, .video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover, .video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:hover, .video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:active, .video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active, .video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover {\n  width: auto;\n  width: initial;\n}\n.video-js.vjs-layout-x-small .vjs-progress-control, .video-js.vjs-layout-tiny .vjs-progress-control {\n  display: none;\n}\n.video-js.vjs-layout-x-small .vjs-custom-control-spacer {\n  flex: auto;\n  display: block;\n}\n.video-js.vjs-layout-x-small.vjs-no-flex .vjs-custom-control-spacer {\n  width: auto;\n}\n\n.vjs-modal-dialog.vjs-text-track-settings {\n  background-color: #2B333F;\n  background-color: rgba(43, 51, 63, 0.75);\n  color: #fff;\n  height: 70%;\n}\n\n.vjs-text-track-settings .vjs-modal-dialog-content {\n  display: table;\n}\n\n.vjs-text-track-settings .vjs-track-settings-colors,\n.vjs-text-track-settings .vjs-track-settings-font,\n.vjs-text-track-settings .vjs-track-settings-controls {\n  display: table-cell;\n}\n\n.vjs-text-track-settings .vjs-track-settings-controls {\n  text-align: right;\n  vertical-align: bottom;\n}\n\n@supports (display: grid) {\n  .vjs-text-track-settings .vjs-modal-dialog-content {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-template-rows: 1fr;\n    padding: 20px 24px 0px 24px;\n  }\n\n  .vjs-track-settings-controls .vjs-default-button {\n    margin-bottom: 20px;\n  }\n\n  .vjs-text-track-settings .vjs-track-settings-controls {\n    grid-column: 1/-1;\n  }\n\n  .vjs-layout-small .vjs-text-track-settings .vjs-modal-dialog-content,\n.vjs-layout-x-small .vjs-text-track-settings .vjs-modal-dialog-content,\n.vjs-layout-tiny .vjs-text-track-settings .vjs-modal-dialog-content {\n    grid-template-columns: 1fr;\n  }\n}\n.vjs-track-setting > select {\n  margin-right: 1em;\n  margin-bottom: 0.5em;\n}\n\n.vjs-text-track-settings fieldset {\n  margin: 5px;\n  padding: 3px;\n  border: none;\n}\n\n.vjs-text-track-settings fieldset span {\n  display: inline-block;\n}\n\n.vjs-text-track-settings fieldset span > select {\n  max-width: 7.3em;\n}\n\n.vjs-text-track-settings legend {\n  color: #fff;\n  margin: 0 0 5px 0;\n}\n\n.vjs-text-track-settings .vjs-label {\n  position: absolute;\n  clip: rect(1px 1px 1px 1px);\n  clip: rect(1px, 1px, 1px, 1px);\n  display: block;\n  margin: 0 0 5px 0;\n  padding: 0;\n  border: 0;\n  height: 1px;\n  width: 1px;\n  overflow: hidden;\n}\n\n.vjs-track-settings-controls button:focus,\n.vjs-track-settings-controls button:active {\n  outline-style: solid;\n  outline-width: medium;\n  background-image: linear-gradient(0deg, #fff 88%, #73859f 100%);\n}\n\n.vjs-track-settings-controls button:hover {\n  color: rgba(43, 51, 63, 0.75);\n}\n\n.vjs-track-settings-controls button {\n  background-color: #fff;\n  background-image: linear-gradient(-180deg, #fff 88%, #73859f 100%);\n  color: #2B333F;\n  cursor: pointer;\n  border-radius: 2px;\n}\n\n.vjs-track-settings-controls .vjs-default-button {\n  margin-right: 1em;\n}\n\n@media print {\n  .video-js > *:not(.vjs-tech):not(.vjs-poster) {\n    visibility: hidden;\n  }\n}\n.vjs-resize-manager {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  border: none;\n  z-index: -1000;\n}\n\n.js-focus-visible .video-js *:focus:not(.focus-visible) {\n  outline: none;\n}\n\n.video-js *:focus:not(:focus-visible) {\n  outline: none;\n}\n');let dp=class extends Q{constructor(){super(...arguments),this.videoRef=new lt,this.source="",this.width="",this.height="",this.controls=!1,this.dataSetup="{}"}render(){const t=!this.width.length&&!this.height.length&&this.dataSetup.length<3,n={width:t?"100%":"",height:t?"100%":""};return N`
      <video
        ${dt(this.videoRef)}
        style=${pt(n)}
        class="video-js vjs-default-skin"
        id="ix-video-player"
        part="video"
      ></video>
    `}firstUpdated(){var t;const n=null===(t=this.videoRef)||void 0===t?void 0:t.value,i=((t,n)=>{const{source:i}=n;return Object.keys(n).forEach((i=>{if(n[i].toString().length){if("source"===i)return;t[i]=n[i]}})),n.source.length&&(t.sources=[{src:i,type:"application/x-mpegURL"}]),t})((t=>{let n={};if("object"==typeof t)return t;try{n=JSON.parse(t)}catch(t){console.error("ix-video: invalid video.js dataSetup options json string"),console.error("ix-video: "+t)}return n})(this.dataSetup),{source:this.source,controls:this.controls,width:this.width,height:this.height});console.info("ix-video: options",i),sl(n,i,(()=>{sl.log("ix-video player ready")}))}createRenderRoot(){return this}};t([Z({type:String})],dp.prototype,"source",void 0),t([Z({type:String})],dp.prototype,"width",void 0),t([Z({type:String})],dp.prototype,"height",void 0),t([Z({type:Boolean,attribute:"controls"})],dp.prototype,"controls",void 0),t([Z({type:String})],dp.prototype,"dataSetup",void 0),dp=t([(t=>n=>"function"==typeof n?((t,n)=>(window.customElements.define(t,n),n))(t,n):((t,n)=>{const{kind:i,elements:e}=n;return{kind:i,elements:e,finisher(n){window.customElements.define(t,n)}}})(t,n))("ix-video")],dp);export{dp as IxVideo};
